{
	"auto_complete":
	{
		"selected_items":
		[
		]
	},
	"buffers":
	[
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/edit-settings.ctp",
			"settings":
			{
				"buffer_size": 9043,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/styl/user-planning.styl",
			"settings":
			{
				"buffer_size": 398892,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/models/event_contact.php",
			"settings":
			{
				"buffer_size": 46638,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/events/rsvps.ctp",
			"settings":
			{
				"buffer_size": 26161,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/account_controller.php",
			"settings":
			{
				"buffer_size": 172915,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/dashboard.js",
			"settings":
			{
				"buffer_size": 127106,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/addressbook/nu-global-nav.css",
			"settings":
			{
				"buffer_size": 10953,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/styl/payout-settings.styl",
			"settings":
			{
				"buffer_size": 11963,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/address_book/columns.ctp",
			"settings":
			{
				"buffer_size": 115768,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/addressbook/addressbook.therefore.js",
			"settings":
			{
				"buffer_size": 260180,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/email/html/invite_reminder.ctp",
			"settings":
			{
				"buffer_size": 3162,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/settings/event-settings.ctp",
			"settings":
			{
				"buffer_size": 10076,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/events/edit_settings.ctp",
			"settings":
			{
				"buffer_size": 69,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/models/event.php",
			"settings":
			{
				"buffer_size": 147580,
				"line_ending": "Unix"
			}
		},
		{
			"contents": "var keyboardShortCutMode = '',\n	imageUploadText = {\n		header: 'Image should be no larger than 2000 pixels wide and high.<br />We recommend uploading jpgs to keep page loads quick.'\n	}\n\nvar layoutOptions = {\n	modes: ['s1','s1 alt','s2','s2 alt','s3','s3 alt','s4','s4 alt','s5','s5 alt'],\n	shapes: ['circle', 'square', 'layout', 'portrait', 'no-shape', 'landscape', 'nu-logo-landscape', 'nu-circle', 'nu-logo-square', 'nu-portrait', 'nu-square', 'none', 'nu-logo-square', 'nu-logo-landscape']\n}\n\n$(document).ready(function(){\n	$('#upload-livefeed-bg-trigger').on('click', function() {\n		var $input = $('#upload-livefeed-bg-input');\n		pickAndOrCropNewImage($input, {\n			done: function(newSrc,dims){\n				$input.val(newSrc).addClass('changes-made');\n				setChangesMade();\n				SplashUI.notify('Uploaded successfully', 'success');\n			}\n		});\n	});\n\n	if( $('body').hasClass('noPayoutData') ){\n		$('.firstViewInfo').on('click', '.closeSimpleModal', function(){\n			$('.pop-wrap1').remove();\n			$('body').removeClass('noPayoutData')\n		})\n	}\n\n	//formatEventPhotoBytes();\n	setWindowHeight($(\"#nestedLayoutContainer\"));\n	setWindowHeight($(\"#allSectionsContainInner\"));\n	linkingModal.getHeight();\n	//allow only numbers in input [type=number]\n\n	window.onbeforeunload = function (evt) {\n		if ( ( changes_made && !domain_changes) || unsavedSettings ){\n			//promptUserToSave();\n			var message = \"Unsaved changes will be lost.\\nYou should save your event before leaving!\";\n			if (typeof evt == undefined) {\n				evt = window.event;\n			}\n			if (evt) {\n				evt.returnValue = message;\n			}\n			return message;\n		} else if(email_changes_made){\n			var message = \"You have unsaved changes to your email.  You should save your changes before leaving!\";\n			if (typeof evt == undefined) {\n				evt = window.event;\n			}\n			if (evt) {\n				evt.returnValue = message;\n			}\n			return message;\n		}\n	}\n\n	//window.location.hash = '!';\n\n	$(\"html\").keyup(function(e){\n		if(e.which == 13 || e.which == 27){ //enter/escape key calls.\n			if(openColorPicker){\n				//$(\"div.colorpicker\").hide();\n				$(\"div.sp-container:visible:first\").find(\".sp-choose\").click();//hide any visible spectrums.\n				openColorPicker = false;\n			}\n			if(e.which==27){ //escape.\n				if(openRTE){\n					hideRTE();\n				}\n				var $simpleModalWrap = $(\"#simple-modal-wrap\");\n				if($simpleModalWrap.is(\":visible\")){\n					if(!$simpleModalWrap.hasClass('persistent')){\n						closeSimpleModal();\n					}\n				} else if(finetuneOpen){\n					backToFineTune();\n				}\n\n				if(typeof openEntryModal!=='undefined' && openEntryModal){ //close open entry modal in gallery tab.\n 					$(\"#entryModal\").find(\".closeEntryModal\").click();\n				}\n			}\n			else if(e.which==13){\n				if($(\"#header-image-preview\").is(\":visible\") && $(\"#splash-based-image\").val()==1){\n					$(\"#saveChangesButton\").click();\n				} else if($(\"#delete-modal\").is(\":visible\")){//homebrew delete modal.\n					$(\"#delete-modal\").find(\".deleteBtn\").click();\n				}\n			}\n		}\n	}).click(function(e){\n		if($simpleModalWrap.is(\":visible\")){\n			var $target = $(e.target);\n			if(!openDatePicker && ($target.parents(\".simple-modal\").length<1 && !$target.hasClass('simple-modal')) && !$(\"#simple-modal-wrap\").hasClass('persistent')){\n				if($target.hasClass('pac-container') || $target.parents(\"div.pac-container\").length > 0){//checking for google autocomplete. w/o this, clicking autocomplete closes simple modal.\n					closeSimpleModal();\n				}\n			}\n		}\n	});\n\n	//top level control to add changes-made to inputs as they are changed.\n	$(\"#finetune-all-tools,#edit-settings\").on('change','input,textarea,select',function(){\n		var $this = $(this);\n		if(($this.prop(\"name\")+'').match(/^data/)){\n			$this.addClass('changes-made');\n		}\n	});\n\n	$('#nuTool #rsvpTixTab').on('click',function(){\n		$(this).removeClass('fvFlash');\n		$('body').removeClass('noTickets');\n		$('body').removeClass('noPayoutData');\n	});\n\n	// ----------------------\n	/* This function loads the metadata key value pairs in the settings modal */\n	function jsonMetadata() {\n		var metadata_json = {};\n		$.each( $('#eventMetadata .metadata-row'), function() {\n			if ( $(this).find('.metadata-key').length > 0 && $(this).find('.metadata-val').length > 0 ) {\n				metadata_json[ $(this).find('.metadata-key').val() ] = $(this).find('.metadata-val').val();\n			}\n		});\n		return metadata_json;\n	}\n	/* actions for the metadata add/delete buttons and populating the hidden input after editing any key or value */\n	$(\"#edit-settings\").on('focusout', '.metadata-key, .metadata-val', function() {\n		$('.metadata-json').val( JSON.stringify(jsonMetadata()) ).change();\n	});\n	$(\"#edit-settings\").on('click', '.metadata-delete', function() {\n		$(this).closest('.metadata-row').remove();\n		$('.metadata-json').val( JSON.stringify(jsonMetadata()) ).change();\n	});\n	$(\"#edit-settings\").on('click', '.metadata-add', function() {\n		$(this).before(\n			$('#eventMetadata .metadata-template').clone().removeClass('metadata-template hide').addClass('metadata-row')\n		);\n	});\n	// ---------------------\n\n	////////////////////////////////////////////////////////////////////////////////\n	///////////////////////////// DATE CONTROLS START //////////////////////////////\n	$(\"#addEventEndDate\").click(function(e){\n		e.preventDefault();\n		$(this).hide();\n		$(\"#end-date-contain\").show();\n		$(\"#hide_end_date\").val(0).addClass('changes-made').trigger('change');\n		$(\"input.cal,select.cal\").addClass('changes-made');//changes date/time song is this hitting?\n		updateSplashField('date',null,$(\"#element-when\"));\n	});\n\n	$(\"#deleteEventEndDate\").click(function(e){\n		e.preventDefault();\n		$(\"#end-date-contain\").hide();\n		$(\"#hide_end_date\").val(1).addClass('changes-made').trigger('change');\n		$(\"#addEventEndDate\").show();\n		updateSplashField('date',null,$(\"#element-when\"));\n	});\n\n	$(\"#event_date\").datepicker({\n		dateFormat: 'mm/dd/y',\n		beforeShow: function(){\n			openDatePicker = true;\n		},\n	 	onSelect: function(dateText, inst) {\n	 		//when you change the event start date, also change the end date.\n	 		//we want to filter both the date and the range of the end date, making all days earlier\n	 		//than the event start unselectable.\n	 		$(\"#event_date_end\").datepicker('option','minDate', dateText).val(dateText);\n			if($(\"#date-tbd\").val()=='1'){\n				$(\"#date-tbd\").val(0).addClass('changes-made');\n			}\n			_event.date.start = dateText + _event.date.start.match(/[0-9]{2}:[0-9]{2}:[0-9]{2}/);\n			CountdownElement.updateAll();\n			$(this).trigger('change');\n		},\n		onClose:function(){\n			setTimeout(function(){\n				openDatePicker = false;\n			},500);\n		}\n	});\n	$(\"#event_date_end\").datepicker({\n		dateFormat:'mm/dd/y',\n		minDate: $(\"#event_date\").val(),\n		beforeShow: function(){\n			openDatePicker = true;\n		},\n		onSelect: function(dateText, inst){\n			if($(\"#date-tbd\").val()=='1'){\n				$(\"#date-tbd\").val(0).addClass('changes-made');\n			}\n			_event.date.end = dateText + _event.date.end.match(/[0-9]{2}:[0-9]{2}:[0-9]{2}/);\n			$(this).trigger('change');\n		},\n		onClose:function(){\n			setTimeout(function(){\n				openDatePicker = false;\n			},500);\n		}\n\n	});\n	//event start and end time controls\n	$(\"#event-start-timepicker\").timepicker({\n		appendTo: '.tpStart'\n	});\n	$(\"#event-end-timepicker\").timepicker({\n		appendTo: '.tpEnd'\n	});\n	$(\"#event-start-timepicker,#event-end-timepicker\").on({//event actions for timepicker\n		show: function(){\n			openDatePicker = true;\n		},\n		changeTime: function(){\n			val = $(this).val();\n			$(this).parents(\".timePicker\").find(\".timeHolder\").text(val).show().end()\n				   .find(\"input.time-select\").hide();\n			if ( $(this).attr('id') == \"event-start-timepicker\" ) {\n				_event.date.start = _event.date.start.match(/[0-9]{2}\\/[0-9]{2}\\/[0-9]{4}/)+\" \"+ am_pm_to_hours(val);\n			} else {\n				_event.date.end = _event.date.end.match(/[0-9]{2}\\/[0-9]{2}\\/[0-9]{4}/)+\" \"+ am_pm_to_hours(val);\n			}\n			CountdownElement.updateAll();\n		},\n		hideTimepicker: function(){\n			val = $(this).val();\n			$(this).parents(\".timePicker\").find(\".timeHolder\").text(val).show().end()\n			   .find(\"input.time-select\").hide();\n			openDatePicker = false;\n		}\n	});\n\n	$(\"#event-start-time,#event-end-time\").on('click',function(){\n		$(this).hide().parents(\".timePicker\").find(\"input.time-select\").show().focus().timepicker('show');\n	});\n\n	$(\"input.cal,input.time-select,#time-tbd,#date-tbd,#hide-time-checkbox,#timezone-selector\").change(function(){\n		updateSplashField('date',null,$(\"#element-when\"));\n		$(\"input.cal,input.time-select,#time-tbd,#date-tbd,#hide_end_date,#hide-time-checkbox,#timezone-selector\").addClass('changes-made');\n		\n		// display message in planning tools to let user know date will update after refresh\n		$('#date-change-message').addClass('date-changed');\n	});\n\n	$(\"#timezone-link\").click(function(){\n		$(this).hide();\n		$(\"#timezone-selector\").show().addClass('manually-changed').focus();\n	});\n	$(\"#timezone-selector\").focusout(function(){\n		$(this).hide();\n		var thisText = $(this).find(\":selected\").text()\n		$('.timeZoneText').text(thisText)\n		$('#timezone-link').show();\n	}).change(function(){\n		$(this).hide();\n		var thisText = $(this).find(\":selected\").text()\n		$('.timeZoneText').text(thisText)\n		$('#timezone-link').show();\n		trackIndicativeEvent('timezoneChanged');\n	});\n\n	$(\"#hide-time-checkbox\").change(function(){\n		if($(this).val()=='1'){\n			$body.addClass('hide-time');\n		} else{\n			$body.removeClass('hide-time');\n\n		}\n	});\n	///////////////////// DATE CONTROLS END ////////////////////////////\n	///////////////////// VENUE CONTROLS START ////////////////////////////\n	$(\"#venue-name,#venue-address,#venue-city,#venue-state,#venue-zip\").on('keyup change',function(e){\n		var $t = $(this);\n		clearTimeout(searchKeyUpTimer);\n		if($t.attr(\"set-val\")!=$.trim($(this).val())){\n			searchKeyUpTimer = setTimeout(function(){\n				updateVenueText();\n				$t.attr(\"set-val\",$t.val());//.addClass('changes-made');\n			},300);\n		}\n	});\n	///////////////////// VENUE CONTROLS END ////////////////////////////\n	/////////////////////////////////////////////////////////////////////\n\n	//changing header on page,body changing on page\n	$(\"#splash-container,#finetune-all-tools\").on('click','#changeHeaderInline,#changeBgInline,#changeHeaderFinetune,#changeBgFinetune',function(){\n		var id = (this.id == 'changeHeaderInline' || this.id == 'changeHeaderFinetune')?'header':'body';\n		var $group = getTargetById(id);\n		populateAdvancedImgControls($group);\n		pickAndOrCropNewImage($('#'+id+'-image-source'),{\n			done: function(newSrc,dims){\n				if( id=='body' && isLegacyEvent() ){//SPECIAL LEGACY EVENT CHECK.\n					$(\"#body-image-source\").val(newSrc).trigger('change');//update base header here.\n					$(\"#body-bg-type\").val('image').trigger('change');\n					$(\"#splash-container\").css('background-image','url(\"'+newSrc+'\")');\n					setChangesMade();\n				} else {\n					if($group.length > 0){\n						updateGroupImage($group,{ 'src': newSrc, 'dims': dims });\n					}\n				}\n\n				trackIndicativeEvent('change'+id+'Image');\n			},\n			helperText: imageUploadText.header,\n			group_id: $group.prop('id')\n		});\n\n		if(id=='header'){\n			editHeadBG( $group, 'head' );\n		} else {\n			editHeadBG( $group, 'bg' );\n		}\n	});\n\n	//advanced controls - for header and body. keyword:background-size, background-position, background-repeat, background-attachment..\n	$(\"#advancedImgUtils\").on('change','input.style-ctrl',function(){\n		if(isLegacyEvent() && $(\"#cropAnyPhoto\").hasClass('editBG') ){//a special check for legacy events only.\n			$(\"#splash-container\").css($(this).data('css-prop'), $(this).val() );\n			finetuneEditedFields['data[EventSetting][theme_styles][body][styles]['+$(this).data('css-prop')+']'] = $(this).val();\n			finetuneFieldChangesMade();\n		} else {\n			var group_id = $(\"#cropAnyPhoto\").data(\"group-id\");\n			var $liveGroup = ftGetLayoutGrp(group_id);\n			var grp = ftGetGrp($liveGroup);\n			if(!grp['styles']){ grp['styles']={}; }\n			grp['styles'][$(this).data('css-prop')] = $(this).val();//where data-css-prop could be 'background-repeat', 'background-position', etc.\n			updateBackgroundSettings($liveGroup,'image',null,grp);\n		}\n		return false;\n	});\n\n	//closing the bottom sections (form, responses, email, planning)\n	$(\"#planning-tools-header,#closePlanningTools\").click(function(e){\n		// Prevents from closing when clicking pro addon link\n		var clicked_id = e.target.id;\n 		var exempt_click_ids = ['pro-addon-link', 'pro-addon-button', 'header-date-info', 'planning-tools-display-date', 'planning-tools-display-time', 'calendarInviteDate'];\n\n 		if(exempt_click_ids.indexOf(clicked_id) === -1) {\n			closePlanningTools();\n		} else {\n			console.log('dont close');\n		}\n	});\n\n	$(\"#elementsHeader\").on('click', function(){ //acts as a back button in sidebar.\n		closeCustomSection();\n	})\n\n	//jumping into accordion section!!\n	$('#finetune-sections').on('click',\".ft-grp span.title\",function(e){\n		if($openingAcc){\n			return false; //only do it if it's already open.\n		}\n		var $ftgrp = $(this).parents('.ft-grp:first');\n		if(inAdvancedMode()){\n			videoOptions.checkType($(this));\n			if( $ftgrp.hasClass('open') ){\n				// DO NOTHING, NO LONGER BTN WHEN OPEN\n			} else {\n				$(\"#nestedLayoutContainer\").data('currentScroll',$(\"#nestedLayoutContainer\").scrollTop());\n				openCustomSection($ftgrp);\n			}\n		}\n		if($('body').hasClass('designerMode')){\n			var $ftgGrp = $(this).parent('.ft-grp:first');\n			openCustomSection($ftgGrp);\n			$('#allSectionsContain').addClass('hide');\n			changeLayout.ftContain.find('.ft-grp').removeClass('hide');\n			$(\"#admin-group-clusters\").append(changeLayout.ftContain);\n			$('#nestedLayoutContainer').removeClass('hide');\n			$(\"#nestedLayoutContainer\").css({ \"height\":\"\", \"max-height\":\"\"});\n		}\n		//if in basic mode, just scroll to the section.\n		var $layoutGrp = ftGetLayoutGrp($ftgrp);\n		scrollToBlock($layoutGrp,-20,null,true);\n\n	});\n	var hasResized = false;\n	var scrollTime;\n	var windowScrollingStylingChecks = debounce(function(){\n\n		//if( $body.hasClass('isScrolling') === false ){\n		$body.addClass('isScrolling')\n		//}\n\n		if($body.hasClass('toolsOpen')){\n			var s = $(window).scrollTop();\n			if(s >= '23'){// when scrolled 23px addClass pt-has-scrolled\n				$body.addClass('pt-has-scrolled');\n				if(s >= '165'){ // when 165px from top of window addClass prep-minify\n					$body.addClass('prep-minify');\n					if(s >= constants.scrollMin){ // when 210px from top of window addClass minify\n						$body.addClass('minify');\n					} else { // then reverse\n						$body.removeClass('minify');\n					}\n				} else {\n					$body.removeClass('minify prep-minify');\n				}\n			} else {\n				$body.removeClass('prep-minify minify pt-has-scrolled');\n			}\n		}\n		clearTimeout(scrollTime);\n		scrollTime = setTimeout(function(){\n			$body.removeClass('isScrolling')\n			addElementScroll();\n		}, 10)\n\n	}, 50);\n\n	//all resizing actions.  all window.resize actions should be held here.\n	$(window).resize(function(){\n		linkingModal.getHeight();\n\n		if( $('body').hasClass('finetuneOpen') ){\n			setVisibleAccordionHeight();\n		}\n\n\n		setWindowHeight($(\"#nestedLayoutContainer\"));\n		setWindowHeight($(\"#allSectionsContainInner\"));\n		if($(\"#finetune-layout-contain .section.ft-grp\").hasClass('open')){\n			$(\"#nestedLayoutContainer\").css({ \"height\":\"100%\", \"max-height\": \"100%\" });\n		}\n\n		resizeJuicy()\n		resizeColorWheel()\n\n		if( $body.hasClass('showTutorial') ){\n			$fvOverlay = $('#firstViewOverlay')\n			if( $fvOverlay.hasClass('showDesign') ){\n				positionTut('top')\n			} else if( $fvOverlay.hasClass('showPlanning')) {\n				positionTut('bottom')\n			}\n		}\n\n		setScrollWidth();\n		updateBlockWrapHeight();\n		setInnerTabHeight()\n\n	}).scroll(windowScrollingStylingChecks); //end window scroll function.\n\n\n	//LEGAL LANGUAGE TOGGLING\n	$(\"#finetune-hide_legal-language\").change(function(){\n		var $legal = $(\"#rsvp-legal-expl\");\n		if($(this).val()=='1'){\n			if($legal.html().trim()==''){\n				$legal.html('Add special instructions here').trigger('change');\n			}\n			$legal.parents(\".layoutGrp:first\").show();\n			scrollToBlock($(\"#element-legal-language\"));\n		} else{\n			$legal.html('').trigger('change');\n			$legal.parents(\".layoutGrp:first\").hide();\n		}\n	});\n\n	$(\"#finetune-hide_rsvp\").change(function(){\n		//toggling rsvp button.\n		var $p = $(\"#element-rsvp\").parents(\".layoutGrp:first\");\n		if($(this).val()=='1'){\n			$p.hide();\n			$('#buttonTabWrap').addClass('is-hidden')\n		} else {\n			$p.show();\n			scrollToBlock($p,-20);\n			$('#buttonTabWrap').removeClass('is-hidden')\n		}\n\n		$(\"#element-rsvp\").removeClass('rsvpHover')\n\n		setChangesMade();\n	});\n\n	//display guest list on page.\n	$(\"#rsvp_guest_display\").change(function(){\n		if($(this).val()=='1'){\n			$(\"#element-attendees\").show().parents('.layoutGrp:first').show();\n			$(\"#view-attendees\").show();\n		} else{\n			$(\"#element-attendees\").hide().parents('.layoutGrp:first').hide();\n			$(\"#view-attendees\").hide();\n		}\n		setChangesMade();\n	});\n\n	//clicking BACK in any given section.  Advanced layout controls, color linking, etc.\n	$('#finetune-back-btn').on('click', function(){\n		var $b = $('body');\n		var $ft = $(\"#finetune-all-tools\");\n\n		resizeColorWheel()\n\n		$('#nestedLayoutContainer').removeClass('isBasicEle')\n\n		if( $b.hasClass('advMode') == false && $b.hasClass('editSwatchColor') ){\n			// EDIITING COLOR IN BASIC MODE\n			$b.removeClass('editSwatchColor')\n			doneWithColorTabInner()\n		} else if ( $b.hasClass('editColors') ) {\n			// if in manage color state\n			if( ! $b.hasClass('editSwatchColor') && ! $b.hasClass('editLinks') ){\n				$b.removeClass('editColors')\n			}\n			doneWithColorTabInner()\n		} else if ( $b.hasClass('editFonts') ){\n			$b.removeClass('editFonts')\n		}\n		else if($b.hasClass('advMode') && $b.hasClass('finetuneOpen')){\n			closeCustomSection();\n		}\n 		else if($b.hasClass('designerMode')) {\n			$('#allSectionsContain').removeClass('hide');\n			$('#nestedLayoutContainer').addClass('hide');\n			closeCustomSection();\n			changeLayout.designer();\n			setTimeout(function(){\n				setWindowHeight($(\"#allSectionsContainInner\"));\n			},1000);\n		}\n	})\n\n	$(\"#saveChangesBtn, #save-details-design\").click(function(){	//SAVE CHANGES BUTTON\n		if($(this).hasClass('in-progress')){\n			return false;\n		}\n\n		trackIndicativeEvent('manualSave');\n\n		//adding changes made to this one input to ensure that the saving submits.\n		$(\"#autosave-checkbox\").addClass('changes-made');\n		clearTimeout(savingTimer);\n		savingTimer = setTimeout(autoSaveData, 0);\n		return false;\n	});\n\n	// Vanity URL setup\n	$('#vanity-url-setup-instruction-link').click(function(){\n		trackIndicativeEvent('vanityUrlInstructions');\n		$(\"#vanity-url-sell-instructions\").fireSimpleModal();\n		return false;\n	});\n\n	$('#vanity-url-open').click(function(){\n		trackIndicativeEvent('vanityUrlOpen');\n		$(\"#vanity-url-sell\").fireSimpleModal();\n		setTimeout(function(){\n			$(\"#vanity-url-sell-input\").focus();\n		},100);\n		return false;\n	});\n\n	$(\"#vanity-url-open-input\").change(function(){\n		$(this).addClass('changes-made');\n		setChangesMade();\n	});\n\n	$(\"#vanity-url-sell-input\").keyup(function(e){\n		if ( e.which == 13 ){\n			$('#vanity-url-continue').click();\n		} else{\n			var $h5 = $(\"#vanity-url-sell\").find(\"h5:first\");\n			if($h5.hasClass('error') && $(this).val().match(/^[-_\\.a-z0-9]+\\.[a-z]+$/i) ){\n				$h5.removeClass('error').addClass('good').text('That\\'s more like it!');\n			}\n		}\n	});\n\n	$(\"#vanity-url-continue\").click(function(){\n		// populate the form with the required values\n		var $form = $('#vanity-url-sell-form');\n		var custom_domain = $('#vanity-url-sell-input').val();\n		if ( custom_domain.match(/^[-_\\.a-z0-9]+\\.[a-z]+$/i) ){\n\n			$form.find('input.title').val($('#finetune-title').val());\n			$form.find('input.domain').val($('#saved-event-domain').text());\n			$form.find('input.custom_domain').val(custom_domain);\n			$form.find('input.plan_code').val('vanity-url');\n			$form[0].submit();\n\n		}else {\n			$(\"#vanity-url-sell\").find(\"h5:first\").removeClass('good').addClass('error').text('Please enter a valid domain');\n			$(\"#vanity-url-sell-input\").focus();\n			return false;\n			//alert('Please enter a valid domain!');\n\n		}\n	});\n	// End Vanity URL setup\n\n	// White Label Open\n	$(\"#white-label-open,#white-label-continue\").click(function(){\n		var $form = $('#white-label-form');\n		$form.find('input.title').val($('#finetune-title').val());\n		$form.find('input.domain').val($('#saved-event-domain').text());\n		$form.find('input.plan_code').val('white-label');\n		$form[0].submit();\n		return false;\n	});\n	// End White Label Open\n\n	//event domain manually changing\n	$(\"#edit-settings\").on({\n		keyup: function(){\n			clearTimeout(typingTimer);\n			typingTimer = setTimeout(doneTypingDomain, doneTypingInterval);\n		},\n		change:function(){\n			domain_changes = true;\n		}\n	},\"#event-domain\");\n\n	$(\"#rsvp_method_input\").change(function(){\n		page_action_changes = true;\n	});\n\n	gallerySortInit();\n	adminGallerySorting = true;\n\n	$(\"#autosave-checkbox\").change(function(){\n		setChangesMade();\n	});\n\n\n	$('#submit-text-picker').change(function(){\n\n		if( $('#submit-text-picker').val().trim() !== '' ){\n			$('#rsvp-submit, #purchase-button').val( $('#submit-text-picker').val().trim() )\n		} else {\n			$('#submit-text-picker').val('Submit')\n			$('#rsvp-submit, #purchase-button').val('Submit')\n		}\n\n		setChangesMade();\n\n	})\n\n	$(\"#purchase-button\").click(function(){\n		if( $(\"#no-payout\").length > 0 ){\n			var msg = 'You cannot purchase a ticket until your payout settings are complete.  Fill out your payout settings below.';\n			SplashUI.ask(function( response ) {\n				constants.jumpToSection = 'direct_deposit'\n				showPayoutTab( constants.jumpToSection);\n				closeSimpleModal();\n			}, msg, 'Fill out Payout Data', 100000);\n\n			event.preventDefault();\n			return false;\n		}\n	});\n\n	$(\"#premium-tease\").click(function(){\n		$(this).hide();\n		var $accordion = $(this).parents(\"div.accordion\");\n		var $inner_block = $accordion.find(\"div.premium-wrap\");\n		$accordion.find(\"div.content-inner-wrap\").scrollTop(0).animate({ scrollTop: $inner_block.position().top-10+'px' });\n	});\n\n	$(\".addSectionBtn,.addSecBtn, #nuAddSecBtn\").click(function(){//Back button in embed modals.\n		addSectionModal();\n		trackIndicativeEvent('clickedAddNewElement');\n	});\n\n	$('#splash-container').on('click', 'div.onPageAddSec', function(){ //adding new elements to the page.\n		var $layoutGrp = $(this).parents(\".layoutGrp:first\");\n		var $ftgrp = ftGetFtGrp($layoutGrp);\n		if($layoutGrp.length > 0){\n			if($ftgrp.hasClass('grp-wrapper') || $layoutGrp.hasClass(\"drop-area\") ){\n				//if this is a container group with groups inside of it then append.\n				$(\"#add-new-section\").data(\"appendToBlock\",$layoutGrp.prop(\"id\"));\n			} else {\n				//otherwise, we want this new section going AFTER.\n				$(\"#add-new-section\").data(\"appendToBlock\",'after-'+$layoutGrp.prop(\"id\"));\n			}\n		}\n\n		addSectionModal();\n	});\n\n	$(\"#elementLibTagSort\").change(function(){\n		var val = $(this).val();\n		var $parent = $(\"#saved-elements\").find(\".element-adder-content\");\n		var $blocks = $parent.find(\".addSection\");\n		if(val==''){\n			$blocks.show();\n		} else {//actual tag searching...\n			$blocks.hide();\n\n			var search = new RegExp(\",\"+RegExp.escape(val)+\",\",\"i\");\n			$blocks.each(function(){\n				var $t = $(this);\n				var tags = $t.data('tags');\n				if(tags && tags.match(search)){\n					$t.show();\n				}\n			})\n		}\n	});\n\n	$(\"#map-embed\").on('change','input.map-dimension',function(){\n		clearTimeout(typingTimer);\n		var $this = $(this);\n		$(\"#map-embed-placeholder,#map-hidden-img,#map-embed .thisLoader\").addClass('loading');\n		typingTimer = setTimeout(function(){\n			getGoogleMapImg(function(data){\n				$('#map-embed-placeholder').hide().removeClass('loading');\n				$(\"#map-hidden-img\").prop(\"src\",data.image).removeClass('loading');\n				$('#map-embed .thisLoader').removeClass('loading');\n			});\n		}, 2000);\n\n\n	});\n\n	$firstTimeModal = false;\n	//ADD BLOCK TYPE / ADD NEW ELEMENT / SECTION TO PAGE.\n	$(\"#add-new-section\").on('click',\".element-adder-content .addSection\",function(){\n		var $this = $(this);\n\n		if ( $this.hasClass('disabled') ){ return false; }\n		var $p = $this,\n			section_type = $p.attr(\"section-type\"),\n			element = $p.attr(\"element\"),\n			child_type = $p.attr(\"child-type\");\n\n		if($.inArray(section_type,['audio','video','map','iframe','twitter-widget'])>-1){//SPECIAL CASES - ALL HAVE MODALS BEFORE ADDING TO PAGE.\n			var $embed = $(\"#\"+section_type+\"-embed\");\n			var opts = {};\n			if(section_type=='map'){\n				opts.persistent = true;//patch for the google autocomplete, which is not technically inside the map. clicking it closes the simple modal.\n			}\n			$embed.removeClass('editing').attr(\"group-id\",false).find(\"textarea:first\").val('').end().fireSimpleModal(opts);\n\n			if(section_type == 'audio'){\n				var thisHeight = $('#audio-embed').height() - $('#audio-embed h4').height() - $('#audio-embed .bottomBox').height()\n				$('#audio-embed .searchBox').css('height', thisHeight+'px');\n\n				var secHeight = thisHeight - $('#audio-embed .searchBox .topText').height() - $('#audio-embed .searchBox .search-val').height() - 100\n				$('#audio-embed .results').css('max-height', secHeight+\"px\")\n\n			} else if(section_type=='map'){\n				//nice little hack to populate the venue map on the fly!\n				var $input = $(\"#venue-search-map-embed\");\n				if($input.val().trim()!=''){\n					setTimeout(function(){\n						//$(\"#venue-search-map-embed\").focus()\n						//find the first item in the google autocmoplete\n						var firstResult = $(\".pac-container:last\").find(\".pac-item:first\").text();\n					    if(typeof firstResult!=='undefined' && firstResult!=''){//there are results for their venue search.\n					    	var geocoder = new google.maps.Geocoder();\n							geocoder.geocode({\"address\":firstResult }, function(results, status) {\n							    if (status == google.maps.GeocoderStatus.OK) {\n							    	updatePlace(results[0]);\n							    }\n							});\n						} else{//no results found in autocomplete.\n							//$input.val('').focus();\n							//in this case, try to trim out the venue name and search again.\n							var stored_val = $input.val();//grab the value before altering it.\n							var venue_name = getCurrentVenueValue();\n							if(venue_name!=''){\n								$input.attr(\"stored_val\",stored_val).val(venue_name).focus();\n								setTimeout(function(){\n										var firstResult = $(\".pac-container:last\").find(\".pac-item:first\").text();\n									    if(typeof firstResult!=='undefined' && firstResult!=''){//there are results for their venue search.\n									    	var geocoder = new google.maps.Geocoder();\n											geocoder.geocode({\"address\":firstResult }, function(results, status) {\n											    if (status == google.maps.GeocoderStatus.OK) {\n											    	updatePlace(results[0]);\n											    }\n											});\n										} else{\n											$input.val('');//if no result now, then clear that input.\n										}\n								},200);\n							}\n						}\n					},100);\n				}\n			}\n\n		} else if(section_type=='gallery'){\n\n			closeSimpleModal();\n			$this.addClass('disabled');\n			backToFineTune();//just in case they're not in the main pane when added.\n\n			finetuneEditedFields['data[EventSetting][hide_gallery]'] = 0;\n			finetuneFieldChangesMade();\n\n			var $gall = $('#gallery-container');\n			if ($gall.length == 1) {\n				$('#gallery-container').removeClass('hide');\n				$(\"#finetune-layout-contain\").find(\".section[group-type='gallery'] > .title:first\").click();\n			} else {\n				addNewSection( {'element':'gallery'},true );\n			}\n\n			trackIndicativeEvent('addSection',{'type':'gallery'});\n\n			// open the social inbox\n			setTimeout(function(){\n				openPhotoGallery();\n			},100);\n		} else if(section_type=='img_gal'){//NEW GALLERIES.  ALLOWS FOR MULTI.\n			closeSimpleModal();\n			addNewSection({'block_type':section_type,'child_type':child_type },null,function($new_block){\n				var grp = ftGetGrp($new_block);\n				if (grp && grp['element'] && (''+grp['element']).match(/^custom.block./)) {\n					var mysfid = (''+grp['element']).replace(/^custom-block-/,'');\n					gallerySplashFeedId = mysfid;\n				}\n				openPhotoGallery()\n				return false;\n			});\n\n		}\n		else if (section_type == 'element' && element){\n			closeSimpleModal();\n			//add the new section!\n\n			openSectionsAccord()\n			addNewSection({'element':element});\n		} else if ($p.attr(\"block-type\")=='container'){\n			$containerScroll = true;\n			var groups = getColumnContainerMarkup(section_type);\n			closeSimpleModal();\n			setTimeout(function(){\n				$(\"#nestedLayoutContainer\").animate({scrollTop:$(\"#nestedLayoutContainer\")[0].scrollHeight});\n				$(\"body\").animate({scrollTop:$(\"body\")[0].scrollHeight});\n			},900)\n			addNewSection(groups,true);\n\n\n		} else if ($p.attr(\"block-type\")=='modal'){\n\n			$firstTimeModal = true;\n			var groups = getColumnContainerMarkup(section_type);\n			closeSimpleModal();\n			addNewSection(groups,false,function(){\n				var newgid = $('#splash-container').find('.layoutGrp.isModal:last').children().prop('id');\n				$(\"#add-new-section\").data('appendToBlock',newgid);\n				addNewSection({'block_type':'content'},false);\n				modal.scale();\n				if($firstTimeModal) {\n\n					setTimeout(function(){\n						//$markup.attr('modalId',$group['modalId']);\n						openFinetuneBar('content');\n						openCustomSection($(\"#\"+newgid), { scrollToBlock: true });\n						$firstTimeModal = false;\n						setTimeout(function(){\n							$(\"#nestedLayoutContainer\").css({ \"height\":\"100%\", \"max-height\":\"100%\"});\n							$(\"#finetune-back-btn\").removeClass('hide');\n							//$(\"#finetune-all-tools .ft-grp span.collapse.icon-f-wide-darr\").hide();\n						},2000)\n					},1500)\n				}\n\n			});\n\n		} else if(section_type == 'custom-layout-block'){//CUSTOM LAYOUT BLOCK\n\n			var groups = $p.data('layout');\n			if (groups && groups.group && groups.group.length == 1) {\n				groups = groups.group[0];\n			}\n			groups.cloningFromElementLibrary = true;\n			closeSimpleModal();\n			addNewSection(groups,true);\n\n		} else {\n			closeSimpleModal();\n			openSectionsAccord()\n\n			//uncomment if we want to use existing sections instead of of blank sections.\n			// var $existingBlock = $(\"#splash-container\").find('.sf[block-type=\"'+section_type+'\"]:last');\n			// if($existingBlock.length > 0){\n			// 	var $parent = $existingBlock.parents(\".layoutGrp:first\");\n			// 	addNewSection({ blockToClone: $parent, appendToContainer: true });\n			// } else {\n				//add the new section!\n				if(typeof $this.attr('clone-from')!=='undefined'){\n					if($this.attr('clone-from') == 'attendeeButton' ) { //ADDING ATTENDEES TO PAGE\n						updateSettingsField( { field: 'rsvp_guest_display', value: 1 } );\n					}\n					var $blockToClone = $(\"#blank-groups\").find(\".\"+$this.attr('clone-from')+\":first\").parents(\".blank-group:first\");\n					addNewSection({'block_type':section_type,'child_type':child_type, cloneObj: $blockToClone });\n				} else {\n					addNewSection({'block_type':section_type,'child_type':child_type });\n				}\n			//}\n		}\n		updateFinetuneSectionCountDisplay()\n\n	});\n\n	///////////////////////////////////	///////////////////////////////////	///////////////////////////////////\n	///////////////////////////////////	///////////////////////////////////	///////////////////////////////////\n	/////////////////////////////////// EDIT SETTINGS MODAL START 	///////////////////////////////////\n	var $editSettings = $(\"#edit-settings\");\n	$editSettings.on('click','.edit-btn',function(){\n		if( $(this).hasClass('changeVanity') ){\n			$(this).parents(\".edit-fields\").hide().parents(\".form-wrap:first\").find(\".edit-current.vanity\").show().find(\"input:first\").focus();\n		} else if( $(this).hasClass('changeDomain') ){\n			$(this).parents(\".edit-fields\").hide().parents(\".form-wrap:first\").find(\".edit-current.domain\").show().find(\"input:first\").focus();\n		} else {\n			$(this).parents(\".edit-fields\").hide().parents(\".form-wrap:first\").find(\".edit-current\").show().find(\"input:first\").focus();\n		}\n	});\n\n	$editSettings.on('click','.quick-cancel',function(){\n		var $this = $(this);\n		var $parent = $this.parents(\".subsection:first\");\n		var current_val = $parent.find(\".static-val:first\").text();\n		$parent.find(\".edit-fields\").show().end().find(\".edit-current\").hide().find(\"input.nu-input:first\").val(current_val);\n		if($this.prop(\"id\")=='cancel-change-domain'){\n			$(\"#domain-check\").hide();\n			$(\"#valid-domain\").val(1);\n		}\n	});\n\n	$editSettings.on('click','.quick-save',function(){\n		var $this = $(this);\n		var $parent = $this.parents(\".form-wrap:first\");\n		var $input;\n\n		if( $(this).hasClass('saveDomain') ){\n			$input = $this.parents(\".edit-current.domain\").find(\"input.nu-input:first\");\n		} else if( $(this).hasClass('saveVanity') ){\n			$input = $this.parents(\".edit-current.vanity\").find(\"input.nu-input:first\");\n		} else {\n			$input = $this.parents(\".edit-current\").find(\"input.nu-input:first\");\n		}\n\n		var current_val = $.trim($input.val());\n		if(current_val==''){\n			if($input.prop(\"id\")=='finetune-main-title'){\n				alert('A valid event title is required.');\n				$input.focus();\n				return false;\n			} else if($input.prop(\"id\")=='event-domain'){\n				alert('A valid domain is required.');\n				$input.focus();\n				return false;\n			}\n		} else if($this.prop(\"id\")=='quickSaveNewDomain'){\n			if($(\"#valid-domain\").val()=='0'){\n				alert('A valid domain is required.');\n				$input.focus();\n				return false;\n			}\n		}\n\n		if( $(this).hasClass('saveDomain') ){\n			$parent.find(\".edit-fields.domain-contain\").show().find(\".static-val:first\").text(current_val).end().end().find(\".edit-current\").hide();\n		} else if( $(this).hasClass('saveVanity') ){\n			$parent.find(\".edit-fields.vanity-url-contain\").show().find(\".static-val:first\").text(current_val).end().end().find(\".edit-current\").hide();\n		} else {\n			$parent.find(\".edit-fields\").show().find(\".static-val:first\").text(current_val).end().end().find(\".edit-current\").hide();\n		}\n\n	});\n\n	$(\"#update-page-title\").change(function(){\n		var $t = $(this);\n		if($t.val()=='1'){\n			var $currentInlineTitle = $(\"#element-title\").find(\".editable:first\");\n			$t.data(\"current\",$currentInlineTitle.html());\n			var title = $(\"#finetune-main-title\").val();\n			$currentInlineTitle.html(title);\n			$(\"#finetune-design-title\").val(title).trigger('change');\n		} else {\n			if($t.data(\"current\")!=='undefined'){\n				var $currentInlineTitle = $(\"#element-title\").find(\".editable:first\");\n				$currentInlineTitle.html($t.data(\"current\"));\n			}\n		}\n	});\n	$(\"#finetune-main-title\").keyup(function(){\n		if($(\"#update-page-title\").val()=='1'){\n			var title = $(\"#finetune-main-title\").val();\n			$(\"#element-title\").find(\".editable:first\").html(title);\n			$(\"#finetune-design-title\").val(title).trigger('change');\n		}\n	});\n\n	$(\"#private-type-input\").change(function(){\n		if(isPrivateEvent()){\n			$(\"#privacy-check\").val(1);//.trigger('change');\n			$(\"#private-code\").show().focus();\n			$(\"#bypassPrivacy\").show();\n			$(\"#password-holder\").css('display', 'inline-block');\n		} else{\n			if($(this).val()=='min_age' || $(this).val()=='invite_list'){\n				$(\"#privacy-check\").val(1);//.trigger('change');\n			} else{\n				$(\"#privacy-check\").val(0);//.trigger('change');\n			}\n			$(\"#private-code\").val('').hide();\n			$(\"#bypassPrivacy\").hide();\n			$(\"#password-holder\").css('display', 'none');\n			setCheck($(\"#privacy-invite-bypass\"),0);\n		};\n	});\n	///////////////////////////////////	///////////////////////////////////	///////////////////////////////////\n	/////////////////////////////////// EDIT SETTINGS END 	///////////////////////////////////\n	///////////////////////////////////	///////////////////////////////////	///////////////////////////////////\n\n	//special checks for title/subtitle\n	$('#element-title, #element-subtitle').keyup(function(){\n		if( $('#splash-container').find('.autoWindowHeight').length > 0 ){\n			clearTimeout(autoTimeout)\n			autoTimeout = setTimeout(function(){\n				autoWindowSizes()\n			}, 700)\n		} else {\n			dynamaHead()\n		}\n	})\n\n	//selecting a theme - step 1\n	$(\"#theme-modal\").on('click', '.theme-option', function(){\n		//if( $(this).hasClass('current-theme') ){\n		//	return false;\n		//} else {\n			$('#theme-modal').addClass('slideshow')\n			$(this).addClass('active')\n		//}\n	}).on('click', '.choose-theme', function(){	//selecting a theme - step 2\n		// //console.time(\"THEME SWITCH\");\n		if( $(this).hasClass('current-theme') ){\n			return false;\n		} else {\n			/*\n			if( false ){\n				var backupName = constants.thisTheme + ' Backup'\n				createNewStage( false, backupName, chooseTheme )\n			} else {\n			*/\n				chooseTheme()\n		}\n\n	});\n\n	////////VIDEO EMBEDDING FUNCTIONALITY////////\n	$(\"#video-embed\").find(\"textarea.vid-embed\").keyup(function(){\n		clearTimeout(typingTimer);\n		var $this = $(this);\n		typingTimer = setTimeout(function(){\n			getVidEmbedCode($this);\n		}, 2000);\n\n	}).focusout(function(){\n		getVidEmbedCode($(this));\n		videoOptions.checkType($('input.video-url'),$(this).val());\n		//console.log($(this).val())\n	});\n\n	$(\"#video-embed a.removeVideo\").click(function(){\n		var $this = $(this);\n		$this.parents(\".grp:first\").find(\"textarea.vid-embed\").val('').show().focus();\n		$this.parents(\".embed-area\").hide().find(\".video-url,.video-thumbnail\").val('');\n		$('#videoCheckBoxes').addClass('hide');\n		$('#videoCheckBoxes label').removeClass('checked');\n		$('#videoCheckBoxes label input').val('0');\n	});\n	$(\"#video-embed a.saveVideo\").click(function(){\n		var $parent = $(\"#video-embed\");\n		var $input = $parent.find(\"input.video-url\");\n		if($input.val()==''){//make sure it's a good input value.\n			$parent.find(\".error-area\").html('Please enter a valid video path.').show();\n			return false;\n		}\n\n		var params = {'block_type':'video','embed_code':$parent.find(\".vid\").html(),'saveEntry':true};\n		if($parent.hasClass('editing') && $parent.attr(\"group-id\")!==false && $parent.attr(\"group-id\")>0){\n			params['group_id'] = $parent.attr(\"group-id\");\n			updateEmbed(params);\n		} else{\n			openSectionsAccord()\n			addNewSection(params);\n		}\n		$(\"#video-embed .vid iframe:first\").attr('src','');\n		closeSimpleModal();\n	});\n	///////////END VIDEO EMBEDDING FUNCTIONALITY //////////////////\n	////////////// IFRAME EMBEDDING FUNCTIONALITY //////////////////\n	$(\"#iframe-embed a.saveIframe\").click(function(){\n		var $parent = $(\"#iframe-embed\");\n		var $input = $parent.find(\".vid-embed\");\n		if($.trim($input.val())==''){//make sure it's a good input value.\n			$parent.find(\".error-area\").html('Please enter a valid iframe path.').show();\n			return false;\n		}\n\n		var params = {'block_type':'iframe','embed_code':$input.val(),'saveEntry':true};\n		if($parent.hasClass('editing') && $parent.attr(\"group-id\")!==false && $parent.attr(\"group-id\")>0){\n			params['group_id'] = $parent.attr(\"group-id\");\n			updateEmbed(params);\n		} else{\n			addNewSection(params);\n		}\n		closeSimpleModal();\n	});\n	///////////////////END IFRAME EMBEDDING FUNCTIONALITY/////////////////////\n	//////////////////////////////TWITTER WIDGET EMBEDDING FUNCTIONALITY////////////////////////////////\n	$(\"#twitter-widget-embed a.saveTwitterWidget\").click(function(){\n		var $parent = $(\"#twitter-widget-embed\");\n		var $input = $parent.find(\".vid-embed\");\n		var code = $.trim($input.val());\n		if (code=='') {//make sure it's a good input value.\n			$parent.find(\".error-area\").html('Please enter a valid widget code.').show();\n			return false;\n		}\n\n		var $code = $('<div>'+code+'</div>');\n		$code.find('script').remove();\n\n		var params = {'block_type':'twitter-widget','embed_code':$code.html(),'saveEntry':true};\n		if($parent.hasClass('editing') && $parent.attr(\"group-id\")!==false && $parent.attr(\"group-id\")>0){\n			params['group_id'] = $parent.attr(\"group-id\");\n			updateEmbed(params);\n		} else{\n			addNewSection(params);\n		}\n\n		closeSimpleModal();\n\n		!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+\"://platform.twitter.com/widgets.js\";fjs.parentNode.insertBefore(js,fjs);}}(document,\"script\",\"twitter-wjs\");\n		if (twttr && twttr.widgets) twttr.widgets.load(document);\n\n	});\n	/////////////////////END TWITTER WIDGET EMBEDDING FUNCTIONALITY////////////////////////////////\n	//////////////////AUDIO EMBEDDING FUNCTIONALITY////////////////////////////////////////////////\n	$(\"#song-search\").keyup(function(){\n		var $this = $(this);\n		var link=false;\n		if($this.val()<3 || $this.hasClass('loading')){ return false; }\n\n		$this.parents('.searchBox').find('#embed-audio-message').remove();\n\n		if(isValidUrl($this.val())){//pasting a link\n			var method = 'getEmbedCode';\n			var params = { event_id: constants.event_id, type:'audio', value: $this.val() };\n			link=true;\n			setTimeout(function(){$('#audio-embed').addClass('songSelected');},2000);\n		} else {\n			var method = 'searchSongs';\n			var params = { event_id: constants.event_id, term: $this.val() };\n		}\n\n		clearTimeout(typingTimer);\n		typingTimer = setTimeout(function(){\n			$this.addClass('loading');\n			$('#songSearchLoader').addClass('loading').find(\".nu-loader\").addClass('loading');\n			$(\"#audio-embed\").find(\".error-area\").hide();\n\n			$.ajax({\n				url: \"/splash/\"+method+\"/\"+constants.slug,\n				dataType: 'json',\n				type:'post',\n				data: params,\n				success: function(results){\n					$this.removeClass('loading');\n					$('#songSearchLoader').removeClass('loading').find(\".nu-loader\").removeClass('loading');\n					var $ul = $(\"#song-search\").parent().find(\"ul.results\");\n					if(link){\n						if(typeof results!=null && typeof results.code!=='undefined'){\n							$this.hide();\n							$(\"#audio-embed\").find(\".error-area\").html('').hide().end()\n								.find(\".embed-area\").show().find(\".holder\").html(results.code).end()\n								.find(\".song-url\").val(results.code);\n							$ul.hide();\n						}\n					} else{\n						$this.show();\n						$(\"#audio-embed\").find(\".error-area\").html('').hide().end().find(\".embed-area\").hide();\n						if(results.length>0){\n							var rows = '';\n							for(var x in results){\n								rows+='<li class=\"grp p0 rel '+results[x].type+'\">'+\n								'<a uri=\"'+results[x].url+'\" href=\"#\" class=\"grp ellipsis\"><i class=\"ico-'+results[x].type+' abs tl audio-src\"></i>'+\n								'<span class=\"song regular block bigger em02 ellipsis\">'+results[x].song+'</span><span class=\"smaller em02 artist\">'+results[x].artist+'</span>'+\n								'<span class=\"album-name smaller em02 ml10\">'+results[x].album+'</span></a></li>';\n							}\n							$ul.html(rows).show();\n						} else{\n							$ul.html('<li class=\"no-results\">No results found for search: <b>'+$this.val()+'</b>.</li>');\n						}\n					}\n				},\n				error: function(){\n					$this.removeClass('loading');\n					$('#songSearchLoader').removeClass('loading');\n					$(\"#audio-embed\").find(\".error-area\").html('There was an error processing your request.  Please try again.').show();\n				}\n			});\n		},doneTypingInterval);\n	});\n\n	$(\"#audio-embed .results\").on('click','a',function(){\n		var $t = $(this);\n		var $p = $t.parents(\"li:first\");\n		if($p.hasClass('spotify')){\n			var embed_code = '<iframe src=\"https://embed.spotify.com/?uri='+$t.attr(\"uri\")+'\" frameborder=\"0\" allowtransparency=\"true\" width=\"458\" height=\"80\"></iframe>';\n		} else{\n			var embed_code = '<iframe src=\"https://w.soundcloud.com/player/?url='+$t.attr(\"uri\")+'&liking=false&sharing=false\" frameborder=\"0\" allowtransparency=\"true\"></iframe>';\n		}\n		$(\"#audio-embed\").find(\"#song-search,ul.results\").hide().end()\n		.find(\".embed-area\").show().find(\".holder\").html(embed_code).end()\n		.find(\"input.song-url\").val(embed_code);\n\n		$('#audio-embed').addClass('songSelected')\n	});\n	$(\"#audio-embed\").on('click','a.change-song',function(){\n		$(this).parents(\".embed-area\").hide();\n		$('#audio-embed').removeClass('songSelected')\n		$(\"#audio-embed\").find(\".tab:visible\").find(\"input.search-val\").val('').show().show().end().end().find(\"ul.results\").show();\n	});\n\n	$(\"#audio-embed a.saveAudio\").click(function(){\n		var $this = $(this);\n		var $parent = $(\"#audio-embed\");\n		var $input = $parent.find(\".tab:visible\").find(\"input.search-val\");\n		if($input.val()==''){//make sure it's a good input value.\n			$parent.find(\".error-area\").html('Please enter a valid song path.').show();\n			return false;\n		}\n		var params = {'block_type':'audio','embed_code':$parent.find(\".embed-area\").find(\".holder\").html(),'saveEntry':true};\n		var description = $.trim($parent.find(\".song-body\").val());\n		if(description!='' && params.description!=='undefined'){\n			params.body = description;\n			params.title = description;\n		}\n\n		if($parent.hasClass('editing') && $parent.attr(\"group-id\")!==false && $parent.attr(\"group-id\")>0){\n			params['group_id'] = $parent.attr(\"group-id\");\n			updateEmbed(params);\n		} else{\n			addNewSection(params);\n			openSectionsAccord()\n		}\n\n		closeSimpleModal();\n	});\n	//tabs functionality within song adder.\n	$(\"#audio-embed .tabs a\").click(function(){\n		$(this).addClass('active').siblings().removeClass('active');\n		$(this).parents(\".grp:first\").find(\".tab\").hide().end().find('.tab[type=\"'+$(this).attr(\"type\")+'\"]').show();\n	});\n\n	////////////////END AUDIO EMBED FUNCTIONALITY////////////////////////////////\n\n	//////////////////////////////////adding/editing map on page.////////////////////////////////\n	$(\"#map-embed a.saveMap\").click(function(){\n		var $this = $(this);\n		var $parent = $(\"#map-embed\");\n		var $img = $(\"#map-hidden-img\");\n		if($img.prop(\"src\")==''||!$img.is(\":visible\")){\n			$parent.find(\".error-area\").html('Please enter a valid map.').show();\n			return false;\n		}\n\n		var params = {\n			'block_type':'map',\n			'saveEntry':true,\n			'title':$(\"#map-embed-title\").val(),\n			'embed_code': '<img src=\"'+$img.prop(\"src\")+'\" />'\n	 	};\n\n	 	if($(\"#venue-map-url\").val()!=''){\n		 	params.website = $(\"#venue-map-url\").val();\n		}\n\n		var description = $.trim($parent.find(\".body\").val());\n		if(description!=''){\n			params.title = description;\n			params.body = '<h2>'+description+'</h2>';\n		}\n\n		params.width = parseInt( $('#map-embed-width').val() );\n		params.height = parseInt( $('#map-embed-height').val() );\n		params.zoom = parseInt( $('#map-embed-zoom').val() );\n\n		//now empty out map properties\n		$(\"#map-hidden-img\").prop(\"src\",'');\n		$('#map-embed-placeholder').show();\n		$(\"#venue-search-map-embed\").val('');\n		$(\"#map-address-text\").val('').hide();\n		var $m = $(\"#map-embed\");\n\n		if($m.hasClass('editing') && $m.attr(\"group-id\")!==false && $m.attr(\"group-id\")>0){\n			//editing an existing map.\n			params['group_id'] = $m.attr(\"group-id\");\n			updateEmbed(params);\n		} else{\n			//adding a new map.\n			addNewSection(params);\n		}\n\n		openSectionsAccord()\n\n		closeSimpleModal();\n	});\n\n	//opening embed modal from on-page RTE button.\n	$('#main-canvas').on('click', '.edit-media-jump', function(){\n		var $t = $(this).parents('.layoutGrp:first'),\n			block_type = $t.find('.sf:first').attr('block-type')\n			gid = $t.attr('id').replace('g-', '');\n		openEmbedModal(block_type,gid);\n		return false;\n	})\n\n	//opening embed modal from finetune sidebar.\n	$(\"#finetune-all-tools\").on('click','.edit-embed-source',function(){\n		var $g = $(this).parents(\".accordion:first\"),\n			block_type = $g.attr(\"block-type\"),\n			gid = (''+$g.attr('id')).replace('acc-ftg-','');\n		openEmbedModal(block_type,gid);\n		return false;\n\n	});\n\n	$('#main-canvas').on('click', '.doneEditingTicker', function(){\n		var $p = $(this).parents(\".sf:first\");\n		var block_type = $p.attr(\"block-type\");\n		$p.removeClass('editingTicker').find('.ticker-item').hide().css('position', '')\n		$(this).remove()\n		$p.find('.addNewItem').addClass('editTicker').find('span').html('EDIT').end().find('small').text('EDIT TICKER')\n		fadeTickerItems()\n	});\n\n	$(\"#main-canvas\").on('click',\".addNewItem\",function(){ //ADD NEW ITEM\n		var $t = $(this),\n			$layoutGrp = $t.parents(\".layoutGrp:first\"),\n			$sf = $layoutGrp.find(\".sf:first\"),\n			repeatableBlockId = $layoutGrp.data('repeatable-block-id');\n\n		if(typeof repeatableBlockId !=='undefined'){\n			$t.addClass('loading');\n			repeatableItems.addToPage($layoutGrp,repeatableBlockId,function(){\n				$t.removeClass('loading');\n			});\n\n		} else {\n\n			if($sf.hasClass('nav')){\n				editNavBlock($layoutGrp);\n				return false;\n			} else if( $sf.hasClass('event-hub') ) {\n				loadEventHubModal($sf.prop('id')) //ie, sfid-45678;\n				return false;\n			} else if($sf.hasClass('img_gal')){\n				gallerySplashFeedId = $sf.prop('id').replace('sfid-','');\n				openPhotoGallery();\n				galleryCarousel.init($sf);\n				return false;\n			} else {\n				addNewListItem($sf);\n			}\n\n		}\n\n\n	});\n\n	//DELETE A CUSTOM SECTION\n	$(\"#finetune-layout-contain\").on('click',\".section .delete-section\",function(e){\n		e.preventDefault();\n		e.stopPropagation();\n		var $section = $(this).parents('.section:first');\n		if ($section.attr('chunk') == 'album') { //SPECIAL CHECK FOR GALLERY\n			if (confirm('Are you sure you want hide your gallery?')){\n				// save the hide_gallery setting\n				finetuneEditedFields['data[EventSetting][hide_gallery]'] = 1;\n				finetuneFieldChangesMade();\n				// remove the gallery section from finetune-layout-contain\n				$('#finetune-sections').append($section.hide());\n				// hide the gallery on the page\n				$('#gallery-container').addClass('hide');\n				// remove the disabed class in the add-new-section modal\n				// $('#add-new-section').find('.addSection[block-type=\"gallery\"]').find('.nu-btn:first').removeClass('disabled');\n				$('#sectionTabWrap').removeClass('expanded')\n			}\n		} else {\n\n			if($section.hasClass('ele-wrapper')){//prevent user from deleting reserved elements - ie. title,subtitle,rsvp, etc.\n				alert('You cannot delete a reserved element.  Please hide it instead.');\n				return false;\n			}\n			if (confirm('Are you sure you want to delete this section?')){\n				var gid = ftGetId($section);\n				var $grp = 	$(\"#g-\"+gid);\n				if($grp.length > 0){\n					closeCustomSection();\n					setTimeout(function(){\n						removeGroup($grp,gid,true);\n						setWindowHeight($(\"#nestedLayoutContainer\"));\n\n					},500);\n				}\n			}\n		}\n\n		resizeSplashContainer();\n		return false;\n	});\n\n\n	$('#finetune-layout-contain').on('click', '.section .hideSecOpt', function(){\n\n		$thisText = $(this).find('.hideText')\n\n		if( $thisText.text() == 'Hide Section' ){\n			$thisText.text('Show Section')\n		} else {\n			$thisText.text('Hide Section')\n		}\n	})\n\n	$(\"#finetune-layout-contain\").on({\n		mouseenter:function(e){\n		  	var $t = $(this).parents('.section:first');\n		  	// Remove .hovering from any parents\n	      	$t.parents(\".section:first\").removeClass('hovering');\n	      	// Add .hovering to the current hovered element\n	 	 	$t.addClass('hovering').siblings('.section').addClass('sibling-active');\n	 	 	$t.find('.ele-utils:first').addClass('hovering');\n	 	 	var gid=$t.prop(\"id\").replace('ft','');\n	 	 	var $grp = $(\"#\"+gid);\n	 	 	if($grp){\n	 	 		$grp.addClass('hovering');\n\n	 	 		updateSecHovers( $grp )\n\n	 	 		return false;//prevents bubbling up to parent section containers.\n	 	 	}\n		},\n		mouseleave:function(e){ // Remove .hovering when you leave\n	  	 	var $t = $(this).parents('.section:first');\n	  	 	$t.removeClass('hovering');\n			if($t.parents(\".section\").length > 0){\n				$t.parents(\".section:first\").addClass('hovering');\n			}\n			if($(this).hasClass('ele-utils')){\n	 			$(this).addClass('hovering')\n	 		}\n			$t.siblings('.section').removeClass('sibling-active');\n			var gid=$t.prop(\"id\").replace('ft','');\n			var $grp = $(\"#\"+gid);\n			if($grp){\n				$grp.removeClass('hovering');\n			}\n			$t.find('.ele-utils:first').removeClass('hovering');\n		}\n	},'.section .title,.section.open .accordion');\n\n	$('#resultsFirstView, #addFirstView').on('click', function(){\n		event.preventDefault()\n		return false\n	})\n\n	$(\"#admin-theme-event-type\").change(function(){\n		if($(this).val()!=''){\n			var theme_id = $(\"#event-theme-input\").val();\n			var currentTheme = allThemes[theme_id];\n			if(typeof currentTheme!=='undefined'){\n				if($(\"#admin-theme-title\").val()==''){\n					$(\"#admin-theme-title\").val(currentTheme['name']+' '+$(this).val());\n				}\n				$(\"#admin-theme-abbr\").val(currentTheme['abbr']).attr(\"readonly\",true);\n				$(\"#admin-theme-photo\").val(currentTheme['image_url']);\n				if($(\"#admin-theme-parent-id\").val()=='0'||$(\"#admin-theme-parent-id\").val()==''){\n					$(\"#admin-theme-parent-id\").val(theme_id);\n				}\n			}\n		} else{\n			$(\"#admin-theme-abbr\").attr(\"readonly\",false);\n		}\n	});\n\n	$(\"#finetune-all-tools\").on('click','.content-trigger',function(){\n		//opening/closing advanced sections.\n		var $t = $(this);\n		var $c = $t.parents(\".adv-slide:first\").find(\".content:first\");\n		var h = $c.outerHeight();\n		var $toggle_content = $c.parents(\".toggle-content:first\");\n		if($t.hasClass('open')){//close it.\n			$t.removeClass('open');\n			$c.hide();\n			$toggle_content.height($toggle_content.outerHeight()-h);\n		} else{\n			//var $other_sections = $t.parents(\".accordion:first\").find(\".content-trigger.open\");\n			//$other_sections.click();\n			$t.addClass('open');\n			$c.show();\n			$toggle_content.height($toggle_content.outerHeight()+h)\n				.find(\"div.slider-wrap\").each(function(){ bindSlider($(this).find(\"input:first\"),true);});\n		}\n	});\n\n	$(\"#finetune-all-tools\").on('click','.nu-toggle .opt',function(){\n		var $t = $(this);\n		var target = $t.attr('target');\n		var $p = $t.parents(\".toggle-wrap:first\");\n		if($t.hasClass('active')){ //if it's already selected, close any open divs in here.\n			$p.find(\".content-inner.active\").find(\".content-trigger\").each(function(i){\n				var $this = $(this);\n				setTimeout(function(){\n					$this.click();//close up shop.\n				},400*i);\n			});\n		} else{\n			$t.addClass('active').siblings().removeClass('active');\n			$p.find(\".flow:first\").addClass('ofH');\n			var $i = $p.find('.toggle-content').find(\".content-inner.\"+$t.attr(\"type\"));\n			$i.addClass('active').siblings().removeClass('active');\n			var $h = $i.height();\n			$p.find(\".toggle-content\").css('height',$h).removeClass('c1 c2 c3').addClass(target);//either c1 or c2\n			setTimeout(function(){\n				$p.find(\".flow:first\").removeClass('ofH');\n			},1500);\n		}\n	});\n\n	// $(\"#main-canvas\").on({\n	// 	mouseenter:function(){\n	// 		var $t = $(this).parents(\".layoutGrp:first\");\n	// 		$t.css('z-index','2').siblings('z-index','1');\n	// 		// $e = $t.find(\".editable\"),\n	// 		// txt = ($t.prop(\"id\")=='element-title')?'Title':'Subtitle';\n	// 		// if($e.html().trim()==''){\n	// 		// 	$e.html('Add '+txt+' Here');\n	// 		// }\n	// 	}//,\n	// 	// mouseleave:function(){\n	// 	// 	var $t = $(this),\n	// 	// 	$e = $t.find(\".editable\"),\n	// 	// 	txt = ($t.prop(\"id\")=='element-title')?'Title':'Subtitle';\n	// 	// 	if($e.html().trim()=='Add '+txt+' Here'){\n	// 	// 		$e.html('');\n	// 	// 	}\n	// 	// }\n\n	// },\"#element-title,#element-subtitle\");\n\n	$(\"#title-shortcut,#subtitle-shortcut,#edit-title-link,#edit-subtitle-link\").click(function(){\n		var $t = $(\"#\"+$(this).attr(\"target\")).find(\".editable:first\");\n		if($t.length>0){\n			scrollToBlock($t,-50);\n			$t.show().focus();\n		}\n	});\n\n	$(document).on({\n		click:function(){\n			clearTimeout(tipHover);\n			$(\"#newTip\").empty().hide();\n		},\n		mouseenter:function(e){\n			tipHover=true;\n			var $t = $(this);\n			clearTimeout(tipHover);\n			tipHover = setTimeout(function(){\n				var $tip = $(\"#newTip\");\n				if($tip.length < 1){\n					var $tip = $('<span id=\"newTip\" class=\"title-tip nu-tiptip hide\" style=\"position:fixed;z-index:100;\"></span>');\n				}\n				$tip.html($t.attr(\"tip\"));\n				$t.append($tip);\n				$tip.show();\n			},400);\n		},\n		mouseleave:function(){\n			clearTimeout(tipHover);\n			$(\"#newTip\").html('').hide();\n		}\n	},\".tip-trig\");\n\n	$(\"#header-vertical-align\").change(function(){\n		var $target = getTargetById('header');\n		$target.addClass('align').find(\".layoutGrp:first\");\n		$target.removeClass('top middle bottom align-left align-right top-left top-right bottom-left bottom-right').addClass($(this).val());//('vertical-align',$(this).val());\n		var grp = ftGetGrp( $('#ft'+$target.attr('id')) );\n		if(typeof grp!=='undefined'){\n			grp['class'] = (''+grp['class']).replace(/top|middle|bottom/g,'');\n		}\n\n		var thisVal\n\n		if ( $(this).val() == 'top' || $(this).val() == 'middle' || $(this).val() == 'bottom' ){\n			thisVal = 'center'\n		} else if( $(this).val() == 'align-left' || $(this).val() == 'top-left' || $(this).val() == 'bottom-left' ){\n			thisVal = 'left'\n		} else if(  $(this).val() == 'align-right' || $(this).val() == 'top-right' || $(this).val() == 'bottom-right'  ) {\n			thisVal = 'right'\n		}\n\n		updateAlignPicker(\"title-align-input\",thisVal,true);\n		updateAlignPicker(\"subtitle-align-input\",thisVal,true);\n\n		resetHeaderCoords();\n		finetuneLayoutChangesMade();\n	});\n\n	$('#host-image-wrap').click(function(){\n		pickAndOrCropNewImage($('#host-image-url'),{\n			done: function(newSrc,dims){\n				$('#host-image-url').val(newSrc).trigger('change');\n				setChangesMade();\n				$('#host-image-img').attr('src',newSrc).show();\n				$('#element-host').find('.hosted-by-img').attr('src',newSrc).show();\n			}\n			,aspectRatio: 1 // for the square\n		});\n	});\n\n	//clicking the white label sell\n	$(\"#splugSell\").click(function(e){\n		$(\"#white-label-sell\").fireSimpleModal();\n		trackIndicativeEvent('clickedSplugUpsell');\n		return false;\n		// End White Label Open\n	})\n\n	$('#main-canvas').on('click','a.hashLink',function(e){\n		//if(finetuneOpen){//dont click through if hash.\n		$(this).focus();\n		e.preventDefault();\n		return false;\n		//}\n	});\n\n	$('#avatar-modal').on('click', '.settings-link', function(e){\n		e.preventDefault()\n		closeSimpleModal()\n		closeFinetuneBar()\n		$('body').addClass('settingsOpen').removeClass('dateVenueModal')\n		$('#nuTool').find('.toolBtn').removeClass('active')\n		return false\n	});\n\n	$('#designer-toggle').on('click', function(){\n		//ported over from edit-settings.js\n		//moved into avatar upload modal\n		var $t = $(this),\n	        designer_mode = '';\n\n		if($t.hasClass('active')){\n			$t.removeClass('active').parents('.toggle-wrap:first').addClass(\"active\")\n			/////Added a new function to handle the grossness that was this section\n			changeLayout.basic();\n			designer_mode = 'basic';\n			trackIndicativeEvent('BasicModeToggle');\n\n		} else {\n			/////Added a new function to handle the grossness that was this section\n\n			if( $(this).hasClass('builder-toggle') ){\n\n				$t.addClass('active').parents('.toggle-wrap:first').addClass(\"active\")\n\n				changeLayout.advanced();\n				designer_mode = 'builder';\n\n				trackIndicativeEvent('builderModeToggle');\n\n			} else {\n\n\n				var confirmMessage = '<div class=\"adv-mode-info\"><div class=\"title-wrap\"><div class=\"top-icon icon-f-tb-design\"></div><h3 class=\"semiBold\">Welcome to Designer Mode!</h3>' +\n									 '<h3 class=\"subtitle\">Let\\'s Get Started!</h3></div>' +\n									 '<div class=\"inner-wrap\"><div class=\"specify-fonts\"><h5 class=\"semiBold\">Specify Fonts</h5><p>Explore a deeper menu of font customization options.</p></div>' +\n									 '<div class=\"tweak-colors\"><h5 class=\"semiBold\">Tweak Colors</h5><p>Customize with colors not featured in our pre-set swatches</p></div>' +\n									 '<div class=\"modify-themes\"><h5 class=\"semiBold\">Modify Themes</h5><p>Make modest changes to your page\\'s layout and content hierarchy.</p></div></div></div>';\n\n				var goToMode = function(){\n					$t.addClass('active').parents('.toggle-wrap:first').addClass(\"active\")\n					changeLayout.designer();\n\n					fakeModeLoad()\n					trackIndicativeEvent('designerModeToggle');\n				}\n\n				if( shownDesignerWarning() ){\n\n					goToMode()\n\n				} else {\n\n					SplashUI.confirm(function(confirm) {\n\n						if(confirm){\n							JSCookies.setItem('shownDesignerWarning', true, Infinity, '/', 'splashthat.com');\n							goToMode()\n						}\n\n						$('body').removeClass('designer-intro')\n\n					}, confirmMessage, 'Enter Now', 'designer-mode-modal');\n\n					$('body').addClass('designer-intro')\n\n				}\n\n			}\n\n		}\n\n	});\n\n	$('#builder-toggle').on('click', function(){\n		//ported over from edit-settings.js\n		//moved into avatar upload modal\n		var $t = $(this),\n	        designer_mode = '',\n	        goToMode = function() {\n				if($t.hasClass('active')){\n					$t.removeClass('active').parents('.toggle-wrap:first').addClass(\"active\")\n					/////Added a new function to handle the grossness that was this section\n\n					changeLayout.viewAsUser();\n\n					changeLayout.basic();\n					designer_mode = 'basic';\n\n					JSCookies.setItem('viewAsBuilder', false)\n\n					$('#designer-toggle').removeClass('builder-toggle').siblings('span:first').text('Designer Mode')\n				} else {\n					$t.addClass('active').parents('.toggle-wrap:first').addClass(\"active\")\n					/////Added a new function to handle the grossness that was this section\n\n					changeLayout.viewAsBuilder();\n\n					changeLayout.advanced();\n					designer_mode = 'builder';\n					trackIndicativeEvent('advancedModeToggle');\n\n					JSCookies.setItem('viewAsBuilder', true)\n\n					$('#designer-toggle').addClass('builder-toggle').siblings('span:first').text('Builder Mode')\n				}\n\n				fakeModeLoad()\n\n	        }\n\n		goToMode();\n\n	});\n\n	$('#viewSettings').click(function(event){\n		event.preventDefault();\n\n		if( $('body').hasClass('settingsOpen') ){\n			$('body').removeClass('settingsOpen')\n		} else {\n			closeFinetuneBar()\n			$('body').addClass('settingsOpen').removeClass('dateVenueModal')\n\n			resetSettingsTab()\n			//openPlannersModal();\n\n			$('#nuTool').find('.toolBtn').removeClass('active')\n			if($('#settingsFAQWrap').hasClass('loaded')) {\n        	//don't load data\n	        }\n	        else {\n				$.ajax({\n					url: constants.finetune_formBase+\"/faq/remoteFaq\",\n					data: {}\n				}).done(function(response) {\n					$('#settingsFAQWrap').html(response);\n					$(\".questionsByCategory:first\").removeClass('hide');\n\n					$('#settingsFAQWrap').find('a').each(function(){\n						$(this).attr('target', '_blank')\n					})\n\n					$('#settingsFAQWrap').addClass('loaded');\n				});\n			}\n\n			trackIndicativeEvent('settingsModalOpen');\n		}\n\n		return false;\n	});\n\n\n	// Check thru AJAX if the user has hubs to add this event to\n	function settingsModalLoadAddToHubBtn() {\n		$('.addEventToHubWrap').find('.event-hub-row').remove();\n		$.ajax({\n			url:\"/events/getHubs/\"+_event.id,\n			data: { 'get_hubs_where_published':true, 'has_any':true },\n			type: \"POST\"\n		}).done(function(response) {\n			response = $.parseJSON(response);\n			if ( typeof response['hubs'] != 'undefined' && response['hubs'] == true ) {\n				$('.addEventToHubWrap').removeClass('hide');\n\n				if ( typeof response['hubs_where_published'] != 'undefined' && response['hubs_where_published'].length > 0 ) {\n					$hub_rows = $();\n					for ( var i in response['hubs_where_published'] ) {\n						$hub_rows = $hub_rows.add(\n							$('.addEventToHubWrap').find('.event-hub-row-template:first').clone()\n							.find('.hub-name').text( response['hubs_where_published'][i]['Event']['title'] )\n												.attr('href', 'http://'+response['hubs_where_published'][i]['Event']['event_domain'] )\n												.attr('alt', response['hubs_where_published'][i]['Event']['title'] ).end()\n							.find('.event-hub-id').val( response['hubs_where_published'][i]['Event']['id'] ).end()\n							.find('.splash-feed-id').val( response['hubs_where_published'][i]['SplashFeed']['id'] ).end()\n							.removeClass('hide').removeClass('event-hub-row-template').addClass('event-hub-row')\n						);\n					}\n					$('.addEventToHubWrap .sectionTitle span').text( response['hubs_where_published'].length );\n					$('.addEventToHubWrap .sectionTitle').removeClass('hide');\n					$('.addEventToHubWrap .event-hub-row-template:first').after($hub_rows);\n					$('#addToHubLink').text('Add to another hub');\n				}\n\n				// if no hubs\n				else {\n					$('.addEventToHubWrap .sectionTitle').addClass('hide');\n				}\n			}\n		}).fail(function(jqXHR, textStatus, errorThrown) {\n			console.error('Error getting hubs: '+jqXHR.status+', '+textStatus);\n		});\n	}\n	settingsModalLoadAddToHubBtn();\n\n\n	$(\"#settings-link,#innerEditSettingsLink, #payout-change-page-action\").click(function(event){\n		event.preventDefault();\n\n		if( $('body').hasClass('settingsOpen') ){\n			$('body').removeClass('settingsOpen showSimple')\n		} else {\n			$('body').addClass('settingsOpen');\n		}\n\n		return false;\n	});\n\n	$(\"#saveEventSettings\").click(function(){	//SAVE SETTINGS MODAL\n		var $this = $(this);\n\n		if( $('#org-name-input').val().length != 0 || $('#org-email-input').val().length != 0 ){\n			// IF USER TYPED IN A PLANNER, but DINDT CLICK 'ADD PLANNER' (UNSAVED PLANNER)\n			SplashUI.confirm(function(response) {\n				if(response) saveEventSettings();\n			}, 'You have an unsaved planner. Continue?');\n		} else {\n			saveEventSettings()\n		}\n\n\n	});\n\n	//image position grid.\n	$('#finetune-all-tools,#advancedImgUtils').on('click','.squarePosWrap .squarePos',function(){\n		var $t = $(this);\n		$t.addClass('selected').siblings('.squarePos').removeClass('selected');\n		$t.parents(\".squarePosWrap:first\").find(\"input.background-position:first\").val($t.attr(\"pos\")).trigger('change');\n	});\n\n	//inline edit form change.\n	$(\"#rsvp-inline-checkbox\").change(function(){\n		$(\"#rsvp-inline-theme-style\").val($(this).val());//keep em together.\n		reloadRSVPBlock();\n		$(this).addClass('changes-made');\n		setChangesMade();\n\n		if( $(this).val() == 1 ){\n			$('body').addClass('inlineForm')\n		} else {\n			$('body').removeClass('inlineForm')\n		}\n\n	});\n\n	$(\"#rsvp-open-checkbox\").change(function(){\n		$(this).addClass('changes-made');\n		setChangesMade();\n	});\n\n	$('#finetune-all-tools').on('click', '.contentTabHead', function(){\n		$t = $(this)\n		$wrap = $(this).parents('.contentTabWrap:first')\n		if(  $('#sections-wrap').hasClass('sorting') ){\n			$('#inline-reorder-done').click()\n		}\n\n		toggleContentTab($wrap);\n		setVisibleAccordionHeight();\n 	})\n\n	$('#sections-wrap').find('.addSecBtn').mouseenter(function() {\n		$s = $('#sectionTabHead').find('.customTitle')\n		$s.text('Add Section')\n		$('#sectionTabHead').addClass('hideAfter')\n		//$s.css({\"font-family\":\"gibsonSemiBold\", \"color\":\"#000\"})\n	}).mouseleave(function() {\n		$s = $('#sectionTabHead').find('.customTitle')\n		$s.text('Custom')\n		$('#sectionTabHead').removeClass('hideAfter')\n	});\n\n	$('#sections-trig').click(function(){\n		if($(\"#sections-wrap\").hasClass('empty')){\n			$('#sections-wrap .addSecBtn').click();\n			return false\n		}\n		// closeCustomizeWrap();\n		$(\"#fontColorSelect,#fontFamilySelect\").removeClass('open');\n	});\n\n	$('#toggleCustomFont').on('click', function(){\n\n		if( $('#finetune-sections').find('.fontContain').hasClass('editCustom') ){\n			// do nothing on click if editing custom fonts\n		} else {\n			if( ! $('#customFontBtn').hasClass('save') ){\n				$('#customFontBtn').addClass('save').text('Save')\n				$('#fontText').text('Cancel').addClass('cancel').show().removeClass('done nu-btn clean s')\n				$('#finetune-sections').find('.fontContain').addClass('editCustom').removeClass('selectCombo')\n			} else {\n				cancelCustomFontSelect()\n				$('#fontText').text('Done').addClass('done')\n			}\n		}\n	})\n\n	$('#browsingFontText').on('click', '.closeBtn', function(){\n		$('#finetune-sections').find('.fontContain').removeClass('selectCombo editPrimary editSecondary')\n	})\n\n	$('#host_theme_styles').on('click', '.hideHostImg', function(){\n		var $t = $(this);\n\n		if( $t.hasClass('is-hidden') ){\n			$t.removeClass('is-hidden');\n			$('#host-img-block-wrap').show()\n			$('#finetune-hide_host_image').val(0).trigger('change')\n		} else {\n			$t.addClass('is-hidden');\n			$('#host-img-block-wrap').hide()\n			$('#finetune-hide_host_image').val(1).trigger('change')\n		}\n		setChangesMade();\n	})\n\n	$(\"#splash-container\").on('click','a.imgLink',function(e){\n		e.preventDefault();\n		return false;\n	})\n\n	$(\"#fontColorSelect\").click(function(){\n		$(\"#sections-wrap,#fontFamilySelect\").removeClass('open');\n		//closeCustomizeWrap();\n	});\n	$(\"#fontFamilySelect\").click(function(){\n		$(\"#sections-wrap,#fontColorSelect\").removeClass('open');\n		//closeCustomizeWrap();\n	});\n\n	$(\"#rsvp-bg-color-picker\").change(function(){\n		// $(\"#rsvp-submit\").css('background-color',$(this).val());\n		$(\"#rsvp-form-top\").css('border-bottom','1px solid '+$(this).val());\n	});\n\n	$(\"#headerIsBg\").change(function(){\n		updateHeaderAndBodyPicker();\n		setChangesMade();\n	});\n\n	$(\"#useThemeHeader\").change(function(){\n		setChangesMade();\n	});\n\n	$(\"#finetune-all-tools\").on('change','input.admin-field',function(){\n		setChangesMade();\n	});\n\n	$(\"#favIconInput\").change(function(){\n		var $t = $(this);\n		updateFavIcon($t.val());\n	});\n\n	ftWidth = $(\"#finetune-block\").width();\n	bottomUtilHeight = 0//$('#bottom-util').outerHeight();\n\n\n	$(\"#vanity-url-sell-instructions\").on('click',\"#backToSettingsBro\",function(){\n		$('#vanity-url-sell-instructions').hide();\n		$(\"#settings-link\").click();\n	});\n\n	$('#addVidBtn').click(function(){\n		var vidID = $('#vidInput').val().match(/youtube\\.com.*?v[\\/=](\\w+)/);\n\n		if(vidID != null){\n			vidID = vidID[1];\n			var startTime = 0;\n\n			$('#imgContentWrap').find('.latestVid').addClass('loading').html('<iframe id=\"demoPlayer\" vidID=\"'+vidID+'\" width=\"100%\" height=\"265px\" src=\"//www.youtube.com/embed/'+vidID+'?version=3&rel=0&showinfo=0&autohide=1\" frameborder=\"0\" allowfullscreen=\"\"></iframe>');\n			setTimeout(function(){\n				$('#imgContentWrap').find('.latestVid').removeClass('loading');\n			},500);\n			$('#currentImage').addClass('editVid').click();\n\n		} else {\n			alert( 'Please enter a valid URL.' );\n			$(\"#vidInput\").focus();\n		}\n\n	});\n\n	$('#allSectionsContain').on('click','.arrowLeft,.arrowRight,.layBtnWrap', function(){\n		var dir = ($(this).hasClass('arrowRight'))?'right':'left';\n		flipMode($(this),{ direction: dir, force: true });\n	});\n\n	$(\"#finetune-all-tools\").on('click','.nu-pill > div',function(){\n		$(this).addClass('active').siblings().removeClass('active').parents(\".nu-pill:first\").find(\"input:first\").val($(this).attr(\"value\")).trigger('change');\n	});\n\n	$('#topFinetune').on('click', '.closeFinetune', function(){\n		closeFinetuneBar();\n	})\n\n\n\n	$(\"#stagesWrap\")\n		.on('click','button.createNewStage',function(){\n			var $t = $(this);\n			createNewStage( { button:$t } )\n		})\n		.on('click','button.createNewBackup',function(){\n			var $t = $(this);\n			var params = {};\n			params.button = $t\n			params.isBackup = true\n\n			var backupName = 'Backup'\n			params.stageName = backupName\n\n			createNewStage( params )\n		})\n		.on('click','.publishStage, .publishBackup',function(){\n			var stage_id = $(this).parents(\".stage:first\").data('stage-id');\n\n			var msg = 'You are about to publish this stage. Are you sure you want to proceed?'\n\n			if( $(this).hasClass('publishBackup') ){\n				msg = 'You are about to publish this backup. Are you sure you want to proceed?'\n			}\n\n			SplashUI.confirm(function(resp) {\n				if(resp) {\n					publishStage( stage_id )\n				}\n			}, msg);\n\n		})\n		.on('click','.previewStage, .previewBackup',function(){\n		//	window.location = $(this).data(\"temp-href\")+'?stage='+$(this).parents(\".stage:first\").data('stage-id');\n			var $t = $(this);\n\n			var msg = 'Please confirm you want to preview this stage.  The page will be refreshed and any unsaved changes will be lost.';\n\n			if( $t.hasClass('previewBackup') ){\n				msg = 'Please confirm you want to preview this backup.  The page will be refreshed and any unsaved changes will be lost.';\n			}\n\n			SplashUI.confirm(function(resp) {\n				if(resp) {\n					if ( constants.finetune_formBase !== '' && constants.ocbDomain !== 'splashthat.com' ) // local environment\n						window.location = 'http://' + constants.ocbDomain + constants.finetune_formBase + '?stage='+$t.parents(\".stage:first\").data('stage-id');\n					else\n						window.location = 'http://' + constants.domain + '?stage='+$t.parents(\".stage:first\").data('stage-id');\n				}\n			}, msg );\n		})\n		.on('click','.scheduleStage',function(){\n			var $sch_opts = $(this).closest('.stage').find('.scheduling-opts');\n			var $stg_utils = $(this).closest('.stage').find('.stage-utils');\n			if ( $sch_opts.is(':visible') ) {\n				$sch_opts.hide();\n				$stg_utils.show();\n			}\n			else {\n				$sch_opts.css('display','inline');\n				$stg_utils.hide();\n			}\n		})\n		.on('click','.cancel-scheduling-opts',function(){\n			$(this).closest('.stage').find('.scheduling-opts').hide().end().find('.stage-utils').show();\n		})\n		.on('click','.save-scheduling-opts',function(){\n			var scheduled_for_val = $(this).parents(\".stage\").find('.mode-scheduling-opts').val();\n			var params = { stage_id: $(this).parents(\".stage\").data('stage-id'), event_id: constants.event_id, fields: { scheduled_for: scheduled_for_val } };\n			editStage(params, $(this).parents(\".stage\"));\n		})\n		.on('click','.unschedule-scheduling-opts',function(){\n			var params = { stage_id: $(this).parents(\".stage\").data('stage-id'), event_id: constants.event_id, fields: { scheduled_for: 'NULL' } };\n			editStage(params, $(this).parents(\".stage\"));\n		})\n		.on({\n			focus: function(){\n				var $t = $(this);\n				$t.data('tmp-val',$t.val()).parents(\".stage:first\").addClass('editing');\n			},\n			focusout:function(){\n				var $t = $(this);\n				if($t.val().trim()==''){\n					$t.val($t.data('tmp-val'));\n				}\n				$t.parents(\".stage:first\").removeClass('editing');\n			},\n			keyup:function(e){\n				if(e.keyCode==13){\n					$(this).focusout().parents(\".stage:first\").focus();\n					//$(\"button.createNewStage:first\").focus();//get out of the input.\n				}\n			},\n			change:function(){\n				var params = { stage_id: $(this).parents(\".stage\").data('stage-id'), event_id: constants.event_id, fields: { name: $(this).val() } };\n				editStage(params);\n			}\n		},'input.stage-input')\n		.on('click','.stage-utils .nu-btn',function(){//done editing button.\n			$(this).parents(\".stage:first\").find(\"input.stage-input\").focusout();\n		})\n		.on('click','.deleteStage, .deleteBackup',function(){\n			var $t = $(this);\n			var params = { stage_id: $(this).parents(\".stage\").data('stage-id'), event_id: constants.event_id, fields: { deleted: 1 } };\n\n			var msg = 'Are you sure you want to delete this stage?'\n\n			if ( $(this).hasClass('deleteBackup') ){\n				msg = 'Are you sure you want to delete this backup?'\n			}\n\n			SplashUI.confirm(function(resp) {\n				if(resp) {\n					editStage(params);\n					var event_stage_id = $(\"#event-stage-id\").val();\n					if(event_stage_id==params.stage_id){\n						$(\"#event-stage-id\").val(0).addClass('changes-made');\n					}\n					$t.parents(\".stage:first\").fadeOut(function(){\n						$(this).remove();\n						setTimeout(function(){\n							if($(\"div.stages-list\").find(\".stage\").length < 1){\n								$(\"#no-stages-msg\").show();\n							}\n						},1);\n\n					});\n				}\n			}, msg);\n\n		});\n\n	$(\"#stagesWrap .stages-list\").sortable({\n		handle: '.drag-handle',\n		update:function(){\n			var params = {\n				event_id: constants.event_id,\n				stages: []\n			}\n			$(\"#stagesWrap\").find(\".stages-list .stage\").each(function(){\n				params.stages.push($(this).data('stage-id'));\n			});\n			$.ajax({\n				url:\"/splash/saveStagingOrder\",\n				data: params,\n				type: 'POST',\n				dataType:'json',\n				success:function(resp){\n\n				},\n				error:function(){\n					alert('There was an error saving your changes.  Please try again.');\n				}\n			});\n\n		}\n	})\n\n	//publishing from the PREVIEW of a stage.\n	$(\"#publishStage2\").click(function(){\n		var $t = $(this);\n		if($t.hasClass('active')){//no double clicks.\n			return false;\n		} else{\n			$t.addClass('active');\n			$(\"#event-stage-id\").attr(\"switched\",true).val(constants.stage_edit).addClass('changes-made');\n			constants.stage_edit = false;//IMPORTANT.  Otherwise will submit as an edit to the stage, rather than submitting it.\n			clearTimeout(savingTimer);\n			savingTimer = setTimeout(autoSaveData, 10);\n		}\n	});\n\n\n	$('#previewPage').click(function(){//clicking the \"preview link\"\n		trackIndicativeEvent('previewPage');\n	});\n\n	$('#topImageNav').on({\n\n		click: function(){\n\n			$(this).addClass('active').siblings().removeClass('active')\n\n			$('body').removeClass('changedBgColor')\n\n			var tab = $(this).attr('tab')\n\n			if( $(this).hasClass('editVid') ){\n				tab = 'currentVid'\n\n			}\n\n			hideShowTabs(tab)\n\n			if( tab == 'video' ){\n				$('#main-canvas').find('.vidBG').removeClass('vidHid');\n			}\n\n		},\n		mouseenter: function() {\n			var $obj = $('#cropAnyPhoto').find('h3').find('.h3text');\n			var $t = $(this);\n			$thisText = $obj.text();\n\n			$('#cropAnyPhoto h3 .h3text').attr( 'lastText', $thisText )\n\n			if( $t.hasClass('upload') ){\n				$obj.text('Upload Image');\n			} else if ( $t.hasClass('gallery') ) {\n				$obj.text('Select from Gallery')\n			} else if ( $t.hasClass('editCurrent') ){\n				$obj.text('Edit Image');\n			} else if ( $t.hasClass('addVid') ){\n				$obj.text('Choose Video');\n			} else if ( $t.hasClass('addColor') ) {\n				$obj.text('Pick Color')\n			}\n		},\n		mouseleave: function() {\n			if( ! $(this).hasClass('active') ){\n				$lastText = $('#cropAnyPhoto h3 .h3text').attr('lastText')\n				if( $lastText != '' ){\n					$('#cropAnyPhoto h3 .h3text').text( $lastText )\n				} else {\n					$('#cropAnyPhoto h3 .h3text').text('Edit Image')\n				}\n			}\n		}\n	},'.topNavBtn');\n\n	$('#toggleAdvancedImgUtils').on('click', function(){\n		$advToggleBtn = $('#advancedImgUtils')\n		if( $advToggleBtn.hasClass('showAdvTools') ){\n			$advToggleBtn.removeClass('showAdvTools')\n		} else {\n			$advToggleBtn.addClass('showAdvTools')\n		}\n	})\n\n	$('#leftSideClose').on({\n		mouseenter:function(){\n			$('#event-planners-modal').addClass('hoverOnLeft')\n		},\n		mouseleave:function(){\n			$('#event-planners-modal').removeClass('hoverOnLeft')\n		},\n		click: function(event){\n			event.preventDefault()\n			closePlannersTab()\n			return false\n		}\n	})\n\n	$('#addPlannerBtn').on('click', function(event){\n\n		event.preventDefault()\n\n		$t = $('#event-planners-modal')\n		if( $t.hasClass('expanded') ){\n			closePlannersTab()\n		} else {\n			$t.addClass('expanded').removeClass('sidebar')\n			$('#edit-settings').addClass('plannersOpen')\n		}\n\n		return false\n\n	})\n\n\n	$('#event-planners-modal').on('click', function(event){\n		if( $(this).hasClass('sidebar') ){\n			event.preventDefault()\n				$(this).addClass('expanded').removeClass('sidebar')\n				$('#edit-settings').addClass('plannersOpen')\n			return false\n		}\n	})\n\n	$('#firstViewOverlay').on('click', '.nextBtn', function(){\n\n		$overlay = $('#firstViewOverlay')\n\n		if( $overlay.hasClass('showDesign') && $('body').hasClass('advMode') === false ){\n\n			$overlay.removeClass('showPlanning showDesign')\n\n			setTimeout(function(){\n				$('#nuToolBtns').find('.toolBtn').removeClass('fvFlash')\n			}, 250)\n\n			setTimeout(function(){\n				$(this).text('NICE!')\n				$overlay.find('.bigText').html('Click here to add </br>content to your page.');\n				$overlay.find('.progressText').text('2');\n				$overlay.removeClass('pointerPos1').addClass('pointerPos2');\n\n				positionTut('bottom')\n\n				$overlay.addClass('showContent')\n\n				$overlay.find('.firstViewInfo').css({'top':'', 'bottom':'-80px', 'left':'180px' })\n\n				$('#nuAddSecBtn').css('z-index', '2')\n\n			}, 480)\n\n		} else {\n\n			$overlay.removeClass('showContent')\n			$('body').addClass('addEleTut')\n\n			$('#nuAddSecBtn').css('z-index', '')\n\n			setTimeout(function(){\n\n				killFirstView()\n			}, 250)\n\n		}\n	});\n\n	$('#firstViewOverlay').on('click', '.skipText', function(){\n		killFirstView()\n	});\n	$('#secondViewOverlay').on('click', '.skipText', function(){\n		killSecondView()\n	});\n\n	function closePlannersTab(){\n		$t = $('#event-planners-modal')\n		$t.removeClass('expanded').addClass('sidebar')\n		$('#edit-settings').removeClass('plannersOpen')\n	}\n\n	function flashPlanNav(){\n\n		$('#planningToolsNav').addClass('pulse')\n\n		setTimeout(function(){\n			$('#planningToolsNav').removeClass('pulse')\n		}, 1000)\n	}\n\n	//clicking right side tabs ( theme, color and social.  form, rsvp, invite, planning are in dashboard.js)\n	$('#nuToolBtns').on('click', '.toolBtn', function(event){\n\n		if(unsavedSettings){\n			showUnsavedNotice()\n			flashPlanNav()\n			return false;\n		}\n\n		if( $('body').hasClass('noPayoutData') ){\n			$('.pop-wrap1').remove();\n			$('body').removeClass('noPayoutData')\n		}\n\n		if ( $('body').hasClass(\"noTickets\") ){\n			$('.pop-wrap2').remove();\n			$('body').removeClass('noTickets')\n		}\n\n\n		resetDesignTabs();\n\n		$('#finetune-block').attr('tab', $(this).attr('tab'))\n\n		if( $('body').hasClass('showTutorial') || $('#planningToolsNav').hasClass('unsavedChanges') ){\n			if( $(this).hasClass('theme') && $('#firstViewOverlay').hasClass('showDesign') ){\n				// IF CLICKING THEME TAB DURING TUTORIAL OPEN SIDEBAR\n				killFirstView()\n			} else {\n				// OTHERWISE, RETURN FALSE\n				event.preventDefault()\n				return false\n			}\n		}\n\n		var $t = $(this),\n			$btns = $('#nuToolBtns,#nuPlanBtns').find('.toolBtn'),\n			$fcs = $(\"#fontColorSelect\");\n		var $current = $('#nuToolBtns').find(\".active:first\");//find the active current button.\n		if($current.length > 0){\n			//close whatever open actions we may have on the previously opened tab (if applicable).\n			closeCurrentTab($current.attr(\"tab\"));\n		}\n\n		if($t.hasClass('active')){ //CLOSE the section.\n			$t.removeClass('active');\n			var thisClass = $t.attr(\"tab\");\n			if( thisClass == 'theme' ){\n				$('body').removeClass('editFonts editColors')\n				resizeColorWheel()\n\n			}\n			closeFinetuneBar();\n		} else { //OPENING the section.\n			$btns.removeClass('active');\n			$t.addClass('active');\n			openFinetuneBar();\n\n			var thisClass = $t.attr(\"tab\");\n			$(\"#topFinetune\").find(\".thisSec\").text(thisClass.toUpperCase());\n			var classes=[];\n			$btns.each(function(){\n				classes.push($(this).attr(\"tab\"));\n			});\n			$(\"#finetune-sections\").removeClass(classes.join(' ')).addClass(thisClass);\n			trackIndicativeEvent('tabOpened', { 'type' : thisClass });\n\n			if(thisClass=='fonts'){\n				bindSplashAccordion($('#fontFamilySelect'),true);\n			} else if(thisClass =='theme'){\n				$(\"#finetune-back-btn\").addClass('hide');\n				bindSplashAccordion($fcs,true);\n				setInnerTabHeight()\n			}\n			else if(thisClass=='content'){\n				$('#nestedLayoutContainer').removeClass('isBasicEle')\n				$('#sections-wrap').removeClass('sorting')\n				$('#allSectionsContain').find('.contentTabWrap').removeClass('open')\n				setTimeout(function(){\n					setWindowHeight($(\"#allSectionsContainInner\"));\n					if(inAdvancedMode()){\n						$('#finetune-layout-contain').find('.grp-wrapper').removeClass('hide');\n						$(\".ft-grp\").find('.title').removeClass('hideSideBar');\n					}\n				},10);\n				updateFinetuneSectionCountDisplay() // COUNT SECTIONS, add EMPTY CLASS IF NONE\n\n			}\n\n		}\n\n	});\n\n\n	$('#planTab').mouseenter(function(){\n		$('#nuTool').addClass('bottomOpen').removeClass('topOpen')\n	});\n\n	$('#nuToolBtns').on({\n		mouseenter:function(){\n			$('#nuTool').addClass('topOpen').removeClass('bottomOpen')\n		}\n	}, '.toolBtn.theme')\n\n\n	$('#nuToolBtns').on('mouseleave', function(){\n		$('#nuTool').removeClass('topOpen')\n	})\n\n	$('#nuPlanBtns').on('mouseleave', function(){\n		$('#nuTool').removeClass('bottomOpen')\n	})\n\n	// the newly uploaded photo bulk editor save\n	$('#galleryWrap').on('click',\".savePublish\",function(){////////,#bulkUploadStatus .formTray .savePublish, #bulkUploadStatus .formTray .saveNoPublish\",function(){\n		var field = 'caption,credit';\n		var $bus = $('#bulkUploadStatus');\n		var data = { caption: '', credit: '', publish: 0, notify: 0 };\n		data.caption = $bus.find('.photo-form-fields .field.caption').val();\n		data.credit = $bus.find('.photo-form-fields .field.credit').val();\n		if ( $(this).hasClass('savePublish') ) data.publish = 1;\n		if ( $bus.find('input.notifyTeam').is(':checked') ) data.notify = 1;\n		var ids = '';\n		var newOnes = [];\n		var $holder = $(\"#galleryNewUploads\").find(\".qq-upload-list\");\n		$holder.find(\"div.qq-upload-success\").each(function(){\n			var $p = $(this);\n			ids += $p.attr('event_photo_id')+\",\";\n			newOnes.push({id:$p.attr('event_photo_id'),src:$p.attr('src'),'full-image':$p.attr('full-image')});\n		});\n		$holder.empty();\n		var params = { event_id: constants.event_id, field: field, data: data, event_photo_id: ids };\n		var dontAddToMainGallery = false;\n		if (gallerySplashFeedId !== false) {\n			params.data.splash_feed_id = gallerySplashFeedId;\n			dontAddToMainGallery = true;\n			var $sf = $(\"#sfid-\"+gallerySplashFeedId);\n		}\n\n		if($(\"#temp-gallery-holder\").length > 0){\n			$(\"#temp-gallery-holder\").remove();\n		}\n		// do the post\n		$.post(\"/events/editEventPhoto/\"+constants.slug,params,function(result){\n\n			if ( data.publish ){\n				if(dontAddToMainGallery){\n\n					if(typeof $sf!=='undefined'){\n\n						for ( x in newOnes ){\n							//add it to the end of the carousel.\n							var $item = $sf.find(\"div.img-gal-item:first\");\n							if($item.length < 1){\n								var $item = $('<div class=\"txtL grp sh sf list-item img-gal-item wImg media\" epid=\"'+newOnes[x]['id']+'\" block-type=\"img-gal\"><div class=\"grp media image relative\">'+\n									'<img thumb-src=\"\" src=\"/images/new-loader-burst.gif\"></div></div>');\n							}\n\n							var $new_block = $item.clone().addClass('newCarouselImg');\n							$sf.find(\".slides\").append($new_block);\n							$new_block.find(\"img\").removeClass('unloaded').prop(\"src\",newOnes[x]['full-image']).attr({ \"thumb-src\":newOnes[x].src });\n\n						}\n\n						setTimeout(function(){\n							var $carousel = $sf.find(\"div.carousel\");\n							$carousel.find(\".newCarouselImg:first\").addClass('current').siblings().removeClass('current');\n\n							$carousel.activateCarousel();\n							$carousel.slideToCurrent();\n\n							$carousel.find(\"div.newCarouselImg\").removeClass('newCarouselImg');\n						},100);\n\n\n					}\n\n\n				} else {\n					//$('#event-photos').prepend(result);\n					for ( x in newOnes ){\n						var $new_block = $(\"#blank-photo\").find(\"div.photo-thumb:first\").clone();\n						$new_block.attr('event-photo-id',newOnes[x]['id']);\n						$img = $new_block.find(\"div.inner\").find(\"img.th\");\n						$img.attr({\n							\"lazy-src\":newOnes[x]['full-image'],\n							\"src\":$img.attr('loading-src'),\n							\"full-src\":newOnes[x]['full-image'],\n							\"thumb-src\":newOnes[x].src,\n							\"thumbnail-position\":'',\n							\"photo-id\":newOnes[x].id\n						});\n						lazyLoad($img[0]);\n						$(\"#gallery-thumbs\").append($new_block);\n					}\n					galleryPresetLayout();\n					galleryAddFlowScroll();\n					gallerySortInit(true);\n					//updateAllCounts();\n					$('#uploadsWrap').removeClass('finished');\n				}\n			} else {\n				loadUnapprovedUploadedPhotos(1);\n			}\n		});\n\n		// hide the form\n		$bus.find('input,textarea').each(function(){\n			$(this).val('').removeAttr('checked');\n		});\n		$bus.removeClass('open').hide();\n		closeSimpleModal();\n	});\n\n	$('#inline-reorder-init').mouseenter(function() {\n   		$('#sectionTabWrap').addClass('reorderHovered');\n  	}).mouseleave(function() {\n	    $('#sectionTabWrap').removeClass('reorderHovered');\n  	});\n\n  	$(\"#rteCloseTextShadowPicker\").click(function(){\n  		$(\"#rteTextShadowPicker\").hide();\n  		$(\"div.mce-shadow-button\").removeClass('mce-active').attr(\"aria-pressed\",false);\n  	});\n  	$(\"#rteCloseTextSpacingPicker\").click(function(){\n  		$(\"#rteTextSpacingPicker\").hide();\n  		$(\"div.mce-spacing-button\").removeClass('mce-active').attr(\"aria-pressed\",false);\n  	});\n\n  	$(\"#rteTextSpacingPicker\").on('change','input',function(){\n  		//special check for lineheight/letter spacing for title/subtitle to override the theme_style setting.\n  		var $t = $(this),\n  			gid = $t.attr(\"gid\");\n\n  		if(typeof gid!=='undefined'){\n  			var $grp = $(\"#\"+gid);\n  			if(typeof $grp!=='undefined' && $grp.hasClass('element-title')||$grp.hasClass('element-subtitle') ){\n  				var id = ($grp.hasClass('element-title'))?'title':'subtitle';\n  				var input = ($t.hasClass('letter-spacing'))?'letter-spacing':'line-height';\n\n  				if(input =='line-height'){\n  					var $obj = $(\"#\"+id+'-'+input+'-slider-nu');\n  				} else {\n  					var $obj = $(\"#\"+id+'-'+input+'-slider');\n  				}\n\n  				if(typeof $obj!=='undefined'){\n  					$obj.val($t.val()).trigger('change');\n				}\n  			}\n  		}\n  	})\n  	$(\"#rteTextShadowPicker\").on('change','input',function(){\n  		//special check for text shadow for title/subtitle to override the theme_style setting.\n  		var $t = $(this),\n  			gid = $t.attr(\"gid\");\n\n  		if(typeof gid!=='undefined'){\n  			var $grp = $(\"#\"+gid);\n  			if(typeof $grp!=='undefined' && $grp.hasClass('element-title')||$grp.hasClass('element-subtitle') ){\n  				var id = ($grp.hasClass('element-title'))?'title':'subtitle';\n  				var $obj = $(\"#\"+id+'-text-shadow-input');\n  				if(typeof $obj!=='undefined'){\n  					$obj.val($t.val()).trigger('change');\n				}\n  			}\n  		}\n  	});\n\n  	/*$(document).on('mouseenter','.rteColorPicker .sp-input',function(){\n  		if(highlightedText==false){\n	  		highlightedText = getSelectionText();\n	  		highlightedNode = getSelectionNode();\n	  	}\n  	});*/\n\n	$('#finetune-layout-contain').on('keypress', '.style-ctrl', function(e){\n		if(e.which == 13) {\n			// ENTER PRESS\n			$(this).trigger('change')\n		}\n	})\n\n  	//deleting a photo from the carousel.\n  	$(\"#main-canvas\").on('click',\".delete-carousel-img\",function(){\n  		if(confirm('Are you sure you want to delete this photo?')){\n  			var $t = $(this),\n  				$img = $t.parents(\".img-gal-item:first\"),\n  				$parent = $t.parents(\".img-gal:first\"),\n  				$next = $img.next(\".img-gal-item\"),\n  				$prev = $img.prev(\".img-gal-item\");\n\n  			$img.fadeOut(300,function(){\n  				$t.parents(\".list-item:first\").find(\".edit-tools\").find(\"a.delete\").click();\n  				deleteListItem($t.parents(\".list-item:first\"));\n\n  				$img.remove();\n  				if($next.length > 0){\n  					$next.addClass('current');\n  					$parent.find(\".scrollRightContain\").click();\n  				} else if($prev.length > 0){\n  					$prev.addClass('current');\n  					$parent.find(\".scrollLeftContain\").click();\n  				} else if($parent.find(\".img-gal-item\").length == 1){\n  					//no more. delete the section?\n  					$parent.find(\".scrollRightContain,.scrollLeftContain\").hide();\n  				} else if($parent.find(\".img-gal-item\").length < 1){\n  					$parent.find(\".scrollRightContain,.scrollLeftContain\").hide();\n  				}\n\n  			});\n  		}\n  	});\n\n  	//theme paginating.\n  	$('#theme-arrow-left,#theme-arrow-right').on('click', function(){\n  	    var $act = $('#public-themes-contain').find('.active.theme-option');\n  		if($(this).prop(\"id\")=='theme-arrow-left'){ //going LEFT\n	  		var $nxt = $act.prev('.theme-option'),\n	  			$fallback = $('#public-themes-contain').find('.theme-option:last')\n  		} else { //going RIGHT\n  			var $nxt = $act.next('.theme-option'),\n  				$fallback = $('#public-themes-contain').find('.theme-option:first')\n  		}\n  		$act.removeClass('active')\n  		if( $nxt.length > 0 ){\n  			$nxt.addClass('active')\n  		} else {\n  			$fallback.addClass('active')\n  		}\n  	});\n\n\n  	if(inAdvancedMode()){\n		$('body').addClass('advMode');\n	}\n\n  	/*$(document).on('mouseenter','.rteColorPicker .sp-input',function(){\n  		highlightedText = getSelectionText();\n  		highlightedNode = getSelectionNode();\n  	})*/\n\n	$('#finetune-sections').on('click', '.open-darr', function(){\n		$t = $(this)\n		$par = $t.parents('.collapsable:first')\n		if( $par.hasClass('open') ){\n			$par.removeClass('open')\n		} else {\n			$par.addClass('open')\n		}\n	})\n\n	$('#dropdownAvatar').click(function(e){\n		e.preventDefault()\n		$('#avatar-modal').fireSimpleModal();\n\n		//set the state of the designer mode toggler\n		if( $('#designer-toggle').hasClass('builder-toggle') ){\n			$('#builder-toggle').addClass('active').parents('.toggle-wrap:first').addClass(\"active\")\n		} else {\n			$('#builder-toggle').removeClass('active').parents('.toggle-wrap:first').removeClass(\"active\")\n		}\n\n		trackIndicativeEvent('accountModalOpen');\n\n		return false\n	});\n\n	// this is to clear (or pre-populate) the custom element form\n	function customElementLibraryClearForm(data) {\n		var data = data || false;\n		if (data !== false && data.LayoutBlock) {\n			$(\"#element-lib-title\").val(data.LayoutBlock['title']);\n			$(\"#element-lib-description\").val(data.LayoutBlock['description']);\n			$(\"#element-lib-photo-field\").val(data.LayoutBlock['thumbnail']);\n			$(\"#element-lib-photo-img\").prop('src',data.LayoutBlock['thumbnail']);\n			$(\"#element-lib-photo-tags\").val(data.LayoutBlock['tags']);\n			$(\"#add-to-element-library\").find('.save').text('Update Element');\n		} else {\n			$(\"#element-lib-title\").val('');\n			$(\"#element-lib-description\").val('');\n			$(\"#element-lib-photo-field\").val('');\n			$(\"#element-lib-photo-img\").prop('src','http://local.splashthat.com/images/st-p-z-controll.png');\n			$(\"#element-lib-photo-tags\").val('');\n			$(\"#add-to-element-library\").find('.save').text('Save Element');\n		}\n	}\n	//adding an element/set of elements to element library.\n	$(\"#finetune-all-tools\").on('click','.add-to-element-library',function(){\n		var $ftg = $(this).parents(\".ft-grp:first\");//parent container.  acc-ftg-5 -> ftg-5.\n		var ftg_id = $ftg.prop('id').replace('acc-','');\n		var grp = ftGetGrp(ftg_id);\n		if (grp && grp.layout_block_id && grp.layout_block_id > 0) {\n			var $t = $(this);\n			var color = $t.css('background-color');\n			$t.css('background-color','#e2e2e2');\n			$.ajax({\n				url: constants.finetune_formBase+'/splash/pullCustomElement',\n				type: 'post',\n				dataType: 'json',\n				data: {\n					block_id: grp.layout_block_id\n				}\n			}).done(function(response){\n				if (response && response.LayoutBlock) {\n					customElementLibraryClearForm(response);\n					$(\"#add-to-element-library\").data('ftg-id',ftg_id).fireSimpleModal({ persistent: true, persistent_hard: true });\n				}\n			}).fail(function(){\n				customElementLibraryClearForm();\n				$(\"#add-to-element-library\").data('ftg-id',ftg_id).fireSimpleModal({ persistent: true, persistent_hard: true });\n			}).always(function(){\n				$t.css('background-color','');\n			});\n\n		} else {\n			customElementLibraryClearForm();\n			$(\"#add-to-element-library\").data('ftg-id',ftg_id).fireSimpleModal({ persistent: true, persistent_hard: true });\n		}\n		return false;\n	});\n	$(\"#add-to-element-library\").on('click','.save',function(){\n		var $this = $(this);\n		var params = {\n			fields: {\n				title: $(\"#element-lib-title\").val().trim(),\n				description: $(\"#element-lib-description\").val().trim(),\n				thumbnail: $(\"#element-lib-photo-field\").val(),\n				event_id: constants.event_id,\n				tags: ','+$(\"#element-lib-photo-tags\").val()+',' //super important to add tag comma at beginning and end.\n			}\n		};\n\n		if($this.hasClass('in-progress')){\n			return false;//no dblclick\n		}\n\n		if(params.fields.title==''){\n			alert('Please fill out a valid title.');\n			$(\"#element-lib-title\").focus();\n			return false;\n		}\n		if(params.fields.description==''){\n			alert('Please fill out a valid description.');\n			$(\"#element-lib-description\").focus();\n			return false;\n		}\n		if(params.fields.thumbnail==''){\n			alert('Please fill out a valid photo.');\n			//$(\"#element-lib-title\").focus();\n			return false;\n		}\n		$this.addClass('in-progress').text('Saving..');\n		$this.parents(\".simple-modal:first\").removeClass('persistent_hard');\n\n		var ftg_id = $(\"#add-to-element-library\").data('ftg-id');\n		var $ftg = $(\"#\"+ftg_id);\n		var grp = ftGetGrp(ftg_id);\n		var layoutToSave = finetuneGetEventLayout(true,$ftg);\n		params.layout = layoutToSave;//finetuneGetEventLayout(true,$ftg);\n\n		if (grp && grp.layout_block_id) {\n			params.fields.id = grp.layout_block_id;\n		}\n\n		$.ajax({\n			url:\"/splash/saveCustomElement\",\n			data: params,\n			type: 'POST',\n			dataType: 'json',\n			success: function(response){\n				$this.removeClass('in-progress').text('Saved');\n				setTimeout(function(){\n					$this.text('Save');\n					closeSimpleModal();\n				},500);\n				if (response && response.block_id) {\n					grp.layout_block_id = response.block_id;\n					finetuneLayoutChangesMade();\n				}\n			},\n			error: function(){\n				alert('There was an error saving your changes.  Please try again.');\n				$this.removeClass('in-progress').text('Save');\n			}\n		});\n\n	});\n\n	$(\"#element-lib-photo-img,#element-lib-photo-img-btn\").click(function(){\n		pickAndOrCropNewImage($(\"#element-lib-photo-field\"),{\n			done: function(newSrc,dims){\n				//$(\"#add-to-element-library\").fireSimpleModal();\n				$(\"#element-lib-photo-field\").val(newSrc);\n				$(\"#element-lib-photo-img\").prop('src',newSrc)\n				return false;\n			}\n		});\n	});\n\n	$(\"#add-new-section\").on('click','ul.tabs a',function(e){\n		var tab = $(this).data('tab');\n		var $block = $(\"#\"+tab);\n		$(this).parents(\".tabs\").find(\".active\").removeClass('active');\n		$(this).addClass('active');\n		$block.fadeIn().siblings('.sectionType').hide();\n	});\n\n	///Modal Window on change\n	$(\".nav-modal-target\").change(function(){\n		var modalVal = $(this).val();\n		modal.linkModal(modalVal);\n	})\n\n	$(\"#splash-container .map\").on('click',\".embed-url\",function(event){//when you click a map on the page, open the embed modal instead of clicking out.\n		var $t = $(this).parents('.layoutGrp:first'),\n			block_type = $t.find('.sf:first').attr('block-type'),\n			gid = ftGetId($t);\n		event.preventDefault();\n		openEmbedModal(block_type,gid);\n		return false;\n	});\n\n	///init binding for videocheckboxes\n	$('#video-embed .videoCheckBoxes').on('click','label.autoplay-check',function(){\n		setTimeout(function(){\n		if($('.video-autoplay').val()==\"1\") {\n				videoOptions.checkAutoplay();\n			}\n			else if($('.video-autoplay').val()==\"0\"){\n				videoOptions.removeOption('autoplay');			}\n		},500);\n	});\n	$('#video-embed .videoCheckBoxes').on('click','label.controls-check',function(){\n		setTimeout(function(){\n		if($('.video-controls').val()==\"1\") {\n				videoOptions.checkControls();\n			}\n			else if($('.video-controls').val()==\"0\"){\n				videoOptions.removeOption('controls');\n			}\n		},500);\n	});\n	$('#video-embed .videoCheckBoxes').on('click','label.loop-check',function(){\n		setTimeout(function(){\n		if($('.video-loop').val()==\"1\") {\n				videoOptions.checkLoop();\n			}\n			else if($('.video-loop').val()==\"0\"){\n				videoOptions.removeOption('loop');\n			}\n		},500);\n	});\n	$('#video-embed .videoCheckBoxes').on('click','label.sound-check',function(){\n		setTimeout(function(){\n		if($('.video-sound').val()==\"1\") {\n				videoOptions.checkMute();\n			}\n			else if($('.video-sound').val()==\"0\"){\n				//TODO: add an unmute once this works\n				//videoOptions.removeOption('sound');\n			}\n		},500);\n	});\n\n\n	$(\"#simple-modal-wrap\").on('click',\"#addEventToHub\",function(){\n		var $t = $(this);\n\n		if($t.hasClass('loading')){ return false; }\n\n		$t.addClass('loading').text('Saving..');\n\n		var hub_event_id = $(\"#hub-event-id\").val();\n		var event_id = $(\"#currentEventId\").val();\n\n\n		if(hub_event_id <= 0){\n			alert('Please select a valid hub.');\n			$(\"#eventHubDD\").addClass('pulse');\n			setTimeout(function(){\n				$(\"#eventHubDD\").removeClass('pulse');\n			},2000);\n			$t.removeClass('loading').text('Save');\n			return false;\n		}\n		var params = { hub_event_id: hub_event_id,  event_ids: event_id.split(',') };\n		if( $(\"#featureHubListing\").val()=='1' ){\n			params.featured = 1;\n		} else{\n 			params.featured = 0;\n		}\n\n		$.ajax({\n			url:\"/events/addEventToHub/\",\n			type: \"POST\",\n			data: params,\n		})\n		.done(function(response, status) {\n\n			response = $.parseJSON ( response );\n\n			if ( typeof response['saved'] != 'undefined' && response['saved'] == true ) {\n				$t.removeClass('loading').text('Saved.');\n				setTimeout(function(){\n					$t.text('Save');\n					closeSimpleModal();\n				},1000);\n				$(\"#reloadEventProfile\").click();\n				settingsModalLoadAddToHubBtn();\n			}\n			else {\n				alert('There was an error saving.  Please try again.');\n				$t.removeClass('loading').text('Save');\n				if ( typeof response['errors'] != 'undefined' ) {\n					console.log('Errors in adding event to hub: '+response['errors']);\n				}\n			}\n		})\n		.fail(function(xhr, options, error ) {\n			alert('There was an error saving.  Please try again.');\n			$t.removeClass('loading').text('Save');\n		});\n	});\n\n	// on the settings modal, this is the button to unpublish the current event from a hub\n	$(\"#edit-settings\").on('click','.removeFromHubBtn',function() {\n\n		$hub_row = $(this).closest('.event-hub-row');\n		var params = {\n			hub_event_id : $hub_row.find('.event-hub-id').val(),\n			splash_feed_id : $hub_row.find('.splash-feed-id').val()\n		}\n\n		$hub_row.find('.removeFromHubBtn').addClass('hide').end()\n			.find('.loader-splash').removeClass('hide');\n\n		$.ajax({\n			url:\"/events/removeEventFromHub/\"+_event.id,\n			type: \"POST\",\n			data: params,\n		})\n		.done(function(response, status) {\n\n			response = $.parseJSON ( response );\n\n			if ( typeof response['deleted'] != 'undefined' && response['deleted'] == true ) {\n				$hub_row.find('.loader-splash').addClass('hide').end()\n					.find('.removedMsg').show();\n				$('.addEventToHubWrap .header span').text( parseInt($('.addEventToHubWrap .header span').text()) -1 );\n			}\n			else {\n				alert('There was an error deleting.  Please try again.');\n				if ( typeof response['errors'] != 'undefined' ) {\n					console.info('Errors in adding event to hub: '+response['errors']);\n				}\n				$hub_row.find('.removeFromHubBtn').removeClass('hide').end()\n					.find('.loader-splash').addClass('hide');\n			}\n		})\n		.fail(function(xhr, options, error ) {\n			alert('There was an error deleting.  Please try again.');\n			$hub_row.find('.removeFromHubBtn').removeClass('hide').end()\n					.find('.loader-splash').addClass('hide');\n		});\n\n	});\n\n	//important!  populateColorCombos MUST be called prior to the generate color wheel check.\n	populateColorCombos();\n  	var colors = $(\"#event-swatch-input\").val().split(';');\n  	if(colors.length > 0){\n	  	generateColorWheel(colors);\n	} else {//this should be replaced with a fallback for splash v2.0 and less.\n	  	generateColorWheel(['#313729','#3b7b77','#789290']);\n  	}\n\n	addElementButtons();\n	initializeVenueMap();\n	initializeEmbedMap();\n	resizeColorWheel()\n	finetuneActivateOnPageEditables();\n	updateHoverColors();\n	// splash.fontActions.populateFontCombos()\n	addElementScroll()\n\n	splash.fontActions.init();\n	//coachBeacon.init(coachBeacon.beaconArray);\n\n\n});//END OF DOCUMENT READY. end doc\n\n//needed for youtube API...which doesnt work on local machines?\nfunction onYouTubePlayerReady(playerId) {\n      var ytplayer = document.getElementById(\"player\");\n      console.log(ytplayer)\n    }\n\nfunction triggerChangeOnTitles(){\n	// FIXES ISSUE WHERE SOME SECONDARY H1s WOULD NOT SAVE FONT\n	$('#splash-container').find('h1').each(function(){\n		$(this).parents('.title:first').trigger('change')\n	})\n}\n\nfunction closeThemeSlideshow(){\n	$('#theme-modal').removeClass('slideshow').find('.theme-option.active').removeClass('active');\n}\n\nfunction resizeJuicy(){\n\n	$this =  $('#finetune-sections').find('.juicyOpen').find('.mainToggleBtn')\n	if( $this.length > 0 ){\n		var openHeight = windowHeight - $this.position().top - bottomUtilHeight - 30;\n		$this.css('height', openHeight );\n	}\n}\n\nfunction positionTut(thisPos){\n	var thisHeight\n\n	var $fvInfo = $('.firstViewInfo')\n\n	if( thisPos == 'top' ){\n		thisHeight = $('#nuToolBtns').outerHeight()\n\n		if(thisHeight <= 150){\n			thisHeight = 204\n		}\n\n		$fvInfo.css({'height': thisHeight+ 'px', 'top': '94px'})\n	//	$fvInfo.css({'height': thisHeight+ 'px', 'top': $('#nuToolTop').offset().top+'px'})\n	} else if (thisPos == 'bottom'){\n		thisHeight = $('#nuPlanWrap').outerHeight()\n\n		thisTop = $('#nuPlanWrap').offset().top\n\n		if( thisHeight <= 80 ){\n			// if tabs are in the super small state where 3 of 4 are hidden\n			thisTop = thisTop - ( ( $('#planTab').outerHeight() * 3 ) - 4 )\n		}\n\n		thisTop = thisTop + 130\n\n		if(thisHeight <= 150){\n			thisHeight = 204\n		}\n\n		$fvInfo.css({'height': thisHeight + 'px', 'top': thisTop+'px'})\n	}\n\n	if( thisHeight < 250 ){ // make inner text smaller if small size\n		$fvInfo.addClass('smallTut')\n	} else {\n		$fvInfo.removeClass('smallTut')\n	}\n\n}\n\n\nfunction initTutorial(){\n\n	if( $('body').hasClass('showTutorial') && ! $('body').hasClass('tutStarted') ) {\n\n		$('body').addClass('tutStarted')\n\n		$('#nuToolBtns').find('.toolBtn:first').addClass('fvFlash')\n\n		positionTut('top')\n\n		$('#firstViewOverlay').addClass('showDesign')\n	}\n\n}\n\n\nfunction getToolbarOpts(opts){\n\n	if(typeof opts!=='undefined' && opts.simpleRTE!=='undefined' && ! opts.hideAligner ){\n		//return \"undo redo | bold italic | fontSizer fontFamily | colorPicker | aligner shadow spacing | code closeButton\";\n		return \"fontFamily fontSizer | bold italic aligner\";\n	} else if ( typeof opts!=='undefined' && opts.hideAligner !== 'undefined'){\n		return \"fontFamily fontSizer | bold italic colorPicker | showAll | shadow spacing link imgPicker | removeformat code | closeButton\";\n	} else  {\n		//return \"undo redo | bold italic | fontSizer imgPicker | fontFamily | colorPicker | lineHeight | aligner link | shadow spacing | removeformat code closeButton\";\n		return \"fontFamily fontSizer | bold italic aligner  colorPicker | showAll | shadow spacing link imgPicker | removeformat code | closeButton\";\n	}\n}\n\nfunction resetColorText(){\n	var editText = $('#fontColorSelect').find('.option.active').text().trim();\n	if( editText == '' ){\n		editText = 'Custom'\n	}\n	$('#fontColorSelect').find('.editColorText:first').text( editText )\n}\n\nfunction closeFinetuneBar(){\n	$('#nestedLayoutContainer').removeClass('isBasicEle')\n\n	$('body').removeClass('finetuneOpen')\n	$('#nuToolBtns').find('.toolBtn').removeClass('active')\n	$(\"#finetune-block\").removeClass('isScrolling');\n	finetuneOpen=false;\n\n	closePlanningTools();\n	setTimeout(function(){\n		galleryThumbFlow();\n	},500);\n\n}\n\nfunction openFinetuneBar(tab,force){\n\n	if( !finetuneOpen || force!=null) { //only open if not already opened (or we're forcing it open).\n\n		$('#finetune-all-tools').css('margin-left', '0em');\n		$body.addClass('finetuneOpen');\n		closeGuiders();\n		closePlanningTools();\n		finetuneOpen = true;\n		if(tab!=null){\n			var $tab = $(\"#nuTool\").find(\".toolBtn[tab='\"+tab+\"']\");\n			if($tab.length > 0){\n				$tab.removeClass('active').click();//remove active and open this tab!\n			}\n		}\n\n		if(galleryExistsOnPage()){\n			setTimeout(function(){\n				galleryThumbFlow();\n			},500);\n		}\n\n	}\n}\n\n	$(\"#inactivity-email\").keyup(function(e){\n		if(e.keyCode==13){//focus to next input on enter.\n			$(\"#inactivity-pw\").focus();\n		}\n	});\n\n	$(\"#inactivity-pw\").keyup(function(e){\n		if(e.keyCode==13){\n			//on enter,submit.\n			$(\"#remoteSignIn\").click();\n		}\n	});\n	$(\"#logged-out-modal\").on( 'click', '#remoteSignIn', function() {\n		var $t = $(this);\n		if($t.hasClass('loading')){\n			return false;\n		}\n\n		$t.addClass('loading');\n		var loginUrl = '';\n		if(constants.ocbDomain=='splashthat.com'){\n			loginUrl = 'https://';\n		} else {\n			loginUrl = 'https://'+constants.ocbDomain+'/sites/view/';\n		}\n		loginUrl += constants.domain;\n		loginUrl += '/users/login';\n\n		$.ajax({\n			url: loginUrl,\n			type: 'post',\n			dataType:'json',\n			data: { data: { User: { email: $(\"#inactivity-email\").val(), password: $(\"#inactivity-pw\").val(), remoteLogin: 1 } } },\n			statusCode: {\n				401: function(response) {\n					handleSaveError( 'locked', response.message);\n				}\n			},\n			success:function(response){\n				if( response.success ) {\n					closeSimpleModal();\n					$t.removeClass('loading');\n					setChangesMade();\n				}\n				else\n				{\n					$t.removeClass('loading');\n					$(\"#logged-out-modal\").find('.inactive-error')\n										  .html('#3212: There was an error logging you in.  Please try again.')\n										  .show();\n				}\n			},\n			error:function(){\n				$(\"#logged-out-modal\").find('.inactive-error')\n									  .html('#3212: There was an error logging you in.  Please try again.')\n									  .show();\n				$t.removeClass('loading');\n			}\n		})\n	});\n\n\nfunction closeJuicy(thisJuicy){\n	$this = thisJuicy\n	$juicy.removeClass('juicyOpen')\n	$this.css('height', '' );\n}\n\nfunction hideShowTabs(thisTab){\n	if( typeof thisTab !== 'undefined' ){\n		var tab = thisTab\n	} else{\n		var tab = $('#topImageNav').find('.active:first').attr('tab')\n	}\n	$('#imgContentWrap').attr('tab', tab).find('.imgTab').hide().end()\n		.find(\"div[tab='\"+tab+\"']\").show()\n}\n\nvar tipHover = false,\n	mouseCoords = {x:0,y:0},\n	openColorPicker = false,\n	cropImageJcrop=false,\n	jumpToInviteTemplate = false,\n	openDatePicker = false,\n	currentFocusedInput=false,\n	scrolling=false,\n	dragging=false,\n	$body = $(\"body\"),\n	bottomUtilHeight = 40;\n	ftWidth=272,\n	finetuneOpen=false,\n	silentTrigger=false,\n	inCustomSection = false,\n	currentSection = false,\n	highlightedText = false,\n	highlightedNode = false,\n	$simpleModalWrap=$(\"#simple-modal-wrap\");\n\n// $image can be an $('<img />') or an $('<input />')\n// this will update the src or value of $image\n// done(new_image_src)\nfunction pickAndOrCropNewImage($image,opts){\n\n	var opts = opts || {};\n	var defaultOpts = {\n		aspectRatio: null,\n		done: function(newSrc,newDims) {}\n	};\n\n	var $cropAnyPhoto = $(\"#cropAnyPhoto\");\n	$('#cropAnyPhoto').removeClass('editBG editHead isColor isImage isVideo');\n\n	if(opts.helperText) {\n		$('#imgFirstView').find('.upload-image-tip').show().html(opts.helperText);\n	} else {\n		$('#imgFirstView').find('.upload-image-tip').hide().html('');\n	}\n\n	if(opts.classesToAdd){\n		setTimeout(function(){\n			$(\"#cropAnyPhoto\").addClass((''+opts.classesToAdd));\n		},100);\n	}\n	if(opts.isColor && opts.isColor){\n		setTimeout(function(){\n			$(\"#imgColorPickerTab\").click();\n		},10);\n	}\n\n	if(opts.group_id){\n		$(\"#cropAnyPhoto\").data('group-id',opts.group_id);\n	} else {\n		$(\"#cropAnyPhoto\").data('group-id',false);\n	}\n\n	opts = $.extend(true,{},defaultOpts,opts);\n	cropImage(\n		$image,\n		opts.aspectRatio,\n		function(cropSelected,src_used,newlyuploaded,dims) {\n			var newlyUploadedSrc = newlyUploadedSrc || false;\n			if (cropSelected !== false){\n				$.ajax({url:'/events/cropExistingImage/'+constants.slug,type:'post',dataType:'json',\n					data:{ c:cropSelected, src:src_used },\n					success:function(response){\n						if ( typeof response.status != 'undefined' && response.status == 'success' ){\n							if ( typeof response.new_src != 'undefined' ){\n								// get width and height from response too?\n								var dims = response.dims || null;\n								opts.done(response.new_src,dims);\n							} else opts.done(src_used,dims);\n						}\n					}\n				});\n			} else {\n				opts.done(src_used,dims);\n			}\n		}\n	);\n}\n\nfunction cropImage($image,aspectRatio,_saveCallback,_cancelCallback){\n	var $image = $image || [];\n\n	if ( $image.length == 1 ){\n\n		// so we can take an image or a hidden input!\n		var getSrc = function() { // {{{\n\n			if ($image.hasClass('use-parent-bg')) {\n				var mysrc = (''+$image.parents('.media.image:first').css('background-image'));\n				mysrc = stripUrl(mysrc);\n				return mysrc;\n			} else if (typeof $image.attr('src')!=='undefined') {//<img> tag.\n				return $image.attr('src');\n			} else if (typeof $image.attr('value')!=='undefined') {//input.\n				return $image.attr('value');\n			}\n			return '';\n		}; // }}}\n		var setSrc = function(s) { // {{{\n			src = s;\n			//if ($image.is('img')) {\n				//$image.attr('src',s);\n			//} else if ($image.is('input')) {\n				//$image.prop('value',s);\n			//}\n		}; // }}}\n\n		var $block = $(\"#cropAnyPhoto\");\n		if($block.data(\"group-id\")){\n			$block.addClass('isBgImg').removeClass('isImg');\n		} else {\n			$block.removeClass('isBgImg').addClass('isImg');\n		}\n		var $photo = $block.find('.photoResize');\n		if($photo.length < 1){\n			$photo = $(\"#photoResize\");\n		}\n		var newly_uploaded_src = false;\n		var src = getSrc();\n		var selected=false;\n		var set = null;//[];//[0,0,10000,10000];\n		var dims = null;\n		var $gal = $block.find('#splashGallery');\n\n		//max dimension constraint for image uploads\n		var blockType = $image.parents('.wImg.media[data-img-block-type]').data('img-block-type') || false;\n		var uploadParams = { // {{{\n			onSubmit: function($item,d){\n				$(\"#imgContentWrap\").find('.latestPhoto').prepend( $(\"<div class='thisLoader loading'><div class='nu-loader med'></div></div>\") )\n			},\n			onProgress: function($item,d){},\n			onComplete: function($item,d){\n\n\n\n				if (d && d.response && d.response.filename && d.response.filename != '') {\n					var new_src = d.response.filename;\n					var r = Math.random();\n					if (new_src && (''+new_src).match(/\\/c\\.H\\./) == 1) {\n						var l_src = (''+new_src).replace(/\\/c\\.H\\./,'/c.L.');\n					}\n					var iL=new ImageLoader(new_src+'?'+r);\n					iL.loadEvent=function(u){\n						setTimeout(function(){\n							setSrc(u);\n							$(\"#currentImage\").removeClass('editVid').click();\n							$('#cropUploader').find('.qq-upload-list').fadeOut(400,function(){ $(this).empty().show(); });\n						}, 10);\n					};\n					iL.load();\n					src = new_src;\n					newly_uploaded_src = new_src;\n					$image.data('jcropSet',null);\n					$photo.attr(\"src\",src).css({width:'auto',height:'auto'});\n				}\n			},\n			params: {}\n		};\n		if(blockType) uploadParams.params['image_block_type'] = blockType;\n\n		$block.find('#cropUploader').empty();\n		newFileUploader('cropUploader', uploadParams); // }}}\n\n		var ctimer;\n		$photo.attr(\"src\",src).css({width:'auto',height:'auto'});\n		var initiateCrop = function() { // {{{\n			if(cropImageJcrop){\n				cropImageJcrop.destroy();\n			}\n\n			//$('#imgContentWrap').removeClass('upload gallery video editCurrent editVid color').addClass('editCurrent')\n			$('#cropAnyPhoto').removeClass('isImage isColor isVideo')\n\n			$block.find('.jcrop-holder').remove();\n			selected = false;\n			src = $photo.attr('src');\n			set = $image.data('jcropSet');\n			src = src.replace(/\\?.*$/,'');\n\n			var parts = src.split('/');\n			var filename = parts.pop();\n\n			// cropped splash image\n			if (filename.match(/^c\\.H\\.s\\./)) {\n				// croppedSplash: c.H.s.89.splashimg.jpg\n				filename = filename.replace(/^c\\.H\\.s\\.[^\\.]{2}\\./,'');\n				parts.push(filename);\n				src = parts.join('/');\n				src = '/img/events/splash/' + filename;\n				//src = src.replace(constants.event_id+'/assets','splash');\n\n			// cropped existing\n			} else if (filename.match(/^c\\.H\\./)) {\n				// original: 123.file-na.me.jpg\n				// cropped:  c.H.45.123.file-na.me.jpg\n				// cropped2: c.H.67.123.file-na.me.jpg\n				filename = filename.replace(/^c\\.H\\.[^\\.]{2}\\./,'');\n				parts.push(filename);\n				src = parts.join('/');\n\n			} else {\n				parts.push(filename);\n				src = parts.join('/');\n			}\n			$photo.attr(\"src\",src).css({width:'auto',height:'auto'});\n\n			//$('#imgContentWrap').removeClass('upload gallery video editCurrent editVid color').addClass('editCurrent')\n			$('#cropAnyPhoto').removeClass('isImage isColor isVideo').find('.h3text').text('Edit Image')\n\n			clearTimeout(ctimer);\n			ctimer = setTimeout(function(){\n				var opts = {\n					aspectRatio: aspectRatio,\n					boxWidth: 560,boxHeight: 800,\n					onSelect: function(c){\n						selected = c;\n						$image.data('jcropSet',[c.x,c.y,c.x2,c.y2]);\n						//c.W = $photo.width();\n						//c.H = $photo.height();\n						//var data = {};\n						//data.xpercentage = c.x/c.W;\n						//data.ypercentage = c.y/c.W;\n						//data.wpercentage = c.w/c.W;\n					},\n					onRelease: function(){\n						selected = false;\n						$image.data('jcropSet',null);\n					}\n				};\n				opts.boxHeight = $block.height() - $block.find('.bottomBar:first').height() - 42;\n				opts.boxWidth = $block.find('.latestPhoto').width() - 10;\n\n				if (set && set.length == 4) {\n					opts.setSelect = set;\n				} else {\n					//dont select anything ;)\n					//opts.setSelect = [0,0,10000,10000];\n				}\n\n				var s = $photo.Jcrop(opts,function(){\n					cropImageJcrop = this;\n					dims = $photo.width()+'x'+$photo.height();\n					setTimeout(function(){\n						$(\"#imgContentWrap\").find(\".latestPhoto\").find(\"div.thisLoader\").remove();\n					},500);\n				});\n\n			},100);\n		}; // }}}\n\n		$block.find(\"#imgColorPickerTab\").unbind('click').click(function(e){\n			$('#cropAnyPhoto h3 .h3text').text('Pick Color')\n			$(this).addClass('active').siblings().removeClass('active');\n			addColorPickerToModal()\n		});\n\n		$('#imgContentWrap').find('.vidTime').unbind('focus').focus(function(e){\n			$('#imgContentWrap').find('.add-link-check').addClass('checked')\n			$('#addImageLinkToggle').attr('value', '1')\n		})\n\n		$('#vidFirstView').on('click', '.add-link-check', function(){\n			setTimeout(function(){\n				if( $(this).hasClass('checked') == false ){\n					$('#vidStartTime').val('')\n				}\n			}, 10)\n		});\n\n		$block.find('#currentImage').unbind('click').click(function(e){ // {{{\n			var $t = $(this);\n			if(!$t.hasClass('disabled') ){\n\n				$('#cropAnyPhoto').removeClass('isImage isColor isVideo')\n\n				if( $t.hasClass('editVid') ){\n					setTimeout(function(){\n						//$('#imgContentWrap').addClass('editVid').removeClass('editCurrent');\n					}, 10);\n				}\n\n				$t.addClass('active').siblings().removeClass('active');\n\n				$('#advancedImgUtils').removeClass('showAdvTools')\n				//$gal.hide();\n\n				$('#imgFirstView').find('.qq-upload-drop-area').css('display', 'none');\n				initiateCrop();\n\n			}\n		}); // }}}\n		$block.find('#disableCrop').unbind('click').click(function(e){ // {{{\n			if (cropImageJcrop) {\n				cropImageJcrop.release();\n			}\n		}); // }}}\n\n		$block.find('#photoPickerGallery').unbind('click').click(function(e){ // {{{\n			$(this).addClass('active').siblings().removeClass('active');\n\n			$('#cropAnyPhoto h3 .h3text').text('Select from Gallery')\n\n			// hide the cropper\n			$('#imgFirstView .qq-upload-drop-area').css('display', 'none');\n			if(cropImageJcrop){\n				cropImageJcrop.destroy();\n			}\n			$block.find('.jcrop-holder').remove();\n			// lock the modal width\n			// show the picker\n			$gal.show();\n\n			$(\"#all-image-cats\").addClass('open')\n			// if the picker isn't loaded.. load it!\n			if (!$gal.hasClass('loaded') && !$gal.hasClass('loading')) {\n				$gal.addClass('loading');\n				$.ajax({url: '/events/photo_picker/'+constants.slug, dataType: 'json'})\n					.done(function(data){\n						if (data && data.categories && data.photos) {\n\n							var cats = '';\n\n							for(var x in data.categories){\n								xtras = '';\n								if(x==0){\n									xtras = 'prompt';//first one gets active (aka prompt) class.\n								}\n								cats+='<div class=\"grp p0 category '+xtras+'\" cat-id=\"'+data.categories[x]['id']+'\">'+data.categories[x]['name']+'</div>';\n							}\n							$(\"#all-image-cats\").find(\".categories\").html(cats);\n\n\n							var $photos = $gal.find('.photo-content');\n							// populate the photos // {{{\n							$photos.find('.photo').remove();\n							var $blankP = $photos.find('.blank:first').clone();\n							$blankP.removeClass('blank hide').attr('style','').addClass('photo');\n							for (var i in data.photos) {\n								var photo = data.photos[i];\n								var $ph = $blankP.clone();\n								$ph.attr('cat-id',photo.cat)//binding for image gallery div.photo - important bind right here!\n									.find('img:first').attr('src',photo.tmb).attr('full-src',photo.url)\n									.parents('.thePhoto:first').css('background-image', 'url(\"'+photo.tmb+'\")' )\n								$ph.click(function(e){\n									var newSrc = $(this).find('img:first').attr('full-src');\n									// set up the new photo in the cropper\n									//setSrc(newSrc);\n									src = newSrc;\n									newly_uploaded_src = newSrc;\n									$image.data('jcropSet',null);\n									$photo.attr(\"src\",src).css({width:'auto',height:'auto'});\n									$(\"#currentImage\").removeClass('editVid').click();\n									$(\"#imgContentWrap\").find('.latestPhoto').prepend( $(\"<div class='thisLoader loading'><div class='nu-loader med'></div></div>\") )\n									// init the cropper\n									//initiateCrop();\n								});\n								$photos.append($ph);\n							} //// }}}\n\n\n\n							// unlock the modal width\n\n							$gal.addClass('loaded').removeClass('loading');\n						}\n					});\n			}\n		}); // }}}\n\n		//on scroll of the image editor gallery. change the active category on the fly.\n		$block.find(\".photo-content\").unbind('scroll').scroll(function(){\n			if(!scrolling){\n\n				var $s = $(\"#splashGallery\");\n				var blockHeight = $s.find(\"div.photo-content:first\").outerHeight();\n				var st = $s.offset().top;\n\n				//loop through each photo until we find a match.\n				$s.find(\"div.photo\").each(function(){\n					if(( $(this).position().top ) > (st - blockHeight - $(this).outerHeight() + 25) ){//+25 for margin considerations.  finetuned it to be perfect.\n						var cat_id = $(this).attr(\"cat-id\");\n						var $b = $(\"#all-image-cats\").find(\"div[cat-id='\"+cat_id+\"']:first\");\n						$b.addClass('prompt').siblings().removeClass('prompt');\n						return false;\n					}\n				});\n			}\n		});\n\n		//binding for photo category clicking/scrolling\n		$block.find(\"#all-image-cats\").on('click',\"div.category\",function(e){\n			var $photos = $(\"#splashGallery\").find(\".photo-content\");\n			var $t = $(this);\n			var id = $t.attr('cat-id');\n			$t.siblings().removeClass('prompt');\n			$t.addClass('prompt');\n			var $first = $photos.find('.photo[cat-id=\"'+id+'\"]:first');\n			if ($first.length) {\n			 	scrolling = true;\n				$photos.stop().animate({\n					scrollTop: ($first.position().top + $photos.scrollTop())\n				}, 500,'easeInOutExpo',function(){\n					setTimeout(function(){\n					scrolling = false;\n\n					},100);\n				});\n			}\n		});\n\n		//IMAGE MODAL SAVE IMAGE\n		$block.find('.save').unbind('click').click(function(e){ // {{{\n			e.preventDefault();\n			var type = false;\n			if($block.hasClass('editHead')){\n				type = 'header';\n			} else if($block.hasClass('editBG')){\n				type = 'body';\n			}\n\n\n			if( ! $('#currentImage').hasClass('editVid') ){//STANDARD CASE.  SAVING AN IMAGE.\n\n\n				$('#main-canvas').find('.vidBG').hide().addClass('vidHid');\n				//if (cropImageJcrop) {\n					//selected = cropImageJcrop.tellSelect();\n				//}\n				if(type!==false){\n					flipDropDown( $(\"#\"+type+\"-bg-type\"),'image',true );\n				}\n\n\n				if ( _saveCallback ){ _saveCallback(selected,src,newly_uploaded_src,dims); }\n				closeSimpleModal();\n				if(cropImageJcrop){\n					cropImageJcrop.destroy();\n				}\n				$block.find('.jcrop-holder').remove();\n				setTimeout(function(){\n				},1);\n\n				//updateThemeCards();\n			} else {//SAVE VIDEO BG BACKGROUND\n\n				var vidID = $('#demoPlayer').attr('vidID');\n\n\n				insertVideoBG( type, vidID )\n\n				closeSimpleModal();\n\n			}\n\n\n		}); // }}}\n\n		$block.find('.cancel').unbind('click').click(function(e){ // {{{\n			e.preventDefault();\n			//if ( _saveCallback ){ _saveCallback(false,src,newly_uploaded_src,dims); }\n			if ( _cancelCallback ){ _cancelCallback(); }\n			closeSimpleModal();\n				if(cropImageJcrop){\n					cropImageJcrop.destroy();\n				}\n				$block.find('.jcrop-holder').remove();\n			setTimeout(function(){\n			},1);\n		}); // }}}\n\n		// Click to show / hide add link input on image picker modal\n		//#addImageLinkToggle\n		$block.find('.add-link-check input').unbind('change').change(function(e){\n			var $t = $(this);\n			if($t.val() == 1){\n				$t.parents('.add-link:first').addClass('checked')\n				setTimeout(function(){\n					$(\"#image-link-url\").focus();\n				},10);\n\n			} else {\n				$t.parents('.add-link:first').removeClass('checked')\n			}\n		});\n\n		if (src != '' && src != 'none') {\n\n			$('#cropAnyPhoto').removeClass('editHead editBG');\n\n			if( src.match(/\\?stp/)||src.match(/st-p-/)||src.match(/empty-bg/)||src.match(/walrus.png|bear.png|giraffe.png/) ){//if the file ends with \"?stp\" - it's a placeholder.\n				//initiateCrop();\n				if($image.prop(\"id\")=='header-image-source'||$image.prop(\"id\")=='body-image-source'){\n					$(\"#photoPickerGallery\").click();//if header or body image, show gallery, not upload by default.\n					$block.addClass('noLinkOpt');\n				} else{\n					$('#uploadImage').click();//if clicking a placeholder, default to upload new.\n					$block.removeClass('noLinkOpt');\n				}\n\n			} else{// because.. why not\n\n					if($image.prop(\"id\")=='header-image-source'||$image.prop(\"id\")=='body-image-source'){\n						$block.addClass('noLinkOpt');\n					} else{\n						$block.removeClass('noLinkOpt');\n					}\n					initiateCrop();\n\n				if( ! $('#main-canvas').find('.vidBG').hasClass('vidHid') /*&& $(event.target).parents('.nu-btn:first').is('#changeHeaderInline')*/ && $('#main-canvas').find('#player').length != 0 ){\n\n					$block.find('.latestPhoto,.uploadPhoto').hide();\n\n					$('#imgFirstView .qq-upload-drop-area').css('display', 'none');\n\n					$('#currentImage').addClass('active').siblings().removeClass('active');\n\n					$('#advancedImgUtils').removeClass('showAdvTools')\n\n					//$('#imgContentWrap').removeClass('upload gallery video').addClass('editCurrent editVid')\n\n					$('#cropAnyPhoto').removeClass('isImage isColor isVideo')\n\n				} else {\n\n					$('#currentImage').addClass('active').siblings().removeClass('active');\n\n					$('#cropAnyPhoto').removeClass('isImage isColor isVideo')\n\n				}\n\n				hideShowTabs()\n\n			}\n		} else { //if no image, show them the gallery.\n\n			$('#uploadImage').click();//if clicking a placeholder, default to upload new.\n			$block.removeClass('noLinkOpt');\n		}\n\n		$block.fireSimpleModal({persistent:true});\n\n	}else if ( _saveCallback ){ _saveCallback(false); }\n}\n\n\nfunction insertVideoBG( headOrBG, vidID, insert ){\n	//insert script tag for video backgrounds if it's not already there.\n\n	if( insert == 'force' ){\n		$('body').removeClass('hasVidBG')\n		$('#ytAPIsrc').remove()\n	}\n\n\n	if(!$('body').hasClass('hasVidBG')){\n		$('body').addClass('hasVidBG')\n		var tag = document.createElement('script');\n		tag.src = \"/js/vidBG.js\";\n		tag.id = \"ytAPIsrc\";\n		var firstScriptTag = document.getElementsByTagName('script')[0];\n		firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n	}\n\n	var startTime = $('#vidStartTime').val().trim();\n	if (startTime == '') {\n		startTime = 0;\n	} else if( startTime.match(':') ){\n		hms = startTime.split(':');//break apart. expected in format hour:minute:seconds (or just seconds).\n		if( hms.length == 3){\n			startTime = parseInt(hms[0]*3600) + parseInt(hms[1]*60) + parseInt(hms[2])\n		} else if ( hms.length == 2 ){\n			startTime = parseInt(hms[0]*60) + parseInt(hms[1])\n		}\n	}\n\n\n	var thisVid\n	if( vidID && vidID != false ){\n		$('#vidUrl').val( vidID )\n		thisVid = vidID\n	} else {\n		thisVid = $('#vidUrl').val()\n	}\n\n\n\n	thisVid = 'kIZJx259Kug'\n\n\n	if( thisVid != '' ){\n\n		if( $('#main-canvas').find('.vidBG').length == 0 ){\n			var vidEmbed = '<div class=\"vidBG\"><div id=\"player\" video-id=\"'+thisVid+'\" start=\"'+startTime+'\"></div></div>';\n			var $header = getTargetById('header');\n			$header.prepend( $(vidEmbed) );\n\n\n		} else {\n\n			player.loadVideoById( thisVid );\n			$('#main-canvas').find('.vidBG').show();\n			$('#player').attr({ 'start': startTime, 'video-id':thisVid });\n\n		}\n\n		if(headOrBG!==false){ // set to either 'header' or 'body'\n			$(\"#\"+headOrBG+\"-bg-vid-id\").val(thisVid).addClass('changes-made').trigger('change');\n			$(\"#\"+headOrBG+\"-bg-vid-start\").val(startTime).addClass('changes-made').trigger('change');\n			$(\"#\"+headOrBG+\"-bg-vid-type\").val(\"youtube\").addClass('changes-made').trigger('change');\n			flipDropDown($(\"#\"+headOrBG+\"-bg-type\"),'video',true);\n		}\n\n\n		if(insert == 'force'){\n\n			if(typeof YT != 'undefined'){\n\n				function onReady(event) {\n				   	event.target.mute()\n				 	//player.playVideo()\n				}\n\n				function onPlayerStateChange(event) {\n\n				    if(event.data === YT.PlayerState.ENDED){\n				        event.target.seekTo(0)\n				    }\n\n					event.target.mute()\n\n				    if(event.data == 1 && parseInt($('#player').attr('startTime')) != 0){\n				    	event.target.seekTo( parseInt( $('#player').attr('startTime') ) )\n				    }\n\n				}\n\n				player = new YT.Player('player', {\n			        height: '100%',\n			        width: '100%',\n			        videoId: $(\"#player\").attr(\"video-id\"),\n			        playerVars: { 'loop': 1, 'autoplay': 1,'autohide':1,'rel':'0','showinfo':'0','controls':'0','start':startTime },\n			        events: {\n			            onReady: onReady,\n			            onStateChange: onPlayerStateChange\n			        }\n			    });\n		    }\n\n		}\n\n	}\n\n}\n\n\nfunction galleryAddFlowScroll(){\n	// scroll the window DOWN\n	scrollToBlock($('#galleryThumbBottom'))\n	setTimeout(function(){\n		var $preset = $('#gallery-preset-selector').find('.options .active:first');\n		// if have a preset layout -- re layout!\n		if ( $preset.length == 1 ){\n			$preset.click();\n		}\n\n		galleryThumbFlow();\n	},90);\n}\n\n//updating color for header and background\n//used to display the color picker in the modal.\nfunction addColorPickerToModal(){\n	var id = false,\n		no_opacity = false;\n	var group_id = $(\"#cropAnyPhoto\").data(\"group-id\");\n	var $liveGroup = ftGetLayoutGrp(group_id);\n	var grp = ftGetGrp($liveGroup);\n	if(!grp['styles']){ grp['styles']={}; }\n	var bodyLegacyCheck = (isLegacyEvent() && $(\"#cropAnyPhoto\").hasClass('editBG'))?true:false;\n\n	//set last-img attribute for the sake of cancelling the selection.\n	$liveGroup.data('last-img', $liveGroup.css('background-image') )\n\n	$(\"#imgModalColorPicker\").spectrum({\n		flat: true,\n		showInput: true,\n		showAlpha: true,\n		preferredFormat: \"hex\",\n		showPalette: true,\n		className: 'imgModalColorPicker',\n		palette: constants.palette,\n		beforeShow:function(color){\n			if(color.alpha=='0'){\n				no_opacity=true;\n			}\n		},\n		move: function(color) {\n			if(no_opacity && color.alpha=='0'){\n				//if they open the picker and opacity is set to 0, crank up the opacity to full!\n				var c = ''+(color.toRgbString()).replace(', 0)',', 1)');\n				$(this).spectrum(\"set\", c);\n				no_opacity=false;\n			}\n			if(bodyLegacyCheck){\n				$(\"#splash-container\").css('background',color.toRgbString());\n			} else {\n				updateBackgroundSettings( $liveGroup, 'color', color.toRgbString() );\n			}\n			$body.removeClass('changedBgColor');\n		},\n		change: function(color){\n\n			var formatted_color = color.toRgbString();\n			updateColorPalette(formatted_color);\n			if(bodyLegacyCheck){\n				$(\"#splash-container\").css('background',color.toRgbString());\n				$(\"#body-bg-type\").val('color').trigger('change');\n				$(\"#body-bg-color\").val(color.toRgbString()).trigger('change');\n				$(\"#body-image-source\").val('').trigger('change');\n				setChangesMade();\n				closeSimpleModal();\n\n\n			} else {\n				updateBackgroundSettings( $liveGroup, 'color', formatted_color, grp );\n\n			}\n			if(id=='header'){\n				$(\"#header-image-changed\").val(0).trigger('change');\n			}\n			$body.removeClass('changedBgColor');\n\n			updateThemeCards();\n			closeSimpleModal();\n		},\n		hide: function(color){\n			$body.removeClass('changedBgColor');\n		}\n	});\n}\n\n$('#cropAnyPhoto').on('click', '.close-modal', function(event){\n	// IF USER CHANGES COLOR AND THEN CLICKS 'X' ON NUIMAGEMODAL WHEN bg type is image\n 	event.preventDefault()\n	var group_id = $(\"#cropAnyPhoto\").data(\"group-id\");\n	var $liveGroup = ftGetLayoutGrp(group_id);\n	var grp = ftGetGrp($liveGroup);\n	if(grp['bg-type'] && grp['bg-type']=='image' && $liveGroup.data('last-img') && $liveGroup.css('background-image')=='none'){\n		$liveGroup.css('background-image',$liveGroup.data('last-img'));\n	}\n	$(\"#imgColorPickerTab\").removeClass('adminPane');\n	closeSimpleModal()\n	return false\n})\n\n	function setVisibleAccordionHeight(){\n\n		var $accordion = $(\"#finetune-layout-contain\").find(\".section.open .accordion:first\");\n		var $asc = $('#allSectionsContain');\n		var $elementsContain = $('#elementsContain');\n\n		var h = windowHeight - bottomUtilHeight;\n\n		$('#finetune-sections').css('height',h+'px');\n		if($accordion.length>0){//WHEN YOU CLICK INTO A CUSTOM BLOCK/ADMIN ACCORDION\n\n			var $t = $accordion.parents('.section:first');\n			$('#finetune-block').removeClass('isScrolling');\n\n			// move the whole thing up to the right place\n			var targetsTop = $t.offset().top;\n			var elementsTop = $elementsContain.offset().top;\n			targetsTop -= elementsTop;\n			targetsTop += $asc.scrollTop();\n			$asc.css('height','auto');\n			$elementsContain.css('top','-'+targetsTop+'px');\n			$elementsContain.addClass('view-bolt');\n\n			h -= $('#elementsHeader').outerHeight(true);\n			h -= $t.find('> .title:first').outerHeight(true);\n			h -= 30; // margins...\n			//h -= 30; // margins...\n			$accordion.css('height',h+'px');\n\n\n\n		} else { //EVERYTHING ELSE. NO ACCORDIONS OPEN.\n\n			$elementsContain.css('top','0px').removeClass('view-bolt');\n\n			h -= $('#elementsHeader').outerHeight(true);\n			h -= $('#topBodyContain').outerHeight(true);\n\n			$asc.css('height', h+'px')\n\n			innerHeight = $('#finetune-layout-contain').outerHeight() + $('#buttonTabWrap').outerHeight() + $('#basicsTabWrap').outerHeight() + $('#addReorderTools').outerHeight()\n			if ( innerHeight > h ){\n\n				if($body.hasClass('finetuneOpen')){\n					$('#finetune-block').addClass('isScrolling')\n				}\n\n				if( $('#basicsTabWrap').hasClass('open') || $('#buttonTabWrap').hasClass('open') ){\n					$('#finetune-block').removeClass('isScrolling')\n				} else {\n					h -= $('#addReorderTools').outerHeight(true);\n					$asc.css('height', h+'px')\n				}\n			} else {\n				$('#finetune-block').removeClass('isScrolling')\n			}\n\n		}\n\n		checkForScroll()\n\n	}\n\n\n\nvar	savingInterval = 4000;\nvar searchKeyUpTimer;\nvar savingTimer;\nvar changesTimer;\n\n\n	function setChangesMade(type,no_changes){\n		clearTimeout(changesTimer);\n		changesTimer = setTimeout(function(){\n			changes_made = true;\n			if ( typeof type !== 'undefined' ){\n				if ( type == 'gallery' ) {\n					gallery_changes_made = true;\n				}\n			} else {\n				type = null;\n			}\n\n			if($(\"#autosave-checkbox\").val()=='1' || type=='silent'){\n				$(\"body\").addClass('has-changes autosave');\n				clearTimeout(savingTimer);\n				if(type=='silent'){\n					savingTimer = setTimeout(autoSaveData, 0);\n				} else {\n					savingTimer = setTimeout(autoSaveData, savingInterval);\n				}\n			}\n			else{\n				$(\"body\").addClass('has-changes').removeClass('autosave');\n			}\n		},200);\n\n\n	}\n\n\n	var finetuneLayoutHasChanged = false;\n	function finetuneLayoutChangesMade() {\n		finetuneLayoutHasChanged = true;\n		setChangesMade();\n	}\n\n	/*********************************************\n	 * ---------- Inline Editor Stuff ---------- *\n	 *********************************************/\n	var finetuneFieldsHaveChanged = false;\n	function finetuneFieldChangesMade() {\n		finetuneFieldsHaveChanged = true;\n		setChangesMade();\n	}\n	function finetuneActivateOnPageEditables(force)\n	{	//console.time(\"activating\");\n		var force = force || false;\n		if(force){\n			finetuneDeActivateOnPageEditables();\n		}\n		var $mc = $(\"#main-canvas\");\n\n		// Event\n		finetuneActivateEditable($('#element-title').find(\"h1\").find(\"span:first\"),'data[EventSetting][theme_styles][title][text]',{ hiJackRTE: true, /*singleField:true,*/ noPane: true /*, noRTE: true*/ });\n		finetuneActivateEditable($('#element-subtitle').find(\"h2\").find(\"span:first\"),'data[EventSetting][theme_styles][subtitle][text]',{ hiJackRTE: true, /*singleField:true,*/ noPane: true });\n		finetuneActivateEditable($('#event-description-text'),'data[Event][description_text]',{/*singleField:true,*/ /*advRTE: true,*/ noPane: true });\n		finetuneActivateEditable($(\"#element-hash > div:first\"),'data[EventSetting][twitter_hash]',{singleField: true });\n\n		// EventSetting\n		finetuneActivateEditable($('#rsvp-button'),'data[EventSetting][rsvp_link_text]',{ /*singleField:true,*/ /*noRTE:true,*/ simpleRTE: true, noPane: true });\n		finetuneActivateEditable($('#element-host-name'),'data[EventSetting][theme_styles][host][text]',{ singleField:true });\n\n		// host image\n		var $hostImage = $('#element-host').find('#host-img-block');\n		if ($hostImage.length == 1 && ! $hostImage.parents(\"div.layoutGrp:first\").hasClass('locked-full') ) { // {{{\n			var hostImageTools = function() {\n				var $image = $hostImage;\n				var $img = $image.parent();\n				var src = $image.attr('src');\n				var update = function(new_src){\n					if (new_src && (''+new_src).match(/\\/c\\.H\\./) == 1) {\n						var l_src = (''+new_src).replace(/\\/c\\.H\\./,'/c.L.');\n						var r = Math.random();\n						$image.attr('src',l_src+'?'+r);\n\n						var iL=new ImageLoader(new_src+'?'+r);\n						iL.loadEvent=function(u){\n							setTimeout(function(){\n								$image[0].setAttribute('src',u);\n							},500);\n						};\n						iL.load();\n\n					} else {\n						$image.attr('src',new_src+'?'+Math.random());\n					}\n\n					var $linkUrl = $(\"#image-link-url\");\n					var val = $linkUrl.val();\n					if($(\"#addImageLinkToggle\").val()=='1'){\n						if(val!='' && val.indexOf(\"https://\")==-1){\n							val = 'http://'+val.replace('http://','');\n						} else {\n							val = '';\n						}\n						finetuneEditedFields['data[EventSetting][theme_styles][host_link]'] = val;\n						if($image.parent().hasClass('imgLink')){\n							$image.parent().prop(\"href\",val);\n						} else{\n							$image.wrap('<a href=\"'+val+'\" target=\"_blank\" class=\"imgLink\"></a>');\n						}\n					} else{\n						finetuneEditedFields['data[EventSetting][theme_styles][host_link]'] = '';\n						if($image.parent().hasClass('imgLink')){\n							$image.unwrap();\n						}\n					}\n\n					finetuneEditedFields['data[EventSetting][twitter_profile_image]'] = new_src;\n					finetuneFieldChangesMade();\n				};\n				var imageEditTools = function(){\n					$img.find(\".imgEditTools\").remove();\n					$img.append('<div class=\"img-utils imgEditTools crop abs tl w100 h100 center align middle txtC pointer\"><span class=\"inline middle semiBold\">EDIT</span></div>');\n					$img.find(\".crop\").click(clickToCrop);\n					$image.addClass('crp-enabled');\n					$img.find(\".deleteImg\").click(function(){\n						$image.remove();\n						makeUploader();\n						$img.find('.edit-tools').remove();\n					});\n				}\n				var makeUploader = function(){\n					var myindex = 'sfid-'+sfid+'-image';\n					$img.append('<div id=\"'+myindex+'\" class=\"img-uploader\"></div>');\n					newFileUploader(myindex,{\n						onSubmit: function($item,d){},\n						onProgress: function($item,d){},\n						onComplete: function($item,d){\n							if (d && d.response && d.response.filename && d.response.filename != '') {\n								$image = $('<img />');\n								$img.append($image);\n								update(d.response.filename);\n								imageEditTools();\n								$('#'+myindex).remove();\n							}\n						}\n					});\n				}\n				var clickToCrop = function(){\n\n					var aspectRatio = 1;\n					$(\"#cropAnyPhoto\").data(\"group-id\",false);\n\n					cropImage($image,aspectRatio,function(response,src_used,new_src){\n						var new_src = new_src || false;\n						if (response!==false){\n							if (!src || new_src) {\n								src = src_used;\n							}\n\n							var $imgParent = $image.parents('.image:first')\n							$imgParent.addClass('updating').append($(\"<div class='thisLoader small loading'><div class='nu-loader small'></div></div>\"));\n\n							$.ajax({url:'/events/cropExistingImage/'+constants.slug,type:'post',dataType:'json',\n								data:{ c:response, src_used:src_used, src:src },\n								success:function(response){\n									if ( typeof response.status != 'undefined' && response.status == 'success' ){\n										if ( typeof response.new_src != 'undefined' ){\n											src = response.new_src;\n											update(src);\n										}else update(src);\n										setTimeout(function(){\n											$imgParent.removeClass('updating').find(\"div.thisLoader\").remove();\n										},100);\n									}\n								},\n								error:function(response){\n									$imgParent.removeClass('updating').find(\"div.thisLoader\").remove();\n								}\n							});\n\n							setTimeout(function(){//fallback in case this thing gets stuck. happens all the time.\n								$imgParent.removeClass('updating').find(\"div.thisLoader\").remove();\n							},15000);\n						} else {\n							src = src_used;\n							update(src_used);\n						}\n					});\n				}\n				if($image.parent().hasClass('imgLink')){//if this section has a link, show it!\n					//linkified. check the respective boxes.\n					//add checked two levels up.  weird but that's how the css is set up to deal with this section.\n					$(\"#addImageLinkToggle\").val(1).parent().addClass('checked').parent().addClass('checked');\n					$(\"#image-link-url\").val($image.parent().prop(\"href\"));\n				} else{//reset link properties if none set.\n					$(\"#addImageLinkToggle\").val(0).parent().removeClass('checked').parent().removeClass('checked');\n					$(\"#image-link-url\").val('');\n				}\n\n				if ($image.length == 1 && !$image.hasClass('crp-enabled')){\n					imageEditTools();\n				}\n			}\n			hostImageTools();\n		} // }}}\n\n\n		finetuneActivateEditable($('#rsvp-legal-expl'),'data[EventSetting][rsvp_legal]',{ rawText: true });\n\n		// $mc.find(\"div.carousel\").activateCarousel().end()\n		// 	.find(\"div.layoutGrp\").addEditTools().end()\n		// 	.find(\"div.edit-tools\").remove();\n\n		$mc.find(\".carousel\").each(function(){\n			$(this).activateCarousel();\n		});\n\n		//hit the parent group.\n		$mc.find(\".edit-tools\").remove()\n\n		$mc.find(\"div.layoutGrp\").each(function(){\n			$(this).addEditTools();\n		});\n\n		// SplashFeed elements AND THEIR CHILDRENERNLNONEORNONERO\n		$mc.find('div.element .sf').each(function(){\n			var $splashFeed = $(this);\n\n			var sfid = (''+$splashFeed.attr('id')).replace('sfid-','');\n\n			var $pLock = $splashFeed.parents(\"div.layoutGrp[lock]:first\");\n			if( typeof $pLock!=='undefined' && $pLock.length > 0){\n				var lock = 'partial';\n				if($pLock.attr(\"lock\")=='full'){\n					lock = 'full';\n				}\n			}\n			if(lock=='full'){\n				$splashFeed.addClass('locked-full');\n			}\n\n			if ($splashFeed.parent().hasClass('children')) {//has children\n\n				var $t = $splashFeed.find('.title:first');\n				var $b = $splashFeed.find('.body:first');\n\n				if( $.inArray($splashFeed.attr('block-type'),['list-item','speaker-item','schedule-item','schedule-list-item','image-item','sponsor-item']) > -1 ) {\n					if ($t.length == 1) {\n						finetuneActivateEditable($t,'data[SplashFeed]['+sfid+'][title]',{advRTE: true, noPane: true, hideAligner: true});\n					}\n					if ($b.length == 1) {\n						finetuneActivateEditable($b,'data[SplashFeed]['+sfid+'][body]',{advRTE: true, noPane: true, hideAligner: true});\n					}\n\n					$splashFeed.addClass('hideAligner')\n\n				} else {\n					// IF NORMAL\n					if ($t.length == 1) {\n						finetuneActivateEditable($t,'data[SplashFeed]['+sfid+'][title]',{advRTE: true, noPane: true});\n					}\n					if ($b.length == 1) {\n						finetuneActivateEditable($b,'data[SplashFeed]['+sfid+'][body]',{advRTE: true, noPane: true});\n					}\n				}\n\n			} else {//parent\n				var $t = $splashFeed.find('> .title:first');\n				var $b = $splashFeed.find('> .body:first');\n				if ($t.length == 1 && !$splashFeed.hasClass('attendees')) {\n					finetuneActivateEditable($t,'data[SplashFeed]['+sfid+'][title]',{singleField:true});\n				}\n				if ($b.length == 1 && !$splashFeed.hasClass('countdown') && !$splashFeed.hasClass('attendees')) { // body in countdown element isn't editable\n					finetuneActivateEditable($b,'data[SplashFeed]['+sfid+'][body]');////noRTE:true });\n				}\n				if ( $splashFeed.hasClass('countdown') ) {\n					finetuneActivateEditable($b.find('.before_text'),'data[SplashFeed]['+sfid+'][options][before_text]');\n					finetuneActivateEditable($b.find('.days_text'),'data[SplashFeed]['+sfid+'][options][days_text]');\n					finetuneActivateEditable($b.find('.hours_text'),'data[SplashFeed]['+sfid+'][options][hours_text]');\n					finetuneActivateEditable($b.find('.minutes_text'),'data[SplashFeed]['+sfid+'][options][minutes_text]');\n					finetuneActivateEditable($b.find('.seconds_text'),'data[SplashFeed]['+sfid+'][options][seconds_text]');\n				} else if ( $splashFeed.hasClass('attendees') ) {\n					finetuneActivateEditable($t.find('.attendee-count-text'),'data[SplashFeed]['+sfid+'][options][attendee_count_text]');\n				}\n			}\n\n			// image cropper\n			if ( $splashFeed.hasClass('wImg') && !$splashFeed.hasClass('locked-full') ) { //skip the image gallery items. {{{\n				var $img = $splashFeed.find('> .image:first');\n				if ($img.length == 1) {\n					var $image = $img.find('img:first');\n					var src = $image.attr('src');\n					var update = function(new_src,dims){\n						var dims = dims || false;\n						if (new_src && (''+new_src).match(/\\/c\\.H\\./) == 1) {\n							var l_src = (''+new_src).replace(/\\/c\\.H\\./,'/c.L.');\n							var r = Math.random();\n							//$image.attr('src',l_src+'?'+r);\n\n							var iL=new ImageLoader(new_src+'?'+r);\n							iL.loadEvent=function(u){\n								setTimeout(function(){\n									if($splashFeed.attr(\"block-type\")=='image' || $splashFeed.hasClass('img-gal-item') ){\n										$image.prop(\"src\",u);\n									} else{\n										$img.css('background-image',\"url('\"+u+\"')\");\n									}\n									//$image[0].setAttribute('src',u);\n\n								},500);\n							};\n							iL.load();\n\n						} else {\n							if($splashFeed.attr(\"block-type\")=='image' || $splashFeed.hasClass('img-gal-item') ){\n								$image.prop(\"src\",new_src+'?'+Math.random());\n\n							} else{\n								//$image.attr('src',new_src+'?'+Math.random());\n								$img.css('background-image',\"url('\"+new_src+'?'+Math.random()+\"')\");\n							}\n						}\n						if($splashFeed.hasClass('img-gal-item')){\n							var photo_id = (''+$splashFeed.prop(\"id\")).replace('epid-','');\n							updateEventPhoto(photo_id, { image: new_src } );\n						}\n\n						var $parent = $img.parents(\".list-item:first\");\n						$parent.removeClass('is-placeholder');\n						clearPlaceholderStyles($img)\n						if($parent.hasClass('no-shape')){//either a legacy image shape or no shape at all.\n							//$image.attr(\"src\",new_src+'?'+Math.random());\n							$image.attr(\"src\",'/images/st-p-nu-square.png');\n						}\n\n						if(new_src.match(/\\?stp/)||new_src.match(/st-p-/)){//if the file ends with \"?stp\" - it's a placeholder.\n\n							if($img.find(\".removePlaceholder\").length < 1){\n								$img.find(\".imgEditTools\").html('<div class=\"removePlaceholder inline\">REMOVE</div><div class=\"addImage inline\">ADD</div>');\n								$img.find(\".removePlaceholder\").click(function(){\n									$img.parents(\".list-item:first\").find(\".delete:first\").click();\n									return false;\n								});\n							}\n						} else{\n							if($img.find(\".editExistingImg\").length < 1){\n								$img.find(\".imgEditTools\").html('<span class=\"editExistingImg inline middle nu-btn clean\">EDIT</span>');\n							}\n						}\n\n						if(sfid.match('/epid/')){ //event photo id. no need to do more here.\n							return false;\n						}\n\n						finetuneEditedFields['data[SplashFeed]['+sfid+'][image_url]'] = new_src;\n						var $linkUrl = $(\"#image-link-url\");\n\n						var val = $linkUrl.val();\n						if($(\"#addImageLinkToggle\").val()=='1'){\n							if( val!='' && val.indexOf(\"https://\")!=0 && val.indexOf(\"http://\")!=0 && val.indexOf(\"/\")!=0 && val.indexOf(\"#\")!=0 ){\n								val = 'http://'+val;\n							}\n							finetuneEditedFields['data[SplashFeed]['+sfid+'][website]'] = val;\n							if($image.parent().hasClass('imgLink')){\n								$image.parent().prop(\"href\",val);\n							} else{\n								$image.wrap('<a href=\"'+val+'\" target=\"_blank\" class=\"imgLink\"></a>');\n							}\n						} else{\n							finetuneEditedFields['data[SplashFeed]['+sfid+'][website]'] = '';\n							if($image.parent().hasClass('imgLink')){\n								$image.unwrap();\n							}\n						}\n\n						var options = $splashFeed.data('splashFeedOptions');\n						if (!options) {\n							options = {};\n							$splashFeed.data('splashFeedOptions',options);\n						}\n						var ratio = false;\n						if (dims !== false) {\n							var parts = (''+dims).split('x');\n							if (parts.length == 2) {\n								var width = parseInt(parts[0]);\n								var height = parseInt(parts[1]);\n								if (height > width) {\n									ratio = 'portrait';\n								}\n							}\n						}\n						if (ratio !== false) {\n							options.saved_img_ratio = ratio;\n						} else if (typeof options.saved_img_ratio != 'undefined') {\n							delete options.saved_img_ratio;\n						}\n						if (ratio == 'portrait') {\n							$img.addClass('img-portrait');\n						} else {\n							$img.removeClass('img-portrait');\n						}\n\n						finetuneEditedFields['data[SplashFeed]['+sfid+'][options]'] = $.extend({},options);\n\n						finetuneFieldChangesMade();\n					};\n					var imageEditTools = function(){\n\n						var $imgInner = $img.find(\"img:first\");\n						//var src = $imgInner.prop(\"src\");\n						var src = stripUrl($img.css('background-image'));\n\n						// var $t = $(this),\n						// 	$img = $(this).find(\"img:first\"),\n						// 	src = $img.prop(\"src\");\n						if(src.match(/\\?stp/)||src.match(/st-p-/)){//if the file ends with \"?stp\" - it's a placeholder.\n							// $img.append('<div class=\"img-utils imgEditTools crop abs tl w100 h100 center align middle txtC pointer\"><div class=\"removePlaceholder inline middle txtC\"><span class=\"nu-btn clean noEdge red-bg\"><span class=\"big\">Remove</span><span class=\"small\">&#10006;</span></div><div class=\"addImage inline middle txtC\"><span class=\"nu-btn clean\"><span class=\"big\">Add Image</span><span class=\"small\">&#10010;</span></span></div></div>');\n\n							$img.append('<div class=\"img-utils imgEditTools crop abs tl w100 h100 center align middle txtC pointer\"><span class=\"editExistingImg inline middle semiBold nu-btn clean\">EDIT</span></div>');\n							$img.parents(\".list-item:first\").addClass('is-placeholder');\n\n							checkPlaceholderWidth($img)\n\n						} else{\n							$img.append('<div class=\"img-utils imgEditTools crop abs tl w100 h100 center align middle txtC pointer\"><span class=\"editExistingImg inline middle semiBold nu-btn clean\">EDIT</span></div>');\n							$img.parents(\".list-item:first\").removeClass('is-placeholder');\n							clearPlaceholderStyles($img)\n						}\n						//$img.append('<div class=\"img-utils imgEditTools crop abs tl w100 h100 center align middle txtC pointer\"><span class=\"inline middle semiBoldItalic\">EDIT</span></div>');\n						$img.find(\".crop\").click(clickToCrop);\n						$image.addClass('crp-enabled');\n\n						$img.find(\".deleteImg\").click(function(){\n							$image.remove();\n							makeUploader();\n							$img.find('.edit-tools').remove();\n						});\n						$img.find(\".removePlaceholder\").click(function(){\n							$img.parents(\".list-item:first\").find(\".delete:first\").click();\n							return false;\n						});\n					}\n					var clickToCrop = function(){\n\n						var aspectRatio = null;\n						if ($splashFeed.hasClass('square') || $splashFeed.hasClass('nu-square')) { aspectRatio = 1; }\n						if ($splashFeed.hasClass('circle') || $splashFeed.hasClass('nu-circle')) { aspectRatio = 1; }\n						if ($splashFeed.hasClass('landscape') || $splashFeed.hasClass('nu-landscape')) { aspectRatio = 3/2; }\n						if ($splashFeed.hasClass('portrait') || $splashFeed.hasClass('nu-portrait')) { aspectRatio = 3/4; }\n						if($image.parent().hasClass('imgLink')){//if this section has a link, show it!\n							//linkified. check the respective boxes.\n							//add checked two levels up.  weird but that's how the css is set up to deal with this section.\n							$(\"#addImageLinkToggle\").val(1).parent().addClass('checked').parent().addClass('checked');\n							$(\"#image-link-url\").val($image.parent().prop(\"href\"));\n						} else{//reset link properties if none set.\n							$(\"#addImageLinkToggle\").val(0).parent().removeClass('checked').parent().removeClass('checked');\n							$(\"#image-link-url\").val('');\n						}\n						if( /*!$image.parents(\".list-item:first\").hasClass('no-shape') &&*/ $.inArray($splashFeed.attr(\"block-type\"),['image','event-hub-item'])<0 ) {//dont do this for hero.\n							$image.addClass('use-parent-bg');//only add if the parent is NOT a legacy shape.\n						}\n\n						$(\"#cropAnyPhoto\").data(\"group-id\",false);\n						cropImage($image,aspectRatio,function(response,src_used,new_src,orig_dims){\n							var new_src = new_src || false;\n							var orig_dims = orig_dims || false;\n							if (response!==false){\n								if (!src || new_src) {\n									src = src_used;\n								}\n								$image.addClass('updating');\n\n								$imgParent = $image.parents('.image:first')\n								$imgParent.addClass('updating').append($(\"<div class='thisLoader small loading'><div class='nu-loader med'></div></div>\"));\n\n								//$(\"<div id='imgLoader' class='thisLoader small loading'><div class='nu-loader med'></div></div>\").insertAfter( $image )\n\n								$.ajax({url:'/events/cropExistingImage/'+constants.slug,type:'post',dataType:'json',\n									data:{ c:response, src_used:src_used, src:src },\n									success:function(response){\n										if ( typeof response.status != 'undefined' && response.status == 'success' ){\n											var dims = (response.dims) ? response.dims : false;\n											if ( typeof response.new_src != 'undefined' ){\n												src = response.new_src;\n												update(src,dims);\n											}else update(src,dims);\n										}\n										setTimeout(function(){\n											$image.removeClass('updating');\n											$imgParent.removeClass('updating').find(\"div.thisLoader\").remove();\n//											$('#imgLoader').remove()\n										},100);\n									},\n									error:function(){\n										setTimeout(function(){//fallback in case this thing gets stuck. happens all the time.\n											$image.removeClass('updating');\n											$imgParent.removeClass('updating').find(\"div.thisLoader\").remove();\n										},100);\n									}\n								});\n								setTimeout(function(){//graceful fallback in case this thing gets stuck. happens all the time.\n									$image.removeClass('updating');\n									$imgParent.removeClass('updating').find(\"div.thisLoader\").remove();\n								},15000);\n							} else {\n								src = src_used;\n								update(src_used,orig_dims);\n							}\n						}); /**/\n					}\n\n					if ($image.length == 1 && !$image.hasClass('crp-enabled')){\n						imageEditTools();\n					}\n				}\n			} // }}}\n\n			if($splashFeed.hasClass('list-item') ){ //if it's a list child item, put it INSIDE  the block. // {{{\n				//timepicker binding.\n				if(!$splashFeed.hasClass('tp-enabled')){\n					var $tp = $splashFeed.find(\".timePicker\");\n					if($tp.length > 0){\n						$splashFeed.addClass('tp-enabled');\n						var $th = $tp.find(\"input.timeHolder\");\n						$th.prop(\"readonly\",false);\n\n						$th.change(function(){\n							var c= 'start';\n							finetuneEditedFields['data[SplashFeed]['+sfid+'][title]'] = $th.val();//either start or end time being submitted based on what's changed. booyah.\n							finetuneFieldChangesMade();\n						}).keyup(function(e){\n							if(e.keyCode==13){\n								$th.parents(\".list-item:first\").find(\".body:first\").focus();\n							}\n						});\n					}\n				}\n			}\n		});\n\n\n\n		// list item sorting\n		$mc.find(\".children\").each(function(){ // {{{\n			var $t = $(this);\n			//if(!$t.hasClass('ui-sortable') && $t.find(\".list-item\").length > 0){\n			if($t.find(\".list-item\").length > 0 && !$t.parents(\".sf:first\").hasClass('locked-full') ){\n				if($t.hasClass('ui-sortable')){\n					$t.sortable('destroy');\n				}\n				$t.sortable({\n					handle: '.drag-handle',\n					cancel: '.noDrag',\n					revert: true,\n					tolerance:\"pointer\",\n					start: function(event, ui) {\n						$t.append(ui.item); // move the dragging element to the end\n					},\n					stop: function(event, ui){\n						//get the new order of our sorted kids.\n						$t.find(\".list-item\").each(function(i){\n							var item_id = (''+$(this).prop(\"id\")).replace('sfid-','');\n							finetuneEditedFields['data[SplashFeed]['+item_id+'][sort_order]'] = i;\n						});\n\n						finetuneFieldChangesMade();\n					}\n				});\n			}\n		}); // }}}\n\n		addHeaderHovers();\n		addElementButtons();\n\n		$mc.find(\".container-ele\").each(function(){\n			$(this).find(\".drop-area\").sortable({\n				connectWith: \".drop-area\",\n				items: '.layoutGrp',\n				handle: '.drag-handle',\n				cancel: '.noDrag',\n				scroll: true,\n				helper: function(event, element) {\n			        return element.clone().appendTo(\"body\");\n			    },\n				start: function(event,ui){\n					undoColumnSort.pop();\n					undoColumnSortPrev.pop();\n					undoColumnSortParent.pop();\n					$body.addClass(\"isDragging\");\n					var movedGroupId = ui.item[0].id,//get the id of the moved item.\n						$movedGroup = $(\"#\"+movedGroupId),//get the object\n						$prevGroup = $movedGroup.prev('.layoutGrp'),//find the previous sibling (if any)\n						$movedFt = $(\"#ft\"+movedGroupId),//finetune block for the moved item.\n						$parent = $movedGroup.parents(\".layoutGrp:first\");// parent element\n					undoColumnSort.push($movedGroup);\n					undoColumnSortPrev.push($prevGroup);\n					undoColumnSortParent.push($parent);\n				},\n				update: function(event,ui){\n					$body.removeClass(\"isDragging\")\n					var movedGroupId = ui.item[0].id,//get the id of the moved item.\n						$movedGroup = $(\"#\"+movedGroupId),//get the object\n						$prevGroup = $movedGroup.prev('.layoutGrp'),//find the previous sibling (if any)\n						$movedFt = $(\"#ft\"+movedGroupId);//finetune block for the moved item.\n					if($prevGroup.length > 0){//if we do find a previous sibling, move the dragged object after it in the sidebar!\n						var prevGroupId = $prevGroup.prop(\"id\");\n						$(\"#ft\"+prevGroupId).after($movedFt);\n					} else { //if no previous sibling, find it's parent container and move it to the start of that block in the sidebar.\n						var $parent = $movedGroup.parents(\".layoutGrp:first\");\n						var parentId = $parent.prop(\"id\");\n						$(\"#ft\"+parentId).children('.accordion').after($movedFt);\n					}\n					addElementButtons();//re-add buttons.\n					updateNestAttr();//update th nest attribute order.\n					finetuneLayoutChangesMade(); //called to save new order\n					trackIndicativeEvent('onPageElementMoved');\n					//undo on page dragging\n					var undoMessage = 'Would you like to undo your last move?';\n					SplashUI.ask(function( response ) {\n						// UNDO FUNCTION GOES HERE\n						if(response){\n							onpageUndo()\n						}\n					}, undoMessage, 'undo', 5000);\n				}\n			});\n		});\n\n\n		// //console.timeEnd('activating');\n	} // }}}\n\n	function onpageUndo() {\n		if(undoColumnSortPrev[0].length > 0) {\n			$(\"#\"+undoColumnSortParent[0].prop('id')).children(\"#\"+undoColumnSortPrev[0].prop('id')).after(undoColumnSort[0]);\n		}\n		else {\n			$(\"#\"+undoColumnSortParent[0].prop('id')).prepend(undoColumnSort[0]);\n		}\n		undoColumnSort.pop();\n		undoColumnSortPrev.pop();\n		undoColumnSortParent.pop();\n		trackIndicativeEvent('onPageUndo');\n	}\n\n	function finetuneDeActivateOnPageEditables(_callback)\n	{ // {{{\n		if(typeof tinymce!=='undefined' && tinymce.editors.length > 0){\n			tinymce.remove('.editable');\n		}\n		$('.element .editable').each(function(){\n			finetuneDeActivateEditable($(this));\n		});\n		$('#main-canvas')\n			.find('div.layoutGrp').removeClass('locked-full locked-partial').end()\n			.find('.hasTiny').removeClass('hasTiny').end()\n			.find('.crp-enabled').removeClass('crp-enabled').end()\n			.find('.tp-enabled').removeClass('tp-enabled').end()\n			.find('.edit-tools,.element .img-utils,.element .img-uploader').remove();\n\n		$(\"#changeHeaderInline,#changeBgInline\").remove();\n\n\n		if(_callback!=null && typeof _callback=='function'){\n			_callback()\n		}\n	} // }}}\n\n\n	var finetuneEditableOpts = {\n		singleField: false,\n\n		// got some new plugins/options! see: http://www.tinymce.com/tryit/full.php\n		tinymceOpts:{\n\n			height: 36,\n			//selector: \".editable\",\n			inline: true,\n			menubar: false,\n			plugins: [\n				'image',//,'contextmenu',\n				'textcolor',\n				'tabfocus','autolink',\n				// 'splashImage',\n				'listBtn',\n				'link','code','paste'\n			],\n			paste_as_text: true,\n			relative_urls: false,\n			convert_urls: false,\n			paste_text_sticky: true,\n			paste_text_sticky_default: true,\n			//theme: \"modern\",\n			//width: '100%',\n			// toolbar: \"undo redo | bold italic | fontSizer imgPicker | fontFamily | colorPicker | lineHeight | aligner link | shadow spacing | removeformat code closeButton\",\n			toolbar: getToolbarOpts(),\n			element_format: 'html',\n			file_browser_callback: function(field_name, url, type, win) { // {{{\n				var $input = $(win.document.getElementById(field_name));\n\n				$input.after($f);\n				var $f = $('<input type=\"file\" />');\n				$input.after($f);\n\n				$f[0].onchange = function(){\n\n					var file = this.files[0];\n					if (!file || !file.type.match(/image.*/)) {\n						alert(\"Only image files can be uploaded\");\n						return;\n					}\n					//this.setStyle({ display: 'none' });\n					$f.hide();\n					//this.setProgress(0);\n\n					var fd = new FormData(); // https://hacks.mozilla.org/2011/01/how-to-develop-a-html5-image-uploader/\n					fd.append(\"newAsset[]\", file);\n					fd.append(\"returnImage\", \"1\");\n					var xhr = new XMLHttpRequest();\n					xhr.open(\"POST\", '/events/customStyleEditor/'+constants.event_id);\n\n					xhr.onload = function() {\n						try {\n							var res = JSON.parse(xhr.responseText);\n						} catch(e) {\n							//return this.onError();\n							alert('errr');\n						}\n						//this.onUploaded(res);\n\n					};\n					//xhr.onerror = this.onError.closure(this);\n					xhr.onerror = function(){ alert('er'); };//this.onError.closure(this);\n					xhr.upload.onprogress = function(e) {\n						//this.setProgress(e.loaded / e.total);\n					}///.closure(this);\n					xhr.send(fd);\n				}\n\n				setTimeout(function(){ $f.click(); },0);\n\n			}, // }}}\n			// init_instance_callback: function (inst) {\n			// 	//inst.execCommand('mceAutoResize');\n			// 	//var $toolbar = $('#'+inst.currentTarget.id);//.offset()\n			// 	//alert($toolbar);\n			// 	//$toolbar.css('width','547px');\n			// },\n\n			setup : function(editor) {\n				addCustomRTEButtons(editor);\n			}\n\n		} // end tinymceOpts }}}\n	}\n\n	$('#dev-tools-btn, #dev-tools-btn-layout').on('click', function(){\n		$(\"#simple-modal-wrap\").css('background', 'rgba(0,0,0, 0.85)');\n		trackIndicativeEvent('ClickedOnWrenchIcon');\n	})\n\n	$('#simple-modal-wrap').on('click', function(e){\n		// hack for removing custom asset editor class when closing modal\n		if( $(e.target).hasClass('simple-modal-flow-control') ){\n			$('body').removeClass('custom-editor')\n		}\n	})\n\n\n	function fixMceMenu(type){\n		$('#rteTextShadowPicker,#rteTextSpacingPicker').hide();\n		$body = $('body')\n		$body.removeClass('sizeMenu colorMenu lineHeightMenu fontFamilyMenu alignerMenu')\n		if( typeof type != undefined && type != false ){\n			$body.addClass(type);\n		}\n	}\n\n	var finetuneEditedFields = {};\n	var finetuneOrigFields = {};\n	var finetuneNewBlockIds = [];\n	var firstTiny = false;\n	function finetuneActivateEditable($field,fieldName,opt)\n	{ // {{{\n		var opt = opt || {};\n		opt = $.extend(true,{},finetuneEditableOpts,opt);\n		if ($field.length == 1) {\n			if (!$field.hasClass('editable')) {\n\n				if(typeof $field.attr(\"lock\")!=='undefined'){\n					var lock = 'partial';\n					if($field.attr(\"lock\")=='full'){\n						lock = 'full';\n					}\n				} else {\n					var $pLock = $field.parents(\"div.layoutGrp[lock]:first\");\n					if( typeof $pLock!=='undefined' && $pLock.length > 0){\n						var lock = 'partial';\n						if($pLock.attr(\"lock\")=='full'){\n							lock = 'full';\n						}\n					}\n				}\n				var $par =  $field.parents('.layoutGrp:first')\n				if(typeof lock!=='undefined'){\n					$par.removeClass('locked-full locked-partial').addClass(\"locked-\"+lock);//(\".edit-tools,.core-edit-tools\").remove();//partial & full locks both remove delete option.\n					if(lock=='full'){//no editing, sorry pal.\n						return false;\n					}\n				}\n\n				$field.addClass('editable');\n				finetuneOrigFields[fieldName] = $field.html().trim();\n				if (opt.singleField != false) {\n					$field.addClass('singleField');\n				}\n\n				// console.log('this field ', $field)\n				//var thisType = $par.find('.sf:first').attr('block-type')\n				//$par.addClass( thisType ) //THIS BASTARD ADDS THE BLOCK TYPE TO THE PARENT LAYOUT GROUP AS A CLASS AFTER THE PAGE LOADS AND ONLY IN FINETUNE MODE.  THIS IS UNRELIABLE.\n\n				var myEditorRendered = false;\n				if (opt.noRTE) {\n					myEditorRendered = true;\n					$field.attr({'contenteditable':'true','spellcheck':'false'});\n				}\n\n				var myFtTimeout;\n				$field.on('focus.finetune', function() {\n					if (myEditorRendered === true) {\n						clearTimeout(myFtTimeout);\n						var $this = $(this);\n						currentFocusedInput = $field.prop(\"id\");\n						//var selection = tinyMCE.activeEditor.selection;\n\n						setTimeout(function(){ //needs the set timeout for first-time focus.  Without it, the initialization is not complete.\n							updateEditorOpts();\n						},10);\n\n\n						$('#main-canvas').find('.editing').removeClass('editing');\n						var $mygrp = $this.parents('.grp:first').addClass('editing');\n\n						$body.addClass('editWithMCE')\n						if( $mygrp.hasClass('hideAligner') /*|| $mygrp.parents('.list-item:first').hasClass('schedule-item') */ ){\n							$body.addClass('hideAlignerRTE')\n						} else {\n							$body.removeClass('hideAlignerRTE')\n						}\n\n						$this.data({ 'enter': $this.html(), 'before': $this.html() });\n						return $this;\n					}\n\n				}).on('paste.finetune', function(e) {\n					// some stuff\n					var $this = $(this);\n					// mark existing tags with something...\n					$this.find('*').each(function(){\n						$(this).attr('c','e');\n					});\n					setTimeout(function(){\n						$this.find('[c!=\"e\"]').each(function(){\n							$(this).replaceWith($(this).html());\n						});\n						$this.find('*').removeAttr('c');\n					},0);\n				}).on('keyup.finetune', function() {\n					//currentFocusedInput = $field.prop(\"id\");\n					var $this = $(this);\n					updateEditorOpts();\n\n					var text = $this.html();\n					if ($this.data('before') !== text) {\n						$this.data('before', text);\n						$this.trigger('change');\n					}\n				}).on('blur.finetune', function() {\n\n					var $this = $(this);\n					var text = $this.html();\n					if ($this.data('enter') !== text) {\n						$this.data('enter', text);\n						$this.trigger('change');\n					}\n\n					var $mygrp = $this.parents('.grp:first');\n					var gid = (''+$mygrp.attr('id')).replace('g-','');\n\n					myFtTimeout = setTimeout(function(){\n						$mygrp.removeClass('editing');\n					},150);\n\n					$(\".mce-shadow-button.mce-active\").removeClass('mce-active');\n					$body.removeClass('editWithMCE');\n\n					$(\"#rteTextShadowPicker, #rteTextSpacingPicker\").hide();\n					$(\"div.mce-tinymce\").removeClass('has-hovered');\n\n\n				}).on('focusout.finetune',function(){\n					$(\"div.mce-tinymce\").removeClass('has-hovered')\n					$(\"#rteTextSpacingPicker,#rteTextShadowPicker\").hide();\n					$(this).parents(\".layoutGrp:first\").removeClass('hovering the-focus');\n\n					//if( $('body').hasClass('editWithMCE') ){\n					//	$('body').find('.mce-tinymce-inline').find('.mce-container-body').removeClass('showAll')\n					//	}\n\n					//$(\"div.mce-abs-layout\").removeClass('showAll');\n					//$(\".mce-show-all\").removeClass('active');//close active classes on focusout.\n				})\n				.on('keydown.finetune', function(event) {\n				 	if (event.keyCode==13) {\n				 		$(this).parents(\".layoutGrp:first\").addClass('hovering the-focus').parents('.layoutGrp').removeClass('hovering the-focus');\n						var x = window.scrollTop;\n						setTimeout(function(){\n							$(window).scrollTop((''+x));\n						},1);\n					 	//none of these do any good.\n					 	//event.preventDefault();\n						//event.stopPropagation();\n					 	//return false;//enter\n				 	}\n			 	})\n			 	.on('change.finetune', function() {\n					var $this = $(this);\n\n					$this.removeClass('newbie');\n					/*var options = $this.data('splashFeedOptions');\n					if (!options) {\n						options = {};\n						if(typeof options['newbie']!=='undefined'){\n							delete(options['newbie']);\n						}\n						$this.data('splashFeedOptions',options);\n					}*/\n\n					var html = $this.html();\n					if (html != '<p><br data-mce-bogus=\"1\"></p>' || html !='<div><br data-mce-bogus=\"1\"></div>') {\n						// if($this.prop(\"id\")=='rsvp-button'){\n						// 	$(\"#rsvp-button\").quickfit({ max:45, min: 30 });\n						// }\n						finetuneEditedFields[fieldName] = $this.html().trim();\n						finetuneFieldChangesMade();\n						if (leaveInheritedStateIntact == false) { // my brain hurts\n							$this.parents('.element:first').removeAttr('inherited-theme');\n						}\n					}\n					return $this;\n\n				/**/\n				}).on('click.finetune', function(){\n						//setTimeout(function(){ $field.focus(); },500);\n					if (!$field.hasClass('hasTiny') && (typeof opt.noRTE==='undefined'||!opt.noRTE)) {\n						myTiny();\n\n					} else{\n						if(!$field.hasClass('editing')){\n							$field.focus();\n						}\n					}\n\n				}).on('click.finetune','img',function(e){\n					var $image = $(this);\n					// if($image.attr(\"data-mce-src\")!=='undefined'){\n					// 	return;//this should not apply to tinymce-added images. for now.\n					// }\n					var src = $image.attr('src');\n					var update = function(new_src){\n						$image.attr('src',src+'?'+Math.random());\n					};\n					cropImage($image,null,function(response,src_used){\n						if (response!==false){\n							$.ajax({url:'/events/cropExistingImage/'+constants.slug,type:'post',dataType:'json',\n								data:{ c:response, src_used:src_used, src:src },\n								success:function(response){\n									if ( typeof response.status != 'undefined' && response.status == 'success' ){\n										if ( typeof response.new_src != 'undefined' ){\n											src = response.new_src;\n											update(src);\n										}else update();\n									}\n								}\n							});\n						}\n					}); /**/\n				});\n\n				var myTiny = function() {\n					var myEditor;\n					// //console.time(\"clicked!\");\n\n					// on the fly tinymce\n					if (!$field.hasClass('hasTiny') && (typeof opt.noRTE==='undefined'||!opt.noRTE)) {\n\n						$field.addClass('hasTiny');\n						if (!$field.attr('id')) {\n							$field.attr('id',fieldName.replace(/[^a-z0-9]/gi,''));\n						}\n\n						opt.tinymceOpts.selector = 'div#'+$field.attr('id');\n\n						if(opt.hideAligner){\n							opt.tinymceOpts.toolbar = getToolbarOpts(opt);\n							opt.tinymceOpts.setup = function(editor) {\n								addCustomRTEButtons(editor,opt);\n							}\n						} else if(opt.simpleRTE){\n							opt.tinymceOpts.toolbar = getToolbarOpts(opt);\n							opt.tinymceOpts.setup = function(editor) {\n								addCustomRTEButtons(editor,opt);\n							}\n						}\n						else if(opt.hiJackRTE){//hiJack the buttons!\n							var field_id = ($field.parents(\"#element-title\").length > 0)?'title':'subtitle';\n							opt.tinymceOpts.toolbar = getToolbarOpts();\n							opt.tinymceOpts.setup = function(editor) {\n								addCustomRTEButtons(editor,{field_id:field_id});\n							}\n						}\n\n						myEditor = tinymce.createEditor($field.attr('id'),opt.tinymceOpts);\n\n						myEditor.on('change',function(e){\n							//ridiculous that we have to make this check, but a special check to make sure that the links all have 'http' in front of them.\n							$field.find(\"a[data-mce-href]\").each(function(){\n								var raw_href = $(this).attr(\"data-mce-href\").trim();\n\n								if(raw_href.substring(0,1)!='#' && raw_href.indexOf(\"http\")==-1 && !raw_href.match(/mailto/g) ){\n									$(this).prop(\"href\",\"http://\"+raw_href).attr(\"data-mce-href\",'http://'+raw_href);\n								}\n							});\n							//equally as ridiculous as the check above. this time, for images.\n							$field.find(\"img[data-mce-src]\").each(function(){\n								var raw_src = $(this).attr(\"data-mce-src\");\n								if(raw_src.substring(0,1)!='#' && raw_src.indexOf(\"http\")==-1){\n									$(this).prop(\"src\",\"http://\"+raw_src).attr(\"data-mce-src\",'http://'+raw_src);\n								}\n							});\n							$field.trigger('change');\n						});\n						myEditor.render();\n\n						myEditorRendered = true;\n						$field.click();\n					}\n				}\n				if (firstTiny === false && !$field.hasClass('hasTiny') && (typeof opt.noRTE==='undefined'||!opt.noRTE)) {\n					$field.parents('.grp:first').addClass('firstTiny');\n					setTimeout(function(){\n						$field.click();\n						setTimeout(function(){\n							$field.blur();\n							setTimeout(function(){\n								$field.parents('.grp:first').removeClass('firstTiny');\n							},100);\n						},0);\n					},1500);\n					firstTiny = true;\n				}\n			}\n\n		}\n\n	} // }}}\n	function finetuneDeActivateEditable($field)\n	{ // {{{\n		$field.removeClass('editable singleField')\n			.removeAttr(\"contenteditable\")\n			.off('focus.finetune focusout.finetune input.finetune paste.finetune keyup.finetune blur.finetune keydown.finetune change.finetune paste.finetune mouseover.finetune click.finetune');\n\n	} // }}}\n	/*************************************************\n	 * ---------- End Inline Editor Stuff ---------- *\n	 *************************************************/\n\n	function autoSaveData(){\n\n		// //console.time(\"grabbing inputs.\");\n		var $button = $(\"#save-details-design\");\n		var $body = $(\"body\");\n		if ($body.hasClass('has-theme-changes')) {\n			var $changed_inputs = finetuneGetThemeStyleInputs(true);\n			finetuneLayoutChangesMade();\n			// put all custom block fields in finetuneEditedFields\n			finetuneMarkAllCustomBlockFields();\n			// $(\"#event-theme-input\").removeAttr(\"last-theme-id\");\n		} else {\n			var $changed_inputs = $(\"input.changes-made,textarea.changes-made,select.changes-made\");\n		}\n		if($(\"#autosave-checkbox\").val()=='1'){\n			var autosave=true;\n		} else{\n			var autosave=false;\n		}\n\n		if(isLegacyEvent() && $(\"#is-legacy-has-updated\").val() == ''){\n			$(\"#is-legacy-has-updated\").val(1).trigger('change');\n		}\n\n		$body.addClass('in-progress');\n		$button.addClass('in-progress');\n\n		// //console.timeEnd(\"grabbing inputs.\");\n\n		if($changed_inputs.length || finetuneLayoutHasChanged || finetuneFieldsHaveChanged){\n			//var params = [];\n			var postData = getChangedInputsArray($changed_inputs);\n			if (finetuneLayoutHasChanged !== false) {\n				postData['data[EventSetting][layout]'] = finetuneGetEventLayout();\n				finetuneLayoutHasChanged = false;\n			}\n			if (finetuneFieldsHaveChanged !== false) {\n				postData = $.extend({},postData,finetuneEditedFields);\n				if (finetuneNewBlockIds.length > 0) {\n					for (var x in finetuneNewBlockIds) {\n						var tmpId = finetuneNewBlockIds[x][0];\n						var newId = finetuneNewBlockIds[x][1];\n						for (var i in postData) {\n							//var reg = new RegExp('data\\[SplashFeed\\]\\['+tmpId+'\\]');\n							var reg = new RegExp('data.SplashFeed..'+tmpId+'.');\n							if ((''+i).match(reg)) {\n								postData[(''+i).replace(reg,'data[SplashFeed]['+newId+']')] = postData[i];\n								delete postData[i];\n							}\n						}\n					}\n				}\n				finetuneEditedFields = {};\n				finetuneFieldsHaveChanged = false;\n			}\n			//special check for staging events.  pass through if editing a non-live stage.\n			if(typeof constants.stage_edit!=='undefined' && constants.stage_edit!==false){\n				postData['data[EventSetting][stage_edit]'] = constants.stage_edit;\n			} else if(typeof $(\"#event-stage-id\").attr(\"switched\")!=='undefined'){\n				postData['data[EventSetting][stage_switch]'] = $(\"#event-stage-id\").val();\n			}\n\n			//special check if you want to force a hard redirect.  simply set constants.force_redirect to true.\n			if(typeof constants.force_redirect!=='undefined' && constants.force_redirect){\n				postData['data[force_redirect]'] = true;\n			}\n\n			$.ajax({\n				url:\"/events/saveEventData/\"+constants.event_id,\n				type: 'post',\n				data: postData,\n				dataType: 'json',\n				statusCode: {\n					401: function(response) {\n						handleSaveError( false );\n					},\n					403: function(response) {\n						handleSaveError( true, 'Whoops.  Looks like there was an error saving your data.  Please refresh the page and try again.');\n					}\n				},\n				success: function(response){\n\n					if ( typeof response !== 'undefined' && response!=null && typeof response.status != 'undefined' && response.status == 'success' ){\n\n						if (typeof response.SplashFeed !== 'undefined' && typeof response.SplashFeed.newIds !== 'undefined') {\n							var socContentId = gallerySplashFeedId;\n\n							for (var i in response.SplashFeed.newIds) {\n								var tmpId = response.SplashFeed.newIds[i][0];\n								var newId = response.SplashFeed.newIds[i][1];\n								finetuneNewBlockIds.unshift([tmpId,newId]);\n								replaceSFIDEverywhere(tmpId,newId);\n\n								// to get the new id from the layout array, recall autosave data now.\n								// finetuneLayoutChangesMade = true;\n								finetuneLayoutHasChanged = true;\n								changes_made = true;\n								setChangesMade('silent');\n								//finetuneLayoutChangesMade(); // to get the new id from the layout array dude...\n\n								if(typeof socContentId!=='undefined' && socContentId == tmpId){\n									gallerySplashFeedId = newId;\n								}\n\n							}\n						}\n\n						if (typeof response.domainError == 'undefined' || response.domainError == '0'){\n							$changed_inputs.removeClass('changes-made');\n							$button.removeClass('in-progress');\n\n							$body.addClass('changes-saved').removeClass('has-changes in-progress has-theme-changes');\n							changes_made = false;\n							$('#his-changed').val(0);\n							setTimeout(function(){\n								$body.removeClass('changes-saved');\n								var ts = new Date();\n								$(\"#save-details-design\").attr(\"title\", \"Last saved at \"+ts.toLocaleTimeString() );\n							},2500);\n\n							// if the domain changed, this will be set to the new url\n							if(typeof response.redirect !=='undefined'){\n								domain_changes = true;\n								window.location = response.redirect;\n							}\n						}\n						// domain saving error\n						else if ( typeof response.domainError != 'undefined' && response.domainError == '0' ) {\n							setTimeout(function(){\n								setVisibleAccordionHeight();\n							},100);\n							handleSaveError(true, \"There was a problem saving your Custom Domain.\\nPlease try again.\");\n						}\n\n						updateJSEventProperties(postData);\n\n					} else {\n						handleSaveError( false );\n					}\n				}\n			});\n		} else{\n			$button.removeClass('in-progress');\n			$body.removeClass('has-changes in-progress').addClass('changes-saved');\n			setTimeout(function(){\n				changes_made = false;\n				$body.removeClass('changes-saved');\n				//$button.text('Save').removeClass('changes-saved');\n			},2500);\n		}\n		// second ajax call for saving the gallery order - gallerysort.js\n		if ( gallery_changes_made ){\n			saveGalleryOrder(function(response){\n				gallery_changes_made = false;\n				//disableGallerySort();\n			});\n		}\n\n	}//end autosave data\n\n\n	if ( google !== false ){\n		var geocoder = new google.maps.Geocoder();\n	}else var geocoder = false;\n\n	function geocodePosition(pos) {\n		if ( geocoder === false ) return false;\n		geocoder.geocode({\n			latLng: pos\n		}, function(responses) {\n			if (responses && responses.length > 0) {\n				updateMarkerAddress(responses[0].formatted_address);\n			} else {\n				updateMarkerAddress('Cannot determine address at this location.');\n			}\n		});\n	}\n\n	function geocodeAddress(address){\n		if ( geocoder === false ) return false;\n		geocoder.geocode({\n			address: address\n		}, function(responses) {\n			if (responses && responses.length > 0) {\n\n				if(responses[0].geometry.location){\n					$(\"#venue-lat-map-embed,#venue-lat\").val(responses[0].geometry.location.lat());//.trigger('change');\n					$(\"#venue-lng-map-embed,#venue-lng\").val(responses[0].geometry.location.lng());//.trigger('change');\n				}\n				//updateMarkerAddress(responses[0].formatted_address);\n				//marker.setPosition(responses[0].geometry.location);\n				updateMarkerPosition(responses[0].geometry.location);\n				//map.setCenter(responses[0].geometry.location);\n				//$(\"#map-container\").show();//(100);//();\n			}\n			// } else {\n			// 	updateMarkerAddress('Cannot determine address at this location.');\n			// }\n		});\n	}\n\n	function updateMarkerPosition(latLng) {\n		$(\".venueLatLng\").find(\".lat\").val(latLng.lat()).trigger('change');\n		$(\".venueLatLng\").find(\".lng\").val(latLng.lng()).trigger('change');\n	}\n\n	function updateMarkerAddress(str) {\n		$(\".venueLatLng\").find(\".address\").html(str);\n	}\n\n	var marker;\n	var map;\n\n	function initializeVenueMap() {\n		if ( google === false ) return false;\n\n		var input = document.getElementById('venue-search');\n		var autocomplete = new google.maps.places.Autocomplete(input);\n\n        google.maps.event.addListener(autocomplete, 'place_changed', function(e) {\n\n        	trackIndicativeEvent('venueChanged');\n\n	    	var place = autocomplete.getPlace();\n	      	var address = '';\n\n	          var address_fields = { name: place.name, street_number: '', address: '', city: '', state: '', zip: ''};\n	          if (place.address_components) {\n\n	             for ( var i in place.address_components ){\n	               if ( place.address_components[i].types[0] == 'postal_code' ) address_fields.zip = place.address_components[i].long_name;\n	               else if ( place.address_components[i].types[0] == 'street_number' ) address_fields.street_number = place.address_components[i].long_name;\n	               else if ( place.address_components[i].types[0] == 'route' ) address_fields.address = place.address_components[i].long_name;\n	               else if ( place.address_components[i].types[0] == 'locality' ) address_fields.city = place.address_components[i].long_name;\n	               else if ( place.address_components[i].types[0] == 'administrative_area_level_1' ) address_fields.state = place.address_components[i].short_name;\n	               else if ( place.address_components[i].types[0] == 'country' ) address_fields.country = place.address_components[i].long_name;\n	             }\n	          }\n\n			// Updating Timezone to the one of the new venue\n			timezoneDetector.getTimezone( place.geometry.location.lat(), place.geometry.location.lng(), function( data ) {\n\n				if( data.timeZoneId!=null ) {\n					//if there's an id, we have a match.\n					var $tz = $('#timezone-selector');\n					var $opt = $tz.find(\"option[tz-name='\"+data.timeZoneId+\"']:first\");\n\n					// Only do a timezone update in case it has changed\n					if ( $tz.find('option:selected').val() != $opt.prop(\"value\") ) {\n						if($opt.length < 1){ //if no match keep looking.\n							var offset = data.rawOffset/3600;//returned in seconds. convert to seconds.\n							//var $opt = $tz.find(\"option[offset='\"+offset+\"']:first\");\n							var new_option = '<option tz-name=\"'+data.timeZoneId+'\" value=\"-1\">(GMT '+offset+':00) '+data.timeZoneName+'</option>';\n							$tz.find(\"optgroup:last\").append(new_option);\n							$tz.val('-1').trigger('change');\n							//$tz.val('-1').trigger('change');\n							$(\"#timeZoneContain .timeZoneText\").val(data.timeZoneName);\n							//$(\"#tz-offset\").val(offset);\n							//$(\"#tz-identifier\").val(data.timeZoneId);\n						} else{\n							$tz.val($opt.prop(\"value\")).trigger('change');\n						}\n\n						// After the timezone is updated, we emphasize it for a few seconds. Nice and beautiful\n						$('#timezone-link span').addClass('emphasis').hide().fadeIn();\n						setTimeout( function() {\n							$('#timezone-link span').removeClass('emphasis');\n						}, 7000);\n					}\n				}\n			});\n\n		        address_fields.address = address_fields.street_number +' '+ address_fields.address;\n				$(\"#venue-name\").val(address_fields.name);\n				$(\"#venue-address\").val(address_fields.address);\n				$(\"#venue-city\").val(address_fields.city);\n				$(\"#venue-state\").val(address_fields.state);\n				$(\"#venue-country\").val(address_fields.country);\n				$(\"#venue-zip\").val(address_fields.zip);\n				if(typeof place.geometry!=='undefined'){\n					$(\"#venue-lat\").val(place.geometry.location.lat())//.addClass('changes-made');//.trigger('change');\n					$(\"#venue-lng\").val(place.geometry.location.lng())//.addClass('changes-made');//.trigger('change');\n				}\n				setCheck($(\"#venue-tbd\"),0);\n				var $maps_on_page = $(\"#splash-container\").find(\"div.map.sf\");\n				if($maps_on_page.length == 1){\n					getGoogleMapImg(function(data){\n						var address_string = createNewMapString(address_fields),\n							sfid = $maps_on_page.prop('id').replace('sfid-','');\n\n						$maps_on_page.find(\"div.embed\").find(\"img:first\").prop('src',data.image);\n						$maps_on_page.find(\"div.body\").html(address_string);\n\n						finetuneEditedFields['data[SplashFeed]['+sfid+'][embed_code]'] = '<img src=\"'+data.image+'\" />';\n						finetuneEditedFields['data[SplashFeed]['+sfid+'][body]'] = address_string;\n						//finetuneLayoutChangesMade();\n						finetuneFieldChangesMade();\n					});\n				}\n\n\n		        updateVenueText();\n				$('a.address-search').click();\n\n				return;\n        });\n\n\n	}\n\n	function initializeEmbedMap() {\n		if ( google === false ) return false;\n		var latLng = new google.maps.LatLng( _event.venue.lat, _event.venue.lng);\n		var input = document.getElementById('venue-search-map-embed');\n		var autocomplete = new google.maps.places.Autocomplete(input);\n        google.maps.event.addListener(autocomplete, 'place_changed', function(e) {\n			var place = autocomplete.getPlace();\n	        updatePlace(place);\n\n        });\n\n	}\n\n	function updatePlace(place){\n		var address = '';\n		var address_fields = { name: place.name, street_number: '', address: '', city: '', state: '', zip: ''};\n      	if (place.address_components) {\n        	for ( var i in place.address_components ){\n        		if ( place.address_components[i].types[0] == 'postal_code' ) address_fields.zip = place.address_components[i].long_name;\n	        	else if ( place.address_components[i].types[0] == 'street_number' ) address_fields.street_number = place.address_components[i].long_name;\n       			else if ( place.address_components[i].types[0] == 'route' ) address_fields.address = place.address_components[i].long_name;\n       			else if ( place.address_components[i].types[0] == 'locality' ) address_fields.city = place.address_components[i].long_name;\n       			else if ( place.address_components[i].types[0] == 'administrative_area_level_1' ) address_fields.state = place.address_components[i].short_name;\n	 	        }\n     	}\n     	if(address_fields.street_number!=''){\n	        address_fields.address = address_fields.street_number +' '+ address_fields.address;\n     	}\n\n     	//searchForMap(address_fields,place);\n		$(\"#map-embed-placeholder,#map-hidden-img,#map-embed .thisLoader\").addClass('loading');\n		$(\"#venue-name-map-embed\").val(address_fields.name);\n		$(\"#venue-address-map-embed\").val(address_fields.address);\n		$(\"#venue-city-map-embed\").val(address_fields.city);\n		$(\"#venue-state-map-embed\").val(address_fields.state);\n		$(\"#venue-zip-map-embed\").val(address_fields.zip);\n\n		if(typeof place.geometry!=='undefined'){\n			$(\"#venue-lat-map-embed,#venue-lat\").val(place.geometry.location.lat());\n			$(\"#venue-lng-map-embed,#venue-lng\").val(place.geometry.location.lng());\n		}\n		$(\"#venue-map-url\").val(place.url);\n\n		getGoogleMapImg(function(data){\n			$('#map-embed-placeholder').hide().removeClass('loading');\n			$(\"#map-hidden-img\").prop(\"src\",data.image).removeClass('loading');\n			$('#map-embed .thisLoader').removeClass('loading');\n		});\n		var address_string = createNewMapString(address_fields);\n		$(\"#map-embed-title\").val(address_string);\n		$(\"#map-address-text\").val(address_string);//.show();no need to show this anymore.  just plug it in.\n	}\n\n	function getGoogleMapImg(_callback){\n\n		var params = {\n			event_id:constants.event_id,\n			lat: $(\"#venue-lat\").val(),\n			lng: $(\"#venue-lng\").val(),\n			width: $(\"#map-embed-width\").val(),\n			height: $(\"#map-embed-height\").val(),\n			zoom: $(\"#map-embed-zoom\").val()\n		};\n\n		//takes the result of a google places autocomplete, does a server-side lookup via the lat/lng coords\n		//and returns a cdned img path via the static maps api.\n		$.ajax({\n			url:\"/splash/getGoogleMap\",\n			dataType: 'json',\n			type: 'POST',\n			data: params,\n			success: function(data,textStatus,jqXHR){\n				//with the resulting image, do what you will via custom callback function elsewhere.\n				if(typeof data.image !== 'undefined' && typeof _callback == 'function'){\n					_callback(data);\n				}\n			}\n		});\n		// alert(address_string);\n\n	}\n\n	function createNewMapString(address_fields){\n		var address_string ='';\n		if(address_fields.name!='' && typeof address_fields.name!=='undefined' && address_fields.name!='undefined'){\n			address_string+='<p style=\"font-size:16px;\"><strong>'+address_fields.name+'</strong></p>';\n			if(address_fields.address!=''&&address_fields.address!=address_fields.name){\n				address_string+='<p style=\"font-size:14px;\">'+address_fields.address+'</p>';\n			}\n		} else if(address_fields.address!='' && address_fields.address!=='undefined'){\n			address_string+='<p style=\"font-size:16px;\"><strong>'+address_fields.address+'</strong></p>';\n		}\n\n		if( (address_fields.city!=''  && address_fields.city!=='undefined')\n		|| (address_fields.state!=''  && address_fields.state!=='undefined')\n		|| (address_fields.zip!=''  && address_fields.zip!=='undefined')\n		){\n			address_string+='<p style=\"font-size:14px;\">';\n			var has_citystateorzip = true;\n		}\n\n		if(address_fields.city!=''  && address_fields.city!=='undefined'){\n			address_string+=address_fields.city;\n			if(address_fields.state!=''){\n				address_string+=', '+address_fields.state+' ';\n			} else{\n				address_string+=\" \";\n			}\n		} else if(address_fields.state!='' && address_fields.state!=='undefined'){\n			address_string+=address_fields.state+' ';\n		}\n		if(address_fields.zip!='' && address_fields.zip!=='undefined'){\n			address_string+=address_fields.zip;\n		}\n		if(typeof has_citystateorzip!=='undefined'){\n			address_string+='</p>';\n		}\n		return address_string;\n	}\n\n	function updateVenueText(){\n		var venue = { \n			venue_name: $(\"#venue-name\"),\n			address: $(\"#venue-address\"),\n			city: $(\"#venue-city\"),\n			state: $(\"#venue-state\"),\n			zip: $(\"#venue-zip\"),\n			country: $(\"#venue-country\"),\n			tbd: $(\"#venue-tbd\")\n		};\n		var value = { venue_name: venue.venue_name.val(), address: $.trim(venue.address.val()),\n			city: $.trim(venue.city.val()), state: $.trim(venue.state.val()), zip: $.trim(venue.zip.val()) }\n\n		if( venue.tbd.val()=='1' && $(\"#finetune-hide_where\").val()!='1'){\n			$body.addClass('venue-tbd');\n		} else{\n			$body.removeClass('venue-tbd');\n		}\n\n		$(\"#venue-name,#venue-address,#venue-city,#venue-state,#venue-zip,#venue-tbd,#venue-country\").addClass(\"changes-made\");\n		var title = value.venue_name;\n		var address = value.address + \" \" + value.city + \" \" + value.state + \" \" + value.zip;\n		var raw_addy = address.replace(\" \",'').trim();\n		if ( raw_addy==\"\" && title != '' ){\n			address = title;\n		}\n		//$(\".venueLatLng .address\").html(address);\n		geocodeAddress(address);\n\n\n		//updateSplashField('where',value,$(\"#element-where\"));\n		var $venue_name = $(\"#element-where-venue\").find(\".venue-name\"),\n			$venue_address = $(\"#element-where-address\").find(\".venue-address\"),\n			$venue_city = $(\"#element-where-city\").find(\".venue-city\"),\n			$venue_state = $(\"#element-where-state\").find(\".venue-state\"),\n			$venue_zip = $(\"#element-where-zip\").find(\".venue-zip\");\n\n		if(value.venue_name!=''){\n			$venue_name.html(value.venue_name).removeClass('hide')\n			$body.removeClass('bigAddress bigCsz');\n			if(value.address==''){\n				$body.addClass('noAddress');\n			}\n		} else{\n			$venue_name.html('').addClass('hide');\n			if(value.address!=''){\n				$body.addClass('bigAddress').removeClass('bigCsz noAddress');\n			} else if(value.city!=''||value.state!=''||value.zip!=''){\n				$body.addClass('bigCsz').removeClass('bigAddress');\n			}\n		}\n\n\n		value.address = $.trim(value.address)\n\n		if(value.address!=''){\n			$body.removeClass('noAddress');\n			$venue_address.html(value.address).removeClass('hide');\n		} else{\n			$body.addClass('noAddress');\n			$venue_address.html('').addClass('hide');\n		}\n\n		if(value.city!=''){\n			$body.removeClass('noCity');\n			$venue_city.html(value.city).removeClass('hide');\n		} else{\n			$body.addClass('noCity');\n			$venue_city.html('').addClass('hide');\n		}\n\n		if(value.state!=''){\n			$body.removeClass('noState');\n			$venue_state.html(value.state).removeClass('hide');\n		} else{\n			$body.addClass('noState');\n			$venue_state.html('').addClass('hide');\n		}\n\n		if(value.zip!=''){\n			$body.removeClass('noZip');\n			$venue_zip.html(value.zip).removeClass('hide');\n		} else{\n			$body.addClass('noZip');\n			$venue_zip.html('').addClass('hide');\n		}\n\n		setChangesMade();\n	}\n\n	function updateSplashField(field_type,set_value,$block){\n\n		var params = { event_id: constants.event_id, type: field_type };\n		if(set_value!=null){\n			params.value = set_value;\n		}\n		if(field_type=='date'){ //reload date.\n\n			if($(\"#date-tbd\").val()=='1'){\n				params.start = 'TBD';\n			}\n			else{\n				params.start = { date: $(\"#event_date\").val(), time: $(\"#event-start-timepicker\").val() };\n				params.end = { date: $(\"#event_date_end\").val(), time: $(\"#event-end-timepicker\").val() };\n			}\n\n			_event.date.tbd = $(\"#date-tbd\").val() == '1';\n			CountdownElement.updateAll();\n\n			if($(\"#hide_date\").val()==1){\n				params.hide_date = true;\n			}\n			else if($(\"#hide_time\").val()==1){\n				params.hide_time = true;\n			}\n			if($(\"#hide_end_date\").val()==1){\n				params.hide_end_date = true;\n			}\n			if(params.hide_date){\n				$(\"li.add-to-cal\").hide();\n			} else {\n				$(\"li.add-to-cal\").show();\n			}\n			params.format = $(\"#finetune-date-format\").val();\n\n			updateSplitWhenBlocks(params);\n\n		} else if(field_type=='gallery'){\n			params.gallery_layout_preset = $(\"#galleryLayoutPresetInput\").val();\n		}\n		else if(field_type=='facebook_comments'){\n			var $block = $(\"#facebook-comments-container\");\n			params.domain = 'http://'+constants.domain;\n		}\n		else if ( field_type == 'twitter' ){\n			var $b = $(\"#twitterAccountInfo\");\n			params.twitter_hash = $('#hashtag-input').val();\n			params.twitter_handle = $b.find('input.screen_name_field').val();\n			params.twitter_pref = params.value;//$('#feedDisplayOptions').find('input[type=radio]:checked').val();\n		} else if( field_type == 'host'){\n			//$(\"#manual-host-name\").change();\n			//$(\"#no-twitter-options\").find(\"input.logo-id,input.logo-image\").trigger('change');\n			$(\"#element-host\").find(\".host-name\").find(\"span\").text($(\"#manual-host-name\").val());//.quickfit();\n			return;\n		}\n\n		$block.css('height',$block.height()+'px');\n		$block.load(\"/splash/pullField\",params,function(success){\n			if(field_type=='facebook_comments' && params.value=='1'){\n				FB.XFBML.parse();\n				scrollToBlock($block)\n			} else if(field_type=='date'){\n				var $date_block = $(\"#element-when\");\n				if($date_block.length){\n					var date_str = '';//$date_block.find(\"li.day-year\").text();\n					date_str+=$date_block.find(\"li.date\").text();\n					date_str+=', '+$date_block.find(\"li.time\").text();\n					$(\"#planning-tools-header\").find(\".date-time\").text(date_str);\n				}\n				reloadRSVPBlock();//after we change the event date, reload rsvp block.\n			}\n\n			else if(field_type=='gallery'){\n				//if ( set_value == 'sort' ){\n					gallerySortInit();\n				//}\n			}\n			else if(field_type=='guest-list' && params.value==1){\n				scrollToBlock($block);\n			}\n\n			galleryThumbFlow(true);\n        	//$(\"#gallery-thumbs\").masonry('reload');//assume any time a block is changed we're reloading the masonry call.\n			$block.css('height','inherit');\n		});\n\n		setChangesMade();\n\n	}\n\n\n$.fn.toggleAccordion = function(skipToggle){\n	var $t = $(this);\n	var id = $t.prop(\"id\");\n	var $inner = $t.parents(\".mainCard:first\");//$p.find(\".content-inner:first\");\n	var $p = $t.parents(\".toggle-wrap:first\");\n\n	if(skipToggle!=null){\n		//no need to update.\n	}	else {\n		if ( $inner.hasClass('is-hidden') ) {//show the section\n			$inner.removeClass('is-hidden').css('overflow', 'hidden');\n			if(!$inner.hasClass('noContent')){\n				$inner.removeClass('expanded');\n			}\n		} else {//hide the section\n			if($inner.hasClass('expanded')){\n				$inner.addClass('is-hidden').removeClass('expanded').css('overflow','hidden');\n			} else{\n				$inner.addClass('is-hidden');\n			}\n\n			//check to see if we have advanced sections that are open.  should close if true.\n			var $trig = $p.find(\".content-inner:first\").find(\".content-trigger:first\");\n			if($trig.length >0 && $trig.hasClass('open')){\n				$trig.click();\n			}\n		}\n	}\n\n	var target_id = $t.attr(\"target\"),\n		target_type = $t.attr(\"target-type\");\n\n	if(typeof target_id!=='undefined' && target_id!=''){\n		if (typeof target_type!=='undefined' && target_type == 'exact') {\n			var $target = $(\"#\"+target_id);\n		} else {\n			var $target = $(\"#\"+target_id).parents(\"div.layoutGrp:first\");\n		}\n\n		if($target.length < 1){\n			$target = $(\"#main-canvas\").find(\"div.layoutGrp.\"+target_id);\n			//a fallback for finding the parent group if child isn't present. this is the case\n			//when rsvp button is hidden and we're trying to hide the block.\n		}\n\n		if($target.length > 0){\n			if($t.val()=='1'){//setting to 1, hide the element.\n				$target.hide();\n			}\n			else{\n				$target.show().find(\".element:first\").show();//show the parent and inner\n				if(typeof $first_target!=='undefined'){\n					scrollToBlock($first_target,-20);\n				} else{\n					scrollToBlock($target,-20);\n				}\n\n			}\n		}\n	}\n}\n\nvar changes_made = false;\nvar domain_changes = false;\nvar page_action_changes = false;\nvar gallery_changes_made = false;\nvar finetune_block_moved = false;\nvar gallery_block_viewed = false;\n\nfunction newFileUploader(index,options){\n	var options = options || {};\n\n	var defaultOptions = {\n		url: \"/events/fileUpload/\"+constants.event_id,\n		multiple: false,\n		cropToSquare: false,\n		allowedExtensions: ['png','jpg','jpeg','gif'],\n		resize: false,\n		params: {}\n	}\n\n	options = $.extend({},defaultOptions,options);\n\n	var template = ''+\n		'<div class=\"qq-uploader\">' +\n			'<div class=\"qq-upload-drop-area grp\"><span><img src=\"/images/ui/folder-open-green.png\" /> Or drop files here to upload</span></div>' +\n			'<div class=\"qq-upload-button nu-btn m clean\"><i class=\"ico-upload\"></i> Upload an Image</div>' +\n			'<div class=\"qq-upload-list\"></div>' +\n		'</div>';\n	var filetemplate = ''+\n		'<div class=\"new-uploaded-file\">'+\n			'<div style=\"display:none;\">'+\n				'<div class=\"qq-upload-file\">Filename.ext</div>'+\n				'<div class=\"qq-upload-size\">0.0kb</div>'+\n				'<div class=\"qq-upload-cancel\" href=\"#\">Cancel</div> '+\n				'<div class=\"qq-upload-failed-text\">Failed</div>'+\n			'</div>'+\n			'<div class=\"qq-upload-spinner\"></div>'+\n			'<div class=\"progress-bar\">'+\n				'<div class=\"progress\"></div>'+\n			'</div>'+\n		'</div>';\n\n	var totals = {\n		size: 0,\n		count: 0,\n		sizeDone: 0,\n		countDone: 0\n	}\n\n	ajaxFileUploaders[index] = new qq.FileUploader({\n		element: document.getElementById(index),\n		action: options.url,\n		params: options.params,\n		multiple: options.multiple,\n		//debug: true,\n		sizeLimit: 9 * 1024 * 1024,\n		allowedExtensions: options.allowedExtensions,\n		onCancel: function(){\n			if (options.onCancel) {\n				options.onCancel();\n			}\n		},\n		messages: {\n			//typeError: \"{file} has invalid extension. Only {extensions} are allowed.\",\n			typeError: \"Freeze!  It looks like you tried to upload a file type outside our jurisdiction. \\n\\nWe're currently accepting the following file types:\\n{extensions}\",\n			//sizeError: \"{file} is too large, maximum file size is {sizeLimit}.\",\n			sizeError: \"Whoa, looks like the file you're trying to upload is too large.\\nPlease keep it to files under {sizeLimit}.\",\n			minSizeError: \"{file} is too small, minimum file size is {minSizeLimit}.\",\n			emptyError: \"{file} is empty, please select files again without it.\",\n			onLeave: \"The files are being uploaded, if you leave now the upload will be cancelled.\"\n		},\n		onSubmit: function(id,filename){\n			var $item = $(ajaxFileUploaders[index]._getItemByFileId(id));\n			var size = ajaxFileUploaders[index]._handler.getSize(id);\n			totals.size += size;\n			totals.count++;\n			var d = {size:size,totals:totals};\n			if (options.onSubmit){\n				options.onSubmit($item,d);\n			}\n		},\n		onProgress: function(id,filename,loaded,total){\n			var $item = $(ajaxFileUploaders[index]._getItemByFileId(id));\n\n			var percent = (loaded/total)*100;\n			$item.find(\".progress\").css('width',percent+'%');\n\n			var d = {percent:percent,totals:totals};\n			if (options.onProgress) {\n				options.onProgress($item,d);\n			}\n		},\n		onComplete: function(id, fileName, response){\n			var $item = $(ajaxFileUploaders[index]._getItemByFileId(id));\n			totals.countDone++;\n			totals.sizeDone += ajaxFileUploaders[index]._handler.getSize(id);\n			var d = {response:response,totals:totals};\n			if (options.onComplete){\n				options.onComplete($item,d);\n			}\n		},\n		template: template,\n		fileTemplate: filetemplate\n	});\n}\n\n\n\n/*** Uploading Stuff ****/\nvar ajaxFileUploaders = [];\nfunction createUploader(index,mode,_onCompleteCallback){\n	// these are the defaults for the header image uploader\n	var action = \"/events/upload_photo\";\n	var multiple=true;\n	var cropToSquare = false;\n	var template = '';\n	var filetemplate = $('#ajaxFileUpload_header .fileTemplate').html();\n	var afe = ['png','jpg','jpeg','gif'];\n	var noResize = false;\n	// these are the settings for the logo image upload!\n	if ($.inArray(mode,['logo','hostLogo','eventListing','speakerLogo','presenterLogo','bgImage','bgImageCustom'])>-1){\n		multiple=false;\n		action = \"/events/upload_logo\";\n\n		var template = '<div class=\"qq-uploader\">' +\n			'<div class=\"qq-upload-drop-area\" style=\"display:none;\"><span><img src=\"/images/ui/folder-open-green.png\" /> Or drop files here to upload</span></div>' +\n			'<div class=\"nu-btn clean inline-block qq-upload-button icon-picture txtC\">Choose Image</div>' +\n			'<ul class=\"qq-upload-list uploadList '+mode+'\"></ul>' +\n			'</div>';\n\n		if(mode=='bgImage' || mode=='presenterLogo'){\n			cropToSquare=false;\n			noResize = true;\n		} else if(mode=='bgImageCustom'){\n			var setWidth = 600;\n			var onlyResizeLargerThanSetWidth = 1;\n			cropToSquare=false;\n			var template = '<div class=\"qq-uploader\">' +\n				'<div class=\"qq-upload-drop-area\" style=\"display:none;\"><span><img src=\"/images/ui/folder-open-green.png\" /> Or drop files here to upload</span></div>' +\n				'<div class=\"nu-btn clean inline-block qq-upload-button icon-picture\">Choose Image</div>' +\n				'<div class=\"message\">*Images wider than '+setWidth+'px will be resized.</div>' +\n				'<ul class=\"qq-upload-list uploadList '+mode+'\"></ul>' +\n				'</div>';\n		}\n\n		var filetemplate =  '<li class=\"indented\"><div class=\"new-uploaded-file\">'+\n			'<img class=\"event-image hide\" src=\"\">'+\n			'<span class=\"qq-upload-file hide\">datadump.txt</span>'+\n			'<span class=\"qq-upload-size\"></span>'+\n			'<a class=\"qq-upload-cancel\" href=\"#\">Cancel</a> '+\n			'<span class=\"qq-upload-failed-text\">Failed</span>'+\n			'<div id=\"\" class=\"upload-file-form\">'+\n				'<div class=\"qq-upload-spinner\">'+\n					'<img alt=\"loading...\" style=\"width:16px;height:16px;\" src=\"/img/ajax-loader2.gif\">'+\n					'<div class=\"progress-bar-holder\"><div class=\"progress-bar\"></div></div>'+\n				'</div>'+\n			'</div>'+\n			'</div></li>';\n\n	}else if ( mode == 'event_photos' ){\n		// event photo upload\n		action = \"/events/uploadEventPhoto\";\n		//params = { ajaxUpload: true, event_id: constants.event_id, event_photos: true }\n		template = ''; // if template is empty, the markup with all of the qq classes HAS to be in the <div id=\"index\"> already\n		filetemplate = $(\"#\"+index+\" .fileTemplateHtml:first\").html();\n	} else if(mode=='eventImage'){\n		var template = '<div class=\"qq-uploader\">' +\n			'<div class=\"qq-upload-drop-area\"><span><img src=\"/images/ui/folder-open-green.png\" />Drop image here to upload</span></div>' +\n			'<div class=\"gray btn qq-upload-button\">Click here to upload your flyer</div>' +\n			'<ul class=\"qq-upload-list uploadList '+mode+'\"></ul>' +\n			'</div>';\n		var filetemplate =  '<li class=\"indented\"><div class=\"new-uploaded-file\">'+\n			'<img class=\"event-image hide\" src=\"\">'+\n			'<span class=\"qq-upload-file hide\">datadump.txt</span>'+\n			'<span class=\"qq-upload-size\"></span>'+\n			'<a class=\"qq-upload-cancel\" href=\"#\">Cancel</a> '+\n			'<span class=\"qq-upload-failed-text\">Failed</span>'+\n			'<div id=\"\" class=\"upload-file-form\">'+\n				'<div class=\"qq-upload-spinner\">'+\n					'<img alt=\"loading...\" style=\"width:16px;height:16px;\" src=\"/img/ajax-loader2.gif\">'+\n					'<div class=\"progress-bar-holder\"><div class=\"progress-bar\"></div></div>'+\n				'</div>'+\n			'</div>'+\n			'</div></li>';\n		//params: { event_id: constants.event_id, ajaxUpload: true, nosave:true },\n\n	}\n\n\n	if ( mode == 'hostLogo' ) { cropToSquare = true;\n		var template = '<div class=\"qq-uploader\">' +\n				'<div class=\"qq-upload-drop-area\"><span><img src=\"/images/ui/folder-open-green.png\" /> Or drop files here to upload</span></div>' +\n				'<div class=\"txtC icons3-avatar gray btn qq-upload-button bigger em1\"></div>' +\n				'<ul class=\"qq-upload-list uploadList '+mode+'\"></ul>' +\n				'</div>';\n	}\n	var params = { event_id: constants.event_id, ajaxUpload: true, saveEventImageToDB: false, cropToSquare: cropToSquare};\n	if(noResize){\n		params.noResize=true;\n	}\n	if(mode=='eventImage'){\n		delete params.saveEventImageToDB;\n	}\n	if(typeof setWidth!=='undefined'){\n		params.setWidth = setWidth;\n	}\n	if(typeof onlyResizeLargerThanSetWidth!=='undefined'){\n		params.onlyResizeLargerThanSetWidth = onlyResizeLargerThanSetWidth;\n	}\n\n	var totalSizeToUpload = 0;\n	var totalCountToUpload = 0;\n	var totalSizeUploaded = 0;\n	var totalCountUploaded = 0;\n\n	if ($('#'+index).length == 0) {\n		////console.log('NO INDEX FOR UPLOADER: '+index+' - '+mode);\n	}\n	ajaxFileUploaders[index] = new qq.FileUploader({\n		element: document.getElementById(index),\n		action: action,\n		params: params,\n		multiple: multiple,\n		//debug: true,\n		onProgress: function(id,filename,loaded,total){\n			if ( mode == 'event_photos' ){\n				var $item = $('#bulkUploadStatus');\n				var uploaded = totalSizeUploaded + loaded;\n				var percent = (uploaded/totalSizeToUpload);\n				var width = $item.find(\".progress-bar-holder\").width();\n				var offset = Math.floor(width - ( width * percent ));\n                $item.find(\".progress-bar\").css('right',offset+'px');\n			}else{\n				var item = ajaxFileUploaders[index]._getItemByFileId(id);\n				var percent = (loaded/total);\n				var width = $(item).find(\".progress-bar-holder\").width();\n				var offset = width - ( width * percent );\n				$(item).find(\".progress-bar\").css('right',offset+'px');\n			}\n		},\n		sizeLimit: 9 * 1024 * 1024,\n		allowedExtensions: afe,\n		onCancel: function(){\n			return false;\n		},\n		messages: {\n			//typeError: \"{file} has invalid extension. Only {extensions} are allowed.\",\n			typeError: \"Freeze!  It looks like you tried to upload a file type outside our jurisdiction. \\n\\nWe're currently accepting the following file types:\\n{extensions}\",\n			//sizeError: \"{file} is too large, maximum file size is {sizeLimit}.\",\n			sizeError: \"Whoa, looks like the file you're trying to upload is too large.\\nPlease keep it to files under {sizeLimit}.\",\n			minSizeError: \"{file} is too small, minimum file size is {minSizeLimit}.\",\n			emptyError: \"{file} is empty, please select files again without it.\",\n			onLeave: \"The files are being uploaded, if you leave now the upload will be cancelled.\"\n		},\n		onComplete: function(id, fileName, result){\n			var item = ajaxFileUploaders[index]._getItemByFileId(id);\n\n			if (typeof result.success != 'undefined' && result.success){\n				$(\".qq-upload-drop-area\").hide();\n				if ( mode == 'event_photos' ){\n					// need to show the image thumbnail\n					totalSizeUploaded += ajaxFileUploaders[index]._handler.getSize(id);\n					totalCountUploaded++;\n					$('#bulkUploadStatus').find('.textStatus .completed').html(totalCountUploaded)\n					$('#bulkUploadStatus').find(\".latestPhoto img\").attr('src',result.thumbnail);\n					$(item).attr('src',result.thumbnail).attr('full-image',result.filename);\n					$(item).attr('event_photo_id',result.event_photo_id);\n					//$(item).find(\"span.image\").text(result.filename);\n					// set the id of the event_photo\n					//$(item).addClass('event_photo unapproved');\n					// update the image count\n					//var newCount = $(item).parent().find(\"li.event_photo\").length;\n					//$(\".photos .header-bar span.count\").html(newCount);\n					//$('#db-photo-count').html(newCount);\n					// update the filesize total(s)\n					//formatEventPhotoBytes(result.size);\n				}\n				else {\n\n					// since these only ever allow one image per button, remove any previously uploaded images\n					$(item).siblings(\"li\").remove();\n\n					if ( result.logo_id ){\n						if ( mode == 'hostLogo' ){\n							var $item = $(item);\n							// set this param logo_id to the returned one.. just in case this was an insert\n							qq.extend(ajaxFileUploaders[index]._options.params,{logo_id:result.logo_id});\n							// set the hidden image (filename) field to the newly return filename\n							$item.parents(\".logo-box\").find(\"input.logo-image\").val(result.filename).change();\n							$item.parents(\".logo-box\").find(\".logo-wrapper div.mask\").css('background-image','url(result.filename)');\n							// set the hidden input of the logo id to this new id also\n							$item.parents(\".logo-box\").addClass('has-image').find(\"input.logo-id\").val(result.logo_id).change();\n							// update the onloaded image\n							$item.parents(\".logo-upload\").find(\"img.logo-image\").attr('src',result.filename).show();\n							$item.parents(\".logo-upload\").find(\"a.removeLogo\").hide();\n\n							var params = { name: $(\"#manual-host-name\").val(), img: $(\"div.logo-upload\").find(\"input.logo-image\").val() };\n\n							$item.remove();\n\n							updateSplashField('host',params,$(\"#hosting-block\"));\n\n						}\n\n					}\n				}\n\n			}else if (result.error){\n				$(item).find(\".qq-upload-failed-text\").html(\"Error: \"+result.error);\n				if ( mode == 'event_photos' ){\n					//alert('Error: '+result.error);\n					totalSizeToUpload -= ajaxFileUploaders[index]._handler.getSize(id);\n					totalCountToUpload--;\n					$('#bulkUploadStatus').find('.textStatus .total').html(totalCountToUpload);\n					$('#bulkUploadStatus').find('.error').append('<p>Error: '+fileName+' -  '+result.error+'</p>');\n				}\n			}else if ( mode == 'event_photos' ){\n				//alert('Error: '+result.error);\n				totalSizeToUpload -= ajaxFileUploaders[index]._handler.getSize(id);\n				totalCountToUpload--;\n				$('#bulkUploadStatus').find('.textStatus .total').html(totalCountToUpload);\n				$('#bulkUploadStatus').find('.error').append('<p>Error: '+fileName+' - There was an error uploading this file.</p>');\n			}\n\n			if ( typeof _onCompleteCallback != 'undefined' && _onCompleteCallback != null ){\n				_onCompleteCallback(result);\n			}\n			// finished the bulk upload!\n			if ( mode == 'event_photos' ){\n				if ( totalCountUploaded == totalCountToUpload ){\n				//	alert('done.');return false;\n                    var $bus = $('#bulkUploadStatus');\n					$bus.parent().addClass('finished').removeClass('uploading');\n					$bus.find('.textStatus .completed').html(totalCountUploaded)\n					$bus.find('.textStatus .total').html(totalCountToUpload)\n					$bus.find('.cancel').hide();\n					$bus.find('.bigStatus').html('Complete');\n					$bus.addClass('open');\n					var m = totalCountUploaded + ' Photos';\n					if ( totalCountUploaded == 1 ){\n                        m = 'a Photo';\n                        $bus.find(\"textarea\").attr(\"placeholder\",'Add Caption').end().find(\"input[type='text']\").attr(\"placeholder\",'Add Credit');\n                    }\n					$bus.find('.formTray .message span').html(m);\n					totalSizeToUpload = 0;\n					totalSizeUploaded = 0;\n					totalCountToUpload = 0;\n					totalCountUploaded = 0;\n				}\n			}\n		},\n		onSubmit: function(id,filename){\n			if (mode=='header'){\n				$('#ajaxFileUpload_header .qq-upload-button').hide();\n			}\n			else if ( mode == 'event_photos' ){\n				$('#'+index).find('.no-photos').hide();\n				//$('.photo-status').show();\n				//$('#publishPhotos').show();\n				//$('.unapproved-photo-block').show().find('h4:first').text('There are Unapproved Photos').end().find('ul').html();\n				var $bus = $('#bulkUploadStatus');\n				$bus.parent().addClass('uploading');\n				// initialize the BUS\n				if ( !$bus.is(':visible') ){\n					$bus.find('.textStatus .completed').html('0');\n					$bus.find('.latestPhoto img').attr('src','');\n					$bus.find('.progress-bar').css('right','900px');\n					$bus.find('.cancel').show();\n					$bus.find('.error').html('');\n					$bus.find('.qq-upload-list').html('');\n					$bus.find('.bigStatus').html('Transferring...');\n					$bus.show();\n				}\n				totalSizeToUpload += ajaxFileUploaders[index]._handler.getSize(id);\n				totalCountToUpload++;\n				$bus.find('.textStatus .total').html(totalCountToUpload);\n\n				if(gallerySplashFeedId !== false && typeof gallerySplashFeedId!=='undefined') {\n					qq.extend(ajaxFileUploaders[index]._options.params,{ splash_feed_id:gallerySplashFeedId });\n			    } else{\n			    	qq.extend(ajaxFileUploaders[index]._options.params,{ splash_feed_id:0 });\n			    }\n			}\n		},\n		template: template,\n		// template for one item in file list\n		fileTemplate: filetemplate\n	});\n}\n/***** End Uploading Stuff *****/\n\nfunction loadUnapprovedUploadedPhotos(force_open){\n	$(\"#social-pane-contain-uploads\").removeClass('loaded');\n}\nfunction updateUnapprovedPhotoCount(){\n	var photo_count = $(\"#social-pane-contain-uploads\").find(\"li.event_photo\").length;\n	if(photo_count>0){\n		$(\"#inbox-count\").show().html(photo_count);\n	} else{\n		$(\"#inbox-count\").hide().html(0);\n	}\n}\n\nfunction scrollToBlock($block,offset,noAnimate,force){\n	if(constants.prevent_scroll==true){ return false; }\n	else if(openRTE){ return false; }//dont scroll if editing rte!\n	else if(offset==null){ offset=0; }\n	if($block.length > 0){\n		//check just in case there's multiple blocks.\n		//This is needed for any blocks that also pull custom-block-list-item.ctp - ie. speakers, sponsors and image blocks.\n		if($block.length > 1){\n			$block = $block[0];\n			if($block instanceof jQuery == false){\n				$block = $($block);//wrap it if its not a jquery object.\n			}\n		}\n		var inViewPort = elementInViewport($block);\n		if(!inViewPort||force!=null){\n			if(noAnimate!=null){\n				$('html, body').stop().animate({\n			    	scrollTop: $block.offset().top+offset\n			  	}, 0);\n			} else{\n				$('html, body').stop().animate({\n			    	scrollTop: $block.offset().top+offset\n			  	}, 1000,'easeInOutExpo');\n				if(currentSection!=$block.prop(\"id\")){\n					$block.addClass('section-glow');\n				  	setTimeout(function(){\n					  	$block.removeClass('section-glow');\n				  	},3000);\n			  	}\n		  	}\n		} else {\n			if(currentSection!=$block.prop(\"id\") || force!=null){\n				$block.addClass('section-glow');\n				currentSection = $block.prop(\"id\");\n				setTimeout(function(){\n\n				  	$block.removeClass('section-glow');\n			  	},3000);\n			}\n		}\n	}\n}\nfunction isScrolledIntoView($elem)\n{\n    var docViewTop = $(window).scrollTop();\n    var docViewBottom = docViewTop + $(window).height();\n\n    var elemTop = $elem.offset().top;\n    var elemBottom = elemTop + $elem.height();\n    //return ((elemBottom >= docViewTop) && (elemTop <= docViewBottom));\n    return ((docViewTop < elemTop) && (docViewBottom > elemBottom));\n}\n\nfunction changeCssProperty($target,cssProp,cssValue){\n	var toUpdate = {};\n	if(typeof cssProp=='object'){\n		toUpdate = cssProp;//already objectified.  multiple calls.\n		for(key in toUpdate){\n			if(!isNaN(toUpdate[key]) && toUpdate[key]!='' && key!='z-index'){\n				toUpdate[key]+='em';//append px as a fallback.\n			}\n		}\n	} else if(cssProp==false){\n		return;\n	}else{//string. just one argument passed through.\n		if( !isNaN(cssValue) && cssValue!='' && cssProp!='z-index' ){\n			cssValue+='em';\n		}\n		toUpdate[cssProp] = cssValue;\n		if(cssProp=='background-color'){ //if were changing the background color, unset bg image.\n			toUpdate['background-image'] = '';\n		}\n	}\n\n	$target.css(toUpdate);\n}\n\nfunction checkPlaceholderWidth( $img ){\n	if( $img.outerWidth() < 70 ){\n		$img.parents(\".list-item:first\").addClass('super-compact-img-util').removeClass('compact-img-util')\n	} else if( $img.outerWidth() < 165 ){\n		$img.parents(\".list-item:first\").addClass('compact-img-util').removeClass('super-compact-img-util')\n	} else {\n	    $img.parents(\".list-item:first\").removeClass('compact-img-util super-compact-img-util')\n	}\n}\n\nfunction clearPlaceholderStyles( $img ){\n	$img.parents(\".list-item:first\").removeClass('compact-img-util super-compact-img-util')\n}\n\nfunction handleSaveError( problem, message ) {\n	var $button = $(\"#save-details-design\");\n	$(\"#logged-out-modal\").find('.inactive-error').hide();\n	// if( problem )\n	// {\n	// 	if ( problem == 'locked' )\n	// 	{\n	// 		$(\"#logged-out-modal\").find('.inactive-error').html( message );\n	// 		setTimeout(window.location = '/login', 3000);\n	// 	}\n	// 	else\n	// 	{\n	// 		alert( message );\n	// 	}\n	// } else{\n	// 	$(\"#logged-out-modal\").fireSimpleModal({ persistent: true });\n 	console.log(\"ERROR ON PAGE #210\");\n	// 	return false;\n	// }\n\n	$button.removeClass('in-progress');\n	$body.removeClass('in-progress').addClass('has-changes');//error saving. make them save again.\n\n	changes_made = false;\n	themeStylesChanged=false;\n}\nvar monthNames = [ \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\",\n	\"Jul\", \"Aug\", \"Sept\", \"Oct\", \"Nov\", \"Dec\" ];\n\nvar openRTE = false;\n\n$('#adminEventSettings').find('span[field]').click(function(){\n	var $this = $(this);\n	var field = $this.attr('field');\n	var value = $this.attr('value');\n	if(field=='active' && !confirm('Are you SURE you want to ban this event?')){\n		return false;\n	}\n\n	if ( $this.hasClass('on') ){\n		$this.removeClass('on');\n		value = 0;\n	}else {\n		$this.addClass('on')\n	}\n\n	var postData = {};\n	postData[field] = value;\n\n	// put it in a form saveEventData understands\n	if(field == 'white_label'){\n	postData = { data: { Event: postData } };\n	} else if(field=='active'){\n		postData['adminBan'] = true;\n		postData = { data: { Event: postData } };\n	}\n	else{\n		postData = { data: { EventSetting: postData } };\n	}\n\n\n	// mark as sending\n	$this.addClass('disabled').removeClass('error');\n	$.post(\"/events/saveEventData/\"+constants.event_id,postData,function(response){\n		if ( typeof response != 'undefined' ){\n			$this.removeClass('disabled');\n		}else $this.removeClass('disabled').addClass('error');\n	});\n\n});\n\n\nfunction hideRTE(){\n	$(\"#finetune-edit-buttons\").hide();\n	openRTE = false;\n}\n\nfunction themeStylesChanged(){\n	finetuneGetThemeStyleInputs().addClass('changes-made');\n	setChangesMade();\n}\n\nfunction addNewNamedElement(){\n	var element = prompt(\"Name of Element?\\n - where-blocks\\n - when-blocks\\n - spacer\");\n	if (element != '') {\n		element = (''+element).toLowerCase();\n\n		if (element == 'when-blocks') {\n			addNewSection(\n				{ \"group\": [ { \"group\": [ { \"element\": \"when-month\", \"styles\": { \"padding-top\": \"0em\", \"padding-right\": \"0em\", \"padding-bottom\": \"0em\", \"padding-left\": \"0em\", \"background-color\": \"rgba(0, 0, 0, 0.1)\", \"font-size\": \"0.8em\", \"letter-spacing\": \"0.05em\" }, \"bgimage\": \"\", \"class\": \"uppercase\" }, { \"element\": \"when-day\", \"styles\": { \"font-size\": \"2em\", \"padding-bottom\": \"0em\" } }, { \"element\": \"when-time\", \"styles\": { \"font-size\": \"1.04em\", \"padding-bottom\": \"0em\" }, \"class\": \"\" } ], \"class\": \"event_start\", \"styles\": { \"padding-top\": \"0em\", \"padding-right\": \"0em\", \"padding-bottom\": \"0em\", \"padding-left\": \"0em\" } }, { \"group\": [ { \"element\": \"when-end-month\", \"class\": \"uppercase\", \"styles\": { \"font-size\": \"0.8em\", \"letter-spacing\": \"0.05em\", \"padding-top\": \"0em\", \"padding-right\": \"0.02em\", \"background-color\": \"rgba(0, 0, 0, 0.1)\", \"padding-bottom\": \"0em\" }, \"bgimage\": \"\" }, { \"element\": \"when-end-day\", \"styles\": { \"font-size\": \"2em\", \"padding-bottom\": \"0em\" } }, { \"element\": \"when-end-time\" } ], \"class\": \"event_end\", \"width\": \"2-4\", \"styles\": { \"padding-top\": \"0em\", \"padding-right\": \"0em\", \"padding-bottom\": \"0em\", \"padding-left\": \"0em\" } }, { \"element\": \"when-tbd\" } ], \"width\": \"1-3\", \"styles\": { \"style\": \"solid\", \"background-color\": \"rgba(58, 58, 58, 0.05)\", \"text-align\": \"center\", \"padding-top\": \"0em\", \"padding-right\": \"0em\", \"padding-bottom\": \"1em\", \"padding-left\": \"0em\", \"border\": { \"radius\": \"6px\", \"style\": \"\", \"width\": \"\", \"color\": \"\" } }, \"bgimage\": \"\", \"class\": \"ofH mega-date-wrap\" }\n\n			);\n		} else if (element == 'where-blocks') {\n			addNewSection({group: [\n				{element: 'where-venue'},\n				{element: 'where-address'},\n				{element: 'where-city'},\n				{element: 'where-state'},\n				{element: 'where-zip'},\n				{element: 'where-tbd'}\n			]});\n		} else {\n			addNewSection({element: element});\n		}\n	}\n}\n\n// This functions is used to add an element to the splash page\nfunction addNewSection(params,toMaster,_callback){\n	var toMaster = toMaster || false;\n	var addElementToMasterGrp = function($layout,ele) {\n		var $layout = ($layout) ? $.extend(true,{},$layout) : {};\n		if ($layout && $layout['master_group'] && $layout['master_group'] == 1) {\n			if (!$layout['group']) {\n				$layout['group'] = [];\n			}\n			$layout['group'].push(ele);\n		}\n		else if ($layout && $layout['group']) {\n			for (var $i in $layout['group']) {\n				var $g = $layout['group'][$i];\n				$layout['group'][$i] = addElementToMasterGrp($g,ele);\n			}\n		}\n		return $layout;\n	}\n\n	var addElementToModalGrp = function($layout,ele) {\n		var $layout = ($layout) ? $.extend(true,{},$layout) : {};\n		if ($layout && $layout[fullLayout.group.length-1].hasClass('isModal')) {\n			if (!$layout['group']) {\n				$layout['group'] = [];\n			}\n			$layout['group'].push(ele);\n		}\n		else if ($layout && $layout['group']) {\n			for (var $i in $layout['group']) {\n				var $g = $layout['group'][$i];\n				$layout['group'][$i] = addElementToModalGrp($g,ele);\n			}\n		}\n		return $layout;\n	}\n	var resize=false;\n\n	if (params && params.element) {\n\n		var $master_group = findMasterGroup();\n		trackIndicativeEvent('addSection', { 'type': params.element });\n		if($(\"#add-new-section\").data('appendToBlock')){\n			var appendToBlock = $(\"#add-new-section\").data('appendToBlock');//expects format g-5\n			if( appendToBlock.match(/after-/) ){\n				var appendId = ftGetId(appendToBlock.replace(/after-/,''));\n				params.appendToBlock = 'ftg-'+appendId;\n				params.afterBlock = true;\n			} else {\n				var appendId = ftGetId(appendToBlock);\n				params.appendToBlock = 'ftg-'+appendId;\n			}\n		}\n\n		if( params.appendToBlock || $master_group.length > 0 ){ //if there's a valid parent, no need to rebuild the page here.  simply add it to the parent.\n			var $newFtg = finetuneGroupMarkup(params);	//get the markup for the sidebar - returns html in the format <div id=\"ftg-53\"><!--content in here--></div>\n			if(params.appendToBlock){\n				var $parentFtg = $(\"#\"+params.appendToBlock );//objectify the parameter. ie. $(\"#ftg-52\");\n			} else { //fall back to the master group.\n				var $parentFtg = $(\"#ft\"+$master_group.prop('id') );//objectify the parameter. ie. $(\"#ftg-52\");\n			}\n			if(typeof params.afterBlock!=='undefined'){\n				$parentFtg.after($newFtg); //ie. $(\"#ftg-52\").after(<div id=\"ftg-53\">...</div>)\n			} else {\n				$parentFtg.append($newFtg); //ie. $(\"#ftg-52\").append(<div id=\"ftg-53\">...</div>)\n			}\n			var parent_gid = ftGetId($parentFtg);//ftg-52 -> 52\n			var fullLayout = finetuneGetEventLayout(null,$newFtg);\n			var newFtGrp = ftGetGrp($newFtg);\n		} else {\n			var fullLayout = finetuneGetEventLayout();\n		}\n\n		if (fullLayout.group) {\n			var layoutParams = {};\n			if( parent_gid ){\n				layoutParams['appendToBlock'] = parent_gid;\n				if(typeof params.afterBlock!=='undefined'){\n					layoutParams['afterBlock'] = true;\n				}\n				if(typeof $newFtg !== 'undefined'){\n					//subtract 1 because the group count is auto-incremented.\n					layoutParams['startingGrpCount'] = parseInt(ftGetId($newFtg)) - 1;\n				}\n			}\n\n			$body.addClass('loading-page');\n			if (toMaster && $master_group.length == 1) {\n				fullLayout = addElementToMasterGrp(fullLayout,params);\n			} else {\n				fullLayout.group.push(params);\n			}\n\n			constants.prevent_scroll = true;\n			finetuneDesignApplyThemeLayout(fullLayout, layoutParams, function(){\n				$body.removeClass('loading-page');\n				constants.prevent_scroll = false;\n			});\n\n		}\n		finetuneLayoutChangesMade();\n		setTimeout(function(){\n			$(window).trigger('resize');\n			var $e = $('#finetune-layout-contain').find('.section.ele-wrapper .element[e=\"'+params.element+'\"]:first');\n			if ($e.length == 1) {\n				var $ftg = $e.parents(\".ft-grp:first\");\n				updateNestAttr($ftg);\n				$ftg.find('>.title:first').click();\n			}\n		},0);\n\n	} else if (params && params.group ) {\n\n		if($(\"#add-new-section\").data('appendToBlock')){\n			var appendToBlock = $(\"#add-new-section\").data('appendToBlock');//expects format g-5\n			if( appendToBlock.match(/after-/) ){\n				var appendId = ftGetId(appendToBlock.replace(/after-/,''));\n				params.appendToBlock = 'ftg-'+appendId;\n				params.afterBlock = true;\n			} else {\n				var appendId = ftGetId(appendToBlock);\n				params.appendToBlock = 'ftg-'+appendId;\n			}\n		}\n\n		//if params.appendToBlock (expecting an ftg-id, like \"ftg-52\" ), we're going to add a section without rebuilding the entire page.\n		//much more efficient and speedy.\n		if( params.appendToBlock ){\n\n			var $newFtg = finetuneGroupMarkup(params);	//get the markup for the sidebar - returns html in the format <div id=\"ftg-53\"><!--content in here--></div>\n			var $parentFtg = $(\"#\"+params.appendToBlock);//objectify the parameter. ie. $(\"#ftg-52\");\n			$parentFtg.append($newFtg); //ie. $(\"#ftg-52\").append(<div id=\"ftg-53\">...</div>)\n			var parent_gid = ftGetId($parentFtg);//ftg-52 -> 52\n			var fullLayout = finetuneGetEventLayout(null,$newFtg);\n			var newFtGrp = ftGetGrp($newFtg);\n\n		} else {\n			var fullLayout = finetuneGetEventLayout();\n		}\n\n\n		if (fullLayout.group) {\n\n			var layoutParams = {};\n\n			if(params.cloningFromElementLibrary){\n				params.group.cloningFromElementLibrary = true;\n			}\n			var $master_group = findMasterGroup();\n\n			if( params.appendToBlock ){\n				layoutParams['appendToBlock'] = parent_gid;\n				if(params.afterBlock){\n					layoutParams['afterBlock'] = true;\n				}\n				if(typeof $newFtg !== 'undefined'){\n					//subtract 1 because the group count is auto-incremented.\n					layoutParams['startingGrpCount'] = parseInt(ftGetId($newFtg)) - 1;\n				}\n				//nothing to do here. add if necessary.\n\n			} else { //Only do this if NOT appending to another block.\n				if (toMaster && $master_group.length == 1) {\n					if(params.modalId){\n						fullLayout.group.push(params);\n						//addnewSection();\n					}else {\n						fullLayout = addElementToMasterGrp(fullLayout,params);\n					}\n				} else {\n					fullLayout.group.push(params);\n				}\n\n			}\n\n			constants.prevent_scroll = true;\n			finetuneDesignApplyThemeLayout(fullLayout, layoutParams, function(){\n				if(typeof newFtGrp!=='undefined'){\n					//THIS MUST BE DONE AFTER THE FACT to prevent these settings from saving to the new group.\n					if( newFtGrp['is_repeatable'] ){\n						delete newFtGrp['is_repeatable'];\n					}\n					if ( newFtGrp['appendToBlock'] ){\n						delete newFtGrp['appendToBlock'];\n					}\n				}\n				$(window).trigger('resize');\n				constants.prevent_scroll = false;\n				if(toMaster){\n					scrollToBlock($(\"#splash-container\").find(\".onPageAddSec:last\"));\n				}\n			});\n\n		}\n\n		finetuneLayoutChangesMade();\n	} else {\n		if(params && params.blockToClone){\n			// get the blank\n			var $originalBlock = params.blockToClone;\n			var originalGrp = ftGetGrp($originalBlock);\n			if(typeof originalGrp.element_type!=='undefined' && originalGrp.element_type!=''){\n				params.block_type = originalGrp.element_type;\n			} else {\n				params.block_type = $originalBlock.find(\".element > .sf\").attr(\"block-type\");\n			}\n\n			var $checkForChildren = $originalBlock.find(\".list-item:first\");\n			var $checkForEmbed = $originalBlock.find(\".embed\");\n\n			if($checkForChildren.length > 0){\n				params.child_type = $checkForChildren.attr(\"block-type\");\n			}\n			if($checkForEmbed.length > 0){//checking for an embed code.\n				params.embed_code = $checkForEmbed.html();\n			}\n\n\n			var $block = $originalBlock.clone();\n			$block = $('<div class=\"blank-group\">'+$block.wrap('<p/>').html()+'</div>');\n			$block.find('.crp-enabled').removeClass('crp-enabled').end()\n				.find(\".editable\").removeClass('editable hasTiny').end()\n				.find(\".tp-enabled\").removeClass('tp-enabled').end()\n				.find(\".edit-tools\").remove();\n			$block.removeAttr(\"id\").find(\".editable\").each(function(){\n				$(this).removeAttr(\"id\").find(\".edit-tools\").remove();\n				finetuneDeActivateEditable($(this));\n			});\n			$block.find(\".sf\").removeAttr(\"id\");\n\n		} else {\n			// get the blank\n			if(params.cloneObj){ //optional parameter to pass in.  Block is already found. just clone it.\n				var $block = params.cloneObj.clone();\n			} else {\n				var $block = $(\"#blank-groups\").find('.sf[block-type=\"'+params.block_type+'\"]:first').parents(\".blank-group\").clone();\n			}\n			trackIndicativeEvent('addSection', { 'type': params.block_type });\n		}\n\n		// assign a temporary sfid\n		var tid = Math.ceil(Math.random()*9000);\n		var sfid = 'new-'+tid;\n		$block.find(\".element > .sf\").prop(\"id\",'sfid-'+sfid);\n\n		// if we have children, give them csfids based on sfid AND mark fields for saving\n		var $children = $block.find('.children:first');\n		if ($children.length == 1) {\n			var x = 0;\n			$children.find('.sf').each(function(){\n				var csfid = sfid+'-'+''+x;\n				var $this = $(this);\n				$this.prop(\"id\",'sfid-'+csfid);\n				finetuneEditedFields['data[SplashFeed]['+csfid+'][type]'] = params.child_type;\n				finetuneEditedFields['data[SplashFeed]['+csfid+'][parent_splash_feed_id]'] = sfid;\n				finetuneEditedFields['data[SplashFeed]['+csfid+'][title]'] = $this.find(\".title\").html();\n				finetuneEditedFields['data[SplashFeed]['+csfid+'][body]'] = $this.find(\".body\").html()\n				if ($this.hasClass('wImg')) {\n					var $img = $this.find('.media.image:first');\n					var src = stripUrl($img.css('background-image'));\n					if ($img.length == 1 && src != '') {\n						finetuneEditedFields['data[SplashFeed]['+csfid+'][image_url]'] = src;\n					}\n				}\n\n				x++;\n			});\n		}\n\n		// set the block_type to save to this splash_feed row\n		finetuneEditedFields['data[SplashFeed]['+sfid+'][type]'] = params.block_type;\n\n		// hero image url saving\n		if (params.block_type == 'image') {\n			var $parentImg = $block.find('.image img:first');\n			if ($parentImg.length > 0 && $parentImg.length == '1') {//for hero, this makes sure the starter image url is sent.\n				finetuneEditedFields['data[SplashFeed]['+sfid+'][image_url]'] = $parentImg.attr('src');\n			}\n		}\n\n		//checking to save the button being added on the fly\n		if (params.block_type == 'button') {\n			var website = $block.find(\".button-link\").prop('href');\n			if(typeof website!=='undefined' && website.match(/#/)){\n				website = '#'+website.split('#')[1];\n			}\n			finetuneEditedFields['data[SplashFeed]['+sfid+'][website]'] = website;\n		}\n\n		// set up for adding this new block to the admin layout tree\n		var element = 'custom-block-'+sfid;\n		$block.find('> .element:first').attr('id','element-'+element);\n\n		if (typeof EventSettingLayout==='undefined'){\n			EventSettingLayout = {};\n		}\n		if (typeof EventSettingLayout.elementNames == 'undefined') {\n			EventSettingLayout.elementNames = {};\n		}\n\n		var grp = {element:element};\n		// any group defaults passed from SplashFeed\n		var s = [];\n		var extra_classes = [];\n\n		if (typeof $block.attr('group')!=='undefined') {\n			var defaultGrp = $.parseJSON($block.attr('group'));\n			$.extend(true,grp,defaultGrp);\n		} else if(typeof params.blockToClone!=='undefined'){\n			var defaultGrp = originalGrp;\n			$.extend(true,grp,defaultGrp);\n			grp.element = element;\n			if(originalGrp['class']){\n				extra_classes.push(originalGrp['class']);\n			}\n		}\n\n		if(typeof defaultGrp!=='undefined'){\n			if (typeof grp.styles!=='undefined'){\n				for (var k in grp.styles) {\n					s.push( styleMarkup(grp.styles[k],k) );\n				}\n			}\n			if(typeof grp.width!=='undefined'){\n				extra_classes.push('w'+grp.width);\n			}\n			// if(typeof grp.position!=='undefined'){\n			// 	extra_classes.push('p-'+grp.position);\n			// }\n		}\n\n		EventSettingLayout.elementNames[element] = params.block_type;//important! has to be above finetuneGroupMarkup.\n\n		// admin layout tree block markup\n		var $newGroup = finetuneGroupMarkup(grp,1,params.block_type);\n		$newGroup.attr(\"block-type\",params.block_type);\n		// create the on-page markup from the blank\n		var group_num = $newGroup.prop(\"id\").replace(/^ftg./,'');\n		var $new_block = $('<div id=\"g-'+group_num+'\" class=\"grp layoutGrp element-'+element+' '+extra_classes.join(' ')+'\" style=\"'+s.join(';')+'\">'+$block.html()+'</div>');\n		$new_block.css('font-family',$(\"#secondary-font-input\").val()).find(\"h1,h2,h3\").css('font-family',$(\"#secondary-font-input\").val());\n\n		// need to put the on-page $new_block into #main-canvas. either in the master group or at the bottom\n		var $master_group = findMasterGroup();\n		if(params.blockToClone && !params.appendToContainer){//if adding a clone\n			$originalBlock.after($new_block);\n			var $parent_group = $new_block.parents(\".layoutGrp:first\");//take the FIRST parent block of the new block.\n			if($parent_group.length > 0){\n				var $master_section = $(\"#ft\"+$parent_group.prop(\"id\"));\n			}\n		} else if($(\"#add-new-section\").data(\"appendToBlock\")){\n			var appendToBlock = $(\"#add-new-section\").data('appendToBlock');\n			if(appendToBlock.match(/after-/)){\n				var afterBlock = true;\n				var $block = $(\"#\"+appendToBlock.replace(/after-/,''));//ie $(\"#g-7\")\n				$block.after($new_block);\n			} else {\n				var $block = $(\"#\"+appendToBlock);//ie $(\"#g-7\")\n				$block.append($new_block);\n			}\n			//$block.find(\".onPageAddSec:first\").before($new_block);\n			$(\"#add-new-section\").data('appendToBlock',false);\n			var mgid = $block.prop(\"id\");//g-7\n			var $master_section = $(\"#ft\"+mgid);\n		} else if($master_group.length > 0){\n			if($master_group.hasClass('container-ele')) {\n				$master_child = $master_group.children('.layoutGrp:first');\n				$master_child.append($new_block);\n				var new_block_gid = $master_child.prop('id');//ie g-50.\n				var $master_section = $(\"#ft\"+new_block_gid);//ftg-50\n			}\n			else {\n				$master_group.append($new_block);\n				var new_block_gid = $master_group.prop('id');//ie g-50.\n				var $master_section = $(\"#ft\"+new_block_gid);//ftg-50\n			}\n\n		} else{\n			$(\"#main-canvas\").append($new_block);\n		}\n\n		// need to put the ftgrpmarkup in the sections tree\n		if ($master_section && $master_section.length == 1) {\n			if(typeof afterBlock!=='undefined'){//if we're adding AFTER the block, then don't append- Use .after() instead.\n				$master_section.after($newGroup);\n			} else {\n				$master_section.append($newGroup);\n			}\n			$master_section.removeClass('hide');\n\n		} else{\n			$('#finetune-layout-contain').append($newGroup);\n		}\n\n		// make sure the gallery section is always at the bottom of sections\n		//var $gallsection = $(\"#finetune-layout-contain\").find(\".section[chunk='album']\");\n		//if ($gallsection.length > 0) {\n			//$(\"#finetune-layout-contain\").append($gallsection);\n		//}\n\n		// apply and save children mode and img_shape\n		var mode = (grp && grp.mode) ? grp.mode : '';\n		var img_shape = (grp && grp.img_shape) ? grp.img_shape : '';\n\n		if (mode != '' || img_shape != '') {\n			if ($children.length > 0) {\n				if(params.blockToClone){//if adding a clone\n					var sf_data = $originalBlock.find(\".media:first\").data();\n					var saved_img_ratio = (sf_data && sf_data['splashFeedOptions'] && sf_data['splashFeedOptions']['saved_img_ratio'])?sf_data['splashFeedOptions']['saved_img_ratio']:''\n				}\n\n				$new_block.find(\".children:first\").find('.sf').each(function(){\n					var $t = $(this);\n					var csfid = (''+$t.attr('id')).replace(/^sfid./,'');\n					if (mode != '') {\n						$t.addClass(mode);\n						finetuneEditedFields['data[SplashFeed]['+csfid+'][options][mode]'] = mode;\n					}\n					if (img_shape != '') {\n						$t.addClass(img_shape);\n						finetuneEditedFields['data[SplashFeed]['+csfid+'][options][img_shape]'] = img_shape;\n						if(saved_img_ratio!=''){\n							finetuneEditedFields['data[SplashFeed]['+csfid+'][options][saved_img_ratio]'] = saved_img_ratio;\n						}\n					}\n				});\n			} else {\n				if (mode != '') {\n					$new_block.find(\".sf:first\").addClass(mode);\n					finetuneEditedFields['data[SplashFeed]['+sfid+'][options][mode]'] = mode;\n				}\n				if (img_shape != '') {\n					$new_block.find(\".sf:first\").addClass(img_shape);\n					finetuneEditedFields['data[SplashFeed]['+sfid+'][options][img_shape]'] = img_shape;\n				}\n			}\n		}\n\n		// for maps, we save width, height and zoom\n		if ( params.block_type == 'map' ) {\n			if ( typeof params.width != 'undefined' ) {\n				finetuneEditedFields['data[SplashFeed]['+sfid+'][options][width]'] = params.width;\n			}\n			if ( typeof params.height != 'undefined' ) {\n				finetuneEditedFields['data[SplashFeed]['+sfid+'][options][height]'] = params.height;\n			}\n			if ( typeof params.zoom != 'undefined' ) {\n				finetuneEditedFields['data[SplashFeed]['+sfid+'][options][zoom]'] = params.zoom;\n			}\n		}\n\n		finetuneActivateOnPageEditables();\n		if(typeof params.value!=='undefined'){\n			$new_block.find(\".body\").html(params.value);\n		}\n		if (typeof params.embed_code!=='undefined'){\n			if(typeof params.website!=='undefined'){\n				finetuneEditedFields['data[SplashFeed]['+sfid+'][website]'] = params.website;\n				$new_block.find(\".grp.embed\").html('<a href=\"'+params.website+'\" class=\"embed-url\">'+params.embed_code+'</a>').trigger('change');\n			} else {\n				$new_block.find(\".grp.embed\").html(params.embed_code).trigger('change');\n			}\n			finetuneEditedFields['data[SplashFeed]['+sfid+'][embed_code]'] = params.embed_code;\n			finetuneEditedFields['data[SplashFeed]['+sfid+'][title]'] = params.title||params.embed_code;\n		}\n		if(typeof params.body!=='undefined'){\n			if(typeof params.embed_code!=='undefined'){\n				if(params.block_type=='map'){//kill the extra <h2>\n					$new_block.find(\".body\").html((''+params.body).replace(/\\n/g,\"<br>\"));\n				} else {\n					$new_block.find(\".body\").html('<h2>'+(''+params.body).replace(/\\n/g,\"<br>\")+'</h2>');\n				}\n			} else{\n				$new_block.find(\".body\").append(params.body);\n			}\n		}\n\n		var $parentDropArea = $new_block.parents(\"div.drop-area:first\");//if this is within a column container, remove the \"not-edited\" class.\n		if($parentDropArea.length > 0){\n			var parentGrp = ftGetGrp($parentDropArea);\n			if(parentGrp && parentGrp['class']){\n				parentGrp['class'] = parentGrp['class'].replace(/not-edited/g,'');\n			}\n			$parentDropArea.removeClass('not-edited');\n		}\n\n		leaveInheritedStateIntact = true;\n		$new_block.find(\".body\").trigger('change').end()\n			  .find(\".title\").trigger('change').end()\n			  .find(\".timeHolder\").trigger('change');\n		leaveInheritedStateIntact = false;\n		var gid = 'g-'+group_num;\n		var $ftg = $('#ftg-'+group_num);\n		setTimeout(function(){\n			scrollToBlock($new_block,-50,null,true);\n			//if(typeof $ftg !== 'undefined'){\n				updateNestAttr($ftg);\n\n				//add highlight to new section\n				setTimeout(function(){\n					$ftg.children('span.title').addClass('dragging')\n				},200)\n				setTimeout(function(){\n					$ftg.children('span.title').removeClass('dragging')\n				},400)\n				var $accordion = $('#acc-ftg-'+group_num);\n				if(!$accordion.hasClass('bound')){\n					var grp = ftGetGrp($ftg);\n					if(params.block_type && params.block_type=='event-hub'){\n						var $blank_group = $(\"#blank-groups .event-hub\");\n						var options = $blank_group.data('splashFeedOptions');\n						if(options){\n							grp['options'] = options;\n						}\n\n						if(grp['options']){\n							finetuneEditedFields['data[SplashFeed]['+sfid+'][options]'] = grp['options'];\n						}\n						if(grp['mode']){\n							finetuneEditedFields['data[SplashFeed]['+sfid+'][mode]'] = grp['mode'];\n						}\n					}\n				}\n			//}\n		},10);\n		if(typeof $containerScroll!=='undefined' && $containerScroll) {\n			setTimeout(function(){\n				setTimeout(function(){\n					$ftg.children('span.title').addClass('dragging')\n					},200)\n					setTimeout(function(){\n						$ftg.children('span.title').removeClass('dragging')\n						$containerScroll = false;\n						scrollToBlock($new_block,-50,null,true);\n					},400)\n			},5000)\n		}\n		$(\"#allSectionsContain\").scrollTop( $(\"#allSectionsContain\").height() );\n		$(\"#nestedLayoutContainer\").scrollTop( $(\"#finetune-layout-contain\").height() );//scroll to bottom so we can see new section.\n		setWindowHeight($(\"#nestedLayoutContainer\"));\n		finetuneFieldChangesMade();\n		finetuneLayoutChangesMade();\n		updateMainCanvasCClasses();\n		closeCustomSection();\n		addElementButtons();\n		updateFLCxN();\n\n\n		// countdown element, initiate it\n		if ( params.block_type == 'countdown' ) {\n			CountdownElement.init( $new_block.find('.sf') );\n		}\n		// attendees element, initiate it\n		else if ( params.block_type == 'attendees' ) {\n			AttendeesElement.init( $new_block.find('.sf') );\n		}\n\n\n		if(!inAdvancedMode()){\n			makeGrpsSortable(true);\n			$('.moveCursor').addClass('hide');\n\n		}\n\n		if ( params.block_type == 'comments' ) {\n			CommentsElement.firstTimeLoad( $new_block.find(\".sf.comments:first\") );\n		}\n\n		if ( params.block_type == 'img_gal' ) {\n			galleryCarousel.init($new_block.find(\".sf\"));\n		}\n\n	}\n\n\n	if(_callback){\n		if(typeof $new_block!=='undefined'){\n			_callback($new_block);\n		} else {\n			_callback();\n		}\n	}\n\nmakeGrpsSortable();\n}\n\nvar leaveInheritedStateIntact = false;\nfunction finetuneMarkAllCustomBlockFields() { // {{{\n	var $allInheritedBlocks = $('#main-canvas').find('.element[inherited-theme=\"true\"]');\n	leaveInheritedStateIntact = true;\n	$allInheritedBlocks.each(function(){\n		var $block = $(this).find('> .sf:first');\n		var sfid = (''+$block.attr('id')).replace('sfid-','');\n		// types and parent ids and images of any children\n		finetuneEditedFields['data[SplashFeed]['+sfid+'][type]'] = $block.attr('block-type');\n		if ($block.hasClass('wImg')) {\n			var $img = $block.find('> .image:first img:first');\n			if ($img.length == 1) {\n				finetuneEditedFields['data[SplashFeed]['+sfid+'][image_url]'] = $img.attr('src');\n			}\n		}\n		var $children = $block.find('.children:first');\n		if ($children.length) {\n			$children.find('.sf').each(function(){\n				var $child = $(this);\n				var csfid = (''+$child.attr('id')).replace('sfid-','');\n				finetuneEditedFields['data[SplashFeed]['+csfid+'][type]'] = $child.attr('block-type');\n				finetuneEditedFields['data[SplashFeed]['+csfid+'][parent_splash_feed_id]'] = sfid;\n				if ($child.hasClass('wImg')) {\n					var $img = $child.find('.image:first img:first');\n					if( $img.parents(\".list-item:first\").hasClass('no-shape')){\n						var src = $img.attr('src');\n					} else {\n						var src = $img.parents(\".image:first\").css('background-image');\n						src = stripUrl(src);\n					}\n					if ($img.length == 1) {\n						finetuneEditedFields['data[SplashFeed]['+csfid+'][image_url]'] = src;\n					}\n				}\n			});\n		}\n		// now all editable fields... title, body\n		$block.find('.editable').each(function(){\n			$(this).trigger('change');\n		});\n\n		// now for the pièce de résistance\n		saveSplashFeedChildOptions($block.parents('.layoutGrp:first'));\n	});\n	leaveInheritedStateIntact = false;\n\n	finetuneFieldChangesMade();\n\n} // }}}\n\nfunction updateEmbed(params){\n	var $grp = $(\"#g-\"+params['group_id']);\n	if($grp.length > 0){\n		var $embed = $grp.find(\".grp.embed\"),\n			sfid = $embed.parents(\".sf:first\").prop(\"id\").replace('sfid-','');\n\n		if(typeof params.website!=='undefined'){\n			finetuneEditedFields['data[SplashFeed]['+sfid+'][website]'] = params.website;\n			$embed.html('<a href=\"'+params.website+'\" class=\"embed-url\">'+params.embed_code+'</a>').trigger('change');\n		} else {\n			$embed.html(params.embed_code).trigger('change');\n		}\n		finetuneEditedFields['data[SplashFeed]['+sfid+'][embed_code]'] = params.embed_code;\n		finetuneEditedFields['data[SplashFeed]['+sfid+'][title]'] = params.title||params.embed_code;\n\n		// for embed maps, we save width height and zoom, so that when duplicating the page we have this info\n		if ( typeof params.width != 'undefined' && typeof params.height != 'undefined' && typeof params.zoom != 'undefined' ) {\n			json_opts = $('#sfid-'+sfid).data('splashFeedOptions');\n			json_opts.width = params.width;\n			json_opts.height = params.height;\n			json_opts.zoom = params.zoom;\n			finetuneEditedFields['data[SplashFeed]['+sfid+'][options]'] = JSON.stringify(json_opts);\n		}\n\n		if(typeof params.title!=='undefined'){\n			var $accordion = $(\"#acc-ftg-\"+params['group_id']);\n			if($accordion.length > 0){//update the embed title.\n			 	$accordion.find(\".blockEmbedHolder\").find(\".form-wrap .title\").html('<p>'+params.title+'</p>');\n				$accordion.find(\".title:first\").text(params.title);\n				$(\"#ftg-\"+params['group_id']).find(\".title\").text(params.title.toLowerCase());\n			}\n		}\n		if(typeof params.body!=='undefined' && params.body!=''){\n			$grp.find(\".body\").html('<h2>'+(''+params.body).replace(/\\n/g,\"<br>\")+'</h2>');\n		}\n\n		$grp.find(\".body\").trigger('change');\n		$grp.find(\".title\").trigger('change');\n\n  		finetuneFieldChangesMade();\n		finetuneLayoutChangesMade();\n	}\n}\n\n//<<<2.0>>> - is this still needed? closeCustomSection() is called in most places now.\nfunction backToFineTune(backId){\n	$(\"#fineTuneForm .inner-pane:first\").css('margin-left','0em');\n	if(!inCustomSection){//if we're going back from a custom section, no need to close the custom section.  it is annoying.\n		$(\"#sections-wrap\").removeClass('open');\n	}\n\n	if($(\"#gatherSocialContent\").hasClass('pressed')){//if they're closing the section, close the gallery adder.\n		$(\"#gatherSocialContent\").click();\n	}\n\n	$(\"#fontComboContain\").removeClass('editing');\n\n	inCustomSection=false;\n\n	setVisibleAccordionHeight();\n\n}\n\nfunction inDesignerMode(){\n	if(constants.designer_mode == 'designer'){\n		return true;\n	} else {\n		return false;\n	}\n}\n\nfunction inAdvancedMode(){\n	if( constants.designer_mode == 'builder'){\n		return true;\n	} else {\n		return false;\n	}\n}\n\nfunction inBuilderView(){\n	if( constants.is_builder == 1 ){\n		return true;\n	} else {\n		return false;\n	}\n}\n\nfunction shownDesignerWarning(){\n	if( JSCookies.getItem('shownDesignerWarning') == 'true' ){\n		return true;\n	} else {\n		return false;\n	}\n}\n\n\nfunction finetuneGetThemeStyleInputs(alsoChangesMadeInputs) {\n	var alsoChangesMadeInputs = alsoChangesMadeInputs || false;\n	var sel = '[name^=\"data[EventSetting][theme_styles]\"]';\n	if (alsoChangesMadeInputs) {\n		sel += ',input.changes-made,textarea.changes-made,select.changes-made';\n	}\n	return $('#finetune-block').find(sel);\n}\n\nfunction finetuneDesignPopulateThemeStyles(theme_styles,forceTrigger,_callback)\n{ // {{{\n\n	if(forceTrigger==null){\n		forceTrigger = false;\n	}\n\n	if (!theme_styles) { return; }\n	var lastThemeId = $(\"#event-theme-input\").attr(\"last-theme-id\");\n\n	if(forceTrigger){\n\n		var header_image = $(\"#header-image-source\").val();\n		var dims = $(\"#header-image-dims\").val();\n		if($(\"#header-image-changed\").val() == '1' ){ //if the header has been changed, update it.\n			var $group = getTargetById('header');\n			updateGroupImage($group,{ 'src': header_image, 'dims': dims });\n			$group.find(\"img.bg:first\").prop(\"src\",header_image);\n		} else if(theme_styles['header']['image']) {\n			$(\"#header-image-source\").val(theme_styles['header']['image']);\n		}\n\n		//update swatch combos.\n		$(\"#event-swatch-input\").val(theme_styles['swatch']);\n		$(\"#theme-color-combos\").val(theme_styles['color_combos']);\n		$(\"#theme-link-combos\").val(theme_styles['link_combos']);\n		$(\"#theme-font-combos\").val( theme_styles['font_combos'] );\n		\n		if(theme_styles['selected_font_combo'] && theme_styles['selected_font_combo']!=''){\n			$(\"#event-font-combo\").val( theme_styles['selected_font_combo']);\n			$(\"#primary-font-input,#secondary-font-input\").val('');\n		} else {\n			//clean legacy fallback.\n			$(\"#event-font-combo\").val('');\n			$(\"#primary-font-input\").val(theme_styles['main']['primary_font']);\n			$(\"#secondary-font-input\").val(theme_styles['main']['secondary_font']);		\n		}\n\n		populateColorCombos({ force: true });\n		splash.fontActions.init(); // reinitiliaze font combos with new combos.\n\n	 	var rsvp_inline = theme_styles.rsvp_inline||0,\n	 		currentVal = $(\"#rsvp-inline-checkbox\").val();\n\n		if(currentVal!=theme_styles.rsvp_inline){//either 0 or 1\n			$(\"#rsvp-inline-theme-style\").val(rsvp_inline).trigger('change');\n			setCheck($(\"#rsvp-inline-checkbox\"),rsvp_inline,forceTrigger);\n		}\n\n		if(typeof theme_styles.headerIsBg!=='undefined'){\n			var val = theme_styles.headerIsBg||0;\n			setCheck($(\"#headerIsBg\"),val,forceTrigger);\n		} else {\n			setCheck($(\"#headerIsBg\"),0);\n		}\n\n		var val = theme_styles.tieBgToHeader||0;\n		setCheck($(\"#tieBgToHeader\"),val,forceTrigger);\n\n		//this deals with hiding any sections that were already hidden after switching.\n		$(\"#finetune-hide_when,#finetune-hide_where,#finetune-all-tools input.hide_field_check\").each(function(){\n			$(this).toggleAccordion(true);\n		});\n		$(\"#finetune-hide_when,#finetune-hide_where\").trigger('change');\n\n		if (_callback && typeof(_callback) === \"function\") {\n	        _callback();\n	    }\n	    return;\n	}\n\n} // }}}\n\nfunction styleMarkup(v,k){// {{{\n	var styles = [];\n\n	if (v && (typeof v == 'array' || typeof v == 'object') ){\n		for (var sk in v) {\n			var sv = v[sk];\n			if(sv!='' && sv!='em' && sv!='px'){\n				if (!isNaN(sv)) {\n					if(sv>6){\n						sv += 'px';\n					} else{\n						sv += 'em';\n					}\n				}\n				styles.push(k+'-'+sk+':'+sv);\n			}\n\n		}\n	} else if (k == 'transform') {\n		styles.push('-webkit-transform: '+v);\n		styles.push('-moz-transform: '+v);\n		styles.push('-ms-transform: '+v);\n		styles.push('transform: '+v);\n	} else if ( k == 'hide' || k == 'hidden' || k =='bg-type' ){\n		return;\n	} else {\n		if(v!='' && v!='em' && v!='px' && k!='z-index'){\n			if(!isNaN(v)){\n				if(v=='1'&&k=='hide'){\n					k='display';v='none';\n				} else{\n					if(v>6){\n						v += 'px';\n					} else{\n						v += 'em';\n					}\n				}\n			}\n			styles.push(k+':'+v);\n		} else if(k == 'z-index'){\n			styles.push(k+':'+v);\n		}\n	}\n	return styles.join(';');\n} // }}}\n\nfunction buildSwatches(swatches){\n	var swatch_classes = [];\n	//expects multi-array in format swatchX => array(bg => colorx, text => colory), where colorx and colory are indices.\n	for(var swatch in swatches){\n		for(var key in swatches[swatch]){\n			var val = swatches[swatch][key];\n			if(val!=''){\n				swatch_classes.push(swatch+'-'+key+'-'+val);//ie. swatch1-bg-2, swatch4-text-3.\n			}\n		}\n	}\n	return swatch_classes.join(' ');\n}\n\nfunction quickGroupMarkup(group,x,skipCustomCheck,myGroupCount) { // {{{\n	var skipCustomCheck = skipCustomCheck || false;\n	var x = x || 1;\n	var s = [];\n	var image = false;\n	//groupCount++;\n\n	var c = generateClassesFromGroup(group);\n	var attr = generateAttributesFromGroup(group);\n\n	if (group.bgimage) {\n		c.push('img');\n		s.push(\"background-image:url('\"+group.bgimage+\"')\");\n		image = group.bgimage;\n	}\n\n	if (group.element && $.inArray(group.element,hiddenElements) > -1) {\n		if (typeof group.styles == 'undefined') {\n			group.styles = {};\n		}\n		group.styles.hidden = \"1\";\n	}\n\n	if (group.styles) {\n		for (var k in group.styles) {\n			s.push(styleMarkup(group.styles[k],k));\n			if (k == \"hidden\" && group.styles[k] == \"1\") {\n				c.push('hide');\n				s.push('display:none');\n			}\n		}\n	}\n\n	var attr_str = '';\n	for(var y in attr){\n		attr_str+=y+'=\"'+attr[y]+'\" ';//ie lock=\"true\" bob=\"funny\" etc.\n	}\n\n	var markup = '<div id=\"g-'+myGroupCount+'\" class=\"grp '+c.join(' ')+' x'+x+' layoutGrp\" style=\"'+s.join(';')+'\" '+attr_str+'>';\n	// NO\n	if (image !== false && group.eventImage) {\n		markup += '<img class=\"bg\" src=\"'+image+'\" />';\n	}\n	//markup += innermarkup;\n\n	markup += '</div>';\n\n	return markup;\n} // }}}\n\nfunction finetuneDesignApplyThemeLayout(layout,params,_callback){ // {{{\n	var layout = $.extend(true,{},layout) || false,\n		theme_id = params.theme_id || false,\n		customLayoutLibrary = false,\n		$mc = $(\"#main-canvas\");\n\n	if (layout == false) {\n		if(typeof _callback=='function'){\n			_callback();\n		}\n		return;\n	}\n	// save what we have now for reverting later on\n	var existingLayout = $.extend(true,{},finetuneGetEventLayout());\n	var existingCustoms = [];//this array is blocks that were manually added by the user.  We want these to stick around on theme switch.\n	var inheritedCustoms = [];//this array is blocks that the page will INHERIT from the theme you are switching to.\n	var hiddenElements = [];\n	// set up the on-page version of the layout markup\n	if(params.appendToBlock){ //this is only a partial upgrade. cannot start groupCount at 0.\n		if(params.startingGrpCount){\n			var groupCount = params.startingGrpCount;\n		}\n		else {\n			//I don't believe this is ever called anymore, but it is a fallback just in case.  Regardless, it is wrong logic!\n			var groupCount = $(\"#main-canvas\").find(\"div.layoutGrp\").length;\n		}\n	} else {\n		var groupCount = 0;\n	}\n\n	var elementsToPull = [];\n	var elementsToPullTypes = {};\n	var pullOnlyForOptions = {};\n\n	var scrapeCustoms = function(lay){ // {{{\n		if (lay.element) {\n			if ((''+lay.element).match(/^custom.block./)) {\n				if($.inArray(lay.element,existingCustoms)<0 && $.inArray(lay.element,inheritedCustoms)<0){\n					var type = $('#element-'+lay.element+' > .sf:first').attr('block-type');\n					existingCustoms.push([lay.element,type]);\n				}\n			} else if (lay.element == 'gallery') {\n				existingCustoms.push(['gallery','gallery']);\n			}\n			if (lay.styles && lay.styles.hidden && lay.styles.hidden == \"1\") {\n				hiddenElements.push(lay.element);\n			}\n		} else if (lay.group) {\n			for (var i in lay.group) {\n				scrapeCustoms(lay.group[i])\n			}\n		}\n	} // }}}\n\n\n	var layoutMarkup = function(lay,x,skipCustomCheck,forceElementPull) { // {{{\n		var skipCustomCheck = skipCustomCheck || false;\n		var forceElementPull = forceElementPull || false;\n		var x = x || 1;\n		var markup = '';\n		for (var i in lay) {\n			if (i !== 'hidden' && i != 'cloningFromElementLibrary') {\n				markup += groupMarkup(lay[i],x,skipCustomCheck,forceElementPull);\n			}\n		}\n		return markup;\n	} // }}}\n\n	var groupMarkup = function(group,x,skipCustomCheck,forceElementPull) { // {{{\n		var skipCustomCheck = skipCustomCheck || false;\n		var forceElementPull = forceElementPull || false;\n		var x = x || 1;\n		var s = [];\n		var image = false;\n		groupCount++;\n		var c = generateClassesFromGroup(group);\n		var attr = generateAttributesFromGroup(group);\n\n		if(group['cloningFromElementLibrary']){\n			forceElementPull = true;\n			customLayoutLibrary = true; //super duper important. sets the variable to true for the duration of the outer function call.\n			delete group['cloningFromElementLibrary'];//important. don't want it to be saved with the case.\n		}\n\n		if (group.bgimage) {\n			c.push('img');\n			s.push(\"background-image:url('\"+group.bgimage+\"')\");\n			image = group.bgimage;\n		}\n\n		var myGroupCount = groupCount;\n		var innermarkup = '';\n		if (group.group && group.group.length > 0) {\n			innermarkup += layoutMarkup(group.group,x+1,skipCustomCheck,forceElementPull);\n		} else if (group.element) {\n			innermarkup += elementMarkup(group,skipCustomCheck,forceElementPull);\n		}\n\n		if (group.element && $.inArray(group.element,hiddenElements) > -1) {\n			if (typeof group.styles == 'undefined') {\n				group.styles = {};\n			}\n			group.styles.hidden = \"1\";\n		}\n\n		if (group.styles) {\n			for (var k in group.styles) {\n				s.push(styleMarkup(group.styles[k],k));\n				if (k == \"hidden\" && group.styles[k] == \"1\") {\n					c.push('hide');\n					s.push('display:none');\n				}\n			}\n		}\n\n		var attr_str = '';\n		for(var y in attr){\n			attr_str+=y+'=\"'+attr[y]+'\" ';//ie lock=\"true\" bob=\"funny\" etc.\n		}\n\n		var markup = '<div id=\"g-'+myGroupCount+'\" class=\"grp '+c.join(' ')+' x'+x+' layoutGrp\" style=\"'+s.join(';')+'\" '+attr_str+'>';\n		// NO\n		if (image !== false && group.eventImage) {\n			markup += '<img class=\"bg\" src=\"'+image+'\" />';\n		}\n\n		markup += innermarkup;\n\n		markup += '</div>';\n		return markup;\n	} // }}}\n\n	var fixDateVenueWhiteSpace = function(){\n		//this deals with adding a needed space for venue and date.\n		$(\"#splash-container\").find(\"div.mega-location-wrap,div.mega-date-wrap\").find(\".layoutGrp:visible\").each(function(){\n			$(this).before(' ');\n		});\n	}\n\n	var elementMarkup = function(group,skipCustomCheck,forceElementPull) { // {{{\n		var skipCustomCheck = skipCustomCheck || false;\n		var forceElementPull = forceElementPull || false;\n		var elementName = group.element;\n		var elementMarkup = '';\n		var $exist = $('#element-'+elementName);\n\n		if(group['cloningFromElementLibrary']){\n			forceElementPull = true;\n			customLayoutLibrary = true; //super duper important. sets the variable to true for the duration of the outer function call.\n			delete group['cloningFromElementLibrary'];//important. don't want it to be saved with the case.\n		}\n\n		var joy = false;\n		if (!skipCustomCheck && params.themeSwitch && elementName.match(/^custom.block./) && group.element_type && !forceElementPull) {\n			for (var i in existingCustoms) {\n				// if we haven't already found one\n				if (joy === false) {\n					var ele = existingCustoms[i][0];\n					var type = existingCustoms[i][1];\n					if (ele != elementName && type == group.element_type) {\n						elementName = ele;\n						joy = i;\n					} else if (ele == elementName && type == group.element_type) {\n						// what the hell guys\n						existingCustoms.splice(i,1); // delete this existing custom\n					}\n				}\n			}\n			if (joy !== false) {\n				existingCustoms.splice(joy,1); // delete this existing custom\n			}\n		}\n\n		if (joy === false) {\n			if ($exist.length == 1 && !forceElementPull) {\n				elementMarkup += $exist.html();\n				$exist.remove();\n			} else {\n				elementsToPull.push(group.element);\n				if (group.element_type) {//optional\n					elementsToPullTypes[group.element] = group.element_type;\n				}\n				if (forceElementPull) {\n					elementName += '-pulling';\n					elementMarkup = '<div class=\"thisLoader loading element-library-loader\"><div class=\"nu-loader small\"></div></div>';\n				}\n			}\n		} else {\n			// elementName was changed to the found one\n			var $joyExist = $('#element-'+elementName);\n			if ($exist.length == 1 && $joyExist.length == 1) {\n				elementMarkup += $joyExist.html();\n				$joyExist.remove();\n				group.element = elementName;\n				// steal options from the existing one's children\n			} else if ($exist.length == 0 && $joyExist.length == 1) {\n				elementMarkup += $joyExist.html();\n				$joyExist.remove();\n				elementsToPull.push(group.element);\n				if (group.element_type) {\n					elementsToPullTypes[group.element] = group.element_type;\n				}\n				// pullOnlyForOptions will steal child options\n				pullOnlyForOptions[group.element] = elementName;\n				group.element = elementName;\n\n			} else if ($exist.length == 1 && $joyExist.length == 0) {\n				// wtf guys\n				elementMarkup += $exist.html();\n				$exist.remove();\n			} else if ($exist.length == 0 && $joyExist.length == 0) {\n				elementsToPull.push(group.element);\n				if (group.element_type) {\n					elementsToPullTypes[group.element] = group.element_type;\n				}\n			}\n		}\n\n		var rawBlockId = elementName.replace('custom-block-','');\n		var markup = '<a class=\"nav-jump\" id=\"to'+rawBlockId+'\" name=\"to'+rawBlockId+'\"></a>';\n		markup += '<div id=\"element-'+elementName+'\" class=\"element\">';\n		markup += elementMarkup;\n		markup += '</div><!-- end element-'+elementName+' -->';\n		return markup;\n	} // }}}\n\n	// this actually removes things from #main-canvas\n	var newHTML = layoutMarkup(layout.group);\n\n	if(params.themeSwitch){//important! this has to happen before we wipe out the layout of the page below.\n		$mc.find('.element[inherited-theme=\"true\"]').each(function(){\n			inheritedCustoms.push((''+$(this).attr('id')).replace('element-',''));\n		});\n	}\n\n	if(params.appendToBlock){ //only a partial adding of content to page instead of rebuilding the entire thing. this is obviously preferred.\n		if(params.afterBlock){\n			$(\"#g-\"+params.appendToBlock).after(newHTML);\n		} else {\n			$(\"#g-\"+params.appendToBlock).append(newHTML);\n		}\n	} else {\n		//more efficient than looping through each layoutgroup and then appending it all before lastClear.\n		newHTML += '<div id=\"lastClear\" class=\"clear\"></div>';\n		$mc.html(newHTML);\n		finetuneLayoutInit(layout);\n	}\n\n	// add any of my existing custom elements to the end of the new layout and to main-canvas master_group or end\n	if (params.themeSwitch) {\n\n		var $masterGroup = findMasterGroup();\n		var mgid = $masterGroup.prop(\"id\");//in form \"g-id\".\n		var $masterSection = $(\"#ft\"+mgid);\n\n		scrapeCustoms(existingLayout);//this call is only needed when rebuilding the whole page.\n\n		for (var i in existingCustoms) {\n			if ($('#element-'+existingCustoms[i][0]).attr('inherited-theme')) {\n				// don't put us back if we were inherited and not already edited!\n			} else {\n				var ele = existingCustoms[i][0],\n					type = existingCustoms[i][1],\n					html = groupMarkup({element: ele, element_type: type},1,true),\n					$ftg_html = finetuneGroupMarkup({element: ele, element_type: type}),\n					mygrp = {element: ele, element_type: type},\n					$html_obj = $(html);\n\n				if ($html_obj.hasClass('hide')) {\n					mygrp['styles'] = {hide: 1};\n				}\n\n				if ($masterGroup.length == 1) {\n\n					var addElementToMasterGrp = function($layout,ele) {\n						var $layout = ($layout) ? $.extend(true,{},$layout) : {};\n						if ($layout && $layout['master_group'] && $layout['master_group'] == 1) {\n							if (!$layout['group']) {\n								$layout['group'] = [];\n							}\n							$layout['group'].push(ele);\n						}\n						else if ($layout && $layout['group']) {\n							for (var $i in $layout['group']) {\n								var $g = $layout['group'][$i];\n								$layout['group'][$i] = addElementToMasterGrp($g,ele);\n							}\n						}\n						return $layout;\n					}\n					layout = addElementToMasterGrp(layout,mygrp);\n\n					$masterGroup.append($html_obj);\n					$masterSection.append($ftg_html);\n				} else {\n										// layout.group.push(mygrp);\n					$('#lastClear').before($html_obj);\n					$('#finetune-layout-contain').append($ftg_html);\n				}\n			}\n		}\n	}\n\n	// this will hide/show the necessary sections\n	$(\"#finetune-layout-contain\")\n		.find(\".adminBlock\").addClass('hide')\n		.end().find('.section.open').removeClass('open');\n\n	var pull_params = { elements: elementsToPull, theme_id: theme_id };\n	if(customLayoutLibrary){\n		pull_params.layout_block_id = true;\n	}\n\n	// now to pull the missing elements from das server\n	if (elementsToPull.length > 0) {\n\n		$.ajax({\n			url: '/splash/pullElements/'+constants.event_id,\n			type: 'post', data: pull_params\n		}).done(function(response){\n			var $r = $(response);\n			for (var i in elementsToPull) {\n				var $ele = $r.find('.element[pulled-id=\"'+elementsToPull[i]+'\"]:first');\n				if ($ele.length == 1) {\n					// if we just wanted the options.. copy them\n					if (typeof pullOnlyForOptions[elementsToPull[i]] != 'undefined') {\n						var pulledChildOpts = getSplashFeedChildOptions($ele);\n						var $targetEle = $('#element-'+pullOnlyForOptions[elementsToPull[i]]);\n						if ($targetEle.length == 1) {\n							$childrens = $targetEle.find('.children > .sf');\n							if ($childrens.length > 0) {\n								var allMyModes = '';\n\n								if (typeof elementsToPullTypes[elementsToPull[i]] != 'undefined') { // {{{\n\n									var group_id = $targetEle.parents(\".layoutGrp:first\").prop(\"id\");//should be in format 'g-$groupnumber';\n									var $acc = $(\"#acc-ft\"+group_id);//now find the corresponding accordion for this group so we can assign the proper mode for this new item.\n									//assuming we get in, grab the mode of this block so we can apply it to the new item.\n									if($acc.length > 0){\n										if(!$acc.hasClass('bound')){\n											var block_type = elementsToPullTypes[elementsToPull[i]];\n											var $modes = $acc.find(\".modes[type='\"+block_type+\"']\");\n											if($modes.length>0){\n												$modes.find(\".nu-btn\").each(function(){\n													allMyModes += $(this).attr(\"value\")+' ';\n												});\n											}\n										} else {\n											var $mode = $acc.find(\"input.mode\");\n											var mode = $mode.val();\n											$mode.parents(\".modes:first\").find(\".nu-btn\").each(function(){\n												allMyModes += $(this).attr(\"value\")+' ';\n											});\n											var $img_shapes = $acc.find(\"input.img_shape\");\n											var img_shape = $img_shapes.val();\n											$img_shapes.parents(\".shapes:first\").find(\".nu-btn\").each(function(){\n												allMyModes += $(this).attr(\"value\")+' ';\n											});\n										}\n									}\n								} // }}}\n\n								$childrens.each(function(){\n									var $me = $(this);\n									for(i=0;i<layoutOptions.modes.length;i++){\n										$me.removeClass(layoutOptions.modes[i]);\n									}\n									$me.removeClass(layoutOptions.shapes.join(' '));\n									var options = $me.data('splashFeedOptions');\n									if (!options) {\n										options = {};\n										$me.data('splashFeedOptions',options);\n										if (pulledChildOpts.length > 0) {\n											var opts = pulledChildOpts.shift();\n											$.extend(true,options,opts); // this should put the new values into the options array to save.. AND in splashFeedOptions\n										}\n									}\n									if (options && options.mode) {\n										$me.addClass(options.mode);\n									}\n									if (options && options.img_shape) {\n										$me.addClass(options.img_shape);\n									}\n									var mysfid = (''+$me.attr('id')).replace('sfid-','');\n									finetuneEditedFields['data[SplashFeed]['+mysfid+'][options]'] = $.extend(true,{},options);\n									finetuneFieldChangesMade();\n								});\n							}\n						}\n					} else {\n						var onPageSelector = '#element-'+elementsToPull[i];\n						if (customLayoutLibrary) {\n							onPageSelector += '-pulling';\n						}\n						$(onPageSelector).replaceWith($ele);\n						var pulledEventId = $ele.attr('pulled-from-event-id');//checking here to see if this element was pulled from this event.\n						if(elementsToPull[i].match(/^custom.block./) && pulledEventId!=null && constants.event_id != pulledEventId ){\n							$ele.attr(\"inherited-theme\",true);\n						}\n						if (elementsToPull[i] == 'gallery') {\n							gallerySortInit();\n							$('#gallery-container').removeClass('hide');\n							setTimeout(function(){\n								$('#gallery-thumbs').find('img.lazy').each(function(){\n									lazyLoad(this);\n								});\n							},1); // FORK\n						}\n\n						//at this point, we need to make sure the content saves.\n						//$ele.find(\".title\")\n						//$ele.find(\".\")\n						//$ele.find(\".title,.body\").trigger('change');\n\n						var newIdReplace = $ele.attr('newIdReplace');\n						if (newIdReplace) {\n							var ar = (''+newIdReplace).split(';');\n							if (ar.length == 2) {\n								if( params.appendToBlock ) {\n									//nothing to do here.\n								} else {\n									finetuneNewBlockIds.unshift(ar);\n								}\n							}\n							// layout = replaceNewSplashFeedIdsInLayout(layout,ar[0],ar[1]);\n							// meche replace the id='element-themeid' with id='element-ar[1]' EVERYWHERE - on page.. and on the left\n							replaceSFIDEverywhere(ar[0],ar[1]);\n							var newName = 'Block';\n							if (elementsToPullTypes[elementsToPull[i]]) {\n								newName = elementsToPullTypes[elementsToPull[i]];\n							}\n\n							EventSettingLayout.elementNames['custom-block-'+ar[0]] = newName;\n							EventSettingLayout.elementNames['custom-block-'+ar[1]] = newName;\n						}\n						if (elementsToPull[i] == 'facebook-comments') {\n							if ( typeof FB != 'undefined' ) FB.XFBML.parse($ele[0]);\n						}\n					}\n				}\n				//Insert else if length is 0 if you need to remove the empty element blocks on theme switch -- seems to be an issue only on local right now\n			}\n			finetuneActivateOnPageEditables( true );\n			finetuneLayoutChangesMade();\n			// finetuneLayoutInit(layout);\n		}).fail(function(){ }).always(function(){ });\n	}\n\n	finetuneActivateOnPageEditables( true );\n\n	makeGrpsSortable();\n\n	if(galleryExistsOnPage()){\n		galleryThumbFlow();\n	}\n\n	fixDateVenueWhiteSpace();\n\n	if(typeof _callback=='function'){\n		_callback();\n	}\n\n} // }}}\n\nfunction replaceSFIDEverywhere(bad,good) { // {{{\n	var bad = bad || ''\n	var good = good || '';\n\n	if (bad != '' && good != '') {\n		$('#sfid-'+bad).attr('id','sfid-'+good);\n		$('#element-custom-block-'+bad).attr('id','element-custom-block-'+good);\n		$('#main-canvas').find('.layoutGrp.element-custom-block-'+bad)\n			.removeClass('element-custom-block-'+bad)\n			.addClass('element-custom-block-'+good);\n		if (EventSettingLayout && EventSettingLayout.elementNames && typeof EventSettingLayout.elementNames['custom-block-'+bad] != 'undefined') {\n			EventSettingLayout.elementNames['custom-block-'+good] = EventSettingLayout.elementNames['custom-block-'+bad];\n		}\n		var $section = $('#finetune-layout-contain').find('.ele-wrapper[group-type=\"custom-block-'+bad+'\"]:first');\n		if ($section.length == 1) {\n			$section.attr('group-type','custom-block-'+good);\n			$section.find('.element[e=\"custom-block-'+bad+'\"]').attr('e','custom-block-'+good);\n			var grp = $section.data('grp');\n			if (grp && grp.element) {\n				grp.element = 'custom-block-'+good;\n			}\n		} else {\n			////console.log('trouble in paradise');\n		}\n	}\n} // }}}\n\nvar finetuneRevertState = {\n	'themeChange': false\n};\nfunction captureRevertState(type) { // {{{\n	var type = type || false;\n	var objFromFormNames = function (formArray){ // {{{\n		var form = {};\n		for ( i in formArray ){\n			var keyVal = keyValObjFromFormName(i,formArray[i]);\n			if ( typeof form[keyVal.key] != 'undefined' ){\n				form[keyVal.key] = $.extend(true,form[keyVal.key],keyVal.value);\n			}\n			else {\n				form[keyVal.key] = keyVal.value;\n			}\n		}\n		return form;\n	} // }}}\n	var keyValObjFromFormName = function (name,value){ // {{{\n		var ret = { key: '', value: false };\n		var tmp = name.split(/\\[/);\n		if ( tmp.length == 1 ){\n			ret.key = name.replace(/\\]/,'');\n			ret.value = value;\n		}else{\n			ret.key = tmp.shift().replace(/\\]/,'');\n			var keyVal = keyValObjFromFormName(tmp.join('['),value);\n			ret.value = {};\n			ret.value[keyVal.key] = keyVal.value;\n		}\n		return ret;\n	} // }}}\n	if (type == 'themeChange' && finetuneRevertState.themeChange == false) {\n		var themeChange = {};\n		var postData = getChangedInputsArray(finetuneGetThemeStyleInputs());\n		var form = objFromFormNames(postData);\n		if (form.data && form.data.EventSetting && form.data.EventSetting.theme_styles) {\n			themeChange.theme_styles = form.data.EventSetting.theme_styles;\n		}\n		themeChange.assets = $(\"#theme-css-assets\").html();\n\n		themeChange.layout = finetuneGetEventLayout(); // entire layout array\n		finetuneRevertState.themeChange = themeChange;\n	} else if (type == 'returnForDebug') {\n		var debug = {};\n		var postData = getChangedInputsArray(finetuneGetThemeStyleInputs());\n		var form = objFromFormNames(postData);\n		if (form.data && form.data.EventSetting && form.data.EventSetting.theme_styles) {\n			debug.theme_styles = form.data.EventSetting.theme_styles;\n		}\n		debug.layout = finetuneGetEventLayout(); // entire layout array\n		return debug;\n	} else if (type == 'theme_styles') {\n		var debug = {};\n		var postData = getChangedInputsArray(finetuneGetThemeStyleInputs());\n		var form = objFromFormNames(postData);\n		if (form.data && form.data.EventSetting && form.data.EventSetting.theme_styles) {\n			debug.theme_styles = form.data.EventSetting.theme_styles;\n		}\n		return debug.theme_styles || false;\n	}\n} // }}}\n\nfunction updateBackgroundSettings($liveGroup,bg_type,val,grp){\n\n	if(grp){\n		grp['bg-type'] = bg_type;\n	}\n	var params = { 'bg-type': bg_type };\n	if(bg_type == 'color'){ //BACKGROUND COLOR\n		if(grp){\n			grp['styles']['background-color'] = val;\n			grp['styles']['background-image'] = \"\";\n			delete grp['bgimage'];\n		}\n		params['background-image'] = 'none';\n		params['background-color'] = val;\n\n	} else if(bg_type == 'none'){ //NO BACKGROUND\n		params['background-image'] = 'none';\n		params['background-color'] = '';\n		if(grp){\n			grp['styles']['background-color'] = \"\";\n			grp['styles']['background-image'] = \"\";\n			delete grp['bgimage'];\n		}\n	} else { //IMAGE\n\n		params['background-position'] = grp['styles']['background-position']||'';\n		params['background-size'] = grp['styles']['background-size']||'';\n		params['background-repeat'] = grp['styles']['background-repeat']||'';\n		params['background-attachment'] = grp['styles']['background-attachment']||'scroll';\n		params['background-image'] = (val!=null)?val:grp['styles']['background-image'];\n		if( ! params['background-image'].match(/^url/) ){//if the background image does not have a URL in the front, add it.\n			params['background-image'] = \"url('\"+params['background-image']+\"')\";\n		}\n		if (params['background-size'] == 'flyer') {\n			var $dims = $(\"#img-modal-photo-dimensions\");\n			if ($dims.length == 1 && (''+$dims.val()).match(/^[0-9]*x[0-9]*$/)) {\n				var parts = (''+$dims.val()).split('x'),\n					w = parts[0],\n					h = parts[1],\n					targetWidth = $liveGroup.width(),\n					height = (targetWidth * h) / w;//algebra!\n				// landscape v. portrait\n				params['background-size'] = (w < h) ? 'auto 100%' : '100% auto';\n				height = (height/16).toFixed(2);// to ems!\n				if(grp){\n					if(grp['styles']['height']){//temp saving old height in case you switch.\n						$liveGroup.data('old-height',grp['styles']['height']);\n					}\n					grp['styles']['height'] = height;\n				}\n\n				params['height'] = height + 'em';\n\n\n			} else {\n				params['background-size'] = 'cover';\n				if(grp){\n					grp['styles']['background-size']='cover';\n				}\n\n				if($liveGroup.data('old-height')){\n					params['height'] = $liveGroup.data('old-height');\n					grp['styles']['height'] = params['height'];\n					$liveGroup.data('old-height',false);\n				}\n				else {\n					params['height'] = \"\";\n					if(grp && grp['styles'] && grp['styles']['height']){ //if not flyer, need to delete the height from layout group.\n						delete grp['styles']['height'];\n					}\n				}\n			}\n		} else {\n			if($liveGroup.data('old-height')){\n				params['height'] = $liveGroup.data('old-height');\n				grp['styles']['height'] = params['height'];\n				$liveGroup.data('old-height',false);\n			} else {//no longer needed? chris.\n				// params['height'] = \"\";\n				// if(grp && grp['styles'] && grp['styles']['height']){ //if not flyer, need to delete the height from layout group.\n				// 	delete grp['styles']['height'];\n				// }\n			}\n\n		}\n	}\n	$liveGroup.css(params);\n	var $accordion = ftGetAccordion($liveGroup);\n	if($accordion.hasClass('bound')){\n		//only need to do this if accordion is already bound.  otherwise the grp object will properly populate upon opening the section.\n		$accordion.find(\".currentBackground\").css(params);\n	}\n\n	if(grp){\n		finetuneLayoutChangesMade();\n	}\n	if($liveGroup.hasClass('event-bg-url')) {\n		$('#splash-container .tieBgToHeader').each(function(){\n			var $t = $(this);\n			if(!$t.hasClass('event-bg-url')){\n				var grp = ftGetGrp($t);\n				if(bg_type == 'image') {\n					if(!grp['styles']){ grp['styles'] = {}; }\n					grp['styles']['background-image'] = params['background-image'];\n				}\n				updateBackgroundSettings($t,bg_type,val,grp);\n			}\n		});\n	}\n	setTimeout(function(){\n		$liveGroup.removeClass('loading');\n	},1000);\n\n\n}\n\n\n// Design toolbar change actions\n$(document).ready(function(){\n\n	$(document).on('click', 'div.mce-floatpanel .mce-btn', function(event){\n		// attached this func to mce-btn instead of the link modal dropdown\n		// b/c the shadow pciker and stuff don't disappaear until this fires,\n		// meaning it would stay in place until disappearing when clicking the dropdown\n\n		if( $(this).find('.mce-i-link').length > 0 ){\n			// checks if link opt\n			fixMceMenu(false)\n		}\n\n	})\n\n	$(\"#finetune-all-tools\").on({\n		focus: function(){\n			$(this).parents(\".bx\").addClass('isFocused').siblings().removeClass('isFocused');\n		},\n		focusout: function(){\n			$(this).parents(\".bx\").removeClass('isFocused');\n		}\n	},'.box-controls input');\n\n	$(\"#finetune-all-tools\").on('click','.box-controls .arm', function(){\n		$(this).parents(\".bx\").find(\"input:first\").focus();\n	});\n\n	// @cc\n	$(\"#finetune-all-tools\").on('click','.box-controls .bx .unit-dropdown', function(){\n		var $this = $(this);\n		var $c = $('#finetune-all-tools').find('.bx.dd-open');\n		var $parent = $this.parents('.bx:first');\n		if( ! $parent.hasClass('dd-open') ) {\n			$parent.addClass('dd-open');\n		}\n	});\n\n	$(\"#finetune-all-tools\").on({\n		mouseenter:function(){\n			$(this).parents(\".box-controls:first\").addClass('allSides');\n		},\n		mouseleave:function(){\n			$(this).parents(\".box-controls:first\").removeClass('allSides');\n		}\n	},'.box-controls .forAllSides');\n\n	$(\"#finetune-all-tools\").on('change','input.border-top-width,input.border-right-width,input.border-bottom-width,input.border-left-width,input.border-width',function(){\n		var $t = $(this),\n			prop = $(this).data('css-prop'),\n			id = $t.prop(\"id\").trim(),\n			key=false,\n			$parent = $t.parents(\".box-controls:first\");\n\n\n		if($t.hasClass('border-width')){\n			$parent.addClass('all-linked').find(\"input\").val($t.val());\n		} else {\n			$parent.removeClass('all-linked');\n		}\n\n		if(typeof $t.attr(\"target\")!=='undefined'){\n			if($t.attr(\"no-parent\")){\n				var $target = $(\"#\"+$t.attr(\"target\"));\n			} else{\n				var $target = $(\"#\"+$t.attr(\"target\")).parents(\".layoutGrp:first\");\n			}\n		} else if(typeof $t.attr(\"grp\")!=='undefined'){//grp layout option.\n			var $g = $t.parents('.ft-grp:first');\n			var grp = ftGetGrp($g);\n			if(typeof grp.styles=='undefined'){grp.styles={};}\n			var gid = (''+$g.attr('id')).replace('acc-ftg-','');\n			var $target = $('#g-'+gid);\n			key = 'border';\n			var $picker = $t.parents(\".border-picker:first\");\n			if($picker.hasClass('img-bdr')){\n				key = 'img-border';\n				$target = $target.find(\".image img\");\n			}\n			grp.styles[key] = getBorderProperties($picker);\n\n			if(typeof grp.styles[key]['width']!=='undefined' && grp.styles[key]['width'].match(/,/g)){\n				var bdrprops = formatBorderWidth(grp.styles[key]['width']);\n				grp.styles[key]['width'] = bdrprops.wi;\n				grp.styles[key]['style'] = bdrprops.st;\n			}\n			if(key=='img-border'){\n				saveSplashFeedChildOptions(gid,key,grp.styles[key]);\n			}\n\n		}\n		else {\n			var $target = getTargetById(id);\n		}\n		if(!$target){ return false; }\n\n		var bdr_style = $t.parents(\".border-picker:first\").find(\"input.bdr-s\").val()||'solid';\n		var styles = {};\n		styles[prop] = $t.val()+'px';\n		styles['border-style'] = bdr_style;\n		$target.css(styles);\n\n		if(key!==false){\n			finetuneLayoutChangesMade();\n		} else{\n			//themeStylesChanged();//this might be the wrong function. double check\n			setChangesMade();\n		}\n	});\n\n	//switching from static, relative, abs, or fixed.\n	$(\"#finetune-all-tools\").on('change','input.meta-position',function(){\n		$(this).parents(\".layout-ctrl:first\").attr(\"position-type\",$(this).val());\n	});\n\n	$(\"#finetune-all-tools\").on('change','input.border-radius',function(){\n		//update the visual representation of the border radius.\n		$(this).parents(\".ui-borderRadius:first\").css('border-top-left-radius',$t.val()+'px');\n	});\n\n	//title,subtitle,description color,border color pickers.\n	//changing font color controls.\n\n	var swatchTime\n\n\n	//Handles all color picker logic -- other than RTE\n	$(\"#finetune-all-tools, #splash-container\").on('click',\"input.meta-color\",function(){\n		var $t = $(this),\n			id = $t.prop(\"id\"),\n			prop = 'color',\n			key=false,\n			box_shadow=false,\n			text_shadow=false,\n			no_opacity = false;\n			//$borderPicker = false;\n\n		if(typeof $t.attr(\"grp\")!=='undefined'){//grp layout option.\n			if(typeof $t.attr(\"gid\")!=='undefined'){\n				var $g = $(\"#acc-ft\"+$t.attr(\"gid\"));//aka $(\"#acc-ftg-19\");\n			}\n			else if($t.parents('.layoutGrp').length > 0) {\n				var $g = $(\"#acc-ft\"+$t.parents('.layoutGrp').attr('id'));\n			}\n			else {\n				var $g = $t.parents('.ft-grp:first');\n			}\n\n			var gid = ftGetId($g);\n			var grp = ftGetGrp($g);\n			var $target = ftGetLayoutGrp(gid);\n			if(typeof grp.styles=='undefined'){grp.styles={};}\n\n			key = 'border';\n			var $picker = $t.parents(\".border-picker\");\n			if($t.hasClass('bdr-color') && $picker.hasClass('img-bdr')){\n				key = 'img-border';\n				$target = $target.find(\".image img\");\n				grp.styles[key] = getBorderProperties($picker);\n			}\n\n			finetuneLayoutChangesMade();\n		}\n		else {\n			id = id.trim();\n			var $target = getTargetById(id);\n		}\n\n		if( !$target ){\n			return false;\n		}\n\n		if($t.hasClass('bg-input')){\n			prop = 'background-color';\n		} else if($t.hasClass('bdr-color')){\n			prop = 'border-color';\n			//$borderPicker = $t.parents(\".bdr-contain:first\").find(\"input.bdr-w:first\");\n		} else if ($t.hasClass('box-shadow-color')){\n			box_shadow=true;\n			prop = false;\n		}\n		else if($t.hasClass('text-shadow-color')){\n			text_shadow=true;\n			prop = false;\n		}\n\n		$t.spectrum({\n			showInput: true, showAlpha: true, preferredFormat: \"rgb\", clickoutFiresChange: true,\n			showPalette: true, palette: constants.palette,\n			beforeShow:function(color){\n				if(color.alpha=='0'){\n					no_opacity=true;\n				}\n			},\n			show: function(){\n				openColorPicker = true;\n\n				if( $('body').hasClass('advMode editColors') ){\n					clearTimeout( swatchTime )\n					$('#advColorWrap').addClass('editingSwatch')\n				}\n			},\n			move: function(color) {\n					// //console.time(\"moving\");\n				if(no_opacity && color.alpha=='0'){\n					//nice little trick here.  if they open the picker and opacity is set to 0,\n					//crank up the opacity to full!\n					var c = ''+(color.toRgbString()).replace(', 0)',', 1)');\n					$t.spectrum(\"set\", c);\n					no_opacity=false;\n				}\n\n				if( $t.hasClass('bg-input') ){\n					$t.parents('.editBgWrap:first').find('.bg-opt.color i').css('background-color', color.toRgbString())\n				}\n\n                changeCssProperty($target,prop,color.toRgbString());\n\n				if(text_shadow){\n					$t.val(color.toRgbString()).trigger('change');\n				} else if(box_shadow){\n					$t.val(color.toRgbString()).trigger('change');\n				}\n\n			},\n			change: function(color){\n\n				changeCssProperty($target,prop,color.toRgbString());\n				$t.css('background',color.toRgbString()).val(color.toRgbString()).addClass('changes-made');\n\n				if(typeof grp!=='undefined'){//update GROUP settings on the fly\n					if(prop=='background-color'){\n						grp.styles['background-color'] = color.toRgbString();\n						grp['bgimage']='';\n					} else if(prop=='color'){\n						grp.styles['color'] = color.toRgbString();\n					} else if(prop=='border-color'){\n						grp.styles[key]['color'] = color.toRgbString();\n						if(key=='img-border'){\n							saveSplashFeedChildOptions(gid,key,grp.styles[key]);\n						}\n						updateBorderForObject($target,grp.styles);\n					}\n					finetuneLayoutChangesMade();\n				} else{\n					setChangesMade();\n				}\n\n				updateColorPalette(color.toRgbString());\n				$t.spectrum(\"destroy\");\n\n			},\n			hide: function(color) {\n\n				swatchTime = setTimeout( function(){\n					if( $('body').hasClass('editColors') ){\n						$('#advColorWrap').removeClass('editingSwatch')\n					}\n				}, 100)\n\n				$body.removeClass('changedBgColor');\n				$t.trigger('mouseleave')\n				changeCssProperty($target,prop,color.toRgbString());\n				$t.removeClass('open-color-picker').spectrum(\"destroy\");\n\n			}\n		});\n\n		setTimeout(function(){\n			$t.addClass('open-color-picker').spectrum(\"show\");//ROSS, is this .open-color-picker class being scoped properly?  Seeing\n			//getButtonFontColor();//ROSS, still needed?\n		},1);\n		if($target.hasClass('element-rsvp')){//if changing the rsvp button foreground/background, run convertTo2Oh.\n			convertTo2OH('rsvp');\n		}\n	});\n\n	//when changing the border color, if the style is set to \"none\", change it to solid (along with the width to 1px).\n	$(\"#finetune-all-tools\").on('change','input.bdr-color',function(){\n		var $t = $(this);\n		var $parent = $t.parents(\".border-picker:first\");\n		var $border_style = $parent.find(\"input.border-style\");\n		var $border_width = $parent.find(\"input.border-width\");\n		if($border_style.val()=='none' || $border_style.val()==''){\n			flipDropDown($border_style,'solid',true);\n			$parent.find(\".border-top-width,.border-bottom-width,.border-left-width,.border-right-width\").val('1').trigger('change');\n		}\n	});\n\n	$(\"#finetune-all-tools\").on('click','.font-picker .font-family div',function(e){\n		var $t = $(this);\n		$t.addClass('active').siblings().removeClass('active');\n		var $p = $t.parents(\".font-picker\");\n		$p.find(\".current .family\").text($t.html()).css('font-family',$t.attr(\"v\"));\n		$p.find(\"input.font-family\").val($t.attr(\"v\")).trigger('change');\n	});\n\n	$(\"#finetune-all-tools\").on('focusout','input.sliderInput',function(){\n		//on focusOut of slider inputs, update the slider value if possible.\n		var $t = $(this), min = $t.attr(\"min\"), max = $t.attr(\"max\"), unit = $t.attr(\"unit\");\n		var formatted = $t.val().replace(unit,'')*1;//strip out unit.  ie 151px -> 151, 2.5em -> 2.5\n		if(formatted >= min && formatted <= max){\n			//only proceed if its in the slider range.\n			// $slider.find(\".slider\").slider(\"value\",formatted);\n			$t.parents(\".slider-wrap:first\").find(\".slider\").slider(\"value\",formatted);\n		}\n	});\n\n\n	var lineTime;\n\n\n	$(\"#finetune-all-tools\").on('click',\".icon-f-tb-remove,.icon-f-tb-add\",function(){\n		//master controls for changing style control.\n		var $t = $(this);\n		var $input = $t.parents(\".box-center:first\").find('input.main-control:first');\n		var currentVal = $input.val()*1;\n		if(isNaN(currentVal)){\n			currentVal = 0;\n		}\n		if($t.hasClass('icon-f-tb-add')){\n			$input.val(currentVal+1).trigger('change');\n		} else {//subtract\n			var v = currentVal-1;\n			if(v<0){ v = 0;	}\n			$input.val(v).trigger('change');\n		}\n	});\n\n	//changing font size, font and align controls. one function to rule them all.\n	$(\"#finetune-all-tools\").on('change',\"input.style-ctrl\",function(){\n		var $t = $(this);\n		// if($t.parents(\"div.rteControl\").length > 0){\n		// 	return false;//no need to bring RTE controls in here. they get their own calls.\n		// }\n		var isRTE = false;\n		if($t.hasClass('main-control')){\n			$t.parents(\".box-controls\").find(\"input.nu-input:not(.main-control)\").val($t.val()).trigger('change');\n			return;\n		}\n\n		if(typeof $t.attr(\"target\")!=='undefined'){\n			if(typeof $t.attr(\"no-parent\")!=='undefined'){\n				$target = $(\"#\"+$t.attr(\"target\"));\n			} else{\n				var $target = $(\"#\"+$t.attr(\"target\")).parents(\".layoutGrp:first\");\n				if($t.attr(\"target\")=='element-when'){\n					var targets = [];\n					$(\"#main-canvas\").find(\".when-ss\").each(function(){\n						targets.push($(this).parents(\".layoutGrp:first\")[0]);\n					});\n					$target = $(targets);\n				} else if($t.attr(\"target\")=='element-where'){\n					var targets = [];\n					$(\"#main-canvas\").find(\".where-ss\").each(function(){\n						targets.push($(this).parents(\".layoutGrp:first\")[0]);\n					});\n					$target = $(targets);\n				} else if($t.attr(\"target\")=='element-time'){//exception to the rule.\n					$target = getTargetById($t.prop(\"id\"));\n				} else{\n					$target = $(\"#\"+$t.attr(\"target\")).parents(\".layoutGrp:first\");\n				}\n			}\n		} else if (typeof $t.attr(\"grp\")!=='undefined'){//GROUPS!!\n\n			if(typeof $t.attr(\"gid\")!=='undefined'){//happens in RTE.\n				var $g = $(\"#acc-ft\"+$t.attr(\"gid\"));//aka $(\"#acc-ftg-19\");\n				isRTE = true;\n			} else {//the normal solution.  in the finetune bar already.\n				var $g = $t.parents('.ft-grp:first');\n			}\n\n			var grp = ftGetGrp($g);\n			var gid = ftGetId($g);\n			var $target = $('#g-'+gid);\n\n		}\n		else{\n			var id = $t.prop(\"id\");\n			$target = getTargetById(id);\n		}\n\n\n		var value = $t.val();\n		var prop = $t.data(\"css-prop\");\n		if(typeof prop==='undefined'){\n			return false;\n		} else if($target==false){\n			return false;\n		}\n\n		if(!isNaN(value)&&value!=''){//dont add px if we're dealing with values like 'auto' or 'inherit'\n			if(typeof $t.attr(\"unit\")!=='undefined'){//ie em,px,deg.\n				value+=$t.attr(\"unit\");\n			} else if(typeof $t.attr(\"no-unit\")!=='undefined'){\n				//do nothing here. no units.\n			} else{\n				value+='px';\n			}\n		}\n\n		if($t.attr(\"unit\")=='auto'){\n			value = 'auto';\n		}\n\n		var isHeadTarget = false;\n\n		if( $target.hasClass('element-title') || $target.hasClass('element-subtitle') ){\n			isHeadTarget = true;\n		}\n\n		if( isRTE == true && prop == 'line-height'){\n			$target.find('h1').css('line-height', value).end().find('h2').css('line-height', value);\n			clearTimeout(lineTime);\n			lineTime = setTimeout(function(){\n				$target.find('.editable:first').trigger('change')\n				if(  isHeadTarget == true ){\n					dynamaHead()\n				}\n			}, 250)\n		}\n\n		//CSS value is changed here.\n		changeCssProperty($target,prop,value);\n\n		if( $target.hasClass('element-title') || $target.hasClass('element-subtitle') ){\n			silentTrigger = true\n		}\n\n		if(!silentTrigger){//if silentTrigger = true, be cool! no need to scroll.\n			scrollToBlock($target);\n		}\n\n\n		if( prop.match(/padding|margin/)!=null ){\n			// if prop is either margin or padding \"padding-top\", etc\n			updateSecHovers( $target )\n		}\n\n		if(typeof grp!=='undefined'){\n			if(typeof grp.styles=='undefined'){grp.styles={};}\n			grp.styles[prop] = value;\n			finetuneLayoutChangesMade();\n		} else{\n			setChangesMade();\n		}\n\n	});\n\n	//keyword:number input - preventing text in number inputs.\n	$(\"#finetune-all-tools\").on('keypress', \"input[type=number]\", function(e){\n		if($(this).parents().hasClass('box-controls')){\n			if($(this).val().length == 3) {\n\n			}\n		}\n		// Allow: backspace, delete, tab, escape, enter and .\n        if ( event.keyCode == 46 || event.keyCode == 8 ) {\n		// let it happen, don't do anything\n    	}\n    	else {\n    		// Ensure that it is a number and stop the keypress\n    		if (event.keyCode < 48 || event.keyCode > 57 ) {\n    			event.preventDefault();\n    		}\n    	}\n	});\n\n\n	$(\"#finetune-all-tools\").on('change','input.text-shadow-color,input.text-shadow-x,input.text-shadow-y,input.text-shadow-blur',function(){\n		var $t = $(this);\n		var $p = $t.parents(\".shadow-picker:first\");\n		var value = getShadow($p);\n		var $input = $p.find(\"input.text-shadow\");\n		$input.val(value).trigger('change');\n	});\n\n	$(\"#finetune-all-tools\").on('change','input.text-shadow',function(){\n		var $t = $(this);\n		var $p = $t.parents(\".shadow-picker:first\");\n		if($t.attr(\"target\")=='element-time'){\n			var $target = getTargetById($t.prop(\"id\"));\n		} else if (typeof $t.attr(\"grp\")!=='undefined'){//GROUPS!!\n			if(typeof $t.attr(\"gid\")!=='undefined'){//from the RTE color picker.\n				var $g = $(\"#acc-ft\"+$t.attr(\"gid\"));\n			} else {\n				var $g = $t.parents('.ft-grp:first');\n			}\n\n			var grp = ftGetGrp($g);\n			var gid = (''+$g.attr('id')).replace('acc-ftg-','');\n			var $target = $('#g-'+gid);\n\n		} else{\n			var	$target = $(\"#\"+$t.attr(\"target\")).parents(\".layoutGrp:first\");\n		}\n\n\n		$target.css('text-shadow',$t.val());\n		if(typeof grp!=='undefined'){\n			if(typeof grp.styles=='undefined'){grp.styles={};}\n			grp.styles['text-shadow'] = $t.val();\n			finetuneLayoutChangesMade();\n		} else{\n			setChangesMade();\n		}\n	});\n\n	$('#splash-container').on({\n		mouseenter:function(){\n			$('#element-rsvp').addClass('rsvpHover')\n		},\n		mouseleave:function(){\n\n			setTimeout(function(){\n\n				if ( ! $('body').hasClass('clickingRsvpColor') ){\n					$('#element-rsvp').removeClass('rsvpHover')\n				}\n			}, 20 )\n\n		}\n	}, '#element-rsvp .edit-tools')\n\n	$(\"#finetune-all-tools\").on('change','input.box-shadow-color,input.h-shadow,input.v-shadow,input.shadow-blur',function(){\n		var $t = $(this);\n		var $p = $t.parents(\".box-shadow-picker:first\");\n		var value = getShadow($p);\n		var $input = $p.find(\"input.box-shadow\");\n		$input.val(value).trigger('change');\n	});\n\n	$('#splash-container').on({\n		mouseenter: function(){\n			updateRsvpColorPicker()\n		},\n		click:function(){\n			$(\"#element-rsvp\").focus();\n		}\n	}, '.element-rsvp' );\n\n\n	$(\"#finetune-all-tools\").on('change','input.shadow-toggle',function(){\n		var $t = $(this);\n		var $p = $t.parents(\".shadow-picker:first\");\n		if($t.val()=='1'){\n			var shadow = getShadow($p);\n			$p.find(\".shadow-sliders\").show().end()\n				.find(\"input.shadow-input\").val(shadow).trigger('change');\n		} else{\n			$p.find('.shadow-sliders').hide().end()\n				.find(\"input.shadow-input\").val('none').trigger('change');\n		}\n	});\n\n	$(\"#finetune-all-tools\").on('change','input.box-shadow',function(){\n		var $t = $(this);\n		var $p = $t.parents(\".box-shadow-picker:first\");\n		if($t.attr(\"target\")){\n			if($t.attr(\"no-parent\")){\n				var $target = $(\"#\"+$t.attr(\"target\"));\n			} else{\n				var $target = $(\"#\"+$t.attr(\"target\")).parents(\".layoutGrp:first\");\n			}\n		} else if(typeof $t.attr(\"grp\")!=='undefined'){//grp layout option.\n			var $g = $t.parents('.ft-grp:first');\n			var grp = ftGetGrp($g);\n			var gid = (''+$g.attr('id')).replace('acc-ftg-','');\n			var $target = $('#g-'+gid);\n		} else{\n			var	$target = getTargetById($t.prop(\"id\"));\n		}\n\n		if($p.hasClass('img-box-shadow')){\n			$target = $target.find(\".image img\");\n			$target.css('box-shadow',$t.val());\n			grp.styles['img-box-shadow'] = $(this).val();\n			saveSplashFeedChildOptions(gid,'img-box-shadow',grp.styles['img-box-shadow']);\n		} else{\n			$target.css('box-shadow',$t.val());\n			if(typeof grp!=='undefined'){\n				if(typeof grp.styles=='undefined'){grp.styles={};}\n				grp.styles['box-shadow'] = $(this).val();\n			}\n		}\n		if(typeof grp!=='undefined'){\n			finetuneLayoutChangesMade();\n		} else{\n			setChangesMade();\n		}\n	});\n\n	$(\"#tie-bg-to-header\").change(function(){\n		setChangesMade();\n	});\n\n	///////HIDING TOGGLE CONTROLS///////\n\n\n	function setForPlaceholderText( $liveGroup ){\n\n		if ( $liveGroup.hasClass('element-title') || $liveGroup.hasClass('element-subtitle')\n			 || $liveGroup.hasClass('element-hash') ){\n\n				var $e = $liveGroup.find('.editable');\n\n				var id = false;\n\n				if($liveGroup.hasClass('element-subtitle')){\n					id = 'element-subtitle';\n				} else if($liveGroup.hasClass('element-title')){\n					id = 'element-title';\n				} else if($liveGroup.hasClass('element-hash')){\n					id = 'element-hash';\n				}\n\n				console.log( id , 'id bro')\n\n				//make sure it's not an image in the field.  before replacing.\n				if($e.text().replace(' ','').trim()=='' && $e.find(\"img\").length < 1){\n					if(id=='element-subtitle'){\n						$liveGroup.find(\".editable\").text('Add Your Event Subtitle Here.').trigger('change');\n					} else if(id =='element-title'){\n						$liveGroup.find(\".editable\").text('Add Your Event Title Here.').trigger('change');\n					} else if(id=='element-hash'){\n						$liveGroup.find(\".wrap\").text('#YourEventHashTag').trigger('change');\n					}\n				}\n\n		} else if ( $liveGroup.hasClass('element-host') ){\n\n			var $host_name = $(\"#element-host-name\")\n			if($host_name.text().trim()==''){\n				//check for placeholder when reshowing.\n				$host_name.html('Enter Host Name Here.');\n			}\n\n		} else if ( $liveGroup.hasClass('mega-date-wrap') && $(\"#date-tbd\").val()=='1' ){\n			// BRING THIS BACK AFTER FIXING BUG WITH IT\n			// ( COMes through as  \" February 5 2014 - Date TBD\")\n			//$body.addClass('date-tbd');\n		}\n\n	}\n\n\n	$(\"#basicsTabWrap\").on('click', '.cardHead .nu-checkbox', function(event){\n\n		event.preventDefault()\n		var $t = $(this)\n\n		var $mainCard = $t.parents('.mainCard:first');\n		var thisTarget = $mainCard.attr('target')\n\n		var $layoutGrp = $('.' + thisTarget)\n\n		if( $layoutGrp.length < 1 ){\n			//this layout grp doesnt exist\n			return false\n		}\n\n		var gid = ftGetId( $layoutGrp )\n\n		var $accordion = ftGetAccordion( $layoutGrp );\n		var $ftgroup = ftGetFtGrp( $layoutGrp );\n\n		var grp = ftGetGrp($layoutGrp );\n\n		if( !grp.styles ){\n			grp.styles = {}\n		}\n\n\n		if( !grp.styles['hidden'] ){\n			grp.styles['hidden'] = 0\n		}\n		// if it makes it this far, we're assumign the block exists on the page\n		if ( ! $mainCard.hasClass('is-hidden') && grp.styles['hidden'] == 0 ) {\n			grp.styles['hidden'] = 1;\n			$ftgroup.addClass('section-hidden');\n			$layoutGrp.hide();\n			$mainCard.addClass('is-hidden')\n		} else {\n			$ftgroup.removeClass('section-hidden');\n			$layoutGrp.show();\n\n			setForPlaceholderText( $layoutGrp )\n\n			$mainCard.removeClass('is-hidden')\n			scrollToBlock($layoutGrp,-20);\n			delete grp['styles']['hidden'];\n		}\n\n		finetuneLayoutChangesMade();\n\n		return false;\n\n	})\n\n	///////END HIDING TOGGLE CONTROLS/////\n\n	var theFocusClear;\n\n	// hovering class\n	$('#main-canvas').on({\n		mouseenter: function(e) {\n			var $t = $(this);\n\n			clearTimeout(theFocusClear);\n			theFocusClear= setTimeout(function(){\n\n				//$(this).parents().removeClass('hovering');\n				if(dragging){ return false; }\n				if( $t.parents(\".parentWrap\").length > 0 ){\n					return false;\n				} else if($t.parents(\".mega-date-wrap\").length > 0){//special case for when/where - only give it one hovering class.\n					$('#main-canvas').find('div.the-focus').removeClass('the-focus');\n					$t.parents(\"div.mega-date-wrap:first\").addClass(\"hovering the-focus\");\n					return false;\n				} else if($t.parents(\"div.mega-location-wrap\").length > 0){\n					$('#main-canvas').find('div.the-focus').removeClass('the-focus');\n					$t.parents(\"div.mega-location-wrap:first\").addClass(\"hovering the-focus\");\n					return false;\n				}\n\n				if($t.hasClass('locked-full')){ $t.addClass(\"hovering-locked\"); return false; }\n\n				$('#main-canvas').find('div.the-focus').removeClass('the-focus');\n				$t.addClass('hovering the-focus');\n				layoutFunction.highlightSidebar($t);\n				layoutFunction.checkToolsViewport($t);\n				layoutFunction.checkBtnViewPort($t);\n\n			},10);\n\n			if(e && e.stopPropagation){\n				e.stopPropagation();\n			}\n\n		},\n		mouseleave: function() {\n			var $t = $(this);\n			// clearTimeout(theFocusClear);\n			// theFocusClear= setTimeout(function(){\n				$t.removeClass('the-focus hovering hovering-locked');\n		  	 	if( $t.parents(\".layoutGrp\").length > 0 ){\n					$t.parents(\".layoutGrp:first\").addClass('hovering the-focus');\n				}\n				layoutFunction.removeHighlight($t);\n				$t.find('.edit-tools').removeClass('topofpagerotate').children('.inner').children().removeClass('topofpagerotate-icons');\n			//}, 10);\n		}\n	},'div.layoutGrp');\n\n	$(\"#main-canvas\").on({\n		mouseenter:function(){\n			$(this).parents(\".layoutGrp:first\").addClass('hovering the-focus');\n		}\n	},'div.layoutGrp .list-item')\n\n	//INLINE DESIGN LINKS\n	$(\"#main-canvas\").on('click','.edit-tools .bolt-jump',function(e){\n		var	$t = $(this);\n		var $grp = $t.parents(\"div.layoutGrp:first\");\n		var gid = ftGetId($grp);\n		var $ftg = ftGetFtGrp(gid);\n		openFinetuneBar('content',true);\n		if($('body').hasClass('designerMode')) {\n			openCustomSection($ftg);\n			$('#allSectionsContain').addClass('hide');\n			changeLayout.ftContain.find('.ft-grp').removeClass('hide');\n			$(\"#admin-group-clusters\").append(changeLayout.ftContain);\n			$('#nestedLayoutContainer').removeClass('hide');\n			$(\"#nestedLayoutContainer\").css({ \"height\":\"\", \"max-height\":\"\"});\n\n		}\n		else {\n			openFinetuneBar('content',true);//opens finetune and sets it to content tab.\n			closeCustomSection(); //important!  closes the current section if we're in a custom block.\n			setTimeout(function(){\n				if($('body').hasClass('designerMode')) {\n					$('#allSectionsContain').addClass('hide');\n					$('#nestedLayoutContainer').removeClass('hide');\n				}\n				openCustomSection($ftg,{ scrollToBlock: false });\n			},10);\n			return false; //super important.  other actions bound to this event, that mess this process up.\n		}\n	});\n\n	//editing background image from edit tools.\n	$(\"#splash-container\").on('click','.edit-tools .edit-bg',function(){\n		var $group = $(this).parents(\".layoutGrp:first\");\n		populateAdvancedImgControls($group);\n		var img_src = stripUrl($group.css('background-image'));\n		pickAndOrCropNewImage($('<input type=\"hidden\" value=\"'+img_src+'\" />'),{\n			done: function(newSrc,dims){\n				if($group.length > 0){\n					updateGroupImage($group,{ 'src': newSrc, 'dims': dims });\n				}\n\n				trackIndicativeEvent('changeSectionBgImage');\n			},\n			group_id: $group.prop('id')\n		});\n	});\n\n	$(\"#main-canvas\").on({\n		click:function(e){\n			var $t = $(this)\n				$parent = $t.parents(\".edit-tools:first\"),\n				$grp = $t.parents(\".layoutGrp:first\"),\n				gid = ftGetId($grp),\n				$ftg = $('#ftg-'+gid);\n\n			if( $grp.hasClass('element-host') ){\n				// if clicking the layout-jump on the HOST element\n				var grp = ftGetGrp($ftg);\n				if(!grp['class']){//if no class object, create it.\n					grp['class']='';\n				}\n				if ( grp['class'].indexOf('host-center') != -1 ){ // if host-center, change to host-left\n					grp['class'] = grp['class'].replace(/host\\-/g, '')+ ' host-left';\n					$grp.addClass('host-left').removeClass('host-center host-top')\n				} else if ( grp['class'].indexOf('host-left') != -1 ){ // if host-left, change to host-top\n					grp['class'] = grp['class'].replace(/host\\-/g, '') + ' host-top';\n					$grp.addClass('host-top').removeClass('host-center host-left')\n				} else { // if host-top (or aynthing else), changet to host-center\n					grp['class'] = grp['class'].replace(/host\\-/g, '') + ' host-center';\n					$grp.addClass('host-center').removeClass('host-left host-top')\n				}\n\n				finetuneLayoutChangesMade()\n			} else {\n				closeCustomSection(); //important!  closes the current section if we're in a custom block.\n				var $accordion = $('#acc-ftg-'+gid);\n				var grp = ftGetGrp($ftg);\n				if( ! $accordion.hasClass('bound') ){//if not bound, bind it.\n					bindAndPopulateAccordion($accordion,grp, true);\n				}\n				$sf = $grp.find('.sf');\n				if($grp.hasClass('element-gallery')){\n					var $current = $ftg.find(\".modes .layBtnWrap.active\");\n					var $next = $current.next('.layBtnWrap');\n					if($next.length < 1){\n						$next = $ftg.find(\".modes .layBtnWrap:first\");\n					}\n					$next.addClass('active').siblings('.layBtnWrap').removeClass('active');\n					var newVal = $next.find(\".nu-btn:first\").attr('value');\n					$(\"#galleryLayoutPresetInput\").val(newVal).trigger('change');\n\n				}\n				else if ( $sf.hasClass('nav') || $sf.hasClass('countdown') || $sf.hasClass('attendees') ) {\n\n					// function in finetune-layout.js to process the layout change\n					layoutJump($sf);\n\n				} else {\n					$thisArrow = $ftg.find('.arrowRight')\n					flipMode($thisArrow,{ direction: 'right', force: true });\n				}\n\n			}\n			trackIndicativeEvent('changeSectionLayout');\n\n		}\n	}, '.edit-tools .layout-jump' );\n\n	$(\"#main-canvas\").on({\n		click:function(e){\n			var $t = $(this)\n				$parent = $t.parents(\".edit-tools:first\"),\n				$grp = $t.parents(\".layoutGrp:first\"),\n				gid = ftGetId($grp),\n				$ftg = $('#ftg-'+gid);\n\n			if($grp.find('.sf').hasClass('comments')){\n\n				$sf = $grp.find('.sf');\n				sfid = $sf.attr('id').replace('sfid-',''); // get splash feed id\n\n				// obtain or create the options array for this element\n				var options = $sf.data('splashFeedOptions');\n				if ( typeof(options) == 'undefined' ) options = {};\n				options['sorting'] = CommentsElement.toggleSorting($sf);\n\n				// extend clones the options array\n				finetuneEditedFields[ 'data[SplashFeed]['+sfid+'][options]' ] = $.extend({},options);\n				finetuneFieldChangesMade();\n\n				CommentsElement.refreshComments($grp.find('.sf.comments'));\n			}\n		},\n	}, '.edit-tools .change-sorting' );\n\n	//function for shuffling photos\n	$(\"#splash-container\").on('click',\".shuffle-photos\",function(){\n		$(\"#galleryLayoutPresetInput\").val('shufflePhotos');\n		galleryPresetLayout('shufflePhotos');\n	});\n	//switching columns in a container element.\n	$(\"#main-canvas\").on('click','.edit-tools .column-switch',function(){\n		var $container = $(this).parents(\".container-ele:first\");\n		//var col_count = $container.find(\".drop-area\").length;\n		// if(col_count == 2){\n		var col_opts = ['container-1col','container-2col','container-2col-altA','container-2col-altB','container-3col','container-4col'];\n		// }\n		//a list of all possible saving opts.\n		//var col_opts = ['container-1col','container-2col','container-2col-altA','container-2col-altB','container-3col','container-4col'];\n		var match = false;\n		for(var x in col_opts){\n			if(!match && $container.hasClass(col_opts[x])){\n				match = x*1;//set match to the index.\n			}\n		}\n		var next = match+1;\n		if(col_opts[next]){\n			var newOption = col_opts[next];\n		} else {\n			var newOption = col_opts[0];\n		}\n		$container.addClass('trans').removeClass(col_opts.join(' ')).addClass(newOption);\n		var $dropAreas = $container.find(\".drop-area\");\n		var $firstBlock = $container.find(\".drop-area:first\");\n\n		var gid = $firstBlock.prop('id');//g-34\n		var $firstBlockFtg = $(\"#ft\"+gid);//first block ftg.\n\n		//loop through columns > first column and move any found groups into the first column.\n		$container.find(\".drop-area:gt(0)\").each(function(){\n			var $blocks = $(this).find(\"> .layoutGrp\");//only grab the first LAYER of layout groups.  parents only.\n			if($blocks.length > 0){\n				$blocks.each(function(){//move all the ftgs into the first column ftg.\n					var $t = $(this);\n					var gid = $t.prop(\"id\");\n					var $block_ftg = $(\"#ft\"+gid);\n					$firstBlockFtg.append($block_ftg);\n					$firstBlock.append($t);\n				});\n				// $firstBlock.append($blocks);\n			}\n		});\n		//remove all columns besides the first.\n		setTimeout(function(){\n\n			$container.find(\".drop-area:gt(0)\").each(function(){\n				var $t = $(this);\n				var $ftg = $(\"#ft\"+$t.prop('id'));\n				$ftg.remove();\n				$t.remove();\n			});\n\n		},10);\n\n		//2 column check\n		if( $.inArray(newOption, ['container-2col', 'container-2col-altA', 'container-2col-altB'] ) > -1 ){\n			$dropAreas.removeClass('w1-1 w1-3 w1-4 w2-3').addClass('w1-2');\n			var cols = 2;\n		} else if(newOption=='container-3col'){//3 columns\n			$dropAreas.removeClass('w1-1 w1-2 w1-4 w2-3').addClass('w1-3');\n			var cols = 3;\n		} else if(newOption=='container-4col'){//4 columns\n			$dropAreas.removeClass('w1-1 w1-2 w1-3 w2-3').addClass('w1-4');\n			var cols = 4;\n		} else if(newOption=='container-1col'){//1 column\n			var cols = 1;\n			$dropAreas.removeClass('w1-1 w1-2 w1-3 w2-3 w1-4');\n		}\n\n		if(cols > 1){\n\n			var markup = '';\n			//var grp_count = $(\"#main-canvas\").find(\".layoutGrp\").length+500;//arbitrary high group # to prevent crossover.\n			var $newFtgs = [];\n			for(var x = 1; x < cols; x++){\n				var $newFtg = finetuneGroupMarkup(\n					{'width':'w1-'+cols, 'name':'Column '+(x+1), 'class':'not-edited', 'contain':true, 'drop-area':true }\n				);\n				var newGid = $newFtg.prop('id').replace('ftg-','')*1;//ftg-129 -> 129\n\n				markup += quickGroupMarkup(\n					{'width':'w1-'+cols, 'name':'Column '+(x+1), 'class':'not-edited', 'contain':true, 'drop-area':true },\n					1,\n					null,\n					newGid\n				);\n				$firstBlockFtg.parent().append($newFtg);\n				//$newFtgs.push($newFtg);\n			}\n\n			//$ftg.after($newFtgs);//now, they're in the finetune nav.\n\n			// finetuneGroupMarkup($group,x,block_type_override)\n			// for(var x = 1; x < cols; x++){\n			// }\n\n			setTimeout(function(){\n				$firstBlock.after(markup);//add the\n				var $nextBlock = $firstBlock.next(\".drop-area\");\n				if(newOption=='container-2col-altA'){\n					$firstBlock.removeClass('w1-1 w1-2 w2-3').addClass('w1-3');\n					$nextBlock.removeClass('w1-1 w1-2 w1-3 w1-4').addClass('w2-3');\n				} else if(newOption=='container-2col-altB'){\n					$firstBlock.removeClass('w1-1 w1-2 w1-3').addClass('w2-3');\n					$nextBlock.removeClass('w1-1 w1-2 w2-3 w1-4').addClass('w1-3');\n				}\n\n				var grp = ftGetGrp($firstBlockFtg);\n				grp['width'] = 'w1-'+cols;\n\n				//REDISTRIBUTE SECTIONS!\n				var $items = $firstBlock.find(\"> .layoutGrp\");//the number of top level elements within.\n				if($items.length > 1){\n					var currentColumn = 1;//start with the second column.\n\n					//loop through each item and distribute to the next column.\n					$items.each(function(){\n						if(currentColumn>1){//only deal with cols > first one.\n							var $item = $(this);\n							var $target =  $container.find(\"> .layoutGrp:eq(\"+(currentColumn-1)+\")\");\n							var $ftg = $(\"#ft\"+$target.prop('id'));\n							var $itemftg = $(\"#ft\"+$item.prop('id'));\n							$target.append($item).removeClass('not-edited');\n							$ftg.append($itemftg);\n						}\n						currentColumn++;\n						if(currentColumn>cols){\n							currentColumn = 1;\n						}\n					});\n\n				}\n				setTimeout(function(){\n					addElementButtons();\n				},10);\n\n			},20);\n		} else {\n			addElementButtons();\n		}\n\n		setTimeout(function(){\n\n			finetuneActivateOnPageEditables();\n			finetuneLayoutChangesMade();\n		},2000)\n	});\n\n\n	$(\"#main-canvas\").on('click','.edit-tools .shape-jump',function(e){\n		var $t = $(this)\n			$parent = $t.parents(\".edit-tools:first\"),\n			$grp = $t.parents(\".layoutGrp:first\");\n\n		closeCustomSection(); //important!  closes the current section if we're in a custom block.\n\n		var gid = ftGetId($grp);\n		var $ftg = $('#ftg-'+gid);\n		var $accordion = ftGetAccordion($grp);\n		if(!$accordion.hasClass('bound')){\n			var grp = ftGetGrp($ftg);\n			bindAndPopulateAccordion($accordion,grp, true);\n		}\n\n		$thisArrow = $ftg.find('.img_shape-chooser')\n		flipMode($thisArrow,{ direction: 'right', force: true });\n		trackIndicativeEvent('changeSectionShape')\n\n	});\n\n\n	//CLONE SECTION\n	$(\"#main-canvas\").on('click','.edit-tools .clone-section',function(e){\n		var $parent = $(this).parents(\".layoutGrp:first\");\n		addNewSection({ blockToClone: $parent });\n		trackIndicativeEvent('clonedBlock');\n	});\n\n	//Cloning from within the accordion.\n	$(\"#finetune-all-tools\").on('click','.clone-section',function(){\n		var $parent = $(this).parents(\".ft-grp:first\");\n		var $layoutGrp = ftGetLayoutGrp($parent);\n		addNewSection({ blockToClone: $layoutGrp });\n		trackIndicativeEvent('clonedBlock');\n	});\n\n	//INLINE HIDE/DELETE LINKS\n\n\n	$(\"#main-canvas\").on('click','.edit-tools .delete-jump',function(e){\n		e.preventDefault();\n		var $layoutGrp = $(this).parents(\".layoutGrp:first\")\n		//layoutGrp will be something like <div id=\"g-52\" class=\"layoutGrp element-title\">...</div>\n		var element = getElementFromLayoutGrp( $layoutGrp );\n\n		//$id = hidden input in design tab of sidebar.\n		var $id = $(\"#finetune-hide_\"+element);\n		var $mainCard = $id.parents('.mainCard:first')\n		var gid = ftGetId( $layoutGrp );\n		var $ftgroup = ftGetFtGrp( $layoutGrp );\n		var grp = ftGetGrp( $layoutGrp );\n		\n		var hideSec = function(){\n			if(!grp['styles']){\n				grp['styles'] = {};\n			}\n\n			trackIndicativeEvent('hideElement', { 'type': element });\n			grp.styles['hidden'] = 1;\n			$ftgroup.addClass('section-hidden');\n			$layoutGrp.hide();\n			$mainCard.addClass('is-hidden')\n			finetuneLayoutChangesMade();\n\n		}\n\n		var showSec = function(){\n\n			$ftgroup.removeClass('section-hidden');\n			$layoutGrp.show();\n			setForPlaceholderText( $layoutGrp )\n			trackIndicativeEvent('undoHideElement', { 'type': element });\n			$mainCard.removeClass('is-hidden')\n			scrollToBlock($layoutGrp,-20);\n			if(grp['styles'] && grp['styles']['hidden']){\n				delete grp['styles']['hidden'];\n			}\n			finetuneLayoutChangesMade();\n\n		}\n\n		if($id.length > 0){\n\n			// IF FOUND\n			var secTitle = $id.parents('.mainCard:first').find('.cardHead span').text().trim()\n			if( element == 'rsvp' ){\n				secTitle = 'Button'\n			}\n\n			hideSec()\n\n			var undoMessage = 'You just hid ' + secTitle + '.';\n			SplashUI.ask(function( response ) {\n				// UNDO FUNCTION GOES HERE\n				if(response){\n					showSec()\n				}\n			}, undoMessage, 'undo', 5000);\n		}\n	});\n\n\n	$(\"#main-canvas\").on('click','.edit-tools .test-link',function(e){\n		var $t = $(this);\n		var $layoutGrp = $t.parents(\".layoutGrp:first\");\n		if($layoutGrp.hasClass('element-rsvp')){\n			if( ! $('#rsvp-modal').hasClass('afterRsvp') ){\n				$(\"#rsvp-form-top\").find(\".rsvp-text\").text($(\"#rsvp-button\").text());\n			}\n			if( $('#main-canvas').hasClass('link') && typeof $('#rsvp-button').attr('href')!=='undefined' ) {\n				window.open( $('#rsvp-button').attr('href') ); // open new window if ext Link\n			} else {\n				showRsvpForm();\n			}\n			trackIndicativeEvent('testButton');\n		} else {\n			if($t.hasClass('nav-test')){//nav element.\n				var $this = $t.parents(\".nav-item:first\").find(\"a:first\");\n				trackIndicativeEvent('testCustomNavLink');\n			} else {\n				var $this = $t.parents(\".layoutGrp:first\").find(\".button-link:first\");\n				trackIndicativeEvent('testCustomButtonLink');\n			}\n			jumpToNavBlock($this,e);\n			e.preventDefault();\n			e.stopPropagation();\n		}\n		return false;\n	});\n\n	//toggle the theme modal\n	$('#currentThemeCard2').on('click', function(){\n		$(\"#theme-modal\").fireSimpleModal();\n		loadThemeTab($(\"#public-themes-contain\"), { type: 'public-themes'});\n		trackIndicativeEvent('themeModalOpen');\n		return false;\n	});\n\n	//close the theme slideshow.\n	$('#theme-modal').on('click', '.close-theme-slideshow', function(){\n		closeThemeSlideshow();\n		return false;\n	});\n\n	//nav linkifying\n	$('#main-canvas').on('click','.edit-tools .nav-link',function(){\n		var $layoutGrp = $(this).parents(\".layoutGrp:first\");\n		editNavBlock($layoutGrp);\n		linkingModal.getHeight();\n		return false;\n	});\n\n	$(\"#nav-link-target\").change(function(){\n		if($(this).val()!='ext'){\n			$(\"#nav-link-ext-href\").hide().val('');\n		} else{\n			$(\"#nav-link-ext-href\").show().val('').focus();\n		}\n	});\n\n	$(\"#nav-embed\").on('change',\"input.nav-action-input\",function(){\n		var $t = $(this);\n		var $parent = $t.parents(\".row:first\");\n		$parent.find(\"div.inner.\"+$t.val()).show().siblings().hide();\n		if($.inArray($t.val(), ['top','button','rsvp','button','custom-content']) > - 1 ){//special cases for top of page and button.  override the input value.\n			$parent.find(\"input.nav-link-target\").val($t.val());\n		} else if($t.val() == 'section'){\n			flipDropDown($parent.find('input.nav-link-target'),'');//flpi the section dropdown to \"SELECT SECTION\", rather than blank or preserving last pick\n		}\n	});\n\n	//DELETE A NAV ITEM\n	$(\"#nav-embed\").on('click',\"a.delete-item\",function(e){\n		e.preventDefault();\n		var $nav_item = $(this).parents(\".row:first\");\n		if($nav_item.hasClass('newNavItem')){\n			$nav_item.remove();\n		} else{\n			$nav_item.hide().attr(\"deleted\",\"1\");\n		}\n		return false;\n	});\n\n	//ADD A NEW NAV ITEM\n	$(\"#nav-embed\").find(\".addNewNavItem\").click(function(){\n		addNewNavItem();\n	});\n\n	$(\"#nav-embed\").find(\"a.saveLink\").click(function(){//SAVING NAV ITEMS\n		//loop through each nav item and\n		var button = false;\n		if( $(\"#nav-embed\").attr('block-type')=='button' ){ // special case for button, which also uses the nav embed modal.\n\n			var $t = $(\"#nav-items-list\").find(\"li.navLi:first\");\n			var linkVal = $t.find(\"input.nav-action-input\").val();\n			var linkText = $t.find(\"input.nav-name\").val();\n			var sfid = $(\"#nav-embed\").attr('sfid').replace('sfid-','')*1;\n			var $splashFeed = $(\"#sfid-\"+sfid);\n\n			var options = $splashFeed.data('splashFeedOptions');\n			if (!options) {\n				options = {};\n				$splashFeed.data('splashFeedOptions',options);\n			}\n\n			var external_link = false;\n			if(linkVal=='external'){\n				external_link = true;\n				linkVal = $t.find(\"input.external-link\").val().trim();\n				if(linkVal.indexOf('https://')==-1 && linkVal.indexOf('mailto:')==-1 && linkVal.indexOf('tel://')==-1){//ensure that it's a proper link.\n					linkVal = 'http://'+linkVal.replace('http://','');\n				}\n			} else if(linkVal=='section'){\n				linkVal = $t.find(\"input.nav-link-target\").val();\n			} else if(linkVal=='custom-content'){\n				linkVal = $t.find(\"input.nav-modal-target\").val();\n				linkVal = 'modal-'+linkVal; //ie. modal-e654 -> #modal-e654\n				options['target'] = '';\n			}\n\n			if(external_link){//hashify the url. ie. rsvp -> #rsvp, to41231 -> #to41231\n				options['target'] = '_blank';\n			} else {\n				linkVal = '#'+linkVal; //ie. modal-e654 -> #modal-e654\n				options['target'] = '';\n			}\n\n			finetuneEditedFields['data[SplashFeed]['+sfid+'][options]'] = $.extend(true,{},options);\n			finetuneEditedFields['data[SplashFeed]['+sfid+'][website]'] = linkVal;\n			finetuneEditedFields['data[SplashFeed]['+sfid+'][title]'] = linkText;\n			if($splashFeed.find('.button-link').children().length > 0){\n				$splashFeed.find('.button-link').prop('href',linkVal);\n				$splashFeed.find('.button-link span').html(linkText);\n			}\n			if(!$splashFeed.find('.button-link').children().length > 0) {\n				$splashFeed.find('.button-link').prop('href',linkVal).html(linkText);\n			}\n			finetuneFieldChangesMade();\n			closeSimpleModal();\n			return false;\n		}\n\n\n		var errors = false;\n		$(\"#nav-items-list\").find(\"li\").each(function(){\n			var $t = $(this);\n			var params = {\n				id: $t.attr(\"sfid\"),\n				linkType: $t.find(\"input.nav-action-input\").val(),\n				linkText: $t.find(\"input.nav-name\").val().trim(),\n				extLink: false\n			};\n\n			if(typeof params['id']!=='undefined' || $t.hasClass('newNavItem')){ //skip the blank one.\n				if($t.hasClass('newNavItem')){\n					var $splashFeed = $(\"#\"+$(\"#nav-embed\").attr(\"sfid\"));\n					if($splashFeed.length > 0){\n						var $nav_item = addNewListItem($splashFeed,true);\n					}\n				} else {\n					var $nav_item = $(\"#\"+params.id);\n				}\n				setTimeout(function(){\n					if(typeof $nav_item!=='undefined'){\n						if(typeof $t.attr(\"deleted\")!=='undefined'){\n							deleteListItem($nav_item);\n						} else {\n							if(params.linkType =='external'){\n								params.extLink = $t.find(\"input.external-link\").val().trim();\n								if(params.extLink == ''){\n									//$(\"#nav-embed\").find(\".error-area\").text('Please fill out a valid path').fadeIn(300);\n									//$t.find(\"input.external-link\").addClass('error').focus();\n									//errors = true;\n									//return false;\n								} else if(params.extLink.indexOf(\"https://\")==-1){//ensure that it's a proper link.\n									params.extLink = 'http://'+params.extLink.replace('http://','');\n								}\n							}\n							if( !button && params.linkText==''){\n								// $t.find(\"input.nav-name\").addClass('error').focus();\n								// $(\"#nav-embed\").find(\".error-area\").text('Please fill out a valid path').fadeIn(300);\n								errors = true;\n								//return false;\n							}\n							var linkText = $nav_item.find(\".body\").text();\n							if(params.extLink!==false){\n								$nav_item.find(\".body\").html('<a class=\"nav-jump\" target=\"_blank\" href=\"'+params.extLink+'\">'+params.linkText.trim()+'</a>').trigger('change');\n							} else {\n								params.linkTo = $t.find(\"input.nav-link-target\").val();\n								$nav_item.find(\".body\").html('<a class=\"nav-jump\" href=\"#'+params.linkTo+'\">'+params.linkText.trim()+'</a>').trigger('change');\n							}\n						}\n					}\n				},0);\n\n			}\n		});\n		setTimeout(function(){\n			if(!errors){\n				$(\"#nav-embed\").find(\".error-area\").hide();\n				closeSimpleModal();\n			}\n		},0);\n\n	});\n\n	//changing date by clicking on page.\n	$(\"#main-canvas\").on('click','.when-ss',function(){\n		//has to be an on.click event since the inner contents of the section can be changed on the fly.\n		$(\"#settingsTxt\").text('EDIT DATE & TIME');\n		$(\"#edit-settings\").addClass('onlyDate').removeClass('onlyVenue')\n		$body.addClass('settingsOpen dateVenueModal')\n		resetSettingsTab()\n		return false;\n	}).on('click','.where-ss',function(){ //changing venue by clicking on page.\n		$(\"#settingsTxt\").text('EDIT LOCATION');\n		$(\"#edit-settings\").addClass('onlyVenue').removeClass('onlyDate')\n		$body.addClass('settingsOpen dateVenueModal')\n		resetSettingsTab()\n		return false;\n	}).on('click', '.edit-date', function(){\n		// ON CLICK OF EDIT DATE OR EDIT VENUE BTN IN HOVERING TOOLBAR.\n		var $this = $(this)\n		var nuText = 'Edit DATE & TIME'\n		var nuClass = 'onlyDate'\n		var oldClass = 'onlyVenue'\n\n		if( $this.attr('title') == 'Venue' ){ // IF EDIT VENUE BTN\n			nuClass = 'onlyVenue'\n			oldClass = 'onlyDate'\n		}\n\n		$(\"#settingsTxt\").text( nuText );\n		$(\"#edit-settings\").addClass( nuClass ).removeClass( oldClass )\n		$body.addClass('settingsOpen dateVenueModal')\n		resetSettingsTab()\n		return false;\n	}).on('click', '.edit-social', function(){\n		// ON CLICK OF EDIT SOCIAL LINKS BUTTON.\n		var $this = $(this)\n		var nuText = 'Edit Social Links'\n		$body.addClass('settingsOpen')\n		resetSettingsTab('share');\n		return false;\n	})\n\n	$('#fake-modal-back').on('click', function(){\n		closeFakeModal();\n	})\n\n	$('#finetune-all-tools .cardHead').mouseenter(function(){\n		var $t = $(this).parents(\".mainCard\");\n		var $target = getTargetFromObject($t);\n		if($target!==false){\n			$target.addClass('hovering');\n		}\n	}).mouseleave(function(){\n		var $t = $(this).parents(\".mainCard\");\n		var $target = getTargetFromObject($t);\n		if($target!==false){\n			$target.removeClass('hovering');\n		}\n	}).click(function(e){\n		var $t = $(this).parents(\".mainCard\");\n		var $target = getTargetFromObject($t);\n		if($('body').hasClass('designerMode') && ! $(e.target).hasClass('hide-text') ){\n			console.log( 'has profile')\n\n			$('#nestedLayoutContainer').addClass('isBasicEle')\n\n			var $ftgGrp = ftGetFtGrp($target);\n			openCustomSection($ftgGrp);\n			$('#allSectionsContain').addClass('hide');\n			changeLayout.ftContain.find('.ft-grp').removeClass('hide');\n			$(\"#admin-group-clusters\").append(changeLayout.ftContain);\n			$('#nestedLayoutContainer').removeClass('hide');\n			$(\"#nestedLayoutContainer\").css({ \"height\":\"\", \"max-height\":\"\"});\n		}\n		if(!$t.hasClass('is-hidden')){\n			scrollToBlock($target,-20);\n		}\n	});\n\n	$('#add-new-named-element').click(addNewNamedElement);\n	/* end click code for customize section */\n\n	$('#eventStateWrap').on({\n		click:function(){\n			$('#rsvpTixTab').click()\n		},\n		mouseenter:function(){\n			$txt = $('#eventStateWrap').find('.eventStateTxt')\n			$txt.attr( 'status-text', $txt.text() ).text('Edit Status')\n		},\n		mouseleave:function(){\n			$txt = $('#eventStateWrap').find('.eventStateTxt')\n			$txt.text( $txt.attr('status-text') )\n		}\n	})\n\n\n	///\n	// Theme modal nav\n	$('#themes-hdr').on('click', '.section', function(){\n		var $this = $(this);\n		var $value = $this.attr('section');\n		var $target = $('#theme-modal');\n\n		$this.addClass('active').siblings().removeClass('active');\n\n\n		$target.removeClass('slideshow show-current-theme');\n		closeThemeSlideshow();\n\n		var $block = $(\"#public-themes-contain\");\n\n		// if ( $value == 'public-themes' ) {\n		if ( $value == 'current-theme') {\n			$target.addClass('slideshow show-current-theme');\n		} else if ( $value == 'my-themes' ) {\n			var $block = $(\"#my-themes-contain\");\n		} else if ( $value == 'admin-themes slideshow show-current-theme' ) {\n			var $block = $(\"#admin-themes-contain\");\n		}\n\n		$block.show().siblings('.theme-gallery').hide();\n		loadThemeTab($block, {type: $value });\n\n	});\n\n\n	// UNCOMMENT FOR LIVE\n	if( isLegacyEvent() && $('#is-legacy-has-updated').val() == '' ) {\n\n		// IF LEGACY FIRST LOAD -- WE CANT CHECK FOR EMPTY SWATCH COMBOS\n		// SO THIS CHECK LOOKS AT THE FONT COMBO INPUT BEING EMPTY TO DETERMINE\n		// A FIRST LOAD LEGACY PAGE\n\n		convertOldSwatch()\n		legacyFontActions.convertFont()\n\n		if( $(\"#autosave-checkbox\").val()==1 ){\n			setCheck($(\"#autosave-checkbox\"),0);\n			SplashUI.ask(function( response ) {\n				// UNDO FUNCTION GOES HERE\n				if(response){\n					SplashUI.hideGrowl();\n				}\n			}, 'Autosave has been temporarily disabled. Please be sure to manually save changes using the save icon in the bottom of the toolbar.', 'Dismiss', 30000);\n		}\n\n	}\n\n	if( constants.rsvp_method === 'collect' ){\n		checkForNuRSVPs()\n	} else if ( constants.rsvp_method === 'tickets' ){\n		checkForNuTickets()\n	}\n\n	$('#stagesWrap').on('click', '.stageTab', function(){\n		$t = $(this)\n\n		$t.addClass('active').siblings().removeClass('active')\n\n		if( $('#stagesWrap').attr('show') == 'stages' ){\n			$('#stagesWrap').attr('show', 'backups')\n		} else {\n			$('#stagesWrap').attr('show', 'stages')\n		}\n\n	})\n\n	$('#main-canvas').on('click', '#gallery-placeholder', function(e){\n\n		if( $(e.target).hasClass('noClick') ){\n			return false;\n		}\n\n		openPhotoGallery();\n\n		return false\n	});\n\n\n	if( window.location.search.indexOf('action=responses') > -1 ){\n		setTimeout(function(){\n			$('#responseTab').click();\n		}, 1000)\n	}\n\n}); // end doc ready // end document ready\n\nvar modeLoadTimeout\n\n\nfunction publishStage( stage_id ){\n	$(\"#event-stage-id\").val(stage_id).attr(\"switched\",true).addClass('changes-made');\n	constants.stage_edit = false;//IMPORTANT.  Otherwise switching the stage will not be submitted.\n	clearTimeout(savingTimer);\n	savingTimer = setTimeout(autoSaveData, 0);\n}\n\nfunction chooseTheme(){\n\n	var backupName = constants.thisTheme + ' Backup'\n\n	var params = { }\n	params.stageName = backupName\n	params.isBackup = true\n\n	createNewStage( params, triggerThemeUndoAlert )\n\n	var headType = $('#header-bg-type').val()\n\n	clearTimeout(savingTimer);\n	var $this = $('#theme-modal').find('.theme-option.active')\n\n	finetuneDeActivateOnPageEditables();//important! kill before we save.\n	//closeCustomRTEPickers();\n	closeSimpleModal();\n	var theme_id = $this.attr(\"value\")*1;\n	//get a hold of current theme value right off the bat before any processes start so we get the correct value!\n	var last_theme_id = $(\"#event-theme-input\").val();\n	var $theme_input = $(\"#event-theme-input\"),\n		$themeLoaderText = $(\"#splashLoader\").find(\"div.thisText\").find(\"span.active:first\");\n	constants.theme_id = theme_id;\n	constants.thisTheme = allThemes[theme_id]['abbr']\n\n	$('#theme-label-name').text( constants.thisTheme )\n\n	$theme_input.attr(\"last-theme-id\",last_theme_id);//set the last theme id so we can reference down the line.\n\n	if(theme_id > 0 && typeof allThemes[theme_id]!=='undefined'){\n		if($this.hasClass('loading')){//||$this.hasClass('active')){ // meche testing mechtesting\n			return false;//no double clicks for this one.\n		}\n		$this.addClass('loading current-theme').siblings().removeClass('current-theme');\n		//setTimeout(function(){\n\n			if($themeLoaderText.next().length > 0){\n				$themeLoaderText.removeClass('active').next().addClass('active');\n			} else {\n				$themeLoaderText.removeClass('active').parent().find(\"span:first\").addClass('active');\n			}\n\n			var $customEventCss = $(\"#custom-event-css\");\n			var $themeCssAssets = $(\"#theme-css-assets\");\n			$themeCssAssets.empty();\n			$(\"#legacy-layout-css\").remove();\n			if($customEventCss.length > 0){\n				$themeCssAssets.append($customEventCss);\n			}\n			if (allThemes[theme_id]['has_assets']=='1'){//only add assets if the theme has them.\n				//var cssFile = constants.cdnUrl+'/themes/'+theme_id+'/custom.css';\n				var cssFile = '';\n				if (allThemes[theme_id]['theme_css'] != ''){\n					var cssFile = constants.cdnUrl+allThemes[theme_id]['theme_css'];\n				}\n				$themeCssAssets.append('<link rel=\"stylesheet\" type=\"text/css\" href=\"'+cssFile+'\" />')\n				setTimeout(function(){\n					$(window).height();\n				},0);\n			}\n\n			$body.addClass('loading-theme has-changes has-theme-changes').attr(\"theme\",allThemes[theme_id]['abbr']);\n		//},0);\n\n\n		$('#footer').css({'width': '', 'padding-bottom': ''})// RESETS INLINE WIDTH STYLE ON FOOTER FROM CUSTOM JS STUFF\n		$('#main-canvas').css('margin-bottom', '').find(\"div.st-content-wrap\").css('padding-bottom',\"\");\n\n		constants.prevent_scroll = true;//important.  prevents scroll to block on change events.\n\n		$(\"#changeThemeBtn\").find(\".current-theme:first\").text(allThemes[theme_id]['name']);\n		updateThemeCards();//updates selected theme.\n\n		setTimeout(function(){\n			//captureRevertState('themeChange');\n			//update the current theme background image.\n		 	var theme_img = allThemes[theme_id]['image_url']\n\n           // setTimeout(function(){\n\n                finetuneDesignApplyThemeLayout(allThemes[theme_id]['layout'], { 'themeSwitch': true, 'theme_id': theme_id } );\n                finetuneDesignPopulateThemeStyles(allThemes[theme_id]['theme_styles'],true,function(){\n					trackIndicativeEvent('changedTheme', { 'theme_id': theme_id, 'theme_name': allThemes[theme_id]['name'] });\n                    //i know this is technically happening on the callback of finetuneDesignPopulateThemeStyles,\n                    //but this appears to happen BEFORE that function is finished running.\n                    //do not rely on $theme_input value in finetuneDesignPopulateThemeStyles - instead use the last-theme-id attribute.\n                    $theme_input.val(theme_id).addClass('changes-made');\n                    $(\"#all-themes\").find(\".theme-title\").text(allThemes[theme_id]['name']);\n\n                    $this.removeClass('loading');\n                    $(window).scrollTop(0);\n\n                    setTimeout(function(){\n\n                    	$body.removeClass('loading-theme loading-page isLegacy');\n\n                   	 	constants.prevent_scroll = false;\n                    	//autoSizeContent();\n                    	if( $('#splash-container').find('div.autoWindowHeight').length > 0 ){\n							autoWindowSizes();\n						}\n\n                    },0);\n\n                });\n            //},10);\n\n		},250);\n\n	}\n	$this.addClass('selected')//.find('.action-word').html('');//APPLY THEME');\n	$(\"#event-theme-input\").val(theme_id).trigger('change');\n}\n\nfunction triggerThemeUndoAlert( stage_id ){\n	var undoMessage = 'You just changed themes.';\n	SplashUI.ask(function( response ) {\n		// UNDO FUNCTION GOES HERE\n\n		if(response){\n\n			// fake load\n			$('body').addClass('loading loading-page fake-load')\n\n			var $stageList = $(\"#stagesWrap\").find(\".stages-list\");\n\n			var $thisStage = false\n\n			/*\n			$stageList.find(\".stage\").find('input.stage-input').each(function(){\n				if( $(this).data('stage_id') == stage_id ){\n					$thisStage = $(this)\n				}\n			})\n			*/\n\n		//	var stage_id = $thisStage.data('stage_id')\n			publishStage( stage_id )\n\n		}\n	}, undoMessage, 'undo', 10000);\n}\n\nfunction getURLParameter(name) {\n  return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,\"\"])[1].replace(/\\+/g, '%20'))||null\n}\n\n//function createNewStage( params, _callback ){\nfunction createNewStage( params, _callback ){\n\n	var thisData =  { event_id: constants.event_id }\n\n	var $newStage = $(\"#blank-stage\").clone();\n\n	if( typeof params.isBackup !== 'undefined' && params.isBackup !== false ){\n		$newStage = $(\"#blank-backup\").clone();\n		thisData.isBackup = true;\n	}\n\n\n	var hasButton = false\n	if( typeof params.button !== 'undefined' && params.button !== false ){\n\n		$button = params.button\n		hasButton = true\n\n		if( $button.hasClass('in-progress')){\n			return false;\n		}\n		$button.addClass('in-progress').text('Adding..');\n\n	}\n\n	if( typeof params.stageName !== 'undefined' && params.stageName !== false ){\n		thisData.stage_name = params.stageName\n	}\n\n	thisData.splash_theme_id = $('#event-theme-input').val()\n\n	thisData.active_stage = false\n\n	if( document.location.href.indexOf('stage=') > -1 ){\n		// IF PREVIEWING A STAGE\n		thisData.active_stage = getURLParameter('stage');\n	}\n\n	$.ajax({\n		url:\"/splash/saveNewStage\",\n		data: thisData,\n		type: 'POST',\n		dataType: 'json',\n		success:function(response){\n\n			if(response['event_stage_id'] && !params.isBackup ){ // ONLY DO THIS IF NOT BACKUP\n				$(\"#event-stage-id\").val(response['event_stage_id']).addClass('changes-made');\n			}\n\n			if(response['current_stage']){\n				$(\"#stagesWrap\").find(\".stage.active\").removeClass('active');\n				$newStage.find(\".stage:first\").addClass('active');\n			}\n			$(\"#no-stages-msg\").hide();\n			setTimeout(function(){\n\n				if( hasButton ){\n\n					var thisText = 'New Stage'\n\n					if( thisData.isBackup == true ){\n						thisText = 'New Backup'\n					}\n\n					$button.removeClass('in-progress').text( thisText );\n\n				}\n				var $stageList = $(\"#stages-tab\");\n\n				if( thisData.isBackup == true ){\n					$stageList = $(\"#backups-tab\");\n				}\n\n				$stageList.prepend($newStage.html());\n				setTimeout(function(){\n					$stageList.find(\".stage:first\").data('stage-id',response['event_stage_id']);\n					if(response['name']){\n						$stageList.find(\".stage:first\").find('input.stage-input').val(response['name']);\n					}\n\n					if( typeof _callback == 'function' ){\n						_callback( response['event_stage_id'] )\n					}\n\n				},10);\n			},10);\n		},\n		error:function(msg){\n\n			if( thisData.isBackup == false ){\n				alert('There was a problem adding your stage.');\n			}\n\n			if( hasButton ){\n				$button.removeClass('in-progress').text('New Stage');\n			}\n		}\n	})\n}\n\n\nfunction checkForNuRSVPs(){\n\n	var cookieCount = JSCookies.getItem('rsvpTotal-'+constants.event_id)\n	//var cookieCount = 0\n\n	if( cookieCount === null || typeof cookieCount=='undefined' || cookieCount == 'undefined' ){//if this value has never been set, set it to the current rsvp count.\n		JSCookies.setItem('rsvpTotal-'+constants.event_id, constants.rsvp_total)\n	} else if( typeof constants.rsvp_total !== 'undefined' && constants.rsvp_total > 0 && constants.rsvp_total > cookieCount ){\n		//if the current RSVP Count is GREATER than the stored cookie value, update and show the badge\n		var nuCount = constants.rsvp_total - cookieCount\n\n		if( nuCount.toString().length > 4 ){\n			// IF NUMBER IS IN THOUSANDS: 1000, 2000 ETC\n			// CONVERT to 1K, 2K, 20k ETC 1000\n			nuCount = nuCount.toString().slice(0, -3) + 'K' //ie, 10000 -> 10K\n		}\n\n		$('#rsvpBadge').text('+'+nuCount).removeClass('hide')\n	}\n\n}\n\nfunction checkForNuTickets(){\n\n	var cookieCount = JSCookies.getItem('ticketTotal-'+constants.event_id)\n\n	if( cookieCount === null || typeof cookieCount=='undefined' || cookieCount == 'undefined'){//if first time setting this value, set it to the current # of tickets sold.\n		JSCookies.setItem('ticketTotal-'+constants.event_id, constants.ticket_total)\n	} else if( typeof constants.ticket_total !== 'undefined' && constants.ticket_total > 0 && constants.ticket_total > cookieCount ){\n\n		var nuCount = constants.ticket_total - cookieCount\n\n		if( nuCount.toString().length > 4 ){\n			// IF NUMBER IS IN THOUSANDS: 1000, 2000 ETC\n			// CONVERT to 1K, 2K, 20k ETC\n			nuCount = nuCount.toString().slice(0, -3) + 'K'\n		}\n\n		$('#rsvpBadge').text('+'+nuCount).removeClass('hide')\n\n	}\n\n}\n\n\n$('#imgContentWrap').on('click', '.advImgTitle', function(){\n\n	$('#advancedImgUtils').toggleClass('showAdvTools')\n})\n\nfunction fakeModeLoad(){\n\n	closeSimpleModal()\n\n	$('body').addClass('loading loading-page fake-load')\n\n	modeLoadTimeout = setTimeout(function(){\n\n		$('body').removeClass('loading loading-page fake-load')\n\n	}, 1000)\n\n}\n\nfunction resetSettingsTab(defaultTab){\n	var $mainTab = $('#edit-settings').find('.sections-nav .section.main')\n	$mainTab.addClass('active').siblings().removeClass('active')\n	var thisOpt = (defaultTab!=null)?defaultTab:$mainTab.attr('data-opt')\n	$(\"#settings-content\").find('.settings-stuff[data-opt=\"'+ thisOpt +'\"]').addClass('active').siblings().removeClass('active')\n}\n\nfunction generatePaddingMarginString( styleArray ){\n\n	var nuArr = []\n\n	if( styleArray.length == 1 ){\n		nuArr['top'] = styleArray[0]\n		nuArr['right'] = styleArray[0]\n		nuArr['bottom'] = styleArray[0]\n		nuArr['left'] = styleArray[0]\n	} else if( styleArray.length == 2 ){\n		nuArr['top'] = styleArray[0]\n		nuArr['right'] = styleArray[1]\n		nuArr['bottom'] = styleArray[0]\n		nuArr['left'] = styleArray[1]\n	} else if( styleArray.length == 3 ){\n		nuArr['top'] = styleArray[0]\n		nuArr['right'] = styleArray[1]\n		nuArr['bottom'] = styleArray[2]\n		nuArr['left'] = styleArray[1]\n	} else if( styleArray.length == 4 ){\n		nuArr['top'] = styleArray[0]\n		nuArr['right'] = styleArray[1]\n		nuArr['bottom'] = styleArray[2]\n		nuArr['left'] = styleArray[3]\n	}\n\n	return nuArr\n\n}\n\n//keyword:padding margin\nfunction updateSecHovers( $grp ){	//update on page section hovers.\n	var $box\n	if( $grp.hasClass('p-grp') ){ // WRAPPER GROUPS ALL HAVE THIS P-GRP CLASS\n		$box = $grp.find('> .edit-tools .box-model')\n	} else { // IF NOT A WRAPPER GROUP -- INDIVIDUAL ELEMENT\n		$box = $grp.find('.element .edit-tools .box-model')\n	}\n\n	var thisPad = $grp.css('padding')\n	var thisMar = $grp.css('margin')\n\n	if( typeof thisPad !== 'undefined' && typeof thisMar !== 'undefined' ){\n\n		// get padding\n		var padArray = thisPad.split(' ')\n\n		var nuPad = generatePaddingMarginString( padArray )\n\n		//ie. box-shadow = 0 0px 0 inset, 2px 0 0 inset, 3px 0 -2px inset, etc.\n		nuPad['shadow'] = '0 ' + nuPad['top'] + ' 0 inset, -' + nuPad['right'] + ' 0 0 inset, 0 -' + nuPad['bottom'] +' 0 inset, ' + nuPad['left'] + ' 0 0 inset'\n\n		// get margin\n		var marArray = thisMar.split(' ')\n\n		var nuMar = generatePaddingMarginString( marArray )\n\n		nuMar.shadow = '0 -' + nuMar.top + ' 0, ' + nuMar.right + ' 0 0, 0 ' + nuMar.bottom +' 0, -' + nuMar.left + ' 0 0'\n\n		$box.find('.box-padding').css('box-shadow', nuPad.shadow ).end()\n			.find('.box-margin').css('box-shadow', nuMar.shadow )\n\n	} else {\n		// if undefined, return false\n		return false\n	}\n\n}\n\nfunction saveEventSettings(){\n\n	var $this = $('#saveEventSettings')\n\n	if($(\"#edit-settings\").hasClass('onlyDate') || $(\"#edit-settings\").hasClass('onlyVenue')){\n		closeFakeModal();\n		closeSimpleModal();\n		return false;\n	}\n\n	if(isPrivateEvent() && $.trim($(\"#private-code\").val())==''){\n		alert('An access code is required for private events');\n		$(\"#private-code\").focus();\n		return false;\n	}\n\n	if($(\"#finetune-main-title\").val().trim()==''){\n		alert('A title is required for your event.');\n		$(\"#finetune-main-title\").focus();\n		return false;\n	}\n	if($(\"#valid-domain\").val()=='0'){\n		alert('Please enter a valid domain.');\n		$(\"#event-domain-field\").focus();\n		return false;\n	}\n\n	if ($body.hasClass('has-theme-changes')) {\n		var $changed_inputs = finetuneGetThemeStyleInputs(true);\n		finetuneLayoutChangesMade();\n		// put all custom block fields in finetuneEditedFields\n		finetuneMarkAllCustomBlockFields();\n		//$(\"#event-theme-input\").removeAttr(\"last-theme-id\");\n	} else {\n		var $changed_inputs = $(\"input.changes-made,textarea.changes-made,select.changes-made\");\n	}\n\n	var postData={};\n	if($changed_inputs.length || finetuneLayoutHasChanged || finetuneFieldsHaveChanged){\n\n		postData = getChangedInputsArray($changed_inputs);\n\n		if (finetuneLayoutHasChanged !== false) {\n			postData['data[EventSetting][layout]'] = finetuneGetEventLayout();\n			finetuneLayoutHasChanged = false;\n		}\n\n		if (finetuneFieldsHaveChanged !== false) {\n			postData = $.extend({},postData,finetuneEditedFields);\n			if (finetuneNewBlockIds.length > 0) {\n				for (var x in finetuneNewBlockIds) {\n					var tmpId = finetuneNewBlockIds[x][0];\n					var newId = finetuneNewBlockIds[x][1];\n					for (var i in postData) {\n						//var reg = new RegExp('data\\[SplashFeed\\]\\['+tmpId+'\\]');\n						var reg = new RegExp('data.SplashFeed..'+tmpId+'.');\n						if ((''+i).match(reg)) {\n							postData[(''+i).replace(reg,'data[SplashFeed]['+newId+']')] = postData[i];\n							delete postData[i];\n						}\n					}\n				}\n			}\n			finetuneEditedFields = {};\n			finetuneFieldsHaveChanged = false;\n		}\n	}\n\n	postData['data[Event][title]'] = $(\"#finetune-main-title\").val();\n	postData['data[Event][domain]'] = $(\"#event-domain\").val();\n\n	postData['data[Event][type]'] = $(\"#event-type\").val();\n	postData['data[Event][type_id]'] = $(\"#event-type-id\").val();\n\n	postData['data[EventSetting][rsvp_method]'] = $(\"#rsvp_method_input\").val();\n	postData['data[EventSetting][private]'] = $(\"#privacy-check\").val();\n	postData['data[EventSetting][private_code]'] = $(\"#private-code\").val();\n	postData['data[EventSetting][private_type]'] = $(\"#private-type-input\").val();\n	postData['data[EventSetting][invite_link_privacy_bypass]'] = $(\"#privacy-invite-bypass\").val();\n\n	// Custom RSVP Template on Spladmin Panel\n	var rsvp_conf_temp = $('#custom-rsvp-input').val();\n	if(rsvp_conf_temp === 'default') {\n		postData['data[EventSetting][rsvp_conf_template]'] = '';\n	} else {\n		postData['data[EventSetting][rsvp_conf_template]'] = rsvp_conf_temp;\n	}\n\n	if($this.hasClass('in-progress')){\n		return false;\n	}\n	$this.addClass('in-progress').text('Saving...');\n	var ecParams = getEventCollabsToSave();\n	saveEventContacts(ecParams,function(){\n		$.ajax({\n			url:\"/events/saveEventData/\"+constants.event_id,\n			type: 'post',\n			data: postData,\n			dataType: 'json',\n			statusCode: {\n				401: function(response) {\n					handleSaveError( false );\n				},\n				403: function(response) {\n					handleSaveError( true, 'Whoops.  Looks like there was an error saving your data.  Please refresh the page and try again.');\n				}\n			},\n			success: function(response){\n\n				// if the domain changed, this will be set to the new url\n				if(typeof response!='null' && typeof response.redirect !=='undefined' && (domain_changes || page_action_changes) ){\n					window.location = response.redirect;\n				} else{\n					//window.location = response.redirect;\n					//location.reload();\n					$this.text('Saved').removeClass('in-progress');\n					setTimeout(function(){\n						$this.text('Save');\n						closeFakeModal();\n						closeSimpleModal();\n					},500);\n\n					updateJSEventProperties (postData);\n				}\n			},\n			error: function(){\n				alert('There was an error saving your changes.  Please try again.');\n				$this.text('Save').removeClass('in-progress');\n			}\n		});\n	});\n}\n\n\nfunction updateRsvpColorPicker(){\n\n	var $btn = $('#splash-container').find('.element-rsvp')\n	var bgColor = $btn.css('background-color')\n	var txtColor = $btn.css('color')\n\n	$('#rsvp-bg-color-picker-on-page').val(bgColor).css('background-color', bgColor)\n	$('#rsvp-color-input-on-page').val(txtColor).css('background-color', txtColor)\n\n\n}\n\n// this function is executed when settings are saved, and it updates elements on the page that depend on event settings\n// and other variables with its properties\nfunction updateJSEventProperties (postData) {\n\n	// Refresh the countdown elements on the page, only if the start date was modified\n	if ( typeof postData['data[Event][event_date]'] !== 'undefined' ) {\n		_event.date.start = postData['data[Event][event_date]'] +\" \"+ am_pm_to_hours(postData['data[Event][event_time]']);\n		_event.date.tbd = postData['data[Event][tbd][date]'] == '1';\n	}\n\n	if ( typeof postData['data[Event][event_date_end]'] !== 'undefined' ) {\n		_event.date.end = postData['data[Event][event_date_end]'] +\" \"+ am_pm_to_hours(postData['data[Event][event_time_end]']);\n	}\n\n	_event.venue.name = typeof postData['data[Event][venue_name]'] != 'undefined' ? postData['data[Event][venue_name]'] : _event.venue.name;\n	_event.venue.address = typeof postData['data[Event][address]'] != 'undefined' ? postData['data[Event][address]'] : _event.venue.address;\n	_event.venue.city = typeof postData['data[Event][city]'] != 'undefined' ? postData['data[Event][city]'] : _event.venue.city;\n	_event.venue.state = typeof postData['data[Event][state]'] != 'undefined' ? postData['data[Event][state]'] : _event.venue.state;\n	_event.venue.zip_code = typeof postData['data[Event][zip_code]'] != 'undefined' ? postData['data[Event][zip_code]'] : _event.venue.zip_code;\n	_event.venue.country = typeof postData['data[Event][country]'] != 'undefined' ? postData['data[Event][country]'] : _event.venue.country;\n	_event.venue.lat = typeof postData['data[EventSetting][lat]'] != 'undefined' ? postData['data[EventSetting][lat]'] : _event.venue.lat;\n	_event.venue.lng = typeof postData['data[EventSetting][lng]'] != 'undefined' ? postData['data[EventSetting][lng]'] : _event.venue.lng;\n	_event.venue.tbd = typeof postData['data[EventSetting][venue_tbd]'] != 'undefined' ? postData['data[EventSetting][venue_tbd]'] : _event.venue.tbd;\n\n	// If the event venue was updated, then execute the venue updated callback (for refreshing things on custom JS that depend on it)\n	if ( typeof postData['data[Event][venue_name]'] !== 'undefined' ) {\n\n		if ( typeof customAfterUpdatingWheres == 'function' ) {\n			customAfterUpdatingWheres();\n		}\n	}\n\n	// -- Social Settings, update of page on the fly after settings saving ---------------\n	if ( typeof postData['data[EventSetting][social_settings][twitter][body]'] != 'undefined' ) {\n		_event.social.twitter.body = postData['data[EventSetting][social_settings][twitter][body]'].trim();\n		if ( _event.social.twitter.body == '' ) {\n			_event.social.twitter.body = _event.finetune.social_defaults.twitter.body;\n		}\n	}\n	if ( typeof postData['data[EventSetting][social_settings][facebook][name]'] != 'undefined' ) {\n		_event.social.facebook.name = postData['data[EventSetting][social_settings][facebook][name]'].trim();\n		if ( _event.social.facebook.name == '' ) {\n			_event.social.facebook.name = _event.finetune.social_defaults.facebook.name;\n		}\n	}\n	if ( typeof postData['data[EventSetting][social_settings][facebook][description]'] != 'undefined' ) {\n		_event.social.facebook.description = postData['data[EventSetting][social_settings][facebook][description]'].trim();\n		if ( _event.social.facebook.description == '' ) {\n			_event.social.facebook.description = _event.finetune.social_defaults.facebook.description;\n		}\n	}\n	if ( typeof postData['data[EventSetting][social_settings][linkedin][name]'] != 'undefined' ) {\n		_event.social.linkedin.name = postData['data[EventSetting][social_settings][linkedin][name]'].trim();\n		if ( _event.social.linkedin.name == '' ) {\n			_event.social.linkedin.name = _event.finetune.social_defaults.linkedin.name;\n		}\n	}\n	if ( typeof postData['data[EventSetting][social_settings][linkedin][description]'] != 'undefined' ) {\n		_event.social.linkedin.description = postData['data[EventSetting][social_settings][linkedin][description]'].trim();\n		if ( _event.social.linkedin.description == '' ) {\n			_event.social.linkedin.description = _event.finetune.social_defaults.linkedin.description;\n		}\n	}\n	// Show/hide of social buttons on the fly\n	if ( typeof postData['data[EventSetting][social_settings][twitter][hide]'] != 'undefined' ) {\n		_event.social.twitter.hide = postData['data[EventSetting][social_settings][twitter][hide]'].trim();\n		if ( _event.social.twitter.hide == '0' ) {\n			$('#social-btn-tw').removeClass('hide');\n		} else if ( _event.social.twitter.hide == '1' ) {\n			$('#social-btn-tw').addClass('hide');\n		}\n	}\n	if ( typeof postData['data[EventSetting][social_settings][facebook][hide]'] != 'undefined' ) {\n		_event.social.facebook.hide = postData['data[EventSetting][social_settings][facebook][hide]'].trim();\n		if ( _event.social.facebook.hide == '0' ) {\n			$('#social-btn-fb').removeClass('hide');\n		} else if ( _event.social.facebook.hide == '1' ) {\n			$('#social-btn-fb').addClass('hide');\n		}\n	}\n	if ( typeof postData['data[EventSetting][social_settings][linkedin][hide]'] != 'undefined' ) {\n		_event.social.linkedin.hide = postData['data[EventSetting][social_settings][linkedin][hide]'].trim();\n		if ( _event.social.linkedin.hide == '0' ) {\n			$('#social-btn-li').removeClass('hide');\n		} else if ( _event.social.linkedin.hide == '1' ) {\n			$('#social-btn-li').addClass('hide');\n		}\n	}\n	if ( typeof postData['data[EventSetting][social_settings][email][hide]'] != 'undefined' ) {\n		_event.social.email.hide = postData['data[EventSetting][social_settings][email][hide]'].trim();\n		if ( _event.social.email.hide == '0' ) {\n			$('#social-btn-email').removeClass('hide');\n		} else if ( _event.social.twitter.hide == '1' ) {\n			$('#social-btn-email').addClass('hide');\n		}\n	}\n\n}\n\nvar tabTimer;\n\nfunction setInnerTabHeight(){\n	/// set DESIGN TAB INNDER HEIGHT\n		$sec = $('#finetune-sections')\n\n		var height = $('#nuTool').outerHeight() - ( $sec.find('.sectionHead:first').outerHeight() )\n\n\n		clearTimeout( tabTimer )\n\n		tabTimer = setTimeout(function(){\n			if( $('.themeContain').get(0).scrollHeight > height + 10  ){\n				// IF IN DESIGNER MODE AND IF DESIGNER TAB IS OVERFLOWING\n				// MAKE DESIGNER MODE TOGGLE GO INLINE\n\n				$('.themeContain').addClass('isScrolling')\n			} else {\n				$('.themeContain').removeClass('isScrolling')\n			}\n\n		}, 50)\n\n		$sec.find('.themeContain:first').css('height', height+'px')\n\n\n}\n\n$('#finetune-layout-contain').on('click', '.layout-ctrl > label', function(){\n		var $t = $(this).parents('.layout-ctrl:first');\n		if( $t.hasClass('open') && !$t.hasClass('link-to-swatch-holder') && !$t.hasClass('link-to-font-holder') ){\n			$t.removeClass('open');\n		} else {\n			$t.addClass('open').siblings('.layout-ctrl:not(.link-to-swatch-holder,.link-to-font-holder)').removeClass('open');\n		}\n})\n\nfunction updateThemeCards(){\n	if(constants.theme_switch){\n		return false;\n	}\n\n	var bgImg = '';\n	var theme_id = constants['theme_id'];\n\n	if( !allThemes[theme_id] ){\n		// IF ALL THEMES ARRAY DOESNT EXIST, USE THEME IMAGE FROM LOAD\n		bgImg = 'url(' + constants.thisThemeImg + ')';\n	} else {\n		// IF ALL THEMES ARRAY EXISTS, USE IT TO CHANGE TO CORRECT IMAGE\n		bgImg = 'url(' + allThemes[ theme_id ].image_url + ')';\n	}\n\n	$(\"#currentThemeCard2\").data('isBound',true).css('background-image', bgImg )\n\n}\n\n\nfunction getTargetById(id){\n	var $target=false;\n	//a function to check what element should be updated, based on which input is being updated.\n	if(id=='header'){\n		return $(\"#splash-container\").find(\"div.event-bg-url:first\");\n	} else if(id=='body'){\n		$target = $(\"#splash-container\").find(\"div.event-body:first\")\n		if($target.length < 1){\n			$target = $(\"#splash-container\");\n		}\n		return $target;\n	}\n\n	if($.inArray(id,['time-font-input','time-align-input','time-font-size-slider','time-color-input',\n		'time-letter-spacing-slider','time-transform-slider','time-text-shadow-input']) >= 0){\n		$target = $(\"#element-when\").find(\".time\");\n	} else if($.inArray(id,['body-text-color','body-bg-color','body-background-repeat','body-background-size','body-background-position','body-background-attachment'])>-1){\n		// $target = $(\"#splash-container\");\n		$target = getTargetById('body');\n	} else if(id=='where-color-input'||id=='venue-size-input'||id=='where-font-input'){\n		$target = $(\"#element-where\").find(\".venue_name\");\n	} else if(id=='body-link-color'){\n		$target = $(\"#main-canvas a,#element-hash\");\n	} else if( $.inArray( id, ['header-bg-color','header-border-color','header-border-width','header-border-radius','header-box-shadow-input','header-shadow-blur-slider','header-box-shadow-color','header-h-shadow-slider','header-v-shadow-slider']) >= 0 ){\n		$target = getTargetById('header');\n	} else if( $.inArray( id, ['canvas-border-width','canvas-border-radius','canvas-border-color','canvas-box-shadow-color']) >= 0 ){\n		$target = $(\"#main-canvas\");\n	} else if(id=='main-1-color-input' || id=='canvas'){\n		$target = $(\"#splash-container, #main-canvas .link-p1-bg, .link-p1-txt, .element-description_text,.element-host\");\n	} else if(id=='main-2-color-input'){\n\n		if( $.inArray( constants.thisTheme, ['st-flyer-v2','st-flyer-v3','st-poster-v2','st-poster-v3'] ) >= 0 ){\n			$target = $(\"#main-canvas\").find(\".element-rsvp:not(.inlineForm),#main-canvas .element-rsvp.inlineForm #rsvp-submit, .link-p2-txt\");\n		} else {\n			$target = $(\"#main-canvas\").find(\".element-rsvp:not(.inlineForm),#main-canvas .element-rsvp.inlineForm #rsvp-submit ,.element-title,.element-subtitle,.link-p2-txt\");\n		}\n\n	} else if(id=='main-3-color-input' || id == 'button'){\n		$target = $(\"#main-canvas .element-rsvp:not(.inlineForm),#main-canvas .element-rsvp.inlineForm #rsvp-submit, #main-canvas .link-p3-bg\");\n	} else if(id=='main-4-color-input'){\n		$target = $(\"#main-canvas a, #main-canvas .element-hash\");\n	} else if(id=='main-5-color-input'){\n		$target = $(\"#main-canvas, #main-canvas .link-canvas-bg\");\n	} else if(id=='primary-font-input'){\n		if(typeof fontSelectors!=='undefined' && fontSelectors.primary!=='undefined'){\n			$target = $(fontSelectors.primary.join(',')+',#main-canvas .font-p1');\n		} else {//fallback. should never be called.\n			//$target = $(\"#main-canvas\").find(\".element-rsvp,.element-title,.element-subtitle,.font-p1\");\n		}\n	} else if(id =='secondary-font-input'){\n		$target = $(fontSelectors.secondary.join(',')+\"#splash-container,#main-canvas .font-p2\");//,.element-description_text\");\n	} else if(id =='legacy-primary-font'){\n		$target = $(fontSelectors.legacyPrimary.join(',')+\",#main-canvas .font-p1\");//,.element-description_text\");\n	} else if( id == 'submit-color-input' || id == 'submit-bg-color-picker' ){\n		$target = $(\"#rsvp-submit, #purchase-button\");\n	}\n\n	return $target;\n}\n\nfunction getBorderProperties($p){//grabs the current border properties and returns in object format.\n	//var styles = formatBorderWidth($p.find(\".bdr-w\").val());\n	var properties = {\n		radius: $p.find(\".bdr-r\").val(),\n		style: $p.find(\".bdr-s\").val(),\n		width: $p.find(\".bdr-w-all\").val(),\n		color: $p.find(\".bdr-color\").val()\n	};\n	return properties;\n}\n\nfunction updateBorderForObject($obj,border){ // {{{\n	if (!border.style) {\n		border.style = 'solid';\n	}\n	$obj.css({\n		'border-color':border['color'],\n		'border-style':border['style'],\n		'border-width':border['width'],\n		'border-radius':border['radius']\n	});\n} // }}}\nfunction updateElementBorder(id,border_obj,forceTrigger){//very useful function.  called to deal with setting all border props on the fly.\n	var w = '0', s='solid', r=border_obj['radius']||'0px', c=border_obj['color']||'#000';\n	if(border_obj['style']){\n\n		s=border_obj['style'];\n	}\n	if(border_obj['width']){\n		w=border_obj['width'].replace('px','');\n	}\n	var width = ''+w+','+s;\n	var wArr = width.split(',');\n	if(wArr.length > 2){//fallback for faulty borders coming through. catches 1,solid,solid, 0,dashed,'', etc.\n		w = wArr[0];\n		width = wArr[0]+','+wArr['1'];\n	}\n\n	$parent = $(\"#\"+id+\"-border-width\").parents('.bdr-contain:first')\n\n	flipDropDown($(\"#\"+id+\"-border-width\"),width,forceTrigger);\n	flipDropDown($(\"#\"+id+\"-border-radius\"),r,forceTrigger)\n	$(\"#\"+id+\"-border-color\").val(c).css('background',c);\n\n	// if( w == '0' ){\n	// 	$parent.addClass('hideColorPkr')\n	// }\n\n	return { 'style':s,'width':w.replace('px','')+'px','color':c,'radius':r };\n}\n\nfunction formatBorderWidth(val,reverse){\n	if(reverse==null){\n		var obj = {};\n		var stwi = (''+val).split(',');\n		obj.wi = stwi.shift()+'px' || '0px';\n		obj.st = stwi.shift() || 'solid';\n		return obj;\n	} else{ //do the opposite!  get it into string format\n		if(typeof val['width']==='undefined'){\n			val['width'] = 0;\n		} else if(val['width'].match(/,/)){//straggler - in the form \"width,style\"\n	        var w = val['width'].split(',');\n			val['width'] = w[0]+'px'||'0px';\n			val['style'] = w[1]||'solid';\n		}\n		var width = val['width'].replace('px','');\n		var style = val['style'];\n		return width+','+style;//ie 0,solid or 4,dashed\n	}\n}\n\nfunction checkIfEmptyBorder($w){\n	if($w.val()=='' || $w.val()=='0' || $w.val()=='0,solid'){\n		return true;\n	} else{\n		return false;\n	}\n}\n\nfunction isValidUrl(str) {\n  var pattern = new RegExp('^(https?:\\\\/\\\\/)?'+ // protocol\n  '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|'+ // domain name\n  '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))'+ // OR ip (v4) address\n  '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*'+ // port and path\n  '(\\\\?[;&a-z\\\\d%_.~+=-]*)?'+ // query string\n  '(\\\\#[-a-z\\\\d_]*)?$','i'); // fragment locator\n  if(!pattern.test(str)) {\n    return false;\n  } else {\n    return true;\n  }\n}\n\nfunction toggleElementHide($obj,params){\n\n	if(typeof params.force!=='undefined' && params.force==true){\n		$obj.val(params.val).addClass('changes-made').toggleAccordion(true);//trigger('change');//set to 0 or 1 AND trigger change.\n		return;\n	} else {\n		$obj.val(params.val);//set to 0 or 1.\n	}\n\n	var $target = $(\"#\"+$obj.attr(\"target\"));\n	var $p = (params.inner ==null)?$obj.parents(\".mainCard\"):$obj.parents(\".content-inner:first\");\n	if (params.val == '1') {\n		$p.addClass('is-hidden');\n		$obj.parent().addClass('is-hidden');\n		if(typeof $target !== 'undefined'){\n			$target.hide();\n		}\n	} else {\n		$p.removeClass('is-hidden');\n		$obj.parent().removeClass('is-hidden').parents(\".content-inner:first\").removeClass('is-hidden');\n		if(typeof $target !== 'undefined'){\n			$target.show();\n		}\n	} // }}}\n}\n\n// Section Hiding // {{{\n\n$(\"#finetune-layout-contain\").on('click','.hide-sec-btn',function(){\n	var $ftgroup = $(this).parents(\".ft-grp:first\");\n	var $liveGroup = ftGetLayoutGrp($ftgroup);\n	var grp = ftGetGrp($ftgroup);\n	if(typeof grp.styles=='undefined'){grp.styles={};}\n	if(grp['styles']['hidden'] && grp['styles']['hidden']==1){\n		var val = 0;\n	} else {\n		var val = 1;\n	}\n\n	hideGroup($liveGroup,val);\n})\n\n$('#finetune-layout-contain').on('click', '.section .hideSecOpt', function(){\n\n		$thisText = $(this).find('.hideText')\n\n		if( $thisText.text() == 'Hide Section' ){\n			$thisText.text('Show Section')\n		} else {\n			$thisText.text('Hide Section')\n		}\n	})\n\n\nfunction getShadow($p){\n	var $input = $p.find(\"input.shadow-input:first\");\n	if($input.hasClass('box-shadow')){\n		var x = $p.find(\"input.h-shadow\").val().replace('px','')+'px',\n			y = $p.find(\"input.v-shadow\").val().replace('px','')+'px',\n			b = $p.find(\"input.shadow-blur\").val().replace('px','')+'px';\n	}\n	else{\n		var x = $p.find(\"input.text-shadow-x\").val().replace('px','')+'px',\n			y = $p.find(\"input.text-shadow-y\").val().replace('px','')+'px',\n			b = $p.find(\"input.text-shadow-blur\").val().replace('px','')+'px';\n	}\n	var c = $p.find(\"input.shadow-color\").val();\n	if(c==''||c=='undefined'){ c='#000'; }\n	//if(x=='0px'&&y=='0px'&&b=='0px'){\n	//	return 'none';\n	//} else{\n		return x+' '+y+' '+b+' '+c;\n	//}\n}\n\nfunction updateShadow(id,shadow,boxShadowPicker,prefix){\n	if(typeof id=='object'){\n		var $t = id;\n	} else{\n		var $t = $(\"#\"+id);\n	}\n\n	var $p = $t.parents(\"div.shadow-picker:first\");\n		x=0,y = 0,b=0,c='#000',$sToggle = $p.find(\"input.shadow-toggle:first\");\n	if(shadow=='none'||shadow==''||typeof shadow=='undefined'||typeof shadow=='Array'||typeof shadow=='object'){\n		shadow='0px 0px 0px #000';\n		//shadow='none';\n	}\n\n	var parts = shadow.split(' ');//in expected format \"x-offset y-offset blur color\"\n	if(parts.length > 1){\n		x = parts[0].replace('px',''),\n		y = parts[1].replace('px',''),\n		b = parts[2].replace('px','');\n		c = '';\n		for(var i = 3;i<parts.length;i++){//this loop is needed as color could be in hex, rgb or rgba format.\n			if(parts[i].trim()!=''){\n				c+=parts[i];\n			}\n		}\n	}\n\n	if(boxShadowPicker!=null){\n		var s1 = $p.find(\"input.h-shadow:first\"),\n			s2 = $p.find(\"input.v-shadow:first\"),\n			s3 = $p.find(\"input.shadow-blur:first\");\n	} else{\n		var s1 = $p.find(\"input.text-shadow-x:first\"),\n			s2 = $p.find(\"input.text-shadow-y:first\"),\n			s3 = $p.find(\"input.text-shadow-blur:first\");\n	}\n\n	updateSliderValue(s1,x);\n	updateSliderValue(s2,y);\n	updateSliderValue(s3,b);\n\n	$p.find(\"input.shadow-color:first\").val(c).css('background-color',c);\n	if($t.hasClass('shadow-input')){//should always be the case.\n		$t.val(shadow);\n		var val = 1;\n		if(shadow==''||shadow.match(/0px 0px 0px/g)){//shadow=='0px 0px 0px #000'||shadow=='rgb(0, 0, 0) 0px 0px 0px'){\n			val = 0;\n		}\n		setCheck($sToggle,val);\n	}\n\n}\n\nfunction updateSliderValue($id,value,force){\n	if($.inArray(value,['none','inherit','auto','normal','NaN'])>-1){\n		$id.val(0);\n		return;//just dont replace it.\n	} else if(value=='undefined'||typeof value=='undefined'){\n		value = '0';\n	} else if(value=='100%'){\n		var max = $id.attr(\"max\")||'100',\n			$slider = $id.val(max).parents(\"div.slider-wrap:first\"),\n			$sliderInput = $slider.find(\"div.slider:first\");\n\n		if($sliderInput.hasClass('bound')){\n			$sliderInput.slider(\"value\",max);\n		} else{\n			$sliderInput.attr(\"tmp-val\",max);\n		}\n		return;\n	} else if(value=='autosize'){\n		var min = $id.attr(\"min\")||'0';\n		//ideally, this would be setting the value of the input to 'autosize' and not '0.1',\n		//but apparently the slider can't handle that.  breaks the slider functionality.\n		var $slider = $id.val(min).parents(\"div.slider-wrap:first\");\n		var $sliderInput = $slider.find(\"div.slider:first\");\n		if($sliderInput.hasClass('bound')){\n			$sliderInput.slider(\"value\",min);\n		} else{\n			$sliderInput.attr(\"tmp-val\",min);\n		}\n		return;\n	}\n\n\n	var m = $id.attr(\"unit\")||'px',\n		rep = (!isNaN(value))?value+m:value;\n\n	$id.val(rep);\n	value = (''+value).replace('px','');//just because its still giving us trouble.\n	var $slider = $id.parents(\"div.slider-wrap:first\");\n	if ($slider.length == 1) {\n		var $sliderInput = $slider.find(\"div.slider:first\");\n		if($sliderInput.hasClass('bound')){//if already bound, then no problem.\n			//$slider.find(\"input.sliderInput\").val(rep);\n			$sliderInput.slider(\"value\",(''+value).replace(m,''));\n		} else{\n			//$slider.find(\"input.sliderInput\").val(rep);\n			$sliderInput.attr(\"tmp-val\",(''+value).replace(m,''));\n		}\n	}\n}\n\nfunction updateInputValue($input,value,force){\n	if($.inArray(value,['none','inherit','normal','NaN'])>-1){\n		$input.val(0);\n	} else {\n		var unit = value.replace(/[0-9]/g,'');//strip out units, if applicable.\n		if(unit.trim()!=''){\n			var $unitdd = $input.parent().find(\".unit-dropdown:first\");\n			if($unitdd.length > 0){\n				flipDropDown($unitdd,unit);\n				$input.attr('unit',unit).removeAttr('no-unit');\n			}\n		}\n		value = value.replace(/[^0-9.]/g,'');//strip non-numeric characters, but allow decimals.\n		$input.val(value);\n	}\n\n}\n\n\nfunction updateAlignPicker(id,value,triggerChange){\n	var $input = $(\"#\"+id);\n	if($input.length > 0){\n		$input.val(value).parents(\".align-contain:first\")\n			.find(\".align-picker[value=\"+value+\"]\").addClass('active').siblings().removeClass('active');\n		if(triggerChange!=null){\n			$input.trigger('change');\n		}\n	}\n}\n\nfunction bindSlider($obj,force){\n	if(typeof $obj=='undefined'){ return false; }\n	else if($obj.hasClass('bound')){ return false; } //already bound.\n	var $p = $obj.parents(\".slider-wrap:first\");\n	var $t = $p.find(\".slider:first\");\n	var $ls = $p.find(\"input:first\");//could potentially be 2 inputs.\n	var m = ($ls.attr(\"unit\"))?$ls.attr(\"unit\"):'px';//unit measurement.  could be px, em, etc.\n	//var m = 'px';//hardcoded for now.  not working for em...yet.\n	var step = (m=='em')?0.01:1;\n	if($ls.attr(\"step\")){\n		step=$ls.attr(\"step\")*1;\n	}\n	var orientation = ($ls.hasClass('font-size'))?'vertical':'horizontal';\n	var $text_indent = $p.find(\"input.text-indent\");\n	if($ls.attr(\"tmp-val\")){\n		$ls.val($ls.attr(\"tmp-val\"));\n		$ls.removeAttr(\"tmp-val\");\n	}\n	$t.addClass('bound').slider({\n		min:$ls.attr(\"min\")*1,\n		max:$ls.attr(\"max\")*1,\n		range:'min',\n		step:step,\n		orientation: orientation,\n		value: ($ls.val()&&$ls.val()!='')?$ls.val().replace(m,''):14,\n		slide: function(event,ui){\n			//$p.find(\"input.sliderInput\").val(ui.value+m);//.display\").text(ui.value+m);\n			$ls.val(ui.value+m).trigger('change');\n			if($text_indent.length>0){\n				$text_indent.val(ui.value+m).trigger('change');\n			}\n		},\n		stop: function(){\n			setChangesMade();\n		}\n	});\n\n	$obj.addClass('bound');\n	// if(force!=null){\n	// 	var current = $t.slider(\"option\",\"value\");\n	// 	$t.slider(\"option\",\"value\",current+step);\n	// }\n}\n\nfunction updateColorPicker(id,value,triggerChange){\n	var $id = $(\"#\"+id);\n	if($id.length>0){\n		if(value=='inherit'){\n			value='rgba(0,0,0,0)';\n		}\n		$id.val(value).css('background',value);\n		if(triggerChange!=null){\n			$id.addClass('changes-made');\n		}\n	}\n}\n\nfunction toggleBackgroundOptions($input,triggerChange){//this thing flips the background options div and shows the subsequent values.\n	var $parent = $input.parents(\".uiChooser:first\");\n	$parent.removeClass('is-color is-image is-none').addClass('is-'+$input.val())\n		.find(\"div.header-bg-content\").hide().end()\n		.find(\"div.header-bg-content[type='\"+$input.val()+\"']:first\").show();\n	if(triggerChange!=null){\n	 	if($input.val()=='image'){\n			var currentBg = $parent.find(\".currentBackground:first\").css('background-image');\n			if(typeof currentBg==='undefined'||currentBg==''||currentBg.match(/empty-bg/)){\n				setTimeout(function(){\n					$parent.find(\".currentBackground:first\").click();\n				},0);\n			}\n		}\n	}\n}\n\nfunction chooseBgPosition($input,value,triggerChange){\n	if(triggerChange!=null){\n		$input.val(value).addClass('changes-made').trigger('change');\n	} else {\n		$input.val(value);\n	}\n	var $square = $input.parents(\"div.squarePosWrap:first\").find(\"div.squarePos[pos='\"+value+\"']:first\");\n	if($square.length > 0){\n		$square.addClass('selected').siblings().removeClass('selected');\n	}\n}\n\nfunction hideHeader($target){\n	//this is called when background type of 'none' is chosen. hide the header by default.\n	updateColorPicker(\"header-bg-color\",'none',true);\n	// $(\"#header-height-slider\").val(0).addClass('changes-made');\n	// $(\"#header-min-height-slider\").val(0).addClass('changes-made');\n	//updateElementBorder(\"header\",{},true);//empty out the border.\n	//updateBorderForObject($target,{});\n	$target.css({\n		'background-image':'none','background':'none','height':'auto','border':0\n	});\n}\n\nfunction updateHeaderCoords(id,$obj){\n	var p = { top:$obj.position().top,left:$obj.position().left };\n	$(\"#\"+id+'-position-top').val(p['top']+'px').trigger('change');\n	$(\"#\"+id+'-position-left').val(p['left']+'px').trigger('change');\n	setChangesMade();\n}\n\nfunction isPrivateEvent(){\n	if($.inArray($(\"#private-type-input\").val(),['all','when_where_rsvp'])>-1){\n		return true;\n	} else{\n		return false;\n	}\n}\n\n//Modified the function from SOURCE: http://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport\nfunction elementInViewport(el) {\n	if(typeof el==='undefined'||el==null|| typeof el.offset == 'undefined' ||typeof el.offset()==='undefined'||el.offset()==null){\n		return true;//ironic, but we never want to scroll if the element doesn't exist, so 'true' is the answer we want.\n 	}\n\n	var top = el.offset().top;\n	var height = el.outerHeight(true);\n	return (\n		top < (window.pageYOffset + window.innerHeight) &&\n		(top + height) > window.pageYOffset //&&\n	);\n}\n\nfunction getSectionByElement(element){\n	var params = { chunk: false, section: false, fontsOrStyles: false };\n\n	if (element == 'description_text') {\n		params.chunk = 'design';\n		params.section = '#description_text_theme_styles'\n	}\n	else if (element == 'host') {\n		params.chunk = 'design';\n		params.section = '#host_theme_styles';\n	}\n	else if (element == 'legal-language') {\n		params.chunk = 'design';\n		params.section = '#button_theme_styles';\n		//params.fontsOrStyles = 'styles';\n		params.advChange = 'open';\n	}\n	else if (element == 'rsvp') {\n		params.chunk = 'design';\n		params.section = '#buttonTabHead';\n	}\n	else if (element == 'attendees') {\n		params.chunk = 'design';\n		params.section = '#buttonTabHead';\n		params.advChange = 'open';\n	}\n	else if (element == 'title') {\n		params.chunk = 'design';\n		params.section = '#title_theme_styles';\n	}\n	else if (element == 'subtitle') {\n		params.chunk = 'design';\n		params.section = '#subtitle_theme_styles';\n	}\n	else if ( $.inArray(element,['when','when-year','when-month','when-day','when-dow','when-time',\n	'when-end-year','when-end-month','when-end-day','when-end-dow','when-end-time','when-tbd']) > - 1 )\n	{\n		params.chunk = 'design';\n		params.section = '#when_theme_styles';\n		params.subsection = 'element-subtitle';\n		params.fontsOrStyles = 'styles';\n	}\n	else if ($.inArray(element,['where','where-venue','where-address','where-city','where-state',\n		'where-zip','when-tbd']) > -1 ){\n		params.chunk = 'design';\n		params.section = '#where_theme_styles';\n		params.fontsOrStyles = 'styles';\n	}\n	else if (element == 'social-links') {\n		params.chunk = 'design';\n		params.section = '#share-buttons';\n		params.subsection = 'element-social-links';\n	}\n	else if (element == 'hash') {\n		params.chunk = 'design';\n		params.section = '#hash_theme_styles';\n		params.subsection = 'element-hash';\n	}\n	return params;\n}\n\nfunction updateMainCanvasCClasses() {\n	var func = function(className,n) {\n		var classes = className.replace(/\\s\\s*/g,' ').split(/ /);\n		for (var i in classes) {\n			if ((''+classes[i]).match(/^c[0-9][0-9]*/)) {\n				classes[i] = 'c'+n;\n			}\n		}\n		return classes.join(' ');\n	}\n	var $mc = $('#main-canvas');\n	$mc.find('.layoutGrp').each(function(){\n		var $lg = $(this);\n		var n = $lg.find('> .layoutGrp:visible').length;\n		$lg[0].className = func($lg[0].className,n);\n	});\n	$mc.find('.element .children').each(function(){\n		var $c = $(this);\n		var n = $c.find('> .sf:visible').length;\n		$c[0].className = func($c[0].className,n);\n	});\n\n//	hideShowSortBtn()\n	//updateFinetuneSectionCountDisplay();\n}\nfunction updateFLCxN(){\n	// this bit updates the x1, x2, x3, etc.. classes for the nesting styles\n	var func = function(className,x) {\n		var classes = className.replace(/\\s\\s*/g,' ').split(/ /);\n		var joy = false;\n		for (var i in classes) {\n			if ((''+classes[i]).match(/^x[0-9][0-9]*/)) {\n				classes[i] = 'x'+x;\n				joy = true;\n			}\n		}\n		if (!joy) { classes.push('x'+x); }\n		return classes.join(' ');\n	}\n	var recur = function($parent,x) {\n		$parent.find('> .ft-grp').each(function(){\n			var $t = $(this);\n			$t[0].className = func($t[0].className,x);\n			recur($t,x+1);\n		});\n	}\n	var $ftc = $('#finetune-layout-contain');\n	recur($ftc,1);\n}\n\nfunction checkForScroll(){\n	var thisHeight = $('#basicsTabWrap').outerHeight() + $('#buttonTabWrap').outerHeight() + $('#sectionTabWrap').outerHeight()\n	var containHeight = $('#allSectionsContain').outerHeight() - 10\n\n	var scrollPos = $('#allSectionsContain').scrollTop()\n\n	if( containHeight < thisHeight &&  scrollPos > 3 ){\n		$('#sections-wrap').addClass('containIsScrolling')\n	} else {\n		$('#sections-wrap').removeClass('containIsScrolling')\n	}\n\n}\n\n$('#allSectionsContain').on('scroll', function(){\n	checkForScroll()\n})\n\nfunction checkPaneSectionHeight(){\n\n	var $accordion = $(\"#finetune-layout-contain\").find(\".section.open .accordion:first\");\n	var $asc = $('#allSectionsContain');\n	var $elementsContain = $('#elementsContain');\n\n	var h = windowHeight - bottomUtilHeight;\n\n	$elementsContain.css('top','0px');\n\n	h -= $('#elementsHeader').outerHeight();\n	h -= $('#topBodyContain').outerHeight();\n	h -= 35; // margins...\n	//var sectionHeight = h - 280\n\n	$asc.css('height', h+'px')\n\n\n	innerHeight = $('#finetune-layout-contain').outerHeight() + $('#buttonTabWrap').outerHeight() + $('#basicsTabWrap').outerHeight() + $('#addReorderTools').outerHeight()\n\n	if ( innerHeight > h ){\n		$('#finetune-block').addClass('isScrolling')\n	} else {\n		$('#finetune-block').removeClass('isScrolling')\n	}\n\n	blockCount = $('#finetune-layout-contain').find('.master_group').find('.section:not(.adminBlock):not(.hide)').length\n\n	if( blockCount > 0 ){\n		$('#finetune-layout-contain').find('.master_group').removeClass('hide')\n	}\n\n	checkForScroll()\n\n}\n\n\nfunction updateFinetuneSectionCountDisplay(){\n	var count = $('#finetune-layout-contain').find('.ele-wrapper:not(.adminBlock)').length;\n	$('#finetune-section-count-display').html(count);\n\n	if(count == 0){\n		$('#sectionTabWrap').removeClass('open').addClass('empty')\n		$('#inline-reorder-init').addClass('hideReorderBtn')\n		// $('#addSecBtn').addClass('emptySec')\n	} else if (count == 1 ){\n		$('#sectionTabWrap').removeClass('empty')\n		// $('#addSecBtn').addClass('emptySec')\n		$('#inline-reorder-init').addClass('hideReorderBtn')\n	} else if (count > 1) {\n		$('#sectionTabWrap').removeClass('empty')\n		//$('#addSecBtn').removeClass('emptySec')\n		$('#inline-reorder-init').removeClass('hideReorderBtn')\n	}\n\n	checkPaneSectionHeight()\n\n}\n\nfunction hideShowSortBtn(){\n	var count = $('#finetune-layout-contain').find('.ele-wrapper:not(.adminBlock),').length;\n	if(count <= 1){\n		$('#inline-reorder-init').hide()\n	} else {\n		$('#inline-reorder-init').show()\n	}\n}\n\n$.fn.openAccordion = function(){\n	var $section = $(this);\n	if( $section.hasClass('noContent') || $section.hasClass('is-hidden') ){ //nothing to open. simply close the siblings.\n		$section.siblings().each(function(){ $(this).closeAccordion(); });\n	} else { //normal use-case. open this section and close it's siblings.\n		$section.addClass('expanded').css('overflow','visible').siblings().each(function(){ $(this).closeAccordion(); });\n	}\n\n}\n\n$.fn.closeAccordion = function(args){\n	//$(this).find(\".content-trigger.open\").click();//close any advanced options.\n	$(this).removeClass('expanded').css('overflow','hidden');\n}\n\nfunction getTargetFromObject($obj){\n	var target_id = $obj.attr(\"target\");\n	if(typeof target_id!=='undefined'){\n			var $target = $(\"#\"+target_id).parents(\".layoutGrp:first\");\n		if($target.length < 1){\n			$target = $(\".\"+target_id);\n		}\n		if($target.length > 0){\n			// if($target.length > 1){\n			// 	return $target[0];\n			// } else{\n			return $target;\n				//}\n		} else{\n			return false;\n		}\n	}else{\n		return false;\n	}\n}\n\n// this updates the myriad split out when-xxxx elements\nfunction updateSplitWhenBlocks(params) {\n	// same month/day logic\n	var start = getDateObj(params.start);\n	var end = (params.end) ? getDateObj(params.end) : false;\n	$('body').removeClass('date-tbd event-has-end-time sesm sesd mult-day');\n	var bodyClasses = [];\n	if (start == false && params.start == 'TBD') {\n		bodyClasses.push('date-tbd');\n	}\n	else {\n		if (params.hide_end_date && params.hide_end_date == true) {\n		} else {\n			bodyClasses.push('event-has-end-time');\n			// same year\n			if (start && end && start.getFullYear() == end.getFullYear()) {\n				// same month\n				if (start && end && start.getMonth() == end.getMonth()) {\n					bodyClasses.push('sesm');\n					// same day\n					if (start && end && start.getDate() == end.getDate()) {\n						bodyClasses.push('sesd');\n					}\n				}\n			} else if( start && end && start.getFullYear() !== end.getFullYear() ){\n				// DIFFRERNET YEAR\n				bodyClasses.push('dif-year');\n			}\n			// duration > 24 hours - mult-day\n			if (end.getTime() - start.getTime() > (60*60*24*1000)) {\n				bodyClasses.push('mult-day');\n			}\n		}\n	}\n\n	// zero indexed\n	var dispMonths = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n	 	dispMonthsShort = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n	 	dispDows = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n	 	dispDowsShort = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n		// st, nd, rd, th\n\n	var getGroupMode = function($ele) {\n		if(typeof $ele!=='undefined'){\n			var $lg = $ele.parents('.layoutGrp:first');\n			if ($lg.length == 1) {\n				var $sec = $('#ft'+$lg.attr('id'));\n				var grp = ftGetGrp($sec);\n				if (grp && grp.mode) {\n					return grp.mode;\n				}\n			}\n		}\n		return false;\n	}\n\n	var modifyOnPageWhens = function(mode,dateObj) {\n		var $year = (mode=='start') ? $('#element-when-year') : $('#element-when-end-year');\n		if ($year.length == 1) {\n			var disp = dateObj.getFullYear();\n			var gmode = getGroupMode($year);\n			if (gmode && gmode == 'short') {\n				disp = (''+dateObj.getFullYear()).substr(2);\n			}\n			$year.find('.date .year').html(disp);\n		}\n		var $month = (mode=='start') ? $('#element-when-month') : $('#element-when-end-month');\n		if ($month.length == 1) {\n			var disp = dispMonths[dateObj.getMonth()];\n			var gmode = getGroupMode($month);\n			if (gmode && gmode == 'short') {\n				disp = dispMonthsShort[dateObj.getMonth()];\n			}\n			$month.find('.date .month').html(disp);\n		}\n		var $day = (mode=='start') ? $('#element-when-day') : $('#element-when-end-day');\n		if ($day.length > 0) {\n			var disp = dateObj.getDate();\n			var gmode = getGroupMode($month);\n			if (gmode == 'short') {\n				if (disp=='2'||disp=='22'){\n					disp+='nd';\n				} else if (disp=='3'||disp=='23'){\n					disp+='rd';\n				} else if (disp=='1'||disp=='21'||disp=='31'){\n					disp+='st';\n				} else {\n					disp+='th';\n				}\n			}\n			$day.find('.date .day').html(disp);\n			if (mode == 'end') {\n				var $day = $('#element-when-day');\n				$day.find('.date.end .day').html(disp);\n			}\n\n		}\n		var $dow = (mode=='start') ? $('#element-when-dow') : $('#element-when-end-dow');\n		if ($dow.length > 0) {\n			var disp = dispDows[dateObj.getDay()];\n			var gmode = getGroupMode($month);\n			if (gmode && gmode == 'short') {\n				disp = dispDowsShort[dateObj.getDay()];\n			}\n			$dow.find('.date .dow').html(disp);\n			if (mode == 'end') {\n				var $dow = $('#element-when-dow');\n				$dow.find('.date.end .dow').html(disp);\n			}\n		}\n		var $time = (mode=='start') ? $('#element-when-time') : $('#element-when-end-time');\n		if ($time.length > 0) {\n			var meridian = 'am';\n			var hour = dateObj.getHours();\n			if (hour > 12) {\n				hour -= 12;\n				meridian = 'pm';\n			} else if (hour == 12) {//12 is a tricky one.  AM vs PM extra check below.\n				meridian = 'pm';\n			} else if (hour == 0) {\n				hour = 12;\n			}\n\n			var minute = ('00'+dateObj.getMinutes()).slice(-2);\n			var $contain = $time.find('.time');\n			$contain.find('.hour span').html(hour);\n			$contain.find('.minute span').html(minute);\n			$contain.find('.meridian span').html(meridian);\n			//.time[h|i|a]\n			$contain.attr({\n				'h': ('00'+dateObj.getHours()).slice(-2),\n				'i': minute,\n				'a': meridian\n			});\n			$contain.attr('i', minute);\n			$contain.attr('a', meridian);\n			if (mode == 'end') {\n				var $time = $('#element-when-time');\n				var $contain = $time.find('.time.end');\n				$contain.find('.hour span').html(hour);\n				$contain.find('.minute span').html(minute);\n				$contain.find('.meridian span').html(meridian);\n				//.time[h|i|a]\n				$contain.attr({\n					'h': ('00'+dateObj.getHours()).slice(-2),\n					'i': minute,\n					'a': meridian\n				});\n			}\n		}\n\n		// execute callback function, for custom JS formatting of the date (eg: setting day of the week)\n		if ( typeof customAfterUpdatingWhens == 'function' ) {\n			customAfterUpdatingWhens(mode,dateObj);\n		}\n	};\n\n	// always call start before end\n	if (start !== false) {\n		modifyOnPageWhens('start',start);\n	}\n	if (end !== false) {\n		modifyOnPageWhens('end',end);\n	}\n\n\n	$('body').addClass(bodyClasses.join(' '));\n}\nfunction getDateObj(date)\n{ // {{{\n	if (date &&\n		date.date && (''+date.date).match(/[0-9]{2}\\/[0-9]{2}\\/[0-9]{2}/i) &&\n		date.time && (''+date.time).match(/[0-9]{1,2}:[0-9]{2}a|pm/i)\n	) {\n		// date.date = MM/DD/YY => 12/01/13 for december 1st 2013\n		// date.time = h:mmpm => 10:30pm | 9:30am | 8:00am\n		// build the mysql datetime string\n		var datetimeString = ''\n		// date\n		var parts = (''+date.date).split('/');\n		datetimeString += ((''+parts[2]).length == 2) ? '20'+parts[2] : parts[2];\n		datetimeString += '-'+parts[0];\n		datetimeString += '-'+parts[1];\n		datetimeString += ' ';\n		// time\n		var parts = (''+date.time).split(':');\n		var hour = ((''+parts[0]).length == 1) ? '0'+parts[0] : parts[0];\n		var minute = (''+parts[1]).replace(/[^0-9]*/g,'');\n		if (parts[1].match(/pm/i) && parseInt(hour) < 12) {\n			hour = parseInt(hour) + 12\n		} else if (parts[1].match(/am/i) && parseInt(hour) >= 12) {\n			hour = parseInt(hour) - 12\n		}\n		datetimeString += ((''+hour).length == 1) ? '0'+hour : hour;\n		datetimeString += ':';\n		datetimeString += ((''+minute).length == 1) ? '0'+minute : minute;\n		datetimeString += ':00';\n\n		// build a javascript Date object\n		var parts = (''+datetimeString).split(/ |-|:/);\n		var dateObj = new Date(parseInt(parts[0]),parseInt(parts[1])-1,parseInt(parts[2]),parseInt(parts[3]),parseInt(parts[4]),parseInt(parts[5]));\n		return dateObj;\n	}\n	return false;\n} // }}}\n\nfunction resetHeaderCoords(){\n	var $blocks = $(\"#main-canvas\").find(\".element-title,.element-subtitle\");\n	$blocks.addClass('trans01');\n	setTimeout(function(){\n		$blocks.removeClass('abs').css('left',\"\").css('top',\"\");\n		var $title_block = $(\"#finetune-all-tools\").find(\".accordion[section-name='title']:first\");\n		var $subtitle_block = $(\"#finetune-all-tools\").find(\".accordion[section-name='subtitle']:first\");\n		updateBlockClasses($title_block,'abs',true);\n		updateBlockClasses($subtitle_block,'abs',true);\n\n		setTimeout(function(){\n			$blocks.removeClass('trans01');\n		},1000);\n	},100);\n	$(\"#title-position-left,#title-position-top,#subtitle-position-left,#subtitle-position-top\").val('').addClass('changes-made');\n}\n\nfunction editNavBlock($grp){//takes a $grp as an argument and poulates the nav embed modal accordingly.\n	var options = '<div class=\"option\" value=\"\">Select Target</div>';\n	var optionsModal = '<div class=\"option\" value=\"\">Select Modal</div>';\n	var $nav_embed = $(\"#nav-embed\");\n	var $sf = $grp.find(\".sf:first\");\n	var block_type = $sf.attr('block-type');//ie nav or button.\n	$nav_embed.attr( { \"sfid\":$sf.prop('id'), 'block-type': block_type });\n\n	var $dd = $nav_embed.find(\"div.nav-link-target-dd\");\n	$dd.find(\"div.options\").empty();//clear out the dropdown of links.\n\n	var $ddd = $nav_embed.find(\"div.nav-modal-target-dd\");\n	$ddd.find(\"div.options\").empty();//clear out the dropdown of links.\n\n	//loop through the elements on the right-hand side of page and repopulate the dropdown of viable targets.\n	var matches = [];\n	var matchesModal = [];\n	$(\"#finetune-layout-contain\").find(\".ft-grp\").each(function(){\n		var $t = $(this);\n		var gid = $t.attr('id').replace('ftg-','g-')\n\n		if($t.attr(\"group-type\")!=='undefined'){\n			var $element = $t.find(\".element:first\");\n			var sfid = $element.attr(\"e\");//should be in format custom-block-$id\n			if(typeof sfid!=='undefined'){\n				if( sfid.match(/custom-block/) && ! $element.text().match(/^nav$/i) ){//no need for nav in here.\n					var id = sfid.replace('custom-block-','');\n					if( $.inArray(id,matches) < 0 && $element.text()!='undefined' ){//make sure we're not adding dupes/empty groups to the array.\n						options+='<div class=\"option\" value=\"to'+id+'\">'+$element.text().substring(0,50)+'</div>';\n						matches.push(id);\n					}\n				}\n			}\n		}\n		///check for modals\n		if($(\"#\"+gid).attr(\"modalid\")) {\n			var id = $(\"#\"+gid).attr('modalId');\n			//var id = $element.context.attributes[5].value;\n				if( $.inArray(id,matchesModal) < 0){//make sure we're not adding dupes to the array.\n					optionsModal+='<div class=\"option\" value=\"'+id+'\">Modal '+id+'</div>';\n					matchesModal.push(id);\n				}\n		}\n\n	});\n	if($(\"#togallery\").length > 0){\n		options+='<div class=\"option\" value=\"togallery\">Gallery</div>';\n	}\n\n	$dd.data('splash-dropdown',false)\n		.find(\".current\").text('Select Target').end()\n		.find(\"div.options\").append(options);//unbind the dropdown and repopulate\n	$nav_embed.find(\"li.navLi\").remove();\n\n	$ddd.data('splash-dropdown',false)\n		.find(\".current\").text('Select Modal').end()\n		.find(\"div.options\").append(optionsModal);//unbind the dropdown and repopulate\n\n	if($grp!=null){\n		var button = false;\n		if(block_type=='button'){ //special case for button\n			var $selector = $sf;//only 1!\n			button = true;\n			linkingModal.grabBtnText($sf.find(\".button-link\"));\n		} else {\n			var $selector = $grp.find(\".nav-item\");\n		}\n\n		$selector.each(function(){\n			var $t = $(this);\n			var $new_row = $(\"#blankNavItemRow\").clone().removeClass('hide').removeAttr(\"id\");\n			if(button){\n				$new_row.addClass('navLi').attr(\"sfid\",$t.prop(\"id\")).find(\"input.nav-name\").val($t.find('.button-link').text().trim());\n			} else {\n				$new_row.addClass('navLi').attr(\"sfid\",$t.prop(\"id\")).find(\"input.nav-name\").val($t.find(\".body\").text().trim());\n			}\n			if(button){\n				var $a = $t.find(\".button-link:first\");///linki s the button\n			} else {\n				var $a = $t.find(\"a:first\");//see if there's a link.\n			}\n			if($a.length > 0){\n				var $link = $a.prop(\"href\").split('#');//get everything after the hash.\n				if($link.length > 1){\n					//delete($link[0]);\n					var type = 'section';\n					var $link = $link[1].toLowerCase();\n					if($link=='rsvp' || $link=='button'){\n						type = 'rsvp';\n					} else if ($link == 'top' || $link == 'event'){\n						type = 'top';\n					} else if ($link=='custom-content'){\n						type = 'custom-content';\n					} else if($link=='guest-list'){\n						type = 'guest-list';\n					}\n\n					$new_row.find(\"input.external-link\").val('');\n\n				} else{\n					var type = 'external'\n					$link = $link[0];//assume external link.\n					if($link.trim()!=''){\n						//flipDropDown($new_row.find(\"div.nav-action-dropdown\"),'external',true);\n						$new_row.find(\"input.external-link\").val($a.prop(\"href\"));\n					}\n				}\n			}\n\n			$(\"#nav-items-list\").append($new_row);\n			setTimeout(function(){\n				flipDropDown($new_row.find(\"div.nav-action-dropdown\"),type,true);\n				flipDropDown($new_row.find(\"div.nav-link-target-dd\"),$link);\n				flipDropDown($new_row.find(\"div.nav-modal-target-dd\"),$link);\n			},0);\n		});\n	}\n	setTimeout(function(){\n		if($nav_embed.find(\"li.navLi\").length < 1){\n			addNewNavItem();\n		}\n	},0);\n	$nav_embed.fireSimpleModal();\n	return false;\n\n\n}\n\nfunction addNewListItem($p,returnObject){\n	var block_type = $p.attr(\"block-type\");\n\n	if($p.hasClass('ticker') && ! $p.hasClass('editingTicker')){\n		$p.addClass('editingTicker').removeClass('active').find('.ticker-item').show().css('position', 'relative')\n		$(this).removeClass('editTicker').html('<span class=\"bigger em1\">&#10010;</span><small class=\"block\">ADD ITEM</small>')\n		$p.prepend('<div class=\"doneEditingTicker nu-btn m clean\">Done</div>');\n		if($p.hasClass('scrollBlock')){\n			$p.find('.children').stop().clearQueue()\n			$p.find('.children:last').remove().end().find('.children:last').remove()\n		}\n\n	} else {\n		var $child_nest = $p.find(\".children:first\");\n		if($child_nest.length > 0){ //append to child nest if applicable.\n			var cloned=false;\n\n			var $last_item = $child_nest.find(\".list-item:last\");\n\n			if ( block_type == 'event-hub' ) {\n\n				$new_item = $p.find('.template-hub-item').clone().removeClass('template-hub-item').addClass('event-hub-item').addClass('list-item');\n\n			} else if($last_item.length > 0){\n				cloned=true;\n				var $new_item = $last_item.clone();\n				$new_item.find(\"div.edit-tools\").remove();\n			} else {\n				if(block_type=='list'){//special case. every block has list. so need to further specify with this one.\n					var $new_item = $(\"#blank-groups\").find(\".sf[block-type=\"+block_type+\"]:first\").find(\".list-item:first\").clone();\n				} else {\n					var $new_item = $(\"#blank-groups\").find(\".sf.\"+block_type+\":first\").find(\".list-item:first\").clone();\n				}\n			}\n\n			//finetuneDeActivateEditable($new_item);\n			$new_item.find('.crp-enabled').removeClass('crp-enabled').end().find(\".editable\").removeClass('editable hasTiny');\n			$new_item.removeClass(\"tp-enabled\").removeAttr(\"id\").find(\".editable\").each(function(){\n				finetuneDeActivateEditable($(this));\n			});\n			//removeClass('editable hasTiny').removeAttr(\"id\");//remove editable so it gets bound again.\n\n			var group_id = $p.parents(\".layoutGrp:first\").prop(\"id\");//should be in format 'g-$groupnumber';\n			var $acc = ftGetAccordion(group_id);//now find the corresponding accordion for this group so we can assign the proper mode for this new item.\n			//assuming we get in, grab the mode of this block so we can apply it to the new item.\n			var options = {};\n			$new_item.addClass('newbie');\n			if($acc.length > 0){\n\n				if(!$acc.hasClass('bound')){\n					var grp = ftGetGrp($acc);\n					bindAndPopulateAccordion($acc,grp);\n					var mode = grp['mode']||'';//should never be empty.\n					var img_shape = grp['img_shape']||'';\n					if(!cloned){\n						var $modes = $acc.find(\".modes[type='\"+block_type+\"']\");\n						if($modes.length>0){\n							var rem = '';\n							$modes.find(\".nu-btn\").each(function(){\n								rem+=$(this).attr(\"value\")+' ';\n							});\n						}\n						$new_item.removeClass(rem).addClass(mode);\n					}\n\n					options.mode = mode;\n					options.img_shape = img_shape;\n\n				} else {\n					var $mode = $acc.find(\"input.mode\");\n					var mode = $mode.val();\n					if(!cloned){\n						var rem = '';\n						$mode.parents(\".modes:first\").find(\".nu-btn\").each(function(){\n							rem += $(this).attr(\"value\")+' ';\n						});\n						$new_item.removeClass(rem).addClass(mode);\n					}\n\n					options.mode = mode;\n					var $shape = $acc.find(\"input.img_shape:first\");\n					if($shape.length > 0){\n						options.img_shape = $shape.val();\n					}\n				}\n			}\n			//append the child to the parent.\n\n			//get count of children.\n			var x = $child_nest.find(\".sf\").length + Math.floor((Math.random() * 100000000) + 100);\n			//The above function is getting a random interger in order to help prevent duplicates when adding children to a block.\n\n			$child_nest.append($new_item);\n			updateMainCanvasCClasses();\n\n			var csfid = $p.attr(\"id\")+\"-new-\"+x;\n\n			if(finetuneNewBlockIds.length > 0){\n				for(i=0;i < finetuneNewBlockIds.length; i++) {\n					var wosfid = csfid.replace('sfid-','');\n					if(finetuneNewBlockIds[i][0] == wosfid) {\n						x++;\n						var csfid = $p.attr(\"id\")+\"-new-\"+x;\n					}\n				}\n			}\n\n			if (csfid.match(/^sfid.new.[0-9]*.new.[0-9]*$/)) {\n\n				csfid = csfid.replace('-new-','');\n			}\n\n			$new_item.prop(\"id\",csfid).show();\n\n			var mysfid = (''+$new_item.attr('id')).replace('sfid-','');\n\n			options = $.extend(true,{},options);\n\n			for(var key in options){\n				finetuneEditedFields['data[SplashFeed]['+mysfid+'][options]['+key+']'] = options[key];\n			}\n\n			var item_type = $new_item.data('img-block-type');//new way of finding block type.\n			if(typeof item_type==='undefined'){//legacy fallback.\n				item_type = $new_item.attr('block-type');\n			}\n			finetuneEditedFields['data[SplashFeed]['+mysfid+'][type]'] = item_type;\n			finetuneEditedFields['data[SplashFeed]['+mysfid+'][body]'] = $new_item.find(\".body\").html();\n			//save the title.\n			if($new_item.hasClass('schedule-item')){\n				finetuneEditedFields['data[SplashFeed]['+mysfid+'][title]'] = $new_item.find(\".timeHolder\").val();\n			} else{\n				finetuneEditedFields['data[SplashFeed]['+mysfid+'][title]'] = $new_item.find(\".title\").html();\n			}\n			finetuneEditedFields['data[SplashFeed]['+mysfid+'][sort_order]'] = 999;\n			if ($new_item.hasClass('wImg')) {\n				var $img = $new_item.find('.image img:first');\n				if( $img.parents(\".list-item:first\").hasClass('no-shape')){\n					var src = $img.attr('src');\n				} else {\n					var src = $img.parents(\".image:first\").css('background-image');\n					src = stripUrl(src);\n				}\n\n				if ($img.length == 1 && src != '') {\n					finetuneEditedFields['data[SplashFeed]['+mysfid+'][image_url]'] = src;\n				}\n			}\n\n			if($p.hasClass('ticker')){\n				$new_item.show()\n			}\n\n			finetuneEditedFields['data[SplashFeed]['+mysfid+'][parent_splash_feed_id]'] = (''+$p.attr(\"id\")).replace('sfid-','');\n			finetuneFieldChangesMade();\n			finetuneActivateOnPageEditables();\n		}\n	}\n	if(returnObject!=null){\n		return $new_item;\n	}\n}\n\nfunction addNewNavItem(){\n	var $new_row = $(\"#blankNavItemRow\").clone().addClass('navLi newNavItem').removeClass('hide').removeAttr(\"id\");\n	$(\"#nav-items-list\").append($new_row);\n}\n\nfunction getCurrentVenueValue(){\n	var address = $(\"#venue-address\").val().trim(),\n		city = $(\"#venue-city\").val().trim(),\n		state = $(\"#venue-state\").val().trim(),\n		zip_code = $(\"#venue-zip\").val().trim();\n\n	var venue_string = '';\n	if(address!=''){\n		venue_string=address;\n	}\n	if(city!=''){\n		venue_string+=' '+city;\n	}\n	if(state!=''){\n		venue_string+=' '+state;\n	}\n	if(zip_code!=''){\n		venue_string+=' '+zip_code;\n	}\n	return venue_string;\n}\n\nfunction getVidEmbedCode($this){\n	if($.trim($this.val())!='' && !$this.hasClass('loading')){\n		$this.addClass('loading');\n		$.ajax({\n			url:'/splash/getEmbedCode/'+constants.slug, type:'post', dataType:'json',\n			data: { 'type':'video', 'value':$this.val() },\n			success:function(response){\n				// console.log(response.code.indexOf('autoplay=0'))\n				if(typeof response!=null && typeof response.code!=='undefined'){\n					$this.parents(\".grp:first\").find(\".error-area\").hide().end()\n						.find(\"textarea.vid-embed\").hide().end()\n						.find(\".embed-area\").show().find(\".vid\").html(response.code).end()\n						.find(\".video-url\").val(response.code).end()\n						.find(\".video-thumbnail\").val(response.thumbnail);\n				}\n				$this.removeClass('loading');\n			},\n			error: function(){\n				$this.removeClass('loading').parents(\".grp:first\").find(\".error-area\").show().html('There was an error with that snippet.  Please try again.');\n			}\n		});\n	}\n}\n\nfunction addCustomRTEButtons(editor,params){\n	var fonts = [{ text:'Inherit', value:'Inherit', classes:'fontFamItem' }];\n	$(\"#fontListPrimary\").find(\"div.customFontOpt\").each(function(){\n		var font = $(this).text().trim();\n		fonts.push({ text: font, value: font, classes:'fontFam-'+font.replace(/ /g,'')+' fontFamItem', style: \"font-family:\"+font+\";\"})\n	});\n\n	var fontSizeArr = ['10', '11', '12','14','16','18','20','24','30','36', '48', '60', '72', '80','96', '120', '130', '144', '160', '192'],\n		fontSizes = [],\n		no_opacity;\n\n		for(var x in fontSizeArr){\n			//var thisEmSize = ( fontSizeArr[x] / 16 ) + 'em'\n			var thisPxSize = fontSizeArr[x]+'px'\n			fontSizes.push({ text: fontSizeArr[x], value: thisPxSize, classes:'fontSizeItem' });\n		}\n\n		editor.addButton('showAll', {\n			title : 'Show All',\n			// image : '/img/tiny-align-left.png',\n			onPostRender: function(){\n				this.addClass('show-all');\n			},\n			onclick : function() {\n				var $btn = $(\"#\"+this._id);\n				var $absLayout = $btn.parents(\".mce-abs-layout:first\");\n\n				if($btn.hasClass('active')){ //CLOSE the advanced opts.\n					//$mce.removeClass('showAllOpen');\n					$absLayout.removeClass('showAll');\n					$btn.removeClass('active');\n					$('#rteTextShadowPicker,#rteTextSpacingPicker').hide();\n				} else { //OPEN up.\n					//$mce.addClass('showAllOpen');\n					//$(\"div.mce-tinymce:visible\").hide();\n					$btn.addClass('active');\n					$absLayout.addClass('showAll');\n				}\n				editor.focus();\n\n				// if it already has .showAll, remove it\n			}\n		}),\n\n		editor.addButton('closeButton', {\n			title : 'Close Editor',\n			// image : '/img/tiny-align-left.png',\n			onclick : function() {\n				var $obj = $(\"#\"+tinyMCE.activeEditor.id);\n				//has to be a better way to do this, but appears to work. circle back.\n				setTimeout(function(){\n					$(\"div.mce-tinymce:visible\").hide();\n					$('#rteTextShadowPicker,#rteTextSpacingPicker').hide();\n				},0);\n				//ideally the below snippet would work.  alas, it does not.\n				//tinyMCE.getInstanceById(tinyMCE.activeEditor.id).toolbarElement.style.display = 'none';\n				//setTimeout(function(){\n				editor.focus();\n				$obj.blur().focusout().removeAttr(\"contenteditable\");\n				setTimeout(function(){\n					$obj.attr(\"contenteditable\",true);\n				},50);\n				//},1);\n				// var $node = $(tinyMCE.activeEditor.dom.select('*')[0]);\n				// $node.parents(\".editable:first\").focusout()//.blur();//focusout.\n				// $body.removeClass('editWithMCE');\n			},\n			onPostRender: function(){\n				this.addClass('close-button');\n			}\n		}),\n\n		editor.addButton('fontFamily', {\n		    type: 'listbox',\n		    title: 'Font Family',\n		    text: 'Font Family',\n		    // label: 'fontFam',does nothing\n		    icon: false,\n		    onselect: function(e) {\n		    	editor.focus();\n                editor.execCommand(\"fontName\", false, this.value() );\n                //tinyMCE.activeEditor.dom.addClass(editor.selection.getContent(),'popula');\n                var node = tinymce.activeEditor.selection.getNode();\n				var $node = $(node);\n				var $grp = $node.parents(\"div.layoutGrp:first\");\n\n				if(typeof $node!=='undefined' && $node.hasClass('layoutGrp')){\n					$grp = $node;\n				}\n\n                $node.addClass('fontFamEdited');\n                $node.find('span').each(function(){ $(this).addClass('fontFamEdited') } )\n                if(typeof $grp!=='undefined'){\n\n                	if($grp.hasClass('element-hash') || $grp.hasClass('element-subtitle') || $grp.hasClass('element-title') || $grp.hasClass('element-rsvp') || $grp.find('div[block-type=content]').length > 0 ){\n		            	$grp.css({\"font-family\": \"\" });\n	            		$grp.find('h1, h2, span').each(function(){\n	                		$(this).css('font-family', '')\n	                	})\n\n	                	$grp.css('font-family',this.value());\n	                	var grp = ftGetGrp($grp);\n	                	if(!grp['styles']){ grp['styles'] = {}; }\n	                	grp['styles']['font-family'] = this.value();\n	                	var key = getKeyFromLayoutGrp($grp);\n\n	                	if( isLegacyEvent() ){\n	                		convertTo2OH(key);\n	                	} else {\n	                		finetuneLayoutChangesMade();\n	                	}\n\n	                }\n	            }\n	            setTimeout(function(){\n	            	splash.fontActions.updateOnPageFontsList();\n	            },1);\n\n                fixMceMenu();\n             },\n		    values: fonts,\n		    onPostRender: function() {\n		        // Select the second item by default\n		        this.addClass('custom-font-fam');//value('Some text 2');\n		    },\n		    onclick: function(){\n		    	if(this.active()==true){//remove if active.\n		    		fixMceMenu()\n		    	} else {\n			    	fixMceMenu('fontFamilyMenu')\n				}\n		    }\n		}),\n		editor.addButton('fontSizer', {\n		    type: 'listbox',\n		    title: 'Font Size',\n		    text: '12',\n		    // label: 'fontFam',does nothing\n		    icon: false,\n		    onselect: function(e) {\n		    	editor.focus();\n                var node = tinymce.activeEditor.selection.getNode();\n                var $node = $(node);\n                var $grp = $node.parents(\"div.layoutGrp:first\");\n\n                if( ! $node.hasClass('body') ){//do not add to body.\n        	        $node.find('span').css('font-size',\"\");//this is needed because jquery.css cannot convert font-size into EM.\n        	      //   $node.data('rawFontSize', thisEm) //this is needed because jquery.css cannot convert font-size into EM.\n	            		// .find(\"span\").css('font-size',\"\"); //remove font sizes from any span within this block.\n            	}\n\n               //  var thisEm = this.value().replace(/[^0-9.]/g,'');//strip out all non-numeric values (allow decimals too.)\n               //  thisEm = ( thisEm / 16 ) + 'em' //convert to em.\n              	// editor.execCommand(\"fontSize\", false, thisEm);\n              	var fontSize = this.value();//ie, \"16px\"\n              	editor.execCommand( \"fontSize\", false, fontSize );\n\n              	if(typeof $grp!=='undefined'){\n              		if($grp.hasClass('element-hash') || $grp.hasClass('element-subtitle') || $grp.hasClass('element-title') || $grp.hasClass('element-rsvp')){\n	            		$grp.css('font-size',fontSize).find('span').each(function(){\n	                		$(this).css('font-size', '').trigger('change');\n	                	})\n	                	updateBlockProperty($grp,{ 'font-size':fontSize });\n	                	var grp = ftGetGrp($grp);\n	                	if(!grp['styles']){ grp['styles'] = {}; }\n\n	                	grp['styles']['font-size'] = fontSize;\n	                	\n	                	var key = getKeyFromLayoutGrp($grp);\n						if( isLegacyEvent() ){\n	                		convertTo2OH(key);\n	                	} else {\n	                		finetuneLayoutChangesMade();\n	                	}\n\n              		}\n	            }\n\n                dynamaHead()\n\n		    },\n		    values: fontSizes,//font size values\n		    onPostRender: function() {\n		        // Select the second item by default\n		        this.addClass('custom-font-size');//value('Some text 2');\n		    },\n		    onclick: function(){\n		    	fixMceMenu('sizeMenu')\n		    }\n		}),\n		editor.addButton('colorPicker',{\n			title : 'Color',\n			// image : '/img/tiny-align-left.png',\n			onPostRender: function() {\n			    this.addClass('color-picker');\n			},\n			onclick : function() {\n				editor.focus();\n				var $btn = this;\n				$btn.active(true);\n				var $obj = $(\"#rteColorPicker\");\n				if($obj.length < 1){\n					$(\"body\").append('<input type=\"hidden\" id=\"rteColorPicker\" />');\n					var $obj = $(\"#rteColorPicker\");\n				}\n				var node = editor.selection.getNode();\n			    var $thisEle = $(node).parents('.layoutGrp:first')\n			    var paletteOnly = false\n			    var showPalette = false\n\n			    if ( inDesignerMode() || inAdvancedMode() ){\n			    	showPalette = true;\n			    	paletteOnly = false;\n			    } else if ($thisEle.hasClass('element-title') || $thisEle.hasClass('element-subtitle') ){\n					//if we're in here, then user is in basic mode, but editing title or subtitle.  in which case we want them to have access to the color pallette.\n					paletteOnly = true;\n			    	showPalette = true;\n				}\n\n				var $icon = $(\"#\"+this._id).find(\".mce-ico\");\n				$obj.spectrum({\n					className: 'rteColorPicker',\n					showInput: true, showAlpha: true, preferredFormat: \"rgb\", clickoutFiresChange: true,\n					showPalette: showPalette, palette: constants.palette, showPaletteOnly: paletteOnly,\n					beforeShow:function(color){\n						closeCustomRTEPickers();\n						if(color.alpha=='0'){\n							no_opacity=true;\n						}\n					},\n					show: function(){\n						openColorPicker = true;\n					},\n					move: function(color) {\n						if(no_opacity && color.alpha=='0'){\n							//nice little trick here.  if they open the picker and opacity is set to 0, crank up the opacity to full!\n							var c = ''+(color.toRgbString()).replace(', 0)',', 1)');\n							$obj.spectrum(\"set\", c);\n							no_opacity=false;\n						}\n						editor.focus();\n						editor.execCommand(\"foreColor\", false, color);\n						 var node = editor.selection.getNode();\n						 var $thisEle = $(node).parents('.layoutGrp:first')\n\n						 if( $thisEle.hasClass('element-title') || $thisEle.hasClass('element-subtitle') ){\n						 	$thisEle.addClass('fontColorEdited').css('color', color);\n						 	$thisEle.find('span').each(function(){\n						 		$(this).css('color', '')\n						 	})\n						 }\n\n						$icon.css('color', color.toString()) ;\n					},\n					change: function(color){\n						//editor.execCommand(\"foreColor\", false, color.toRgbString());\n\n					//	var node = tinymce.activeEditor.selection.getNode();\n					//	var $node = $(node)\n\n						var node = tinymce.activeEditor.selection.getNode();\n						var $node = $(node)\n\n						/*\n						//not quite there. almost.\n						var currTxt = getSelectionText();//check the currently selected text again to make sure they haven't re-highlighted.\n						if(highlightedText!==false && highlightedNode!==false){\n							if(highlightedNode.text().match(currTxt)){//only proceed if we find an exact text match within the currently selected node.\n								var x = tinymce.activeEditor.getContent();//get the current editor text.\n								var b = x.replace(highlightedText,'<span class=\"tmpFocus\">'+highlightedText+'</span>');//wrap the highlighted text in a color array.\n								tinymce.activeEditor.setContent(b,{ format: 'html' });//replace the content in the current editor.\n								if(highlightedNode.hasClass('tmpFocus')){\n									var $nodeMatch = highlightedNode;\n								} else {\n									//var $nodeMatch = highlightedNode.find(\".tmpFocus:first\");//find the first block with the .tmpFocus class within the highlighted block of text (should only ever be one at a given time).\n									var $nodeMatch = $(\"#splash-container\").find(\".tmpFocus:first\");\n								}\n								$(\".tmpFocus\").removeClass('tmpFocus');	//so dirty. hate it.\n								if($nodeMatch.length > 0){//only update if we find a match.\n									$node = $nodeMatch;//treat this block as the node.\n									$node.css('color',color);//update the color on the fly, remove tmpFocus for future use.\n								}\n							}\n						}\n\n						setTimeout(function(){\n							//set both values to false for future use.\n							highlightedText=false;\n							highlightedNode = false;\n						},500);	*/\n						$node.addClass('fontColorEdited');\n						$btn.active(false);\n						$icon.css('color',color.toRgbString());\n\n						var $grp = $node.parents(\"div.layoutGrp:first\");\n		                if(typeof $grp!=='undefined'){\n		                	$grp.css({ \"color\": \"\" });\n		                	if( $('body').hasClass('advMode') === false ||  $grp.hasClass('element-hash') || $grp.hasClass('element-subtitle') || $grp.hasClass('element-title') || $grp.hasClass('element-rsvp')){\n		                		$grp.css('color', color.toString())\n		                			.find('span').each(function(){\n			                			$(this).css('color', '')\n			                		})\n\n			                	$grp.css('color', color.toString() )\n        	                	var grp = ftGetGrp($grp);\n        	                	if(!grp['styles']){ grp['styles'] = {}; }\n        	                	grp['styles']['color'] = color.toString();\n        	                	var key = getKeyFromLayoutGrp($grp);\n        						convertTo2OH(key);\n			                	// updateBlockProperty($grp,{ 'color':color.toString() });\n\n		                	} else {\n		                		// console.log('not itle')\n		                	}\n\n		                }\n\n					},\n					hide: function(color) {\n						// editor.focus();\n						// editor.execCommand(\"foreColor\", false, color);\n\n						//set both values to false for future use.\n						highlightedText=false;\n						highlightedNode = false;\n\n						$icon.css('color',color);\n						$btn.active(false);\n						$obj.spectrum(\"destroy\");\n\n					}\n				});\n\n				$('.rteColorPicker').find('.sp-cancel').text('Reset').end().find('.sp-choose').text('Done')\n\n				setTimeout(function(){\n					$obj.spectrum(\"show\");\n				},1);\n			}\n		}),\n\n		editor.addButton('imgPicker',{\n			title : 'Insert Image',\n			//image : '/img/tiny-align-center.png',\n			onPostRender: function() {\n			    // Select the second item by default\n			    this.addClass('insert-image');//value('Some text 2');\n			},\n			onclick : function() {\n				//nice little trick.  create a temp input and give it 'st-p-' value.  stp makes it so image picker\n				//defaults to upload image, instead of gallery.\n				var $new_input = $(\"<input type='hidden' value='st-p-1' />\");\n				pickAndOrCropNewImage($new_input,{\n					done: function(newSrc,dims){\n						editor.focus();\n						editor.selection.setContent('<img class=\"rteImg\" src=\"'+newSrc+'\" />');\n						var $obj = $(\"#\"+editor.id);\n						if($obj.length > 0){//change the image after inserting one.\n							$obj.trigger('change');\n						}\n\n					}\n				});\n			}\n		}),\n\n		editor.addButton('aligner', {\n			title : 'Text Align',\n			type: 'listbox',\n			onselect: function(e) {\n				var $btn = $(\"#\"+this._id);\n				$btn.find(\"i.mce-ico\").removeClass('mce-align-left mce-align-center mce-align-right mce-align-justify').addClass('mce-align-'+this.value());\n\n				if(params!=null){\n\n					var node = tinymce.activeEditor.selection.getNode();\n					if(typeof node!=='undefined'){\n						//} && $(node).parents('.element:first').is('#element-rsvp') ){\n						var $node = $(node),\n							$grp = $node.parents('.layoutGrp:first');\n\n						if($node.parents(\".element:first\").is(\"#element-rsvp\")){\n							$('#element-rsvp').css('text-align', this.value() )\n						} else if($grp.hasClass('button')){\n							$node.css('text-align',this.value());//('fongtFamEdited');\n						} else {\n							if( ($grp.hasClass('element-title') || $grp.hasClass('element-subtitle') ) ){\n\n								//themeStylesChanged();\n							}\n							$grp.css('text-align', this.value() );\n						}\n\n						updateBlockProperty( $grp, { \"text-align\":this.value() });\n					}\n					// } else {\n					// 	var field_id = params.field_id;\n					// 	silentTrigger=true;\n					// 	updateAlignPicker(field_id+\"-align-input\",this.value(),true);\n\n					// 	//$(\"#element-\"+field_id).parents(\".layoutGrp:first\").css('text-align',this.value());\n					// 	setTimeout(function(){\n					// 		silentTrigger=false;\n					// 	},0);\n					// }\n\n				} else {\n\n					// editor\n					//tinymce.activeEditor.formatter.apply('text_align', {value : this.value()});\n	                //var node = tinyMCE.activeEditor.dom.select('*')[0];\n	                //$(tinymce.activeEditor.selection.getNode());\n	                var node = tinymce.activeEditor.selection.getNode();\n	                if(typeof node!=='undefined'){\n	                	var $node = $(node);\n		                if($node.parent(\"p\").length > 0){\n		                	$node = $node.parent(\"p\");\n		                }\n\n		                $thisPar = $node.parents('.layoutGrp:first')\n\n		               if( $(\"#acc-ft\"+$thisPar.prop(\"id\") ).length > 0 && $thisPar.find('.audio').length == 0 && $thisPar.find('.full-list-item').length == 0  && $thisPar.find('.full-image-list-item').length == 0  ){\n\n		                	$thisPar.css('text-align',this.value())\n\n		                	var thisVal = this.value()\n\n		                	$thisPar.find('div, span, h4, a, h1, p').each(function(){\n			                	$(this).css('text-align', '' )\n			                })\n\n			                $thisPar.find('a, h1, p').each(function(){\n			                	$(this).css('text-align', thisVal )\n			                })\n\n			                if( $thisPar.find('.schedule').length != 0 ){\n			                	$thisPar.find('.title h1').css('text-align', thisVal )\n			                }\n\n			               	if( $thisPar.find('.sf:first').attr('block-type') == 'content' ) {\n			               		$thisPar.find('.sf:first').removeClass('leftLay centerLay rightLay')\n			               		$thisPar.find('.sf:first').find('.body h1').css('text-align', '').trigger('change')\n			               	}\n\n			                updateBlockProperty( $thisPar, { \"text-align\":this.value() });\n\n\n\n		                } else {\n		                	$node.css('text-align',this.value());//('fongtFamEdited');\n		                }\n\n\n\n\n	    	            //$node.css('text-align',this.value());//('fontFamEdited');\n	        		}\n	        	}\n	        },\n			onclick:function(e){\n				fixMceMenu('alignerMenu');\n			},\n			values: [\n				{ text:'', classes:'align-left', value:'left'},\n				{ text:'', classes:'align-center', value:'center'},\n				{ text:'', classes:'align-right', value:'right'},\n				{ text:'', classes:'align-justify', value:'justify'}\n			]\n		}),\n\n		editor.addButton('spacing', {\n			title : 'Spacing',\n			image : '/img/tiny-align.png',\n		    onPostRender: function() {\n		        this.addClass('spacing-button');\n		    },\n		    onclick: function(){\n		  		var $btn = this;\n		  		var $picker = $(\"#rteTextSpacingPicker\");\n		  		$('#rteTextShadowPicker').hide();\n		  		if($btn.active()==true){\n		  			//close it.\n		  			$btn.active(false);\n		  			$picker.hide();\n		  		} else {//show it.\n		  			//editor.focus();\n		  			$btn.active(true);\n		  			//var node = tinyMCE.activeEditor.dom.select('*')[0];\n		  			//$(tinymce.activeEditor.selection.getNode());\n		  			var node = tinymce.activeEditor.selection.getNode();\n		  			//$(node).addClass('fontColorEdited');\n		  			if(typeof node!=='undefined'){\n		  				var $node = $(node);\n						var $parent = $node.parents(\".layoutGrp:first\");\n		               	var $inputs = $picker.find(\"input.letter-spacing,input.line-height\");\n		               	$inputs.attr(\"gid\",$parent.prop(\"id\"));\n		               	if(!$picker.hasClass('slidersBound')){\n		               		bindAllInnerSliders($picker);\n							//UPDATE THE PROPER VALUES WORK IN PROGRESS.\n							// var lineHeight = $parent.css(\"line-height\");\n							// var letterSpacing = $parent.css('letter-spacing');\n							// $picker.find(\"input.line-height\").parents(\".slider:first\").slider(\"value\",lineHeight);\n							// $picker.find(\"input.letter-spacing\").parents(\".slider:first\").slider(\"value\",letterSpacing);\n\n						}\n						setTimeout(function(){\n							$picker.show();\n						},10);\n					}\n				}\n		    }\n		}),\n\n		editor.addButton('shadow', {\n			title : 'Text Shadow',\n			// image : '/img/tiny-align-right.png',\n		    onPostRender: function() {\n		        this.addClass('shadow-button');\n		    },\n		    onclick: function(){\n		    	var $btn = this;\n		    	var $picker = $(\"#rteTextShadowPicker\");\n		    	$('#rteTextSpacingPicker').hide();\n		    	if($btn.active()==true){\n		    		//close it.\n		    		$btn.active(false);\n		    		$picker.hide();\n		    	} else {//show it.\n		    		//editor.focus();\n		    		$btn.active(true);\n\n		    		//var node = tinyMCE.activeEditor.dom.select('*')[0];\n		    		//$(tinymce.activeEditor.selection.getNode());\n		    		var node = tinymce.activeEditor.selection.getNode();\n		    		if(typeof node!=='undefined'){\n		    			var $node = $(node);\n		    			var $parent = $node.parents(\".layoutGrp:first\");\n		    			var $inputs = $picker.find(\"input.meta-color,input.style-ctrl,input.shadow-input\");\n		    			$inputs.attr(\"gid\",$parent.prop(\"id\"));\n\n				    	// fixMceMenu('shadowPicker');\n		               	if(!$picker.hasClass('slidersBound')){\n		               		bindAllInnerSliders($picker);\n						}\n						setTimeout(function(){\n							$picker.show();\n						},10);\n					}\n		    	}\n		    }\n\n		});\n}\n\nfunction updateHeaderAndBodyPicker(){\n	var hasBG = $(\"#headerIsBg\").val(),\n		$bgUrl = getTargetById('header');\n	//decides whether we display header and body control, or just one.\n	if(hasBG == 1 ){ //if headerIsBg, no need for two selectors.  Only background section.\n		$bgUrl.addClass('noBG')\n	} else { //normal. header and background section.\n		$bgUrl.removeClass('noBG')\n	}\n}\n\nfunction bindAllInnerSliders($picker){//loops through all sliders in a section, ie text shadow.\n	$picker.addClass('slidersBound').find(\".slider\").each(function(){\n		var $t = $(this);\n		if(!$t.hasClass('bound')){\n			var $i = $t.parents(\".slider-wrap:first\").find(\"input:first\");\n			bindSlider($i,true);\n		}\n	});\n}\n\nfunction toggleContentTab($obj,forceOpen){\n	//this is used to display the \"tab\" ie basics, button, or custom in the content section of teh nav bar.\n	if($obj.hasClass('contentTabWrap')){//if yes, then we already have what we're looking for.\n		var $wrap = $obj;\n	} else { //otherwise, we assume an item inside of the tab.\n		var $wrap = $obj.parents(\".contentTabWrap:first\");\n	}\n\n	if( $wrap.hasClass('open') && !forceOpen ){//if we are forcing open, then do. not. close.\n		$wrap.removeClass('open').find(\"div.mainCard.expanded\").closeAccordion();\n	} else {\n		$('#allSectionsContain').find('.contentTabWrap').removeClass('open').find(\"div.mainCard.expanded\").closeAccordion();\n		$wrap.addClass('open');\n	}\n	//needs to be called in a set timeout call after.\n	setTimeout(function(){\n		setWindowHeight($(\"#allSectionsContainInner\"));\n	},1);\n\n}\nfunction updateEditorOpts(){\n\n	if(typeof tinyMCE !=='undefined' && typeof tinyMCE.activeEditor !== 'undefined' \n		&& typeof tinyMCE.activeEditor.selection!=='undefined'\n	){\n		var $node = $(tinyMCE.activeEditor.selection.getNode());\n\n		var fontFamily = $node.css(\"font-family\"),\n			color = $node.css('color'),\n			fontSize = $node.css(\"font-size\");\n\n		if(typeof fontFamily!=='undefined' && fontFamily!=''){\n			fontFamily = fontFamily.replace(/'/g,'');\n			fontFamily = fontFamily.replace(/\"/g,'');\n			var fontFamilyDisplay = fontFamily.split(',')[0]; //only take whatever's before the \",\" - ie. Chewy, arial bold -> Chewy.\n			var $rte = $(\"div.mce-tinymce\");\n			$rte.find(\".mce-custom-font-fam\").find(\"span:first\").text(fontFamilyDisplay);\n			var $item = $(\"div.mce-fontFamItem.mce-fontFam-\"+fontFamily.replace(/ /g,'')+\":first\");\n			if($item.length > 0){\n				$item.addClass('mce-active').attr(\"aria-pressed\",\"true\").siblings().removeClass('mce-active').attr(\"aria-pressed\",\"false\");\n			}\n		}\n		if(typeof color!=='undefined' && color!=''){\n			if(typeof $rte==='undefined'){\n				var $rte = $(\"div.mce-tinymce\");\n			}\n			$rte.find(\"i.mce-i-colorPicker:first\").css('color',color);\n		}\n		if(typeof fontSize!=='undefined' && fontSize!=''){\n			if(typeof $rte==='undefined'){\n				var $rte = $(\"div.mce-tinymce\");\n			}\n			\n			var num = parseInt(fontSize);\n\n			// var rawFontSize = $node.data('rawFontSize');//if this exists, we have the fontsize value in EM.\n			// if(typeof rawFontSize!=='undefined'){\n			// 	num = (rawFontSize.replace(/[^0-9.]/g,'')*1)*16;\n			// }\n\n			$rte.find(\".mce-custom-font-size\").find(\"span:first\").text(num);\n			var $item = $(\"div.mce-fontFamItem.mce-fontFam-\"+num+\":first\");\n			if($item.length > 0){\n				$item.addClass('mce-active').attr(\"aria-pressed\",\"true\").siblings().removeClass('mce-active').attr(\"aria-pressed\",\"false\");\n			}\n		}\n	}\n}\n\n//used to update the image controls in the image modal via the hidden dropdowns.\n//var id = ($(\"#cropAnyPhoto\").hasClass('editHead'))?'header':'body';\nfunction populateAdvancedImgControls($layoutGrp){\n\n	var grp = ftGetGrp($layoutGrp);\n 	if(grp && grp['styles']){\n 		var bg_size = grp['styles']['background-size']||'',\n 			bg_pos = grp['styles']['background-position']||'',\n 			bg_repeat = grp['styles']['background-repeat']||'';\n			bg_attachment = grp['styles']['background-attachment']||'scroll';\n	} else {\n		var bg_size = '',\n			bg_pos	 = '',\n			bg_repeat = '',\n			bg_attachment='scroll';\n	}\n\n	flipDropDown($(\"#img-modal-background-size\"),bg_size);\n	flipDropDown($(\"#img-modal-background-repeat\"),bg_repeat);\n	chooseBgPosition($(\"#img-modal-background-position\"),bg_pos);\n	if(bg_attachment=='fixed'){\n		setCheck($(\"#img-modal-background-attachment\"),1);\n	} else {\n	 	setCheck($(\"#img-modal-background-attachment\"),0);\n 	}\n}\n\nfunction closeCurrentTab(tab){\n\n	if(tab=='colors'){\n		resetColorText()\n		cancelCustomColors()\n	} else if(tab=='fonts'){\n		cancelCustomFonts()\n	} else if(tab=='theme'){\n		//cancelThemeChanges()\n	} else if(tab=='content'){\n		closeCustomSection();\n	}\n\n}\n\nfunction closeSecAccords( thisAccord ){\n	if(typeof thisAccord!=='undefined'){\n		var $t = thisAccord;\n		$t.removeClass('open').parents('.contentTabWrap:first').removeClass('expanded')\n		$('#allSectionsContain').removeClass('open')\n		$('#finetune-sections').find('.sectionContain').removeClass('open')\n		$('#elementsHeader').removeClass('isBackBtn').text('Elements')\n\n		setVisibleAccordionHeight();\n	}\n}\n\nfunction openPlannersModal(){\n\n	$('body').addClass('settingsOpen')\n\n	$(\"#simple-modal-wrap\").css('background', 'rgba(255,255,255,0.8)')\n\n	$(\"#event-planners-modal\").removeClass('expanded').addClass('sidebar');\n	$(\"#settingsTxt\").text('Edit Settings');\n	$(\"#edit-settings\").removeClass('plannersOpen onlyVenue onlyDate').fireSimpleModal({persistent: true });\n	$(\"#edit-settings\").find(\"li.newbie\").removeClass('newbie');\n	var $previous_collabs = $(\"#previous-collabs\");\n	if(!$previous_collabs.hasClass('loaded')){\n		$previous_collabs.html(constants.spinner_html);\n		$.post(constants.finetune_formBase+\"/events/pullRecentCollabs\",{event_id:constants.event_id },function(response){\n			$previous_collabs.addClass('loaded').html(response);\n		});\n	}\n\n    //setting Up FAQs\n    if($('#settingsFAQWrap').hasClass('loaded')) {\n    	//don't load data\n    }\n    else {\n\n    	$.ajax({\n			  url: constants.finetune_formBase+\"/faq/remoteFaq\",\n			  data: {}\n			}).done(function(response) {\n			  	  $('#settingsFAQWrap').html(response);\n			  	  $(\".questionsByCategory:first\").removeClass('hide');\n\n			  	  $('#settingsFAQWrap').find('a').each(function(){\n			  	  	$(this).attr('target', '_blank')\n			  	  })\n\n			  	  $('#settingsFAQWrap').addClass('loaded');\n	    });\n	}\n\n	$(\"#eventKeywordsTags\").find(\"input:first\").val('').attr(\"placeholder\",\"Enter Tags Here\");\n}\n\nfunction scrollToObject($obj1,$obj2){//inner pane scrolling.  a thing of beauty.\n	ignore_scroll = true;\n	$obj1.animate({\n		scrollTop:  $obj2.offset().top - $obj1.offset().top + $obj1.scrollTop()\n	}, 200, function(){\n		ignore_scroll = false;\n	});\n}\n\nfunction openSectionsAccord(){\n	$('#sectionTabWrap').addClass('open')\n}\n\nfunction bindVertAlign(){\n	var $vert = $(\"#header-vertical-align\");\n	if(!$vert.hasClass('bound')){\n		setTimeout(function(){\n			flipMode($vert, { val: $vert.val(), force: false });\n			$vert.addClass('bound');\n		},50);\n	}\n}\n$.fn.expandCardHead = function( ){\n	var $t = $(this);\n	if($t.hasClass('mainCard') && !$t.hasClass('noContent') ){ //if it's an accordion, open it up and close it's friends.\n		$t.css('overflow','hidden').addClass('expanded').siblings().each(function(){\n			$(this).closeAccordion();\n		});\n	} else {\n		$t.siblings().each(function(){ $(this).closeAccordion();});\n	}\n\n	if($t.prop(\"id\")=='title_theme_styles'){\n		bindVertAlign();\n	}\n}\n\nfunction closeCustomRTEPickers(){\n	$(\"#rteTextSpacingPicker,#rteTextShadowPicker\").hide();\n	$(\"div.mce-shadow-button,div.mce-spacing-button\").removeClass('mce-active').attr(\"aria-pressed\",false);\n}\n\nfunction addSectionModal(){\n	setTimeout(function(){\n		var $parent = $(\"#add-new-section\");\n		$parent.find(\".slideCirc[num='slide1']\").click();\n		if ($('#gallery-container').length == 0) {\n			$parent.find('.addSection[block-type=\"gallery\"]').find('.nu-btn:first').removeClass('disabled');\n		} else {\n			$parent.find('.addSection[block-type=\"gallery\"]').find('.nu-btn:first').addClass('disabled pt');\n		}\n		if ($('#element-facebook-comments').length == 1) {\n			$parent.find('.addSection[element=\"facebook-comments\"]').find('.nu-btn:first').addClass('disabled');\n		} else {\n			$parent.find('.addSection[element=\"facebook-comments\"]').find('.nu-btn:first').removeClass('disabled');\n		}\n\n		var $s = $(\"#saved-elements\");\n		if($s.length > 0 && $s.hasClass('not-loaded') ){\n			//var $lastSection = $parent.find(\".sectionType:last\");\n			var $saveElementBlock = $s.find(\".element-adder-content\");\n			$saveElementBlock.html(\"<div class='thisLoader loading'><div class='nu-loader med'></div></div>\");\n			$.ajax({\n				url: \"/splash/pullElementLibrary\",\n				dataType: 'json',\n				type: 'POST',\n				success:function(response){\n					var html_to_add = '';\n					if(response['blocks']){\n						var blocks_to_append = [];\n						$saveElementBlock.empty();\n						for(var x in response['blocks']){\n							var $markup = $('<div section-type=\"custom-layout-block\" class=\"addSection\"><div class=\"custom-image\" style=\"background:url('+response['blocks'][x]['LayoutBlock']['thumbnail']+');\">'+\n								'</div><span>'+response['blocks'][x]['LayoutBlock']['title']+'</span></div>');\n							var layout_val = $.parseJSON(response['blocks'][x]['LayoutBlock']['value']);\n							$markup.data('layout',layout_val).data('tags',response['blocks'][x]['LayoutBlock']['tags']);\n							//console.log(\"DATA !\",$markup.find(\".addSection\").data());\n							//html_to_add+=$markup.html();\n							$saveElementBlock.append($markup);\n						}\n						// $saveElementBlock.html(html_to_add)\n					}\n					if(response['tags']){\n						var tags = '<div class=\"option\" value=\"\">All</div>';\n						for(var x in response['tags']){\n							tags+='<div class=\"option\" value=\"'+response['tags'][x]+'\">'+response['tags'][x]+'</div>';\n						}\n						$(\"#elementLibTags\").show().find(\".options\").html(tags);\n					}\n					//$lastSection.append(blocks_to_append);\n					$s.removeClass('not-loaded');\n				},\n				error:function(){\n\n				}\n			})\n		}\n		$parent.fireSimpleModal();\n		return false;\n	}, 10);\n}\n\nfunction loadToggleState() {\n	if(inAdvancedMode() ){\n		/////Added a new function to handle the grossness that was this section\n		changeLayout.advanced( true );\n	}\n	else if( inDesignerMode()) {\n		changeLayout.designer( true );\n	}\n	else if(!inDesignerMode() && !inAdvancedMode()) {\n		/////Added a new function to handle the grossness that was this sections\n		changeLayout.basic();\n	}\n\n	// CHECK IF USER IS VIEWING AS BUILDER\n\n	if( ! inBuilderView() ){\n		changeLayout.viewAsUser();\n	}\n\n}\n\n//AssetEditor will be called every time the asset modal is requested\n//data will be a large JSON object\nvar AssetEditor = function(data) {\n\n	var initMode = data.initMode || 'css', //mode is either css, partyCss, ticketCss, js, partyJs, ticketJs, theme_styles, layout\n		$el = {}, //elements within the modal, cache the jQuery objects to vars\n		activeMode = initMode,\n		codemirrorInstance,\n		isSaving = false; //we can use this bool to prevent concurrent ajax requests within this modal\n\n	var toggleLoadingState = function(saving) {\n		if(saving) {\n			$('#custom-editor-main', $el.root).addClass('saving');\n			isSaving = true;\n		}\n		else {\n			$('#custom-editor-main', $el.root).removeClass('saving');\n			isSaving = false;\n		}\n	}\n\n	var saveTheme = function() {\n		var postData = {};\n		postData = getChangedInputsArray(finetuneGetThemeStyleInputs());\n		postData['event_id'] = constants.event_id;\n		postData['name'] = $(\"#admin-theme-title\").val(),\n		postData['description'] = $(\"#admin-theme-description\").val(),\n		postData['abbr'] = $(\"#admin-theme-abbr\").val()||postData['name'].replace(' ','');\n		postData['event_type'] = $(\"#admin-theme-event-type\").val()||'',\n		postData['default_theme'] = $(\"#admin-theme-default\").val(),\n		postData['active'] = $(\"#admin-theme-public\").val(),\n		//postData['image_url'] = $(\"#admin-theme-photo\").val();\n		//postData['parent_id'] = $(\"#admin-theme-parent-id\").val();\n		postData['data[EventSetting][layout]'] = JSON.stringify(finetuneGetEventLayout(true));\n\n		if(data.theme.id){\n			postData['theme_id'] = data.theme.id;\n		}\n\n		//need to do this to include photo uploads\n		//FormData IS supported by browser\n		if('FormData' in window) {\n			var formData = new FormData();\n			//put that upload photo in there...\n			if($('#image_url').get(0).files.length) formData.append('image_url', $('#image_url').get(0).files[0]);\n\n			for(var d in postData) {\n				formData.append(d, postData[d]);\n			}\n		}\n		else {\n			//FormData NOT supported by browser\n			formData = postData;\n		}\n		toggleLoadingState(true);\n		$.ajax({url:'/splash/saveTheme/'+constants.slug,\n			type:'post',\n			data: formData,\n			dataType:'json',\n            //Options to tell JQuery not to process data or worry about content-type\n            cache: false,\n            processData: false,\n            contentType: false,\n			success:function(response){\n				if(response && response.isTheme && response.isTheme.image_url) $('#theme-image_url').attr('src', response.isTheme.image_url);\n\n				if(typeof response.theme_id!=='undefined'){\n					data.theme.id = response.theme_id;\n					setTaggable(true);\n				}\n			},\n			complete: function() {\n				toggleLoadingState(false);\n			}\n		});\n		return false;\n	}\n\n	var toggleSaveable = function(isSaveable) {\n		if(isSaveable) {\n			$el.codeForm.find('.saveForm').show();\n			$el.codeSection.removeClass('readonly');\n		}\n		else {\n			$el.codeForm.find('.saveForm').hide();\n			$el.codeSection.addClass('readonly');\n		}\n	}\n\n	var showCode = function(_mode) {\n		//put the code into the editor\n		var activeCode = data.modes[activeMode].code;\n		ACE_instance.setValue(activeCode, -1);\n		ACE_instance.setReadOnly(false);\n		toggleSaveable(true);\n		//set the syntax mode of the editor\n		ACE_instance.getSession().setMode(\"ace/mode/\" + activeSyntaxMode());\n	}\n\n	var setActiveTabs = function() {\n		$el.subnav.children('li').removeClass('active');\n		$el.subnav.find('a[data-editor-mode=\"' + activeMode + '\"').parent().addClass('active');\n\n		$el.nav.children('li').removeClass('active');\n		$el.nav.find('[data-nav=\"' + data.modes[activeMode].nav + '\"').parent().addClass('active');\n	}\n\n	var subnavClick = function() {\n		changeMode($(this).data('editor-mode'));\n		setActiveTabs();\n		return false;\n	}\n\n	var showSubnav = function() {\n		$el.subnav.hide();\n		$el.subnav.filter('[data-subnav=\"' + data.modes[activeMode].subnav + '\"]').show();\n		setActiveTabs();\n	}\n\n	var changeMode = function(changeToMode) {\n		activeMode = changeToMode;\n		//this mode does not use the code editor screen\n		if(data.modes[activeMode].panel && data.modes[activeMode].panel !== 'code-edit-section') {\n			showSubnav();\n			$el.panels.hide();\n			$el.versionsList.hide();\n			$el.panels.filter('#'+ data.modes[activeMode].panel).show();\n		}\n		//show code editor\n		else {\n			$el.panels.hide();\n			$el.versionsList.show();\n			$el.codeEditor.show(); //$el.panels.children('#code-edit-section')\n			showCode();\n			showSubnav();\n			loadVersionsList();\n		}\n	}\n\n	var navClick = function() {\n		var changeToMode = $(this).data('editor-mode');\n		changeMode(changeToMode);\n		return false;\n	}\n\n	var saveForm = function($form) {\n		toggleLoadingState(true);\n		$form.ajaxSubmit({\n			url: data.submit_url + activeMode,\n			success: function(response, statusText, xhr, $form){\n				$el.root.replaceWith(response);\n			},\n			complete: function() {\n				toggleLoadingState(false);\n			}\n		});\n	}\n\n	var saveAjaxForm = function() {\n		saveForm($(this));\n		return false;\n	}\n\n	var saveActiveCode = function() {\n		//save the contents of the editor into the data object\n		data.modes[activeMode].code = ACE_instance.getValue();\n		$el.codeInput.val(data.modes[activeMode].code).attr('name', activeMode);\n		saveForm($el.codeForm);\n		return false;\n	}\n\n	var writeTag = function(tag_name) {\n		$('#theme-tag-list', $el.root).append('<li data-delete-tagname=\"' + tag_name + '\">' + tag_name + '<span>×</span></li>');\n	}\n\n	var saveSingleTag = function(tag_name) {\n		var postData = {tag_names: [tag_name], theme_ids: [data.theme.id]};\n		writeTag(tag_name); //only writing a single tag\n		$.post('/address_book/saveTags', postData);\n	}\n\n	var deleteSingleTag = function(tag_name) {\n		var postData = {tag_names: [tag_name], theme_ids: [data.theme.id], deleteTag: true};\n		$.post('/address_book/saveTags', postData);\n	}\n\n	//returns the syntax type based on the mode\n	var activeSyntaxMode = function() {\n		return data.modes[activeMode].syntax;\n	}\n\n	//resize the codemirror frame nicely\n	var resizeACE = function() {\n		$el.codeForm.find('#custom-code-editor-holder').height( $(window).height() - 220 );\n		ACE_instance.resize(true);\n	}\n\n	//load the version list for a particular `mode` and show it in the versions list in the left drawer\n	var loadVersionsList = function() {\n		var versions = data.modes[activeMode].versions || null,\n			html = '<ul><li><a href=\"\" data-version-path=\"current\" class=\"active\">Current Version</a></li>';\n		if(versions && versions.length) {\n			for(var v in versions) {\n				html += '<li><a href=\"\" data-version-index=\"' + v + '\" data-version-path=\"' + data.modes[activeMode].versions[v].path + '\" data-version-filename=\"' + data.modes[activeMode].versions[v].filename + '\">' + data.modes[activeMode].versions[v].time + '</a></li>';\n			}\n		}\n		html += '</ul>';\n		$el.versionsList.find('.insert-list').html(html);\n		return false;\n	}\n\n	var setTaggable = function(taggable) {\n		if(taggable) $('#theme-tag-holder', $el.root).removeClass('disabled');\n		else $('#theme-tag-holder', $el.root).addClass('disabled');\n	}\n\n	//display a particular version of a code file\n	var displayVersion = function() {\n		var filepath = $(this).data('version-path'),\n			$link = $(this);\n		//the `current` version link was clicked, just show the current code\n		if(filepath === 'current') {\n			showCode(activeMode);\n		}\n		else {\n			toggleLoadingState(true);\n			$.ajax({\n				url: filepath + '?v=' + new Date().getTime(),\n				processData: false,\n				success: function(code) {\n					data.modes[activeMode].version_code = code;\n					ACE_instance.setValue(code, -1);\n					ACE_instance.setReadOnly(true);\n				},\n				complete: function(jqXHR, textStatus) {\n					toggleLoadingState(false);\n					toggleSaveable(false);\n				}\n			});\n		}\n		//do highlighting\n		$el.versionsList.find('a').removeClass('active');\n		$link.addClass('active');\n		return false;\n	}\n\n	//debug the editor vars\n	window.logAssetEditor = function() {\n		return {data: data, changeMode: changeMode};\n	}\n\n	//event bindings and initializing things\n	var domReady = function() {\n		//collect elements\n		$el.root = $('#custom-style-editor-container');\n		$el.saveCode = $('.submit-code', $el.root);\n		$el.codeSection = $('#code-edit-section', $el.root);\n		$el.codeForm = $('form', $el.codeSection);\n		$el.codeTextarea = $('textarea', $el.codeForm);\n		$el.codeInput = $('.code-input', $el.codeForm);\n		$el.fileSection = $('#file-manager-section', $el.root);\n		$el.fileForm = $('form', $el.fileSection);\n		$el.subnav = $('#custom-editor-subnav ul', $el.root);\n		$el.nav = $('#custom-editor-nav ul', $el.root);\n		$el.panels = $('#asset-panels', $el.root).children();\n		$el.codeEditor = $el.panels.filter('#code-edit-section');\n		$el.themeForm = $('#theme-settings-form', $el.root);\n		$el.versionsList= $('.versions-list', $el.root);\n		$el.versionsToggler = $('.versions-toggler', $el.versionsList);\n\n		//nav event\n		$('[data-editor-mode]', $el.nav).on('click', navClick);\n		$('[data-editor-mode]', $el.subnav).on('click', subnavClick);\n\n		//binding for adding theme tags on enter\n		$('#theme-add-tag', $el.root).on('keyup', function(e) {\n			var $input = $(this);\n			if(e.keyCode === 13 && $.trim($input.val())) {\n				saveSingleTag( $input.val() );\n				$input.val('');\n			}\n			return false;\n		});\n\n		//binding for deleting tags\n		$el.root.on('click', '[data-delete-tagname]', function() {\n			$tag = $(this);\n			deleteSingleTag( $tag.data('delete-tagname') );\n			$tag.remove();\n		});\n\n		//display a version on a click of a link with data-version-path attr\n		$el.versionsList.on('click', 'a[data-version-path]', displayVersion);\n\n		$el.versionsList.removeClass('open');\n		//version drawer toggle open/close\n		$el.versionsToggler.on('click', function() {\n			var isOpen = $el.versionsList.toggleClass('open').hasClass('open');\n\n			//when the versions list becomes closed, show the current code\n			if(isOpen) {\n				if('localStorage' in window) window.localStorage.setItem('versionsOpen', 1);\n				$el.codeForm.removeClass('full');\n			}\n			else {\n				if('localStorage' in window) window.localStorage.removeItem('versionsOpen');\n				var currentVersionList = $('[data-version-path=\"current\"]', $el.versionsList);\n				displayVersion.call(currentVersionList); //simulate a click on the current version item ;)\n				$el.codeForm.addClass('full');\n			}\n\n			return false;\n		});\n\n		//open versionList if localStorage says so ;)\n		//this was done to keep the versions list\n		//if('localStorage' in window && window.localStorage.getItem('versionsOpen')) {\n		//	$el.versionsList.addClass('open');\n		//}\n		//else {\n			$el.codeForm.addClass('full');\n		//}\n		setTaggable( (data.theme && data.theme.id) );\n\n		$el.root.find('.save-codeform').on('click', saveActiveCode);\n\n		//bind two forms\n		$el.fileForm.on('submit', saveAjaxForm);\n		$el.themeForm.on('submit', saveTheme);\n\n		//copy button on the files tab behavior\n		$el.root.on('click', '.fileTable [data-copy]', function() {\n		    var  $this = $(this),\n		         $target = $('#copytarget-' + $this.data('copytarget')),\n		         link = $this.data('copy'),\n		         width = $target.width(),\n		         original = $target.clone(),\n		         $input = $('<input />', {val: link, css: {width: width}});\n		    $target.replaceWith($input);\n		    $input.select();\n		    $input.on('blur', function() { $input.replaceWith(original); });\n		    return false;\n		});\n\n		//create ACE instance and do setup routine\n		ACE_instance = ace.edit(\"custom-code-editor\");\n		ACE_instance.setTheme(\"ace/theme/monokai\");\n		ACE_instance.setShowPrintMargin(false);\n		ACE_instance.setOptions({fontSize: '11pt'});\n		changeMode(activeMode);\n		showSubnav();\n		loadVersionsList();\n\n		//always keep codemirror big\n		$(window).resize(resizeACE);\n		resizeACE();\n\n		//do some things to the modal and the body itself\n		$('body').addClass('lockItUp custom-editor');\n		$('.close-modal', $el.root).click(function(){\n			$('body').removeClass('lockItUp custom-editor');\n		});\n\n		//allow closing the modal by clicking the transparent overlay\n		$('#simple-modal-ajax').on('click.closeEditor', function(e) {\n			if($(e.target).is('#simple-modal-ajax')) {\n				closeSimpleModal();\n				$('#simple-modal-ajax').unbind('click.closeEditor');\n				$('body').removeClass('lockItUp custom-editor');\n			}\n		});\n\n\n		if( ! $('body').hasClass('advMode') ){\n			// IF NOT IN BUILDER MODE\n			var confirmMessage = '<div class=\"adv-mode-info\"><div class=\"title-wrap\"><div class=\"top-icon icon-f-wrench\"></div><h3 class=\"semiBold\">Need more control?</h3>' +\n									 '<h3 class=\"subtitle\">Request access to Builder Mode!</h3></div>' +\n									 '<div class=\"loading-wrap hide\"><h3>Sending Request...</h3></div>'+\n									 '<div class=\"done-wrap hide\"><h3 class=\"semiBold\">Access Requested!</h3><h3 class=\"subtitle\">There\\'s an email coming your way. Just a few short questions, and then you\\'ll be off and running!<small>Don\\'t see the email? Check your \"Promotions\" folder</small></h3><button class=\"done-btn\">Okay, Thanks</button></div>' +\n									 '<div class=\"inner-wrap\">' +\n									 '<div class=\"remix-themes\"><h5 class=\"semiBold\">Create Themes</h5><p>Build original Splash layouts from scratch, or remix existing ones.</p></div>' +\n									 '<div class=\"write-code\"><h5 class=\"semiBold\">Write Code</h5><p>Control every last detail with CSS.</p></div></div></div>';\n				SplashUI.confirm(function(confirm) {\n\n					if(confirm){\n\n						window.open('http://builder.splashthat.com/', '_blank');\n\n					}\n\n					$('.splashui-confirm').remove()\n\n					closeSimpleModal()\n\n					setTimeout(function(){\n						$('body').removeClass('custom-editor')\n					}, 10)\n\n				}, confirmMessage, 'Request Access', 'builder-mode-modal', true);\n		}\n	}\n\n	//call dom ready for bindings as soon as AssetEditor is called\n	$(domReady);\n}\n\nfunction getSelectionNode() {\n	var n = false;\n	if (window.getSelection) {\n	    n = window.getSelection().focusNode.parentNode;\n	} else if (document.selection && document.selection.type != \"Control\") {\n	    n = document.selection.createRange().parentElement();\n	}\n	if(n!==false){\n		n = $(n);//jquery-ify it.\n		if(n.parents(\".fontFamEdited\").length > 0){\n			n = n.parents(\".fontFamEdited:first\");//go futher out if we can.\n		}\n	}\n	return n;\n}\n\n//function to find currently selected text.  via http://stackoverflow.com/questions/5379120/get-the-highlighted-selected-text\nfunction getSelectionText() {\n    var text = \"\";\n    if (window.getSelection) {\n        text = window.getSelection().toString();\n    } else if (document.selection && document.selection.type != \"Control\") {\n        text = document.selection.createRange().text;\n    }\n    return text;\n}\n\nfunction addElementButtons(){\n	if( $('body').hasClass('advMode') ){ // IF IN ADV MODE\n		$(\"#splash-container\").find(\"div.drop-area\").each(function(){\n			var $t = $(this);\n			if($t.find(\".layoutGrp\").length < 1){//if there's no groups within this drop-area, it's empty.\n				$t.addClass('not-edited').find(\".add-placeholder\").remove();//remove existing add-placeholder instances prior.\n				$t.append('<div class=\"grp p0 add-placeholder\"><div class=\"nu-btn nu-btn-sleek square outlined onPageAddSec abs tl50 xy-50\">Add Element</div></div>');\n			} else {\n				$t.removeClass('not-edited').find(\".add-placeholder\").remove();\n			}\n		});\n	} else { // IF BASIC MODE, ADD ADDER BTN TO BELOW LAST ELEMENT\n		$(\"#splash-container\").find(\"div.drop-area\").each(function(){\n			var $t = $(this);\n			if(!$t.parent().hasClass('container-ele')) {\n				$t.find(\".add-placeholder\").remove();\n			}\n		});\n		var $masterGroup = findMasterGroup();\n		if($masterGroup.length > 0){\n			$masterGroup.append($(\"#addSecOnPage\"));\n		} else {\n			var $lastEle = $('.layoutGrp:last')\n			$(\"#addSecOnPage\").insertAfter( $lastEle )\n		}\n	}\n}\n\nfunction getColumnContainerMarkup(type){\n	var markup;\n	if (type == '3-columns') {\n		markup = {\n			group: [\n				{'width':'w1-3', 'name':'Column 1', 'contain':true, 'drop-area':true, 'class': 'not-edited' },\n				{'width':'w1-3', 'name':'Column 2', 'contain':true, 'drop-area':true, 'class': 'not-edited' },\n				{'width':'w1-3', 'name':'Column 3', 'contain':true, 'drop-area':true, 'class': 'not-edited' }\n			],\n			'class':'container-3col container-ele element',\n			'contain':true,\n			'name': 'Container (3 col)'\n		};\n	} else if (type == '2-columns') {\n		markup = {\n			group: [\n				{'width':'w1-2', 'name':'Column 1', 'contain':true, 'drop-area':true, 'class': 'not-edited' },\n				{'width':'w1-2', 'name':'Column 2', 'contain':true, 'drop-area':true, 'class': 'not-edited' }\n			],\n			'class':'container-2col container-ele element ',\n			'contain':true,\n			'name': 'Container (2 col)'\n		};\n	} else if (type == '4-columns') {\n		markup = {\n			group: [\n				{'width':'w1-4', 'name':'Column 1', 'contain':true, 'drop-area':true, 'class': 'not-edited' },\n				{'width':'w1-4', 'name':'Column 2', 'contain':true, 'drop-area':true, 'class': 'not-edited' },\n				{'width':'w1-4', 'name':'Column 3', 'contain':true, 'drop-area':true, 'class': 'not-edited' },\n				{'width':'w1-4', 'name':'Column 4', 'contain':true, 'drop-area':true, 'class': 'not-edited' }\n			],\n			'class':'container-4col container-ele element',\n			'contain':true,\n			'name': 'Container (4 col)'\n		};\n	} else if (type == '1-column') {\n		markup = {\n			group: [\n				{'width':'w1-1', 'name':'Column 1', 'contain':true, 'drop-area':true, 'class': 'not-edited' }\n			],\n			'class':'container-1col container-ele element',\n			'contain':true,\n			'name': 'Container (1 col)'\n		};\n	}\n	else if (type == 'modal') {\n		markup = {\n			group: [\n					{\n						'width':'w1-1',\n						'name':'Modal',\n						'contain':true,\n						'drop-area':true,\n						'modalId':modal.uniqueID(),\n						'styles': {\n							'min-width':'400px',\n							'min-height':'200px',\n							'max-width': '600px',\n							'max-height':'602px',\n							'background-color':'rgba(255, 255, 255, 1.0)'\n						}\n					}\n			],\n			'class':'container-1col container-ele element isModal',\n			'styles': {\n				'background-color':'rgba(0, 0, 0, 0.75)'\n			},\n			'contain':true,\n			'name': 'Modal Bkg'\n		};\n	}\n	return markup;\n\n}\n\n\nfunction saveAutoBackup(){\n	var stageCount = $('#stagesWrap').find('.stages-list > .stage').length;\n\n	var params = {}\n\n	params.isBackup = true\n\n	var backupName = 'Auto Backup'\n	params.stageName = backupName\n\n	createNewStage( params )\n\n}\n\n///NEW ADV MODE LAYOUT SWITCH...TAKES INTO ACCOUNT COLUMNS AND CONTAINER ITEMS TOO\n	var changeLayout = {\n		ftContain: $('#finetune-layout-contain'),\n		ftNestContain: $(\"#nestedLayoutContainer\"),\n		ftAllContain: $('#allSectionsContain'),\n		basic: function() {\n			var getCustomBlocks = \"custom-block\";\n			var RSVPHiddenCheck = $(\"#extraRSVPControls\").parents('.ft-grp:first').find('input.hide-section').val();\n			if(RSVPHiddenCheck == \"1\") {\n				var $rsvpHidden = $(\"#extraRSVPControls\").find('.hideBtnToggle');\n				$rsvpHidden.addClass('checked');\n				$rsvpHidden.find('input:first').val('1');\n			}\n			if(RSVPHiddenCheck == \"0\" || typeof RSVPHiddenCheck == \"undefined\"  ) {\n				var $rsvpHidden = $(\"#extraRSVPControls\").find('.hideBtnToggle');\n				$rsvpHidden.removeClass('checked');\n				$rsvpHidden.find('input:first').val('0');\n			}\n			$('body').removeClass('designerMode advMode editColors editFonts editSwatchColor')\n			$('#designer-toggle').removeClass('active').parents('.toggle-wrap:first').removeClass(\"active\");\n			changeLayout.ftNestContain.addClass('hide');\n			changeLayout.ftAllContain.removeClass('hide');\n			$('.moveCursor').addClass('hide');\n			$(\"#finetune-layout-cliff\").before(changeLayout.ftContain);\n			$('#allSectionsContain').removeClass('collapse icon-f-wide-darr');\n			$('#buttonTabWrap .advopt-cover').after($(\"#extraRSVPControls\"));\n\n			changeLayout.ftContain.find('.ft-grp').addClass('hide');\n			$(\".ft-grp.grp-wrapper\").find('.title:first').addClass('hideSidebar');\n			closeCustomSection(); // THIS IS A FIX FOR SWITCHING TO BASIC MODE FROM ADV WHEN ON THE LAYOU TAB\n\n			setTimeout(function(){\n				changeLayout.ftContain.find('.ft-grp').each(\n					function() {\n						var groupType = $(this).attr('group-type');\n						if(groupType !== undefined && groupType.indexOf(getCustomBlocks) > -1){\n								//alert(groupType);\n								changeLayout.ftContain.find('.ft-grp[group-type=\"'+groupType+'\"]').removeClass('hide');\n						}\n					}\n				);\n				changeLayout.ftContain.find('.grp-wrapper').removeClass('hide');\n				setWindowHeight($(\"#allSectionsContainInner\"));\n			},100);\n\n\n			JSCookies.removeItem('advancedMode', '/', 'splashthat.com')\n			JSCookies.setItem('designerMode', false);\n\n			var thisMode = 'basic-designer';\n\n			if( constants.is_builder == 1 ){\n				thisMode = 'basic-builder'\n			}\n\n			constants.designer_mode = thisMode\n			$('#simple-modal-wrap').find('a[data-tab=\"builder-elements\"]:first').addClass('hide');\n			$.post(constants.finetune_formBase+'/account/saveUserField', {field: 'designer_mode', value: thisMode });\n\n			finetuneDeActivateOnPageEditables();\n			finetuneActivateOnPageEditables();\n			makeGrpsSortable(true);\n			addElementButtons();\n		},\n		designer: function( skipBackup ){\n			var getCustomBlocks = \"custom-block\";\n			var RSVPHiddenCheck = $(\"#extraRSVPControls\").parents('.ft-grp:first').find('input.hide-section').val();\n			if(RSVPHiddenCheck == \"1\") {\n				var $rsvpHidden = $(\"#extraRSVPControls\").find('.hideBtnToggle');\n				$rsvpHidden.addClass('checked');\n				$rsvpHidden.find('input:first').val('1');\n			}\n			if(RSVPHiddenCheck == \"0\" || typeof RSVPHiddenCheck == \"undefined\"  ) {\n				var $rsvpHidden = $(\"#extraRSVPControls\").find('.hideBtnToggle');\n				$rsvpHidden.removeClass('checked');\n				$rsvpHidden.find('input:first').val('0');\n			}\n			$('#designer-toggle').addClass('active').parents('.toggle-wrap:first').addClass(\"active\");\n			$('body').addClass('designerMode').removeClass('advMode');\n			changeLayout.ftContain.find('.ft-grp').removeClass('hide');\n			$(\".ft-grp.grp-wrapper\").find('.title:first').removeClass('hideSidebar');\n			$('#buttonTabWrap .advopt-cover').after($(\"#extraRSVPControls\"));\n			changeLayout.ftContain.find('.ft-grp').addClass('hide');\n			if( $('body').hasClass('finetuneOpen') ){\n				openFinetuneBar() // THIS IS A FIX FOR SWITCHING TO BASIC MDOE FROM ADV WHEN ON THE LAYOUT TAB\n			}\n			setTimeout(function(){\n				changeLayout.ftContain.find('.ft-grp').each(\n					function() {\n						var groupType = $(this).attr('group-type');\n						if(groupType !== undefined && groupType.indexOf(getCustomBlocks) > -1){\n								//alert(groupType);\n								changeLayout.ftContain.find('.ft-grp[group-type=\"'+groupType+'\"]').removeClass('hide');\n						}\n					}\n				);\n				changeLayout.ftContain.find('.grp-wrapper').removeClass('hide');\n				setWindowHeight($(\"#allSectionsContainInner\"));\n			},100);\n\n			JSCookies.removeItem('advancedMode', '/', 'splashthat.com')\n			JSCookies.setItem('designerMode', true);\n			changeLayout.ftAllContain.removeClass('hide');\n			changeLayout.ftNestContain.addClass('hide');\n			//$(\"#admin-group-clusters\").append(changeLayout.ftContain);\n			$(\"#finetune-layout-cliff\").before(changeLayout.ftContain);\n			setWindowHeight(changeLayout.ftNestContain);\n			finetuneDeActivateOnPageEditables();\n			finetuneActivateOnPageEditables();\n			makeGrpsSortable();\n			addElementButtons();\n			makeGrpsSortable(true);\n\n\n			var stageCount = $('#stagesWrap').find('.stages-list > .stage').length\n\n			constants.designer_mode = 'designer'\n\n			if( !skipBackup){\n\n				$.post(constants.finetune_formBase+'/account/saveUserField', {field: 'designer_mode', value: 'designer'});\n\n				saveAutoBackup()\n			}\n\n		},\n		advanced: function ( skipBackup ) {\n			//$('#builder-toggle').addClass('active').parents('.toggle-wrap:first').addClass(\"active\");\n\n			// IF HAS BUILDER THIS IS BUILDER TOGGLE, TOGGLE ADV MODE\n			$('#designer-toggle').addClass('active builder-toggle').parents('.toggle-wrap:first').addClass(\"active\");\n\n			$('body').addClass('advMode').removeClass('designerMode');\n\n			$('.moveCursor').removeClass('hide');\n			changeLayout.ftNestContain.removeClass('hide');\n			changeLayout.ftAllContain.addClass('hide');\n		changeLayout.ftContain.find('.ft-grp').removeClass('hide');\n			$(\".ft-grp.grp-wrapper\").find('.title:first').removeClass('hideSidebar');\n			if( $('body').hasClass('finetuneOpen') ){\n				openFinetuneBar() // THIS IS A FIX FOR SWITCHING TO BASIC MDOE FROM ADV WHEN ON THE LAYOUT TAB\n			}\n\n			JSCookies.setItem('designerMode', false);\n			JSCookies.setItem('advancedMode', true, Infinity, '/', 'splashthat.com');\n\n			$(\"#admin-group-clusters\").append(changeLayout.ftContain);\n			setWindowHeight(changeLayout.ftNestContain);\n			finetuneDeActivateOnPageEditables();\n			finetuneActivateOnPageEditables();\n			makeGrpsSortable();\n			addElementButtons();\n\n\n			var stageCount = $('#stagesWrap').find('.stages-list > .stage').length\n\n			constants.designer_mode = 'builder'\n\n			if( !skipBackup){\n\n				$.post(constants.finetune_formBase+'/account/saveUserField', {field: 'designer_mode', value: 'builder'});\n				saveAutoBackup()\n\n			}\n\n		},\n		viewAsUser: function(){\n			JSCookies.setItem('viewAsBuilder', false);\n\n			constants.is_builder = 0\n\n			$('body').removeClass('advMode')\n			$('#designer-toggle').removeClass('builder-toggle')\n			$('#finetune-sections').find(\".design-pane-utils .outer-title\").find(\"span:first\").text('Designer Mode')\n			$('#simple-modal-wrap').find('a[data-tab=\"builder-elements\"]:first').addClass('hide');\n\n		},\n		viewAsBuilder: function(){\n			JSCookies.setItem('viewAsBuilder', true);\n\n			constants.is_builder = 1\n			$('#simple-modal-wrap').find('a[data-tab=\"builder-elements\"]:first').removeClass('hide');\n			$('#designer-toggle').addClass('builder-toggle').addClass('active')\n			$('#finetune-sections').find(\".design-pane-utils .outer-title\").addClass('active').find(\"span:first\").text('Designer Mode')\n\n		}\n	}\n\nvar layoutFunction = {\n	highlightSidebar: function($someFtGrp){ //expects g-id of ftg-Id object or false for rmeoving hover state..\n		if(!finetuneOpen){\n			return false;\n		}\n		var gid = ftGetId($someFtGrp);\n		if($someFtGrp.hasClass('ft-grp')){\n			if(gid){\n				var ftgId = gid.replace('ftg-','g-');\n				$(\"#g-\"+gid).addClass('hovering');\n			}\n		} else {\n			if(gid){\n				var $ftg = $(\"#ftg-\"+gid).addClass('hovering');\n				$ftg.children('span.title').addClass('dragging');\n				if($ftg.parent().hasClass('collapsed')){\n					//$ftg.parent().removeClass('collapsed');\n					//layoutFunction.scrollToSection(ftgId);\n				}\n			}\n		}\n	},\n	removeHighlight: function($grp) { //expects g-id of ftg-Id object or false for rmeoving hover state..\n		if(!finetuneOpen){\n			return false;\n		}\n		if($grp !== false){\n			var gid = $grp.attr('id');\n			if(gid){\n				var ftgId = gid.replace('g-','ftg-');\n				$(\"#\"+ftgId).children('span.title').removeClass('dragging');\n				// layoutFunction.scrollToSection(ftgId);\n			}\n		}\n	},\n	scrollToSection: function(ftgId) {//expects ftg-Id\n		var ftg = $('#'+ftgId);\n		if(ftg){\n			var ftgOffset = ftg.position().top;\n			var containerHeight = $(\"#nestedLayoutContainer\").height();\n			//generate_ftg_positions();\n			//$(\"#nestedLayoutContainer\").animate({scrollTop:$(\"#\"+ftgId).position().top*2});\n		}\n	},\n	checkToolsViewport: function($el) {\n		var elOffset = $el.offset(),\n		    elHeight = $el.height(),\n			scrollPos = window.pageYOffset || document.documentElement.scrollTop,\n			tools = $el.find('.edit-tools-layout'),\n			topOfTool = elOffset.top - tools.height();\n		//reset the top position css each time\n		tools.css({top: ''});\n		//always put the tooltip at the top of the modal\n\n		if( $('#splash-container').scrollTop() <= 5 ){\n			// CHECKS TO MAKE SURE USER HASNT SCROLLED ON THE PAGE AT ALL\n			return false\n		}\n\n		if($el.parent().hasClass('isModalFront')) {\n			tools.css({top: 0});\n		}\n		//the top of the hovered element is off the top of the viewport\n		else if(scrollPos > topOfTool ) {\n			tools.css({top: (scrollPos - elOffset.top) + 'px'});\n		}\n	},\n	checkBtnViewPort: function($btn){\n		if($btn.hasClass('button') || $btn.hasClass('element-rsvp')){\n			$btn.find('.inner').find('.rsvp-bg-wrap input').css('background-color',$btn.css('background-color'));\n			$btn.find('.inner').find('.rsvp-color-wrap input').css('background-color',$btn.css('color'));\n			if($btn.width() < 280){\n				var deleteButton = $btn.find('.edit-tools').find(\".inner\").children();\n				deleteButton.css(\"margin\",\"0\").css(\"width\",\"60px !important\");\n			}\n			else {\n			 	return false;\n			}\n		}\n	},\n	keepEditTools: function($btn) {//after clicking on color picker makes sure edit tools stay visible\n		$(\"#splash-container\").hover();\n		$(this).parents('.layoutGrp:first').addClass('hovering').addClass('the-focus');\n	}\n}\n\nvar addBtnTime\n\nvar setWindowHeight = function($container) {\n\n	    var fullfinetuneHt = $(window).height();\n		var fintuneHeadHt = $(\".sectionHead\").height();\n		var containerMaxHeight = fullfinetuneHt-fintuneHeadHt-150;\n		var height = 'height';\n\n		$('#finetune-sections').css('height', fullfinetuneHt + 'px')\n\n		if(!inAdvancedMode()){\n			height ='max-height';\n			var headHeight = $('#finetune-sections').find('.sectionHead:first').outerHeight()\n			containerMaxHeight = fullfinetuneHt-headHeight - 30\n			$container.css('overflow','auto')\n			$('#allSectionsContain').css('height', $('#finetune-sections').outerHeight() - headHeight  + 'px')\n		}\n\n		$container.css(height,containerMaxHeight);\n\n		clearTimeout( addBtnTime )\n\n		addBtnTime = setTimeout(function(){\n\n			if( $container.attr('id') == 'allSectionsContainInner' ){\n				var innerStuffHeight = $('#basicsTabWrap').outerHeight() + $('#buttonTabWrap').outerHeight() + $('#sectionTabWrap').outerHeight()\n\n				if( innerStuffHeight > $container.outerHeight() ){\n					$container.addClass('isScrolling')\n				} else {\n					$container.removeClass('isScrolling')\n				}\n			}\n\n		}, 250)\n\n		//$container.css('max-height',containerMaxHeight);\n	}\n\nfunction openEmbedModal(block_type,gid){ //method for opening map, iframe, audio and video embed modals.\n	var $modal = $(\"#\"+block_type+'-embed');\n	var $layoutGrp = $(\"#g-\"+gid);\n	if($modal.length > 0){\n		if(block_type=='map'){\n			var $img = $layoutGrp.find(\".grp.embed\").find(\"img\");\n			if(typeof $img!=='undefined'){//} && typeof $img[0]!=='undefined'){//grab the actual IMAGE TAG\n				$(\"#map-hidden-img\").prop(\"src\",$img.prop(\"src\")).show();\n				$(\"#map-embed-placeholder\").hide();\n			} else {\n				$(\"#map-hidden-img\").prop(\"src\",\"\");\n				$(\"#map-embed-placeholder\").show();\n			}\n			var $a = $layoutGrp.find(\".grp.embed\").find(\"a.embed-url\");\n			if($a.length > 0){\n				$(\"#venue-map-url\").val($a.prop(\"href\"));\n			} else {\n				$(\"#venue-map-url\").val();\n			}\n			$(\"#venue-search-map-embed\").val('').focus();\n			// load width, height and zoom\n			var map_opts = $(\"#g-\"+gid).find('.sf.map:first').data('splashFeedOptions');\n			if ( typeof map_opts != 'undefined' ) {\n				$('#map-embed-width').val( typeof map_opts.width != 'undefined' ? map_opts.width : $('#map-embed-width').val() );\n				$('#map-embed-height').val( typeof map_opts.height != 'undefined' ? map_opts.height : $('#map-embed-height').val() );\n				$('#map-embed-zoom').val( typeof map_opts.zoom != 'undefined' ? map_opts.zoom : $('#map-embed-zoom').val() );\n			}\n\n		} else {\n			var iframe = $layoutGrp.find(\".grp.embed\").html().trim();\n			$modal.find(\"textarea:first\").val(iframe);\n		}\n		$modal.addClass('editing').attr(\"group-id\",gid).fireSimpleModal({persistent: true });\n	}\n}\n\nfunction setEditMobileLink(){\n\n}\n\nfunction getElementContainer(type){//this is the only place the header container is defined.  let's keep it that way.\n}\n\nfunction generateClassesFromGroup(group){\n	var classes = [];\n	if (group['width']){\n		if(group['width'].match(/^w/) ) {\n			classes.push(group['width']);\n		} else if(group['width'].match(/-/) ){\n			classes.push('w'+group['width']);\n		}\n	}\n	if (group['class']) {\n		classes.push(group['class']);\n	}\n	if(group['position']){\n		classes.push('p-'+group['position']);\n	}\n	if(group['drop-area']){\n		classes.push('drop-area');\n	}\n	if(group['editable_bg']){\n		classes.push('editable_bg');\n	}\n	if(group['tieBgToHeader'] && group['tieBgToHeader'] == 1){\n		classes.push('tieBgToHeader');\n	}\n\n	if(group['link-to-swatch'] && group['link-to-swatch']==1){\n		classes.push('link-to-swatch');\n		if(group['swatches']){\n			var swatches = buildSwatches(group['swatches']);\n			if(swatches!=''){\n				classes.push(swatches);\n			}\n		}\n	}\n\n	if(group['link-to-font'] && group['link-to-font']==1){\n		classes.push('link-to-font');\n		if(group['font_combos']){\n			var swatches = buildSwatches(group['font_combos']);\n			if(swatches!=''){\n				classes.push(swatches);\n			}\n		}	\n	}\n\n	if(group['repeatable-block-id'] ){\n		classes.push('has-items');\n	}\n\n\n	if (typeof group.master_group!=='undefined' && group.master_group == '1') {\n		classes.push('master_group');\n		classes.push('container-ele');\n	}\n\n	if (group.group){\n		classes.push('c'+group.group.length);\n		if(group.group.length > 0) {\n			classes.push('p-grp');\n		}\n	}\n\n	if(group.element){\n		classes.push('element-'+group.element);\n	}\n\n	if (group.set_as_body){\n		classes.push('event-body');\n	}\n\n	if (group.eventImage){\n		classes.push('event-bg-url');\n	}\n\n	return classes;\n}\n\nfunction generateAttributesFromGroup(group){\n	var attr = {};\n	if(group['lock_type']){\n		attr['lock'] = group['lock_type'];\n	}\n\n	if(group['modalId']){\n		attr['modalId'] = group['modalId'];\n	}\n\n	if(group['repeatable-block-id'] ){\n		attr['data-repeatable-block-id'] = group['repeatable-block-id'];\n	}\n\n	return attr;\n}\n\nfunction editStage(params, $stage){\n	if ( typeof $stage !== 'undefined' )\n		$stage.find('.save-scheduling-opts').text('Saving');\n	$.ajax({\n		url: \"/splash/editStage\",\n		type: 'POST',\n		dataType: 'json',\n		data: params,\n		success:function(response){\n			if ( typeof $stage !== 'undefined' ) {\n				$stage.find('.scheduling-opts').hide();\n				$stage.find('.stage-utils').show();\n				if ( typeof params['fields']['scheduled_for'] !== undefined ) {\n					$stage.find('.mode-scheduling-opts').val(params['fields']['scheduled_for'] );\n					if ( params['fields']['scheduled_for'] == 'event_start' )\n						$stage.find('.scheduled-for').text( 'Scheduled for: Event Start Date' );\n					else if ( params['fields']['scheduled_for'] == 'event_end' )\n						$stage.find('.scheduled-for').text( 'Scheduled for: Event End Date' );\n					else\n						$stage.find('.scheduled-for').text( '' );\n				}\n				$stage.find('.save-scheduling-opts').text('Save');\n			}\n		},\n		error:function(){\n			alert('There was an error editing the name for your stage.  Please try again.');\n		}\n	});\n}\n\nfunction loadThemeTab($block,params){//used to grab tabs of theme modal on the fly.  pulling from backend now.\n	if($block.hasClass('unloaded')){\n		$block.addClass('loading');\n		$.ajax({\n			url:\"/splash/loadThemes\",\n			data: { type: params['type'], current_theme_id: constants.theme_id },\n			type: 'POST',\n			dataType: 'json',\n			success:function(response){\n\n				var currentCount = 0;\n\n				$block.removeClass('loading unloaded');\n				if(response['themes'] && response['themes'].length > 0) {\n					var theme_html = '';\n					for(var x in response['themes']){\n						var theme_id = response['themes'][x]['SplashTheme']['id'];\n						if( !allThemes[theme_id] ){\n							allThemes[theme_id] = response['themes'][x]['SplashTheme'];\n						}\n						var $new_theme = $(\"#blank-theme-card\").clone();\n						$new_theme.find(\".theme-option:first\").prop('id','splash-theme-'+theme_id).attr('value',theme_id);\n						if(theme_id==constants.theme_id){\n							$new_theme.find(\".theme-option:first\").addClass(\"current-theme\");\n\n							currentCount = currentCount + 1;\n						}\n\n						$new_theme.find(\".theme-card-wrap .nameText\").text('View '+allThemes[theme_id]['name']).prop('title',allThemes[theme_id]['name']);\n						$new_theme.find(\".theme-card-wrap\").css('background-image','url('+allThemes[theme_id]['image_url']+')').prop('title',allThemes[theme_id]['name']);\n\n						var thisDesc = allThemes[theme_id]['description']\n						if( ! thisDesc ){\n							thisDesc = 'Click below to set this as your theme.';\n						}\n\n						$new_theme.find(\".theme-desc\").text( thisDesc ).end()\n								.find(\".theme-deets .nameText\").text(allThemes[theme_id]['name']);\n						theme_html += $new_theme.html();\n					}\n					$block.append(theme_html);\n\n					if( currentCount == 0 ){\n						// IF NO THEMES FOUND AS 'CURRENT' (if custom theme, etc)\n						// (FOR CURRENT THEME TAB IN THEME MODAL)\n						var $new_theme = $(\"#blank-theme-card\").clone();\n						$new_theme.find(\".theme-option:first\").prop('id','splash-theme-'+constants.theme_id).attr('value',constants.theme_id);\n\n						$new_theme.find(\".theme-card-wrap .nameText\").text('View '+constants.thisTheme).prop('title',constants.thisTheme);\n						$new_theme.find(\".theme-card-wrap\").css('background-image','url('+constants.thisThemeImg+')').prop('title',constants.thisTheme);\n\n						$new_theme.find('.theme-option:first').addClass('current-theme')\n\n						var thisDesc = thisDesc = 'Click below to set this as your theme.';\n\n						$new_theme.find(\".theme-desc\").text( thisDesc ).end()\n								.find(\".theme-deets .nameText\").text(constants.thisTheme);\n						theme_html += $new_theme.html();\n\n						$block.append(theme_html);\n					}\n\n				} else {\n					$block.addClass('no-results').html('No results found!');\n				}\n\n\n\n			},\n			error: function(){\n				alert('There was an error loading themes.  Please refresh the page and try again.');\n			}\n		})\n	}\n\n}\n\nfunction isLegacyEvent(){//one place in JS to check for legacy.\n	if($body.hasClass('isLegacy')){\n		return true;\n	} else {\n		return false;\n	}\n}\n\n//THIS FUNCTION CONVERTS EVENT_SETTING.THEME_STYLES PROPERTIES TO EVENT_SETTING.LAYOUT PROPERTIES.\nfunction convertTo2OH(key){\n	if( ! isLegacyEvent() ){\n		return false;//no need to update if not legacy.\n	}\n\n	var keys = ['title','subtitle','rsvp','when','where','host','hash','header'];\n\n	if(key!=null && $.inArray(key,keys) > - 1 && EventSettingThemeStyles){\n\n		// if(key!=null){\n		// 	keys = [key];\n		// }\n		//for(var x in keys){\n		//var key = keys[x];\n\n		//only loop through if we're given an exact key match.//ie title, when, where, rsvp.\n		//also, make sure the themeStyles array exists and is not empty before proceeding.\n		if(typeof EventSettingThemeStyles[key]!=='undefined' && typeof EventSettingThemeStyles[key]['styles']!=='undefined'){\n\n			if(key=='header'){ ///this deals with header being able to be anywhere on page.  No distinct ID to reference.\n				var $layoutGrp = getTargetById('header');\n			} else if(key == 'when') {\n				var $layoutGrp = $('.mega-date-wrap');\n			} else if(key == 'where') {\n				var $layoutGrp = $('.mega-location-wrap');\n			} else {\n				var $layoutGrp = $(\"#element-\"+key).parents(\".layoutGrp:first\");\n			}\n\n			if($layoutGrp.length > 0 && $layoutGrp !== 'undefined'){\n				var grp = ftGetGrp($layoutGrp);\n\n				// var $accordion = ftGetAccordion($layoutGrp);\n				// $accordion.empty().removeClass('bound');\n				if(!grp['styles']) {\n					grp['styles'] = {};\n				}\n\n				for(var y in EventSettingThemeStyles[key]['styles']){\n					grp['styles'][y] = EventSettingThemeStyles[key]['styles'][y];\n					//updateBlockProperty($layoutGrp,grp['styles'][y]);\n				}\n\n				if( key == 'where' || key == 'when'){\n					$layoutGrp.find('.layoutGrp').each(function(){\n						var thisGrp = ftGetGrp( $(this) );\n\n						// SETS COLOR OF CHILDREN IN MEGA LOCATION WRAP / MEGA DATE WRAP to INHERIT IF SET\n						if( typeof thisGrp['styles'] !== 'undefined' && typeof thisGrp['styles']['color'] !== 'undefined' ){\n							thisGrp['styles']['color'] = 'inherit'\n						}\n\n					})\n				}\n\n				setTimeout(function(){\n					//sections to unset.\n					finetuneEditedFields['data[EventSetting][theme_styles]['+key+'][bkup_styles]'] = EventSettingThemeStyles[key]['styles'];\n					finetuneEditedFields['data[EventSetting][theme_styles]['+key+'][styles]'] = '';\n				},1);\n\n\n			}\n		}\n		//}\n		// debugger;\n		/*\n		if(key=='rsvp'){\n			if(!grp['styles']['background-color']){\n				grp['styles']['background-color'] = EventSettingThemeStyles['rsvp']['styles']['background-color'];\n			}\n			if(!grp['styles']['color']){\n				grp['styles']['color'] = EventSettingThemeStyles['rsvp']['styles']['color'];\n			}\n		}\n		*/\n\n		finetuneLayoutChangesMade();\n		finetuneFieldChangesMade();\n\n	}\n}\n\n//linking modal functions\nvar linkingModal = {\n	getHeight: function() {\n		linkingModal.currentHeight = $(\"#nav-embed\").height() - 200;\n		$(\"#nav-items-list\").css('height',linkingModal.currentHeight);\n	},\n	toNav: function() {\n\n	},\n	toButton: function() {\n\n	},\n	grabBtnText: function($btnObj) {\n		var btnText = $btnObj.text();\n		$('input.nav-name').val(btnText)\n	},\n	updateBtnText: function() {\n\n	}\n}\n\nfunction editHeadBG( $t, editing ){\n	setTimeout(function(){\n		var $div = $(\"#cropAnyPhoto\");\n		var group_id = $div.data(\"group-id\");\n		var $liveGroup = ftGetLayoutGrp(group_id);\n		var grp = ftGetGrp($liveGroup);\n		var headType = grp['bg-type']||'image';\n\n		if ( headType == 'color' ){\n			$div.addClass('isColor')\n			$('#topImageNav').find('.topNavBtn').removeClass('active').end().find('.addColor').addClass('active')\n			$('.editBgWrap').removeClass('is-image is-color').addClass('is-color');\n			setTimeout(function(){//just to be safe. make sure it gets the color first.\n				addColorPickerToModal()\n			},1);\n		} else if (headType == 'image') {\n			$div.addClass('isImage')\n		} else if (headType == 'video'){\n			vidID = $('body').find('.event-bg-url').find('.vidBG').find('iframe').attr('video-id')\n			$div.addClass('isVideo')\n			$('#topImageNav').find('.topNavBtn').removeClass('active').end().find('.editCurrent').addClass('active editVid')\n			$('#imgContentWrap').find('.latestVid').addClass('loading').html('<iframe id=\"demoPlayer\" vidID=\"'+vidID+'\" width=\"100%\" height=\"265px\" src=\"//www.youtube.com/embed/'+vidID+'?version=3&rel=0&showinfo=0&autohide=1\" frameborder=\"0\" allowfullscreen=\"\"></iframe>');\n		}\n\n		if( editing == 'head'){\n			$div.addClass('editHead');\n		} else if( editing == 'bg' ) {\n			$div.addClass('editBG');\n		}\n\n		trackIndicativeEvent('imageModalOpen',{'type':editing});\n\n		$('#topImageNav').find('.active:first').click() // MAKE SURE CORRECT TAB / TAB CONTENT IS BEING SHOWN\n\n	},1);\n}\n\n$.fn.addEditTools = function(){\n	var $editTools;\n	var $layoutGrp = $(this);\n	var $sf = $layoutGrp.find(\".sf:first\");\n	var block_type = $sf.attr(\"block-type\");\n	var classes = $layoutGrp.attr('class');\n	if($layoutGrp.find(\".layoutGrp\").length > 0){ //if there are groups WITHIN this group, the block type cannot be relied on\n		block_type = false;\n	}\n\n	if( $layoutGrp.offset().top <= 60 ){\n		$layoutGrp.addClass('flipToolsDown')\n	}\n\n	var group_id = $layoutGrp.prop('id');\n	var has_items = false;\n\n	if( $layoutGrp.hasClass('container-ele') ){ // IF CONTAINER\n		 $editTools = $('#finetune-on-page-container-tools').clone();\n	} else if( $.inArray(block_type, ['map', 'iframe', 'audio', 'video']) > -1){ //.find('.media.embed').length > 0 ){ // IF EMBED - Map, Video, Audio, Iframe\n		 $editTools = $('#finetune-on-page-embed-tools').clone();\n\n		 var $mediaBtn = $editTools.find('.edit-media-jump')\n		 $mediaBtn.addClass( 'edit-' + block_type ).find('span').text(block_type);\n\n		 if( $layoutGrp.parents(\"div.drop-area\").length < 1) {//if this block is not in a draggable area, then remove it.\n		 	$editTools.find(\".drag-handle\").remove();\n		 }\n\n		 var nuClass = ''\n		 if( block_type == 'map' ){\n		 	nuClass = 'icon-f-map'\n		 } else if ( block_type == 'iframe' ){\n		 	nuClass = 'icon-f-iframe-1'\n		 } else if ( block_type == 'audio' ){\n		 	nuClass = 'icon-f-audio'\n		 } else if ( block_type == 'video') {\n		 	nuClass = 'icon-f-video'\n		 }\n\n		 $mediaBtn.find('i').each(function(){ //update the associated icon.\n		 	$(this).addClass( nuClass )\n		 })\n	} else if( $layoutGrp.hasClass('container-ele') ){ // IF CONTAINER\n		 $editTools = $('#finetune-on-page-container-tools').clone();\n	} else if( $.inArray( block_type, ['speakers','sponsors','images'] ) > -1 ){ // IF LIST TYPE (SPEAKERS, SPONSORS, ETC)\n		 $editTools = $('#finetune-on-page-list-tools').clone();\n		 has_items = true;\n	} else if( $.inArray( block_type, ['list', 'schedule', 'schedule-list', 'headline', 'social-links-2', 'quote', 'event-hub', 'nav','countdown','attendees'] ) > -1 ){\n		$editTools = $('#finetune-on-page-text-list-tools').clone();\n		has_items = true;\n		if( $.inArray( block_type, ['headline', 'quote', 'countdown', 'attendees'] ) > -1 ) {\n			has_items = false;\n		}\n	} else if( $.inArray( block_type, ['comments'] ) > -1 ){\n		$editTools = $('#finetune-on-page-comments-tools').clone();\n	// } else if( $.inArray( block_type, ['social-links-2'] ) > -1 ){\n	// 	$editTools = $('#finetune-on-page-modal-tools').clone();\n	} else if ( $layoutGrp.hasClass('element-host') ){\n		$editTools = $('#finetune-on-page-host-tools').clone();\n	} else if( classes.match(/element-title|element-subtitle|element-hash/g) ){\n		$editTools = $('#finetune-on-page-basic-tools').clone();\n	} else if ( classes.match(/mega-date-wrap|mega-location-wrap/g) ){\n		$editTools = $('#finetune-on-page-datevenue-tools').clone();\n\n		var nuClass = 'icon-f-ele-navigation'\n		var nuText = 'Venue'\n		if( classes.match(/mega-date-wrap/g) ){\n			nuClass = 'icon-f-calendar-2'\n			nuText = 'Date'\n		}\n\n		$editTools.find('.edit-date').attr('title',nuText)\n					.find('i').attr('class','').addClass( nuClass ).end()\n					.find('span').text( nuText )\n\n	} else if ( classes.match(/element-social-links/g) ){\n		$editTools = $('#finetune-on-page-social-tools').clone();\n	} else if ( block_type == 'image' ){\n		$editTools = $('#finetune-on-page-image-tools').clone();\n	} else if( block_type == 'button' || block_type == 'attendees' || $layoutGrp.hasClass('element-rsvp') ) {\n		$editTools = $('#finetune-on-page-link-tools').clone();\n	} else if ( $layoutGrp.hasClass('element-gallery') ){\n		$editTools = $('#finetune-on-page-gallery-tools').clone();\n	} else {\n		$editTools = $('#finetune-on-page-default-tools').clone();\n	}\n\n	if(block_type=='img_gal'){\n		has_items=true;\n	}\n\n	if($layoutGrp.parents(\".mega-location-wrap\").length > 0 || $layoutGrp.parents(\".mega-date-wrap\").length > 0){\n		return; //no need for hover states on these.\n	}\n	$editTools.removeAttr('id');\n\n	/*if($t.hasClass('drop-area')){\n		$editTools.find(\".inner:first\")\n			.prepend('<div class=\"column-switch regular grp nofl\" style=\"\" title=\"Change Columns\" tip=\"Switch Columns\">'+\n					'<i show=\"default\" class=\"icon-f-ele-columns\"></i><i show=\"hover\" class=\"icon-f-ele-columns\"></i>');\n	}*/\n	if( $layoutGrp.hasClass('editable_bg') ){//has a background that can be edited.  give it an extra button.\n		$editTools.find(\".inner:first\")\n			.prepend('<div class=\"edit-bg regular grp nofl\" style=\"\" title=\"Edit Background\" tip=\"Edit Background\">'+\n					'<i show=\"default\" class=\"icon-f-image\"></i><i show=\"hover\" class=\"icon-f-image\"></i><span class=\"inline-label\">Background</span><span class=\"inline-state\">Background</span></div>');\n	}\n\n\n	// $layoutGrp.find(\".edit-tools.editToolsFor-\"+tid).hide();\n	$layoutGrp.append('<div class=\"edit-tools editToolsFor-'+group_id+'\">'+$editTools.html()+'</div>');\n	if( $layoutGrp.hasClass('drop-area') && $layoutGrp.hasClass('not-edited') ) {//special addition for any columns.  Add Element button appended.\n		$layoutGrp.find(\".add-placeholder\").remove();//remove existing add-placeholder instances prior.\n		$layoutGrp.append('<div class=\"grp p0 add-placeholder\"><div class=\"nu-btn nu-btn-sleek square outlined onPageAddSec abs tl50 xy-50\">Add Element</div></div>');\n	}\n\n	if(has_items){ //if the element has children - ie speakers, sponsors, schedule, list, event hub.\n		$layoutGrp.addClass('has-items')\n			.find(\".list-item\").each(function(){\n				var $editItemTools = $('#finetune-on-page-item-tools').clone();\n				$editItemTools.removeAttr('id');\n				var $t = $(this);\n				if($t.hasClass('event-hub-item') || $t.hasClass('full-list-item')){\n					$('<div class=\"grp w1-3 regular event-link icon-f-ele-event-hub tip-trig left\" tip=\"Edit Event\"></div>').insertAfter( $editItemTools.find(\".inner\").find(\".drag-handle\") );\n					$editItemTools.find(\".w1-2\").addClass('w1-3').removeClass('w1-2');\n				} else if($t.hasClass('nav-item')){\n					$editItemTools.find(\".inner\").append('<div class=\"grp w1-3 regular nav-link icon-f-link tip-trig left\" tip=\"Edit Link\"></div>');\n					$editItemTools.find(\".w1-2\").addClass('w1-3').removeClass('w1-2');\n				}\n\n				$t.append('<div class=\"edit-tools items\">'+$editItemTools.html()+'</div>');\n			});\n\n	}\n\n}\n\nfunction closeFakeModal(){\n	if( $('body').hasClass('dateVenueModal') ){ // DATE / VENUE MODALS CLOSE\n		$('body').removeClass('settingsOpen dateVenueModal')\n		$(\"#edit-settings\").removeClass('onlyVenue onlyDate')\n	} else if ( $('body').hasClass('settingsOpen') ){ // CLOSE SETTINGS MODAL\n		$('body').removeClass('settingsOpen')\n	}\n}\n\nfunction findMasterGroup(){//one centralized function to return what we define as the master group.\n	return $(\"#splash-container\").find(\"div.layoutGrp.master_group:first\");\n}\n\nfunction addHeaderHovers() { //puts the inline edit header edit bg styles in place.\n	var $header = getTargetById('header');\n	$(\"#hdr-tools\").remove();\n	$header.append('<div id=\"hdr-tools\"><div id=\"changeHeaderInline\" class=\"pointer inline editHead editBG\">Edit Header</div><div id=\"changeBgInline\" class=\"pointer inline  editBG\">Edit Background</div></div>');\n}\n\nfunction stripUrl(src){//takes an image in the format url('www.website.com') -> www.website.com\n	src = (''+src).replace(/^url\\('?\"?/,'').replace(/'?\"?\\)$/,'');\n	return src;\n}\n\nfunction setParentFontSize() {\n	var $grp = $node.parents(\"div.layoutGrp:first\");\n    if(typeof $grp!=='undefined'){\n    	$grp.css({ \"font-size\": \"\" });\n    		$node = $grp;\n    		$node.find('span').each(function(){\n        		$(this).css('font-size', '')\n        	})\n\n        	$node.css('font-size', color.toString() )\n        	updateBlockProperty($grp,{ 'font-size':color.toString() });\n    }\n}\n\n//NEW ADD ELEMENT FUNCTION -- FOOTER CHECK and LOAD\nfunction addElementScroll() {\n	var curPos = $( window ).scrollTop() + $( window ).height();\n	var footerHeight = $( '#footer' ).outerHeight();\n\n	if( curPos > $( document ).height() - footerHeight ) {\n		var newBottom = curPos - $( '#footer' ).offset().top;\n		if ( newBottom > footerHeight ) {\n			newBottom = footerHeight;\n		}\n		$( '#nuAddSecBtn' ).css( 'bottom', newBottom + 16 )\n\n		} else {\n		$( '#nuAddSecBtn' ).css( 'bottom', 16 );\n	}\n}\n\nfunction loadEventHubModal(sfid,params){\n	sfid = 'sfid-'+sfid.replace('sfid-','');\n	$(\"#eventHubSimpleModal\").attr(\"sfid\",sfid).fireSimpleModal();\n	if(params!=null && typeof params.editing!=='undefined'){\n		$(\"#eventHubSimpleModal\").data('editing-row',params.editing);\n	} else {\n		$(\"#eventHubSimpleModal\").data('editing-row',false);\n	}\n\n	if(!$(\"#eventHubContentArea\").hasClass('loaded')){\n		$(\"#reloadEventHubDD\").click();\n		$(\"#eventHubContentArea\").addClass('loaded');\n	}\n}\n\nfunction updateFavIcon(value){\n	if(value!=''){\n		value = stripUrl(value);\n		$(\"#favicon\").prop(\"href\",value);\n		if($(\"#favIconInputSrc\").val().trim()==''){//if its an empty favIcon input, populate it.\n			$(\"#favIconOutput\").prop('src',value);\n			//$(\"#favIconInputSrc\").val(value).trigger('change');\n		}\n	}\n}\nvar adminPane = {\n	disabledArray:['master-group','set-as-body','set-as-repeatable'],\n	disabledMessages:['set master-group on group level', 'set body on group level', 'set repeatable on group level'],\n	hideCheckBox: function($ftgrp) {\n		var $accordion = ftGetAccordion($ftgrp);\n		var $propertyPanelLabels = $accordion.find('.layout-ctrl.props label');\n		var $checkBox = $propertyPanelLabels.children('input');\n		if(!$ftgrp.hasClass('grp-wrapper')){\n			for(var i=0;i<$checkBox.length;i++){\n				adminPane.disableCheckBox(adminPane.disabledArray[i],adminPane.disabledMessages[i]);\n				$('.'+adminPane.disabledArray[i]).parents('div.check-opt').on('click',function(){\n					return false;\n				});\n			}\n		}\n		else if($ftgrp.hasClass('grp-wrapper')){\n			for(var i=0;i<$checkBox.length;i++){\n				var $checkedLabel = $('.'+adminPane.disabledArray[i]).parents('div.check-opt');\n				$('.'+adminPane.disabledArray[i]).parents('div.check-opt').removeClass('disabled');\n				// $('.'+adminPane.disabledArray[i]).parents('div.check-opt').on('click',function(){\n				// 	adminPane.checkedElsewhere($(this));\n				// });\n			}\n		}\n	},\n	disableCheckBox: function(checkBoxName, message) {\n		var $parentContainer = $('input.'+checkBoxName).parents('div.check-opt');\n		if(adminPane.disabledArray.indexOf(checkBoxName) > -1) {\n				$parentContainer.addClass('disabled');\n				//$parentContainer.find('label:first').text(message);\n		}\n	},\n	checkedElsewhere: function($checkboxName) {\n		var master_group = findMasterGroup();\n		var master_ftgrp = master_group.prop('id').replace('g-','ftg-');\n		var master_title = $('#'+master_ftgrp).find('span.title:first').text();\n		var master_input = $checkboxName.children('label').children('input').prop('class');\n		var master_inputVal = $checkboxName.children('label').children('input').val();\n\n		$checkboxName.children('label').removeClass('checked');\n		if(master_group && master_input == 'master-group' && master_inputVal == 0) {\n			var setMasterMessage = 'Would you like to set this as the master group and remove '+master_title+' as the current master group?';\n					SplashUI.ask(function( response ) {\n						if(response){\n							onpageUndo();\n						}\n					}, setMasterMessage, 'Ok');\n		}\n	}\n};\nfunction resetDesignTabs(){	//closes all inner logic in design tabs. ie editing swatch, font combos, etc.\n	if(inAdvancedMode()){\n		$('body').removeClass('editLinks editColors editSwatchColor editFonts')\n		$('#swatchDonutWrap').removeClass('editing')\n		$('#advColorWrap').removeClass('editingSwatch')\n		$('#colorSwatchContain').removeClass('chooseColor linking-text');\n		resizeColorWheel()\n	}\n	$('body').removeClass('settingsOpen')\n\n}\n\n\n/* used to update a specific field in the event settings table. */\nfunction updateSettingsField(params,_callback){\n	params['event_id'] = constants.event_id;\n	$.ajax({\n		url: \"/splash/saveSettingsField\",\n		data: params,\n		type: 'POST',\n		success:function(response){\n			if(typeof _callback=='function'){\n				_callback(response);\n			}\n		},\n		error:function(){\n		}\n	});\n}\n\nvar repeatableItems = {\n	addToPage: function($parentLayoutGrp, block_id){\n\n		if(typeof constants['repeatable_items'][block_id]!=='undefined'){//if we already have the value, much easier.\n			var groups = $.parseJSON(constants['repeatable_items'][block_id]['LayoutBlock']['value']);\n			//var groups = constants['repeatable_items'][block_id]['LayoutBlock']['layout'];\n			if (groups && groups.group && groups.group.length == 1) {\n				groups = groups.group[0];\n			}\n			groups.cloningFromElementLibrary = true;\n			var $parentFtg = ftGetFtGrp($parentLayoutGrp);\n			groups.appendToBlock = $parentFtg.prop('id');//a raw string id - ie. ftg-52\n			addNewSection(groups);\n			updateNestAttr();\n		} else {\n			repeatableItems.lookup($parentLayoutGrp, block_id);\n		}\n	},\n	lookup: function($parentLayoutGrp, block_id){\n		$.ajax({\n			url:\"/splash/pullCustomElement\",\n			data: { block_id: block_id, event_id: constants.event_id },\n			type: 'POST',\n			dataType: 'json',\n			success:function(data){ //cache the layout block after looking up the first time.\n				constants['repeatable_items'][block_id] = data;\n				repeatableItems.addToPage($parentLayoutGrp, block_id);\n			},\n			error:function(){\n				alert('There was an error adding content to your page.  Please try again.');\n			}\n		});\n	},\n	clearRepeatableForBlock: function(block_id){//empties it out so you can switch what is assigned to a block on the fly.\n		if(typeof constants['repeatable_items'][block_id] !== 'undefined'){\n			delete constants['repeatable_items'][block_id];\n		}\n	},\n	save: function(params,_callback){\n		$.ajax({\n			url:\"/splash/saveCustomElement\",\n			data: params,\n			type: 'POST',\n			dataType: 'json',\n			success: function(response){\n				if(typeof _callback == 'function'){\n					_callback(response);\n				}\n			},\n			error: function(){\n				//could not save..\n				if(typeof _callback == 'function'){\n					_callback(false);\n				}\n			}\n		});\n	}\n}\n\n\n// -----------------------------------------------------\n//\n//  SPLASH ELEMENTS\n//  comments, countdown, nav\n//\n// -----------------------------------------------------\n$(function() {\n\n	// -----------------------------------------------------\n	// Countdown\n\n	if ( typeof CountdownElement == 'undefined' )\n		CountdownElement = {};\n\n	jQuery.extend( CountdownElement, {\n\n		layouts: ['plain','plain-only-days'],\n\n		toggleLayout: function ( $sf ) {\n\n			var i;\n			for ( i = 0; i < CountdownElement.layouts.length; i++ ) {\n				if( $sf.hasClass( CountdownElement.layouts[i] ) ) {\n					$sf.removeClass( CountdownElement.layouts[i] );\n					var new_layout = i == CountdownElement.layouts.length -1 ? 0 : i+1;\n					$sf.addClass( CountdownElement.layouts[new_layout] );\n					return CountdownElement.layouts[new_layout];\n				}\n			}\n		},\n	});\n\n	// -----------------------------------------------------\n	// Nav\n\n	if ( typeof NavElement == 'undefined' ){\n		NavElement = {};\n	}\n\n	jQuery.extend( NavElement, {\n\n		modes : ['s1','s2','horizontal-hamburger','horizontal-dropdown'],\n\n		toggleMode: function( $sf ) {\n\n			var i,j;\n\n			for ( i = 0; i < NavElement.modes.length; i++ ) {\n				if( $sf.hasClass( NavElement.modes[i] ) ) {\n\n					// remove all layout classes\n					for ( j = 0; j < NavElement.modes.length; j++ ) {\n						$sf.removeClass( NavElement.modes[j] );\n						$sf.find('.nav-item').removeClass( NavElement.modes[j] );\n					}\n\n					// get the new one\n					var new_layout = i == NavElement.modes.length -1 ? 0 : i+1;\n\n					// apply it\n					if ( NavElement.modes[new_layout] != 's1' && NavElement.modes[new_layout] != 's2' ) {\n						$sf.addClass( NavElement.modes[new_layout] );\n					}\n					$sf.find('.nav-item').addClass( NavElement.modes[new_layout] );\n					return NavElement.modes[new_layout];\n				}\n			}\n\n			// in case now layout was set, we set the default one\n			if ( new_layout == -1 ) {\n				$sf.addClass( NavElement.modes[2] );\n				$sf.find('.nav-item').addClass( NavElement.modes[2] );\n				return NavElement.modes[2];\n			}\n		}\n	});\n\n\n	// -----------------------------------------------------\n	// Comments\n\n	if ( typeof CommentsElement == 'undefined' )\n		CommentsElement = {};\n\n	// CommentsElement object, encapsulates all logic and UI operations related with this element\n	jQuery.extend( CommentsElement, {\n\n		// toggles the sorting class in the element\n		toggleSorting: function( $sf ) {\n			if( $sf.hasClass('oldestToNewest') ) {\n				$sf.addClass('newestToOldest').removeClass('oldestToNewest');\n				return 'newestToOldest';\n			}\n			else {\n				$sf.addClass('oldestToNewest').removeClass('newestToOldest');\n				return 'oldestToNewest';\n			}\n		},\n	});\n\n	$('addnewitem').on('click', function() {\n\n		if (  ) {\n			CalendarElement.addNewChild();\n			return;\n		}\n\n\n\n\n	})\n\n\n	// -----------------------------------------------------\n	// Hub Element\n\n	if ( typeof HubElement == 'undefined' )\n		HubElement = {};\n\n	// HubElement object, encapsulates all logic and UI operations related with this element\n	jQuery.extend( HubElement, {\n\n		//editing the event being linked to in a given event hub.\n		editEventLink: function( $event_hub_item ) {\n\n\n			var sfid = (''+$event_hub_item.parents(\".layoutGrp:first\").find(\".sf:first\").prop('id')).replace('sfid-','');//ie. 5678\n			loadEventHubModal(sfid,{'editing': $splashFeed.prop('id') });\n			var event_id = $event_hub_item.find(\"input.linkto:first\").val();\n			if(event_id>0){\n				flipDropDown($(\"#event-hub-selector\"),event_id,true);\n				var val = $splashFeed.attr('completed')||0;\n				setCheck($(\"#eventHubMarkAsComplete\"),val);\n			} else {\n				$(\"#current-event-hub-id\").val(0);\n				$(\"#event-hub-selector\").find(\".current\").text('Select');\n			}\n			return false;\n		},\n\n		reloadEventHubDD: function () {\n			$(\"#eventHubContentArea\")\n				.html('<div class=\"thisLoader loading\"><div class=\"nu-loader small\"></div></div>')\n				.load(\"/address_book/addToEventHub/\",{ event_id: constants.event_id },function(response){\n					var sfid = $(\"#eventHubSimpleModal\").attr(\"sfid\").replace('sfid-','');\n					var $splashFeed = $(\"#sfid-\"+sfid);\n					if($splashFeed.length > 0){\n						var event_id = $splashFeed.find(\"input.linkto:first\").val();\n						if(event_id>0){\n							flipDropDown($(\"#event-hub-selector\"),event_id,true);\n						}\n					}\n				}\n			);\n		},\n\n		saveEventHubOption: function () {\n			var event_id = $(\"#current-event-hub-id\").val()*1;\n			if(event_id <= 0){\n				alert('Please select a valid event.');\n				return false;\n			}\n			var $option = $(\"#event-hub-selector\").find(\".option[event-id='\"+event_id+\"']\");\n			if($option.length < 1){\n				alert('Invalid event.');\n				return false;\n			}\n			var $modal = $(\"#eventHubSimpleModal\");\n\n			var title = $option.text(),\n				sched_date = $option.attr(\"sched-date\"),\n				sched_time = $option.attr(\"sched-time\"),\n				sfid = 'sfid-'+$modal.attr(\"sfid\").replace('sfid-','');\n\n			var $sf = $(\"#\"+sfid);//ie. sfid-xxxxx\n			var editing_row = false;\n			if(typeof $modal.data('editing-row') && $modal.data('editing-row')!==false ){\n				editing_row = true;\n				var $newItem = $(\"#\"+$modal.data('editing-row'));//this will be the current event-hub-item splashfeed object. no need to add a new one.\n				if($newItem.length < 1) { //just to be safe.\n					var $newItem = addNewListItem($sf,true);\n				}\n			} else {\n				var $newItem = addNewListItem($sf,true);\n			}\n\n			if($sf.length > 0 && $newItem.length > 0){\n				var nid = $newItem.prop(\"id\").replace('sfid-','');\n\n				finetuneDeActivateOnPageEditables();\n				finetuneActivateOnPageEditables();\n\n				var group_id = $sf.parents(\".layoutGrp:first\").prop(\"id\");//should be in format 'g-$groupnumber';\n				var $acc = $(\"#acc-ft\"+group_id);//now find the corresponding accordion for this group so we can assign the proper mode for this new item.\n				var grp = ftGetGrp($acc);\n\n				var options = {};\n				options['mode']=grp['mode']||'collage-layout';\n				options['img_shape'] = grp['img_shape']||'';\n\n				if($(\"#eventHubMarkAsComplete\").val()=='1'){\n					$newItem.attr(\"completed\",\"1\");\n					options['completed']=1;\n				} else{\n					$newItem.removeAttr(\"completed\");\n					options['completed']=0;\n				}\n				if($(\"#eventHubMarkAsFeatured\").val()=='1'){\n					$newItem.addClass('featured');\n					options['featured']=1;\n				} else{\n					$newItem.removeClass('featured');\n					options['featured']=0;\n				}\n\n				$sf.removeClass('empty-hub');\n\n				finetuneEditedFields['data[SplashFeed]['+nid+'][options]'] = $.extend(true,{},options);\n				finetuneEditedFields['data[SplashFeed]['+nid+'][foreign_event_id]'] = event_id;\n				finetuneFieldChangesMade();\n\n				// -----------------------\n				// Here we load the new hub item with the event information\n\n				// -----------------------\n				$newItem.find(\".grp.image\").addClass('updating');\n\n				var parameters = {};\n				parameters['action'] = 'hub';\n				parameters['method'] = 'getEventInfo';\n				parameters['event_id'] = event_id;\n\n				$.ajax({\n					url: '',\n					type: 'POST',\n					data: parameters\n				})\n				.done( function( response ) {\n\n					response = $.parseJSON ( response.replace(/&/g,'&') );\n\n\n					if ( typeof response['result'] == 'undefined' || typeof response['result']['errors'] != 'undefined' ) {\n						console.log ( 'Hub Element, retrieve info for new event errors' );\n					}\n					else if ( typeof response['result']['events'] != 'undefined' && typeof response['result']['events'][event_id] != 'undefined' ){\n\n						// if response is cool, get layout, populate it and render it\n						var new_hub_item_info = response['result']['events'][event_id];\n						var $layout = $sf.find('.template-hub-item').clone();\n						$new_hub_item = HubElement.populateTemplate( $layout, new_hub_item_info, nid );\n						HubElement.applyMode( $new_hub_item, $sf.parents(\".layoutGrp:first\").attr(\"mode\") );\n						$sf.find('.children').append( $new_hub_item );\n						$newItem.remove(); // removing old new placeholder\n\n						// update the data structures: events and sorting\n						HubElement.events[ $sf.attr('id').replace('sfid-','') ][ nid ] = new_hub_item_info;\n						HubElement.sorting[ $sf.attr('id').replace('sfid-','') ].push( nid );\n\n					} else {\n						console.log ( 'Hub Element, retrieve info for new event errors: unknown response' );\n					}\n				})\n				.fail( function() {\n					console.log('Hub Element, retrieve info for new event: request error');\n				})\n\n				closeSimpleModal();\n			}\n		}\n	});\n\n	$(\"#main-canvas\").on('click','.edit-tools .event-link',function(e){\n		var $splashFeed = $(this).parents(\".event-hub-item:first\");\n		HubElement.editEventLink($splashFeed);\n	});\n	$(\"#simple-modal-wrap\").on('click','#reloadEventHubDD',function(){\n		HubElement.reloadEventHubDD();\n	});\n	//adding or editing an event being linked to in a hub.\n	$(\"#simple-modal-wrap\").on('click','#saveEventHubOption',function(){\n		HubElement.saveEventHubOption();\n	});\n\n\n	// -----------------------------------------------------\n	// Attendees\n\n	if ( typeof AttendeesElement == 'undefined' ){\n		AttendeesElement = {};\n	}\n\n	jQuery.extend( AttendeesElement, {\n\n		modes : ['on-page','modal'],\n\n		toggleMode: function( $sf ) {\n\n			var i,j;\n\n			for ( i = 0; i < AttendeesElement.modes.length; i++ ) {\n				if( $sf.hasClass( AttendeesElement.modes[i] ) ) {\n\n					// remove all layout classes\n					for ( j = 0; j < AttendeesElement.modes.length; j++ ) {\n						$sf.removeClass( AttendeesElement.modes[j] );\n					}\n\n					// get the new one\n					var new_layout = i == AttendeesElement.modes.length -1 ? 0 : i+1;\n\n					// apply it\n					$sf.addClass( AttendeesElement.modes[new_layout] );\n					return AttendeesElement.modes[new_layout];\n				}\n			}\n\n			// in case now layout was set, we set the default one\n			if ( new_layout == -1 ) {\n				$sf.addClass( AttendeesElement.modes[0] );\n				return AttendeesElement.modes[0];\n			}\n		}\n	});\n});\n\n\n// Video options...longer than I wanted, but handles vimeo and youtube\nvar videoOptions = {\n	videoType: '',\n	gid: '',\n	video: '',\n	checkType: function($input, videoURL) {\n		videoOptions.video = videoURL;\n		videoOptions.inputURL = $input;\n		//reset video controls\n		$('#video-embed .videoCheckBoxes .video-controls').parents('.check-opt:first').removeClass('hide');\n		$('#video-embed .videoCheckBoxes').addClass('hide');\n		if(typeof videoURL !== 'undefined') {\n			var currentSrc = videoURL;\n			if(currentSrc.indexOf('youtube') > -1){\n				videoOptions.videoType = 'youtube';\n				$('#video-embed .videoCheckBoxes').removeClass('hide');\n			}\n			if(currentSrc.indexOf('vimeo') > -1) {\n				videoOptions.videoType = 'vimeo';\n				$('#video-embed .videoCheckBoxes').removeClass('hide');\n				$('#video-embed .videoCheckBoxes .video-controls').parents('.check-opt:first').addClass('hide');\n			}\n		}\n		else {\n			return false;\n		}\n	},\n	checkAutoplay: function() {\n\n		videoOptions.videoIframe = $(\"#video-embed .vid iframe:first\");\n		if(videoOptions.videoType == 'youtube') {\n			var newUrl = videoOptions.videoIframe.attr('src').concat('&autoplay=1');\n\n		}\n		if(videoOptions.videoType == 'vimeo'){\n			var vimeoOrder = ((videoOptions.videoIframe.attr('src').indexOf('?') > -1) ? '&' : '?');\n			var newUrl = videoOptions.videoIframe.attr('src').concat(vimeoOrder+'autoplay=1');\n		}\n		videoOptions.inputURL.val('');\n		videoOptions.inputURL.val(newUrl);\n		videoOptions.videoIframe.attr('src',newUrl);\n		finetuneFieldChangesMade();\n		finetuneLayoutChangesMade();\n	},\n	checkControls: function() {\n		videoOptions.videoIframe = $(\"#video-embed .vid iframe:first\");\n		if(videoOptions.videoType == 'youtube') {\n			var newUrl = videoOptions.videoIframe.attr('src').concat('&controls=0');\n			console.log('controlsURL: '+ newUrl);\n		}\n		videoOptions.inputURL.val('');\n		videoOptions.inputURL.val(newUrl);\n		videoOptions.videoIframe.attr('src', newUrl);\n		finetuneFieldChangesMade();\n		finetuneLayoutChangesMade();\n	},\n	checkLoop: function() {\n		videoOptions.videoIframe = $(\"#video-embed .vid iframe:first\");\n		var str = videoOptions.videoIframe.attr('src');\n		var videoId = str.substring(str.lastIndexOf('/')+1,str.lastIndexOf('?'));\n		if(videoOptions.videoType == 'youtube') {\n			var newUrl = videoOptions.videoIframe.attr('src').concat('&loop=1&playlist='+videoId+'');\n		}\n		if(videoOptions.videoType == 'vimeo') {\n			var vimeoOrder = ((videoOptions.videoIframe.attr('src').indexOf('?') > -1) ? '&' : '?');\n			var newUrl = videoOptions.videoIframe.attr('src').concat(vimeoOrder+'loop=1');\n		}\n		videoOptions.inputURL.val('');\n		videoOptions.inputURL.val(newUrl);\n		videoOptions.videoIframe.attr('src', newUrl);\n		finetuneFieldChangesMade();\n		finetuneLayoutChangesMade();\n	},\n	checkMute: function() {\n		videoOptions.removeOption('mute');\n		if(videoOptions.videoType == 'youtube') {\n			var newUrl = videoOptions.videoIframe.attr('src').concat('&enablejsapi=1&muting=true');\n			videoOptions.videoIframe.attr('src', newUrl);\n			//var player = videoOptions.videoIframe.getElementById('player');\n		}\n		if(videoOptions.videoType == 'vimeo') {\n			var vimeoOrder = ((videoOptions.videoIframe.attr('src').indexOf('?') > -1) ? '&' : '?');\n			var newUrl = videoOptions.videoIframe.attr('src').concat(vimeoOrder+'api=1');\n			videoOptions.videoIframe.attr('src', newUrl);\n			//var player = videoOptions.videoIframe.getElementById('player');\n		}\n	},\n	removeOption: function(option) {\n		if(option == 'autoplay') {\n			//alert('removeMe');\n			if(videoOptions.videoType == 'youtube') {\n				var newUrl = videoOptions.videoIframe.attr('src').replace('&autoplay=1','');\n			}\n			if(videoOptions.videoType == 'vimeo'){\n				var vimeoOrder = ((videoOptions.videoIframe.attr('src').indexOf('?') > -1) ? '&' : '?');\n				var newUrl = videoOptions.videoIframe.attr('src').replace(vimeoOrder+'autoplay=1','');\n			}\n		}\n		if(option == 'controls') {\n			//alert('removeMe');\n			if(videoOptions.videoType == 'youtube') {\n				var newUrl = videoOptions.videoIframe.attr('src').replace('&controls=0','');\n				videoOptions.inputURL.val('');\n				videoOptions.inputURL.val(newUrl);\n				videoOptions.videoIframe.attr('src', newUrl);\n			}\n			if(videoOptions.videoType == 'vimeo'){\n				// button gets hidden don't need this\n			}\n		}\n		if(option == 'loop') {\n			//alert('removeMe');\n			if(videoOptions.videoType == 'youtube') {\n				var str = videoOptions.videoIframe.attr('src');\n				var videoId = str.substring(str.lastIndexOf('/')+1,str.lastIndexOf('?'));\n				var newUrl = videoOptions.videoIframe.attr('src').replace('&loop=1&playlist='+videoId+'', '');\n				videoOptions.inputURL.val('');\n				videoOptions.inputURL.val(newUrl);\n				videoOptions.videoIframe.attr('src', newUrl);\n			}\n			if(videoOptions.videoType == 'vimeo'){\n				var vimeoOrder = ((videoOptions.videoIframe.attr('src').indexOf('?') > -1) ? '&' : '?');\n				var newUrl = videoOptions.videoIframe.attr('src').replace(vimeoOrder+'loop=1','');\n			}\n		}\n		videoOptions.inputURL.val(newUrl);\n		videoOptions.videoIframe.attr('src', newUrl);\n		finetuneFieldChangesMade();\n		finetuneLayoutChangesMade();\n	}\n};\nfunction onPlayerReady(event) {\n  event.target.mute();\n  // Anything else you want to do, like start playback...\n}\n\nvar galleryCarousel = {//Fun titles for Gallery Carousel\n	sfid: '',\n	init: function($sf) {\n		console.log($sf);\n		galleryCarousel.getTitle();\n		galleryCarousel.sfid = $sf.attr('id');\n	},\n	getTitle: function() {\n		$inputContain = $(\"#simple-modal-wrap #galleryWrap\").find(\".open\");\n		$input = $inputContain.find('input:first');\n		console.log($input)\n		$input.on('keyup', function() {\n			galleryCarousel.newTitle = $input.val();\n		});\n	},\n	setTitle: function() {\n		$gallery = $(\"#main-canvas\").find('#'+galleryCarousel.sfid);\n		setTimeout(function(){\n			$gallery.find('.title:first').html('<h1>The Best Of #' + galleryCarousel.newTitle+'</h1>');\n			$gallery.find('.title:first').trigger('change');\n			finetuneFieldChangesMade();\n			finetuneLayoutChangesMade();\n		},500);\n	}\n};\n\n// ------------------------------------\n// Settings modal - Share Settings\n\n// -- Buttons to test the social link content.\n$('#settings-content').on('click', '.twitter.section .share-test', function() {\n	SocialBtns.fireTweet( $('#settings-content .twitter-body').val() );\n});\n$('#settings-content').on('click', '.facebook.section .share-test', function() {\n	SocialBtns.fireFacebookShare( $('#settings-content .facebook-name').val(), $('#settings-content .facebook-description').val() );\n});\n$('#settings-content').on('click', '.linkedin.section .share-test', function() {\n	SocialBtns.fireLinkedInShare( $('#settings-content .linkedin-name').val(), $('#settings-content .linkedin-description').val() );\n});\n\n// -- Twitter char count\n$(\"#settings-content .twitter.section .twitter-body\").on('input propertychange change keyup paste', function() {\n	updateTwitterChars( $(this) );\n});\nfunction updateTwitterChars( $input ){\n	var length = $input.val().length;\n	var remaining = 140 - length;\n	if( remaining <= 20 ){\n		$input.closest('.twitter.section').find('.twitter-char-count').addClass('warning').text(remaining);\n	} else {\n		$input.closest('.twitter.section').find('.twitter-char-count').removeClass('warning').text(remaining);\n	}\n}\n\n// -- Section toggle\n$('#socialDataWrap .share-btn').on('click', function() {\n	$(this).addClass('selected').siblings().removeClass('selected');\n	var section = $(this).attr('class').match(/twitter|facebook|linkedin|email/);\n	if ( section != null ) {\n		$('#socialDataWrap .sections>div').addClass('hide').filter('.section.'+section[0]).removeClass('hide');\n	}\n});\n// ------------------------------------\n",
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/finetune.js",
			"file_size": 489946,
			"file_write_time": 130556353910000000,
			"settings":
			{
				"buffer_size": 490057,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-comments.ctp",
			"settings":
			{
				"buffer_size": 8875,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-ftscript.ctp",
			"settings":
			{
				"buffer_size": 886,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/settings/share-settings.ctp",
			"settings":
			{
				"buffer_size": 7560,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/main-ui.js",
			"settings":
			{
				"buffer_size": 30791,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/events/create.ctp",
			"settings":
			{
				"buffer_size": 10220,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/event-site.js",
			"settings":
			{
				"buffer_size": 130635,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/rsvp-form.ctp",
			"settings":
			{
				"buffer_size": 36816,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/styl/settings-modal.styl",
			"settings":
			{
				"buffer_size": 15339,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/splash/user-elements.css",
			"settings":
			{
				"buffer_size": 236955,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/ticket-payout-settings.ctp",
			"settings":
			{
				"buffer_size": 28706,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/models/event_setting.php",
			"settings":
			{
				"buffer_size": 93833,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/finetune.ctp",
			"settings":
			{
				"buffer_size": 41921,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/toolbar/design.ctp",
			"settings":
			{
				"buffer_size": 11338,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/settings/admin-settings.ctp",
			"settings":
			{
				"buffer_size": 5100,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/toolbar/social.ctp",
			"settings":
			{
				"buffer_size": 10364,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/models/time_zone.php",
			"settings":
			{
				"buffer_size": 2854,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/eventfeed/gallerysort.css",
			"settings":
			{
				"buffer_size": 4994,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/sites_controller.php",
			"settings":
			{
				"buffer_size": 112580,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/models/splash_feed.php",
			"settings":
			{
				"buffer_size": 66349,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/models/splash_comment.php",
			"settings":
			{
				"buffer_size": 12882,
				"line_ending": "Unix"
			}
		},
		{
			"contents": "Searching 3510 files for \"venue-name\"\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/map-embed.ctp:\n   47  					<label class=\"zmodal-label\">City or Zip Code</label>\n   48  					<input type=\"text\" name=\"\" id=\"venue-search-map-embed\" class=\"venueAuto nu-input w100 no-ie-placeholder oversize flashy\" placeholder=\"Search Venue Name or Address\" value=\"<?=(isset($data['venue']['value']))?str_replace('<br>',', ',$data['venue']['value']):''?>\" />\n   49: 					<input type=\"hidden\" id=\"venue-name-map-embed\" type=\"hidden\" value=\"\" />\n   50  					<input type=\"hidden\" id=\"venue-address-map-embed\" type=\"hidden\" value=\"\" />\n   51  					<input type=\"hidden\" id=\"venue-city-map-embed\" type=\"hidden\" value=\"\" />\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/planning-tools.ctp:\n   61  			<div class=\"event-meta grp pt0 pr0 pl0 pb1-5 abs bl txtL\">\n   62  				<span class=\"grp\"></span>\n   63: 				<small class=\"grp p0 semiBold\" id=\"venue-name\"><?=$data['venue']['venue_name']?></small>\n   64  				<small class=\"grp p0 gray lh1-2\" id=\"venue-address\"><?=$data['venue']['address_only']?></small>\n   65  				<div class=\"grp pr0 abs br wA\">\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/preview-styles.css:\n  155      }\n  156      \n  157:     ul.venue li.venue-name {\n  158          font-size:12px;\n  159          font-weight:bold;\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/venue-block.ctp:\n    4  		<div class=\"ec-avatar\"></div>\n    5  		<div class=\"ec-data\">\n    6: 			<div class=\"venue-name\">\n    7  				<?=$html->link($data['venue_name'],'/contacts/view/'.$data['url'].'&ref_to='.$event_id)?>\n    8  			</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/venue-search.ctp:\n   12  \n   13  	<? // Venue Name ?>\n   14: 	<input type=\"text\" name=\"<?=$prefx?>[venue_name]\" id=\"venue-name<?=$sfx?>\" class=\"venueManual nu-input w100 oversize flashy <?=(!$showAddressFields)?'hide':''?>\" <?php if(isset($tabindex)){ ?>tabindex=\"<?=++$tabindex;?>\"<?}?> placeholder=\"Enter Venue Name or Address\" value=\"<?=h($data['venue']['venue_name'])?>\" set-val=\"<?=strip_tags($data['venue']['venue_name'])?>\" />\n   15  	<div class=\"clear\"></div>\n   16  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/venue_data.ctp:\n    1  <label>Venue:</label>\n    2  <br />\n    3: <div id=\"venue-name\">\n    4  	<?=$html->link($venue,'/events/view/'.$slug)?>\n    5  </div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/edit-settings.ctp:\n   72  					$settings.find('a.google-search').hide();\n   73  				}\n   74: 				if($(\"#venue-name\").is(\":visible\")){\n   75  					$settings.find(\"a.google-search:first\").click();\n   76  					$settings.find(\"a.address-search\").hide();\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/where-venue.ctp:\n    1  <div class=\"wrap where-ss\">\n    2  	<?php $hide_field=(!isset($data['venue']['venue_name'])||empty($data['venue']['venue_name']))?true:false;?>\n    3: 	<div class=\"venue-name <?=($hide_field)?'hide':''?>\"><?=(isset($data['venue']['venue_name']))?trim($data['venue']['venue_name']):'';?></div>\n    4  </div>\n    5  <?=$this->element('/splash/inline-edit-actions',array('compact'=>true,'design'=>true,'editTip'=>'Edit Location','deleteTip'=>'Hide Location'))?>\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/css/app.css:\n 10659                  }\n 10660  \n 10661:                 div.settings-overview ul.venue li.venue-name {\n 10662                      font-size:13px;\n 10663                      font-weight:bold;\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/css/preview-styles.css:\n  352      }\n  353      \n  354:     ul.venue li.venue-name {\n  355          font-size:12px;\n  356          font-weight:bold;\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/css/splash/user-planning.css:\n   92    text-align: center;\n   93  }\n   94: #planning-tools .canvas #venue-name {\n   95    font-size: 0.65em;\n   96    margin-bottom: 5px;\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/css/styl/user-planning.styl:\n   72  		overflow visible\n   73  		text-align center\n   74: 		#venue-name\n   75  			font-size 0.65em\n   76  			margin-bottom 5px\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/create.js:\n  361  				$('#eventSettingsWrap a.google-search').hide();\n  362  			}\n  363: 			if($(\"#venue-name\").is(\":visible\")){\n  364  				$(\"a.google-search:first\").click();\n  365  				$(\"a.address-search\").hide();\n  ...\n  428  		_gaq.push(['_trackEvent', 'Create', 'ManuallyAddAddress', 'id:'+constants.event_id]);\n  429  		$('#venue-search').hide();\n  430: 		$(\"#venue-name\").show();\n  431: 		if($(\"#venue-name\").val()==''&& $(\"#venue-search\").val()!=''){\n  432: 			$(\"#venue-name\").val($(\"#venue-search\").val());\n  433  		}\n  434  		$(\"#venue-address\").show();\n  ...\n  443  		$('#eventSettingsWrap .location b.left').text('Venue Name');\n  444  \n  445: 		$('#venue-name').attr('placeholder', 'Enter Venue Name')\n  446  \n  447  		$('#eventSettingsWrap .addressLabel').show();\n  448  \n  449: 		if( $('#venue-name').val() == $('#venue-address').val() ){\n  450: 			$('#venue-name').val('')\n  451  		}\n  452  \n  453: 		$('#venue-name').focus();\n  454  \n  455  		return false;\n  ...\n  458  		_gaq.push(['_trackEvent', 'Create', 'SearchForAddress', 'id:'+constants.event_id]);\n  459  		$('#venue-search').show();\n  460: 		$(\"#venue-name\").hide();\n  461  		$(\"#venue-address\").hide();\n  462  		$(\"#venue-city\").hide();\n  ...\n  468  		$('a.address-search').show();\n  469  \n  470: 		$('#venue-name').attr('placeholder', 'Enter Venue Name or Address')\n  471  \n  472  		$('#eventSettingsWrap .location b.left').text('Location');\n  ...\n  482  			updateVenuePreview();\n  483  		}\n  484: 	},\"#venue-name,#venue-address,#venue-city,#venue-state,#venue-zip\");\n  485  \n  486  	$(\"#time-tbd-checkbox\").click(function(){\n  ...\n  905  \n  906  \n  907: 		$(\"#venue-name\").val(address_fields.name);\n  908  		$(\"#venue-address\").val(address_fields.address.trim());\n  909  		$(\"#venue-city\").val(address_fields.city.trim());\n  ...\n  928  function updateVenuePreview(){\n  929  \n  930: 	var $venue_name = $(\"#venue-name\");\n  931  	var $venue_address = $(\"#venue-address\");\n  932  	var $venue_city = $(\"#venue-city\");\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/details.js:\n  856  \n  857  \n  858: 		var title = $(\"#venue-name\").val();\n  859  		var address = $(\"#venue-address\").val() + \" \" + $(\"#venue-city\").val() + \" \" + $(\"#venue-state\").val() + \" \" + $(\"#venue-zip\").val();\n  860  		if ( address == \"   \" && title != '' )\n  ...\n 1098  			changeCompletionStatus($(this).parents(\"div.section\").attr(\"num\"),true);\n 1099  			$('#map-tbd').show();\n 1100: 			//$(\"#venue-name\").val('');\n 1101  			$(\"div.venuePreview\").hide()\n 1102  				.find(\".name\").html('TBD').end()\n ....\n 1147  			}\n 1148  \n 1149: 			if($(\"#venue-name\").val() != '' || ( $(\"#venue-address\").val() != '' && $(\"#venue-city\").val() != '' && $(\"#venue-state\").val() != '')){\n 1150: 				var num = $(\"#venue-name\").parents(\"div.section\").attr(\"num\");\n 1151  				changeCompletionStatus(num,true);\n 1152  				steps_complete++;\n ....\n 1400  function checkVenueFields(onload){\n 1401  	var num = $(\"#venue-address\").parents(\"div.section\").attr(\"num\");\n 1402: 	if(($.trim($(\"#venue-name\").val()) != '' || $.trim($(\"#venue-address\").val()) != '' || $.trim($(\"#venue-city\").val()) != '' || $.trim($(\"#venue-state\").val()) != '' || $.trim($(\"#venue-zip\").val()) != '') ){\n 1403  		changeCompletionStatus(num,true);\n 1404  \n ....\n 1803  \n 1804            address_fields.address = address_fields.street_number +' '+ address_fields.address;\n 1805: 		$(\"#venue-name\").val(address_fields.name);\n 1806  		$(\"#venue-address\").val(address_fields.address);\n 1807  		$(\"#venue-city\").val(address_fields.city);\n ....\n 1814  		$(\"#venue-tbd-checkbox\").removeAttr(\"checked\");\n 1815  \n 1816: 		changeCompletionStatus($(\"#venue-name\").parents(\"div.section\").attr(\"num\"),true);\n 1817  		updateVenuePreview();\n 1818  		$('a.address-search').click();\n ....\n 1826  function updateVenuePreview(){\n 1827  \n 1828: 	var $venue_name = $(\"#venue-name\");\n 1829  	var $venue_address = $(\"#venue-address\");\n 1830  	var $venue_city = $(\"#venue-city\");\n ....\n 1889  	_gaq.push(['_trackEvent', 'Details', 'CantFindLocation', 'id:'+constants.event_id]);\n 1890  	$('#venue-search').hide();\n 1891: 	$(\"#venue-name\").show();\n 1892  	$(\"#venue-address\").show();\n 1893  	$(\"#venue-city\").show();\n ....\n 1901  	_gaq.push(['_trackEvent', 'Details', 'CantFindLocation', 'id:'+constants.event_id]);\n 1902  	$('#venue-search').show();\n 1903: 	$(\"#venue-name\").hide();\n 1904  	$(\"#venue-address\").hide();\n 1905  	$(\"#venue-city\").hide();\n ....\n 1917  		updateVenuePreview();\n 1918  	}\n 1919: },\"#venue-name,#venue-address,#venue-city,#venue-state,#venue-zip\");\n 1920  \n 1921  /*******************************\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/finetune.js:\n  273  	///////////////////// DATE CONTROLS END ////////////////////////////\n  274  	///////////////////// VENUE CONTROLS START ////////////////////////////\n  275: 	$(\"#venue-name,#venue-address,#venue-city,#venue-state,#venue-zip\").on('keyup change',function(e){\n  276  		var $t = $(this);\n  277  		clearTimeout(searchKeyUpTimer);\n  ...\n 5474  \n 5475  		        address_fields.address = address_fields.street_number +' '+ address_fields.address;\n 5476: 				$(\"#venue-name\").val(address_fields.name);\n 5477  				$(\"#venue-address\").val(address_fields.address);\n 5478  				$(\"#venue-city\").val(address_fields.city);\n ....\n 5542       	//searchForMap(address_fields,place);\n 5543  		$(\"#map-embed-placeholder,#map-hidden-img,#map-embed .thisLoader\").addClass('loading');\n 5544: 		$(\"#venue-name-map-embed\").val(address_fields.name);\n 5545  		$(\"#venue-address-map-embed\").val(address_fields.address);\n 5546  		$(\"#venue-city-map-embed\").val(address_fields.city);\n ....\n 5633  	function updateVenueText(){\n 5634  		var venue = { \n 5635: 			venue_name: $(\"#venue-name\"),\n 5636  			address: $(\"#venue-address\"),\n 5637  			city: $(\"#venue-city\"),\n ....\n 5650  		}\n 5651  \n 5652: 		$(\"#venue-name,#venue-address,#venue-city,#venue-state,#venue-zip,#venue-tbd,#venue-country\").addClass(\"changes-made\");\n 5653  		var title = value.venue_name;\n 5654  		var address = value.address + \" \" + value.city + \" \" + value.state + \" \" + value.zip;\n ....\n 5662  \n 5663  		//updateSplashField('where',value,$(\"#element-where\"));\n 5664: 		var $venue_name = $(\"#element-where-venue\").find(\".venue-name\"),\n 5665  			$venue_address = $(\"#element-where-address\").find(\".venue-address\"),\n 5666  			$venue_city = $(\"#element-where-city\").find(\".venue-city\"),\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/invite.js:\n 1988  						var event_hostname = $('#manual-host-name').val();\n 1989  \n 1990: 						var venue_name = $('#venue-name').val();\n 1991  						var venue_address = $('#venue-address').val();\n 1992  						var venue_city = $('#venue-city').val();\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/new-create.js:\n  584                                  $('#eventSettingsWrap a.google-search').hide();\n  585                          }\n  586:                         if($(\"#venue-name\").is(\":visible\")){\n  587                                  $(\"a.google-search:first\").click();\n  588                                  $(\"a.address-search\").hide();\n  ...\n  651                  _gaq.push(['_trackEvent', 'Create', 'ManuallyAddAddress', 'id:'+constants.event_id]);\n  652                  $('#venue-search').hide();\n  653:                 $(\"#venue-name\").show();\n  654:                 if($(\"#venue-name\").val()==''&& $(\"#venue-search\").val()!=''){\n  655:                         $(\"#venue-name\").val($(\"#venue-search\").val());\n  656                  }\n  657                  $(\"#venue-address\").show();\n  ...\n  666                  $('#eventSettingsWrap .location b.left').text('Venue Name');\n  667  \n  668:                 $('#venue-name').attr('placeholder', 'Enter Venue Name')\n  669  \n  670                  $('#eventSettingsWrap .addressLabel').show();\n  671  \n  672:                 if( $('#venue-name').val() == $('#venue-address').val() ){\n  673:                         $('#venue-name').val('')\n  674                  }\n  675  \n  676:                 $('#venue-name').focus();\n  677  \n  678                  trackIndicativeEvent('CreateForm-EnterAddressBtnClicked');\n  ...\n  685                  _gaq.push(['_trackEvent', 'Create', 'SearchForAddress', 'id:'+constants.event_id]);\n  686                  $('#venue-search').show();\n  687:                 $(\"#venue-name\").hide();\n  688                  $(\"#venue-address\").hide();\n  689                  $(\"#venue-city\").hide();\n  ...\n  695                  $('a.address-search').show();\n  696  \n  697:                 $('#venue-name').attr('placeholder', 'Enter Venue Name or Address')\n  698  \n  699                  $('#eventSettingsWrap .location b.left').text('Location');\n  ...\n 1128  \n 1129  \n 1130:                 $(\"#venue-name\").val(address_fields.name);\n 1131                  $(\"#venue-address\").val(address_fields.address.trim());\n 1132                  $(\"#venue-city\").val(address_fields.city.trim());\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/addressbook/addressbook.therefore.js:\n 4335  \n 4336                      address_fields.address = address_fields.street_number +' '+ address_fields.address;\n 4337:                     $(\"#venue-name\").val(address_fields.name);\n 4338                      $(\"#venue-address\").val(address_fields.address);\n 4339                      $(\"#venue-city\").val(address_fields.city);\n\n55 matches across 18 files\n\n\nSearching 3524 files for \"addSection  elt-chooser\"\n\n0 matches across 0 files\n\n\nSearching 3524 files for \"addSection\"\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/add-new-section.ctp:\n  259  		<?php foreach($elements['splash_elements'] AS $idx => $e): ?>\n  260  		<button\n  261: 			class=\"addSection <?= !empty($e['longtext']) ? 'longtext': ''?> elt-chooser\"\n  262  			block-type=\"<?= $e['blocktype'] ?>\"\n  263  			section-type=\"<?= $e['sectiontype'] ?>\"\n  ...\n  288  		<?php foreach($elements['event_elements'] AS $idx => $e){ ?>\n  289  			<button\n  290: 				class=\"addSection <?= !empty($e['longtext']) ? 'longtext': ''?> elt-chooser\"\n  291  				block-type=\"<?= $e['blocktype'] ?>\"\n  292  				section-type=\"<?= $e['sectiontype'] ?>\"\n  ...\n  306  			foreach($elements['admin_elements'] as $idx=>$e) { //ADMIN ONLY ELEMENTS  ?>\n  307  			<button\n  308: 				class=\"addSection <?= !empty($e['longtext']) ? 'longtext': ''?> elt-chooser\"\n  309  				block-type=\"<?= $e['blocktype'] ?>\"\n  310  				section-type=\"<?= $e['sectiontype'] ?>\"\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/audio-embed.ctp:\n    2  \n    3  	<div class=\"grp p0 header zmodal-header\">\n    4: 		<h1 class=\"grp wA title pointer addSectionBtn\"><i data-icon=\"<\" class=\"back\"></i> Embed Song</h1>		\n    5  		<a href=\"#\" class=\"zmodal-close close-modal icon-f-close-editor closeSimpleModal\"></a>\n    6  	</div>\n    .\n    9  \n   10  		<div class=\"w2-8 grp\">\n   11: 			<button class=\"addSection large elt-chooser peN\">\n   12  				<i class=\"icon-f-audio\"></i>\n   13  				<span>Audio</span>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/iframe-embed.ctp:\n    1  <div id=\"iframe-embed\" class=\"simple-modal hide zmodal sleek\">\n    2  	<div class=\"grp p0 zmodal-header header\">\n    3: 		<h1 class=\"grp wA title pointer addSectionBtn\"><i data-icon=\"<\" class=\"back\"></i> Embed an iFrame</h1>\n    4  		<a href=\"#\" class=\"zmodal-close close-modal icon-f-close-editor closeSimpleModal\"></a>\n    5  	</div>	\n    .\n    8  \n    9  		<div class=\"w2-8 grp\">\n   10: 			<button class=\"addSection large elt-chooser peN\">\n   11  				<i class=\"icon-f-iframe-1\"></i>\n   12  				<span>iFrame</span>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/map-embed.ctp:\n    7  \n    8  	<div class=\"grp p0 header rel zmodal-header\">\n    9: 		<h1 class=\"grp wA title addSectionBtn pointer\"><i data-icon=\"<\" class=\"back\"></i> Map Embed</h1>\n   10  		<!-- <ul class=\"grp wA sections-nav\">\n   11  			<li class=\"section inline active\"><span>Embed Map</span></li>\n   ..\n   16  \n   17  		<div class=\"w2-8 grp\">\n   18: 			<button class=\"addSection elt-chooser large peN\">\n   19  				<i class=\"icon-f-map\"></i>\n   20  				<span>Map</span>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/twitter-widget-embed.ctp:\n    1  <div id=\"twitter-widget-embed\" class=\"simple-modal hide zmodal sleek\">\n    2  	<div class=\"grp p0 header zmodal-header\">\n    3: 		<h1 class=\"grp wA title pointer addSectionBtn\">\n    4  			<i data-icon=\"<\" class=\"back\"></i> Embed a Twitter Widget</i>\n    5  		</h1>\n    .\n   10  \n   11  		<div class=\"w2-8 grp\">\n   12: 			<button class=\"addSection large elt-chooser\">\n   13  				<i class=\"icon-f-twitter\"></i>\n   14  				<span>Twitter Widget</span>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/video-embed.ctp:\n    3  \n    4  	<div class=\"grp p0 zmodal-header header\">\n    5: 		<h1 class=\"grp wA title pointer addSectionBtn\"><i data-icon=\"<\" class=\"back\"></i> Embed Video </h1>\n    6  		<a href=\"#\" class=\"zmodal-close close-modal icon-f-close-editor closeSimpleModal\"></a>\n    7  	</div>\n    .\n   10  \n   11  		<div class=\"w2-8 grp\">\n   12: 			<button class=\"addSection large elt-chooser peN\">\n   13  				<i class=\"icon-f-video\"></i>\n   14  				<span>Video</span>\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/css/splash/user-planning.css:\n 21488    overflow-x: hidden;\n 21489  }\n 21490: #saved-elements .addSection {\n 21491    width: 31%;\n 21492    height: auto;\n .....\n 21499    color: #303030;\n 21500  }\n 21501: #saved-elements .addSection.addingToPage {\n 21502    box-shadow: inset 0 0 200px #eb3d6b;\n 21503  }\n 21504: #saved-elements .addSection.addingToPage:after {\n 21505    content: 'adding to page...';\n 21506  }\n 21507: #saved-elements .addSection.notAddingToPage {\n 21508    opacity: 0.2;\n 21509  }\n 21510: #saved-elements .addSection.notAddingToPage:after {\n 21511    content: ' ';\n 21512  }\n 21513: #saved-elements .addSection .custom-image {\n 21514    top: 1em;\n 21515    left: 5%;\n .....\n 21525    margin: 0 auto;\n 21526  }\n 21527: #saved-elements .addSection span {\n 21528    z-index: 0;\n 21529    position: absolute;\n .....\n 21543    font-size: 0.7em;\n 21544  }\n 21545: #saved-elements .addSection:hover {\n 21546    box-shadow: 0 0 0 1px #a0a0a0;\n 21547  }\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/css/styl/user-planning.styl:\n 19581  		overflow-y auto\n 19582  		overflow-x hidden\n 19583: 	.addSection\n 19584  		width 31%\n 19585  		height auto\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/finetune.js:\n  664  	});\n  665  \n  666: 	$(\".addSectionBtn,.addSecBtn, #nuAddSecBtn\").click(function(){//Back button in embed modals.\n  667: 		addSectionModal();\n  668  		trackIndicativeEvent('clickedAddNewElement');\n  669  	});\n  ...\n  682  		}\n  683  \n  684: 		addSectionModal();\n  685  	});\n  686  \n  ...\n  688  		var val = $(this).val();\n  689  		var $parent = $(\"#saved-elements\").find(\".element-adder-content\");\n  690: 		var $blocks = $parent.find(\".addSection\");\n  691  		if(val==''){\n  692  			$blocks.show();\n  ...\n  722  	$firstTimeModal = false;\n  723  	//ADD BLOCK TYPE / ADD NEW ELEMENT / SECTION TO PAGE.\n  724: 	$(\"#add-new-section\").on('click',\".element-adder-content .addSection\",function(){\n  725  		var $this = $(this);\n  726  \n  ...\n  804  			}\n  805  \n  806: 			trackIndicativeEvent('addSection',{'type':'gallery'});\n  807  \n  808  			// open the social inbox\n  ...\n 1389  				$('#gallery-container').addClass('hide');\n 1390  				// remove the disabed class in the add-new-section modal\n 1391: 				// $('#add-new-section').find('.addSection[block-type=\"gallery\"]').find('.nu-btn:first').removeClass('disabled');\n 1392  				$('#sectionTabWrap').removeClass('expanded')\n 1393  			}\n ....\n 6515  \n 6516  		var $master_group = findMasterGroup();\n 6517: 		trackIndicativeEvent('addSection', { 'type': params.element });\n 6518  		if($(\"#add-new-section\").data('appendToBlock')){\n 6519  			var appendToBlock = $(\"#add-new-section\").data('appendToBlock');//expects format g-5\n ....\n 6711  				var $block = $(\"#blank-groups\").find('.sf[block-type=\"'+params.block_type+'\"]:first').parents(\".blank-group\").clone();\n 6712  			}\n 6713: 			trackIndicativeEvent('addSection', { 'type': params.block_type });\n 6714  		}\n 6715  \n ....\n 12383  }\n 12384  \n 12385: function addSectionModal(){\n 12386  	setTimeout(function(){\n 12387  		var $parent = $(\"#add-new-section\");\n 12388  		$parent.find(\".slideCirc[num='slide1']\").click();\n 12389  		if ($('#gallery-container').length == 0) {\n 12390: 			$parent.find('.addSection[block-type=\"gallery\"]').find('.nu-btn:first').removeClass('disabled');\n 12391  		} else {\n 12392: 			$parent.find('.addSection[block-type=\"gallery\"]').find('.nu-btn:first').addClass('disabled pt');\n 12393  		}\n 12394  		if ($('#element-facebook-comments').length == 1) {\n 12395: 			$parent.find('.addSection[element=\"facebook-comments\"]').find('.nu-btn:first').addClass('disabled');\n 12396  		} else {\n 12397: 			$parent.find('.addSection[element=\"facebook-comments\"]').find('.nu-btn:first').removeClass('disabled');\n 12398  		}\n 12399  \n .....\n 12413  						$saveElementBlock.empty();\n 12414  						for(var x in response['blocks']){\n 12415: 							var $markup = $('<div section-type=\"custom-layout-block\" class=\"addSection\"><div class=\"custom-image\" style=\"background:url('+response['blocks'][x]['LayoutBlock']['thumbnail']+');\">'+\n 12416  								'</div><span>'+response['blocks'][x]['LayoutBlock']['title']+'</span></div>');\n 12417  							var layout_val = $.parseJSON(response['blocks'][x]['LayoutBlock']['value']);\n 12418  							$markup.data('layout',layout_val).data('tags',response['blocks'][x]['LayoutBlock']['tags']);\n 12419: 							//console.log(\"DATA !\",$markup.find(\".addSection\").data());\n 12420  							//html_to_add+=$markup.html();\n 12421  							$saveElementBlock.append($markup);\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/social_inbox.js:\n   91  			$('#gallery-container').addClass('hide');\n   92  			// remove the disabed class in the add-new-section modal\n   93: 			$('#add-new-section').find('.addSection[block-type=\"gallery\"]').find('.nu-btn:first').removeClass('disabled');\n   94  			$this.removeClass('hideGallery').addClass('').html('Show Gallery');\n   95  			scrollToBlock($(\".gallery-height-spacer:first\"));\n   ..\n  105  			$('#gallery-container').removeClass('hide');\n  106  			// add the disabed class in the add-new-section modal\n  107: 			$('#add-new-section').find('.addSection[block-type=\"gallery\"]').find('.nu-btn:first').addClass('disabled pt');\n  108  			$this.removeClass('').addClass('hideGallery').html('Hide Gallery');\n  109  			scrollToBlock($(\"#gallery-container\"),0);\n\n40 matches across 10 files\n\n\nSearching 3525 files for \"custom-block-countdown\"\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block.ctp:\n   40  		echo $this->element('splash/custom-block-button',array('block'=>$block));\n   41  	} elseif($block['SplashFeed']['type']=='countdown'){\n   42: 		echo $this->element('splash/custom-block-countdown',array('block'=>$block));\n   43  	} elseif($block['SplashFeed']['type']=='comments') {\n   44  		echo $this->element('splash/custom-block-comments',array('block'=>$block));\n\n1 match in 1 file\n\n\nSearching 3525 files for \"custom-block\"\n\n/Users/guillermo/sites/oneclipboard.com/app/controllers/events_controller.php:\n 4935  \n 4936  			//if the file is an image, apply compression to it, pass an instance of ImageComponent and maximum dimensions. unfortunately we don't have the upload\n 4937: 			//file at this point, so we defined a list of filetypes (images) to apply compression to. max_dimensions can also be set thru `custom-block-list-item.ctp`\n 4938  			$max_dimensions = '3000x3000'; //max dimensions of any file uploaded thru this function\n 4939  			if(!empty($_GET['image_block_type'])) {\n\n/Users/guillermo/sites/oneclipboard.com/app/controllers/sites_controller.php:\n  430  \n  431  					foreach ($data['blocks'] as $splashfeedid => $b) {\n  432: 						$element = 'custom-block-'.$splashfeedid;\n  433  						//if(!in_array($element,$data['EventSetting']['layout']['elements'])){\n  434  						$data['EventSetting']['layout']['elements'][] = $element;\n  ...\n 2152  				$elements = array();\n 2153  				foreach ($custom_block_ids as $i=>$type) {\n 2154: 					$elements[] = array('element' => 'custom-block-'.$i, 'element_type' => $type);\n 2155  				}\n 2156  \n ....\n 2259  		if (isset($layout['element'])) {\n 2260  			$m = array();\n 2261: 			if (preg_match(\"/custom-block-(.*)/\",$layout['element'],$m)) {\n 2262  				$sfid = $m[1];\n 2263  				if (!isset($custom_block_ids[$sfid])) {\n\n/Users/guillermo/sites/oneclipboard.com/app/controllers/splash_controller.php:\n  226  								$this->output = '';//DONT EVEN ASK.  NEED THIS TO PREVENT RENDERING FROM CONCATENATING\n  227  								$str.= '<div id=\"element-'.$elementName.'\" pulled-from-event-id=\"'.$original_event_id.'\" pulled-id=\"'.$elementName.'\" '.$newE.' class=\"element\">';\n  228: 								$str.= $this->render('/elements/splash/custom-block',false);\n  229  								$str.= '</div>'.\"\\n\";\n  230  							}\n  ...\n  244  							$str.= '</div>'.\"\\n\";\n  245  						} else {\n  246: 							// custom-block-new-3745 // fucking theme switching\n  247  						}\n  248  					}\n  ...\n 1727  \n 1728  			$this->set('block',$data);\n 1729: 			$this->render('/elements/splash/custom-block-event-hub-item');\n 1730  		}\n 1731  	}\n\n/Users/guillermo/sites/oneclipboard.com/app/controllers/test_controller.php:\n  306                      0 => \n  307                      array (\n  308:                         'element' => 'custom-block-283226',\n  309                          'mode' => 's3',\n  310                          'img_shape' => 'square',\n  ...\n  312                      1 => \n  313                      array (\n  314:                         'element' => 'custom-block-86736',\n  315                          'mode' => 's3 hide-body',\n  316                          'img_shape' => 'circle',\n  ...\n  318                      2 => \n  319                      array (\n  320:                         'element' => 'custom-block-283230',\n  321                          ),\n  322                      3 => \n  323                      array (\n  324:                         'element' => 'custom-block-283225',\n  325                          'element_type' => 'speakers',\n  326                          ),\n\n/Users/guillermo/sites/oneclipboard.com/app/models/event_setting.php:\n  358  		}\n  359  		if (isset($layout['element'])) {\n  360: 			if ($layout['element'] == 'custom-block-'.$newId) {\n  361: 				$layout['element'] = 'custom-block-'.$actualId;\n  362  			}\n  363  		}\n\n/Users/guillermo/sites/oneclipboard.com/app/models/splash_comment.php:\n    5   * In reality, it is used to manipulate everything related to the comments element\n    6   * Other related files to this feature:\n    7:  * custom-block-comments.ctp\n    8:  * custom-block-comment-item.ctp\n    9   * splash-comments.js\n   10   * splash-layout.styl (look for 'Comments Element')\n\n/Users/guillermo/sites/oneclipboard.com/app/vendors/shells/ab.php:\n 1143  				// if not in layout, add it styles.hidden=1 to the layout\n 1144  				$newGrp = array(\n 1145: 					'element' => 'custom-block-'.$hub_sf_id,\n 1146  					'mode' => 's1',\n 1147  					'styles' => array(\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/custom-block-add.ctp:\n    1: <div class=\"custom-block-section\">\n    2:   <textarea id=\"custom-block-section-<?=$i?>\" name=\"data[CustomBlocks][<?=$i?>][body]\" class=\"speaker-body\"><?=(!empty($section['body']))?$section['body']:''?></textarea>\n    3    <a class=\"removeCustomBlock icon-close-2\"></a>\n    4    <input type=\"hidden\" name=\"data[CustomBlocks][<?=$i?>][block_id]\" class=\"block-id\" value=\"<?=(!empty($section['id']))?$section['id']:''?>\" />\n    .\n   12      	  	plugins: \"paste\",\n   13            mode:\"exact\",\n   14:           elements: \"custom-block-section-<?=$i?>\",\n   15            theme : \"advanced\",\n   16            theme_advanced_buttons1: \"bold,italic,underline,|,bullist,forecolor,link,unlink,code\",\n   ..\n   26    	      ed.onKeyUp.add(function(ed, e) {\n   27              myCustomOnChangeHandler(ed,'<?=$i?>');\n   28:         	//updateMCETextArea('custom-block-section-<?=$i?>',ed);\n   29        	  }),\n   30        	  ed.onChange.add(function(ed, e) {\n   31              myCustomOnChangeHandler(ed,'<?=$i?>');\n   32  \n   33:      			//updateMCETextArea('custom-block-section-<?=$i?>',ed);\n   34        	  }),\n   35        	  ed.onSetContent.add(function(ed, e) {\n   36              myCustomOnChangeHandler(ed,'<?=$i?>');\n   37  \n   38:      			//updateMCETextArea('custom-block-section-<?=$i?>',ed);\n   39        	  })\n   40        	},\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/custom-block-content.ctp:\n   25  \n   26  	<?php\n   27: 		echo $this->element('/legacy/splash/custom-block-ftscript',array('block'=>$block));\n   28  	?>\n   29  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/custom-block-image.ctp:\n   18  		<div class=\"body\"><?=$block['SplashFeed']['body']?></div>\n   19  	<?php\n   20: 		echo $this->element('/legacy/splash/custom-block-ftscript',array('block'=>$block));\n   21  	?>\n   22  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/custom-block-list-item.ctp:\n   32  			<div class=\"body\"><?=$block['SplashFeed']['body']?></div>\n   33  		<?php } ?>\n   34: 		<?php echo $this->element('/legacy/splash/custom-block-ftscript',array('block'=>$block));?>\n   35  	</div>\n   36  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/custom-block-list.ctp:\n   52  		<div class=\"children\">\n   53  			<?php foreach ($block['children'] as $child) {\n   54: 				echo $this->element('/legacy/splash/custom-block',array('block'=>$child));\n   55  			} ?>\n   56  		</div>\n   ..\n   65  \n   66  \n   67: 	echo $this->element('/legacy/splash/custom-block-ftscript',array('block'=>$block));\n   68  \n   69  	?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/custom-block-schedule-item.ctp:\n   50  			</div>\n   51  		</div>\n   52: 		<?php echo $this->element('splash/custom-block-ftscript',array('block'=>$block));?>\n   53  	</div>\n   54  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/custom-block-speaker-item.ctp:\n   32  			<?=$block['SplashFeed']['body']?>\n   33  		</div>\n   34: 		<?php echo $this->element('/legacy/splash/custom-block-ftscript',array('block'=>$block));?>\n   35  	</div>\n   36  <?php } ?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/custom-block-sponsor-item.ctp:\n   37  		</div>\n   38  \n   39: 		<?php echo $this->element('/legacy/splash/custom-block-ftscript',array('block'=>$block));?>\n   40  	</div>\n   41  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/custom-block.ctp:\n   14  		case 'schedule':\n   15  		case 'sponsors':\n   16: 			echo $this->element('/legacy/splash/custom-block-list',array('block'=>$block));\n   17  			break;\n   18  		case 'schedule-item':\n   19: 			echo $this->element('/legacy/splash/custom-block-schedule-item',array('block'=>$block));\n   20  			break;\n   21  		case 'speaker-item':\n   22: 			echo $this->element('/legacy/splash/custom-block-speaker-item',array('block'=>$block));\n   23  			break;\n   24  		case 'sponsor-item':\n   25: 			echo $this->element('/legacy/splash/custom-block-sponsor-item',array('block'=>$block));\n   26  			break;\n   27  		case 'list-item':\n   28: 			echo $this->element('/legacy/splash/custom-block-list-item',array('block'=>$block));\n   29  			break;\n   30  		case 'hero':\n   31  		case 'image':\n   32: 			echo $this->element('/legacy/splash/custom-block-image',array('block'=>$block));\n   33  			break;\n   34  		case 'map':\n   35  		case 'audio':\n   36  		case 'video':\n   37: 			echo $this->element('/legacy/splash/custom-block-embed',array('block'=>$block));\n   38  			break;\n   39  		default:\n   40  			//echo 'no case - '.$block['SplashFeed']['type'];\n   41: 			echo $this->element('/legacy/splash/custom-block-content',array('block'=>$block));\n   42  			break;\n   43  	}\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/finetune.ctp:\n  723  							<? if(isset($data['blocks']['custom_splash_section'])){\n  724  								for($z=0;$z<count($data['blocks']['custom_splash_section']);$z++){\n  725: 									echo $this->element('custom-block-add',array('i'=>$z+1,'section'=>$data['blocks']['custom_splash_section'][$z]));\n  726  								}\n  727  							} else {\n  728: 								echo $this->element('custom-block-add',array('i'=>1,'section'=>array()));\n  729  							} ?>\n  730  						</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-attendees.ctp:\n   47  		<div class=\"attendee-view-all hide\">View all</div>\n   48  		<?php\n   49: 			echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n   50  		?>\n   51  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-blog-item.ctp:\n   67  		<?php } ?>\n   68  \n   69: 		<?php echo $this->element('splash/custom-block-ftscript',array('block'=>$block));?>\n   70  	</div>\n   71  <?php } ?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-blog.ctp:\n   40  \n   41  			<?php foreach ($block['children'] as $child) {\n   42: 				echo $this->element('splash/custom-block',array('block'=>$child));\n   43  			} ?>\n   44  		</div>\n   ..\n   51  	} ?>\n   52  \n   53: 	<?php echo $this->element('splash/custom-block-ftscript',array('block'=>$block));?>\n   54  	</div>\n   55  <?php }\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-button.ctp:\n   33  \n   34  	<?php\n   35: 		echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n   36  	?>\n   37  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-comments.ctp:\n  267  \n  268  	<? // Loading options into data javacript object for this element (only if finetune)\n  269: 		echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n  270  	?>\n  271  </div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-content.ctp:\n   37  \n   38  	<?php\n   39: 		echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n   40  	?>\n   41  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-countdown.ctp:\n   53  \n   54  	<?php\n   55: 		echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n   56  	?>\n   57  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-embed.ctp:\n   41  \n   42  	<?php\n   43: 		echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n   44  	?>\n   45  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-event-hub-item.ctp:\n    3  // LEGACY\n    4  // This element has moved to JS rendering instead of PHP reandering on page load\n    5: // So this view is never used, check out instead the template in custom-block-event-hub.ctp\n    6  \n    7  $block = (isset($block['Event'])) ? $block : false;\n    .\n  264  		<? } ?>\n  265  \n  266: 		<?php echo $this->element('splash/custom-block-ftscript',array('block'=>$block));?>\n  267  	\n  268  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-event-hub.ctp:\n  251  	<?php }\n  252  		\n  253: 	echo $this->element('splash/custom-block-ftscript',array('block'=>$block));?>\n  254  </div>\n  255  <?php } ?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-image.ctp:\n   41  		<div class=\"body block p0\"><?=$block['SplashFeed']['body']?></div>\n   42  	<?php\n   43: 		echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n   44  	?>\n   45  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-img-gal.ctp:\n   43  					$i = 1;\n   44  					foreach($block['images'] as $img){\n   45: 						echo $this->element('splash/custom-block-img-gal-item',array(\"block\"=>$img,'count'=>$i));\n   46  						$i++;\n   47  					}\n   ..\n   74  \n   75  \n   76: 		<?php echo $this->element('splash/custom-block-ftscript',array('block'=>$block));?>\n   77  	</div>\n   78  <?php }\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-list-item.ctp:\n  136  		<?php } ?>\n  137  \n  138: 		<?php echo $this->element('splash/custom-block-ftscript',array('block'=>$block));?>\n  139  \n  140  	<?php if($block['SplashFeed']['type']=='list-item'){ ?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-list.ctp:\n   85  \n   86  			<?php foreach ($block['children'] as $child) {\n   87: 				echo $this->element('splash/custom-block',array('block'=>$child));\n   88  			} ?>\n   89  		</ul>\n   ..\n  101  					$child['SplashFeed']['type'] = 'schedule-item'; // legacy goodness\n  102  				}\n  103: 				echo $this->element('splash/custom-block',array('block'=>$child));\n  104  			} ?>\n  105  		</div>\n  ...\n  115  	}\n  116  \n  117: 	echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n  118  \n  119  	?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-schedule-item.ctp:\n   66  			</div>\n   67  		</div>\n   68: 		<?php echo $this->element('splash/custom-block-ftscript',array('block'=>$block));?>\n   69  	</div>\n   70  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-social-links.ctp:\n   13  \n   14  	<?php\n   15: 		echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n   16  	?>\n   17  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block.ctp:\n   14  	if(in_array($block['SplashFeed']['type'],array('list','schedule-list','speakers','schedule','sponsors','images','nav','full-list',\n   15  		'full-image-list','ticker'))){\n   16: 		echo $this->element('splash/custom-block-list',array('block'=>$block));\n   17  	} elseif(in_array($block['SplashFeed']['type'],array(\n   18  		'full-list-item', 'full-image-list-item', 'speaker-item',\n   ..\n   20  		'image-item', 'sponsor-item', 'list-item', 'schedule-list-item', 'nav-item', 'ticker-item'\n   21  	))){\n   22: 		echo $this->element('splash/custom-block-list-item',array('block'=>$block));\n   23  	} elseif($block['SplashFeed']['type']=='img_gal'){\n   24: 		echo $this->element('splash/custom-block-img-gal',array('block'=>$block));\n   25  	} elseif($block['SplashFeed']['type']=='blog'){\n   26: 		echo $this->element('splash/custom-block-blog',array('block'=>$block));\n   27  	} elseif($block['SplashFeed']['type']=='blog-item'){\n   28: 		echo $this->element('splash/custom-block-blog-item',array('block'=>$block));\n   29  	} elseif($block['SplashFeed']['type']=='schedule-item'){\n   30: 		echo $this->element('splash/custom-block-schedule-item',array('block'=>$block));\n   31  	} elseif($block['SplashFeed']['type']=='event-hub'){\n   32: 		echo $this->element('splash/custom-block-event-hub',array('block'=>$block));\n   33  	} elseif($block['SplashFeed']['type']=='event-hub-item'){\n   34: 		echo $this->element('splash/custom-block-event-hub-item',array('block'=>$block));\n   35  	} elseif(in_array($block['SplashFeed']['type'],array('hero','image'))){\n   36: 		echo $this->element('splash/custom-block-image',array('block'=>$block));\n   37  	} elseif(in_array($block['SplashFeed']['type'],array('map','audio','video','iframe','twitter-widget'))){\n   38: 		echo $this->element('splash/custom-block-embed',array('block'=>$block));\n   39  	} elseif($block['SplashFeed']['type']=='button'){\n   40: 		echo $this->element('splash/custom-block-button',array('block'=>$block));\n   41  	} elseif($block['SplashFeed']['type']=='countdown'){\n   42: 		echo $this->element('splash/custom-block-countdown',array('block'=>$block));\n   43  	} elseif($block['SplashFeed']['type']=='comments') {\n   44: 		echo $this->element('splash/custom-block-comments',array('block'=>$block));\n   45  	} elseif($block['SplashFeed']['type']=='attendees') {\n   46: 		echo $this->element('splash/custom-block-attendees',array('block'=>$block));\n   47  	} else {//the default.\n   48: 		echo $this->element('splash/custom-block-content',array('block'=>$block));\n   49  	}\n   50  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/gallery.ctp:\n  265  					<? $t = array( 'EventPhoto'=>array('id'=>0,'thumbnail'=>'/images/st-p-z-bear.png?stp',\n  266  						'image'=>'/images/st-p-z-bear.png?stp','event_id'=>$data['Event']['id']) );?>\n  267: 					<?=$this->element('splash/custom-block-img-gal-item',array(\"block\"=>$t,'count'=>500));?>\n  268  				</div>*/?>\n  269  			<? } ?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/helpers/cdn_html.php:\n  391  	 * Also renders some HTML\n  392  	 * parameters:\n  393: 	 * $elementName - holds the name of the element. For custom blocks, it is custom-block-(ID)\n  394  	 * $options - Optional, custom options of the block, passed to the view directly\n  395  	 */\n  ...\n  410  			$c[] = 'hide';\n  411  		}\n  412: 		$raw_block_id = str_replace('custom-block-','',$elementName);\n  413  		?>\n  414  \n  ...\n  418  			$m = array();\n  419  			if (preg_match(\"/^custom.block.([0-9]+)$/\",$elementName,$m)) {\n  420: 				echo $view->element('/splash/custom-block',array('block_id' => $m[1],'options'=>$options));\n  421  			} elseif(!empty($elementName) && $elementName!=null) {\n  422  				echo $view->element('/splash/'.$elementName,array('options'=>$options));\n\n/Users/guillermo/sites/oneclipboard.com/app/views/sites/legacy-view.ctp:\n 1062  					</div><!-- end speaker block-->\n 1063  \n 1064: 					<div id=\"schedule-block\" class=\"custom-block wide-wrap left clear <?=(in_array($data['EventSetting']['hide_schedule'],array('1','on')))?'hide':''?>\">\n 1065  						<?=$this->element('/legacy/splash/schedule')?>\n 1066  					</div><!-- end schedule block-->\n ....\n 1108  					</div><!-- end speaker block-->\n 1109  \n 1110: 					<div id=\"schedule-block\" class=\"custom-block wide-wrap left clear <?=(in_array($data['EventSetting']['hide_schedule'],array('1','on')))?'hide':''?>\">\n 1111  						<?=$this->element('/legacy/splash/schedule')?>\n 1112  					</div><!-- end schedule block-->\n ....\n 1267  						<?=$this->element('/legacy/splash/speakers')?>\n 1268  					</div><!-- end speaker block-->\n 1269: 					<div id=\"schedule-block\" class=\"custom-block wide-wrap left clear <?=(in_array($data['EventSetting']['hide_schedule'],array('1','on')))?'hide':''?>\">\n 1270  						<?=$this->element('/legacy/splash/schedule')?>\n 1271  					</div><!-- end schedule block-->\n ....\n 1339  				</article>\n 1340  					<div id=\"ticket-block\">\n 1341: 					    <section class=\"custom-block-inner\">\n 1342  \n 1343  					        <p id=\"sponsor-text\">TICKET INFORMATION</p>\n ....\n 1418  					    -->\n 1419  					<div id=\"entertainment-block\">\n 1420: 					    <section class=\"custom-block-inner\">\n 1421  					        <p id=\"sponsor-text\">Entertainement</p>\n 1422  					        <span class=\"the-mask\"></span>\n ....\n 1434  					    -->\n 1435  					<div id=\"sponsor-block\">\n 1436: 					    <section class=\"custom-block-inner\">\n 1437  						    <p id=\"sponsor-text\">SPONSORS</p>\n 1438  						    <span class=\"the-mask\"></span>\n ....\n 1450  					    -->\n 1451  					<div id=\"photo-block\">\n 1452: 					    <section class=\"custom-block-inner the-photos\">\n 1453  						    <p id=\"sponsor-text\">PHOTOS</p>\n 1454  						    <span class=\"the-mask\"></span>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/sites/view.ctp:\n  500  			<div class=\"blank-group\" <?=(isset($s['block']['group'])&&count($s['block']['group'])>0)?\"group='\".json_encode($s['block']['group']).\"'\":''?>>\n  501  				<div class=\"element\">\n  502: 					<?=$this->element('/splash/custom-block',array('block'=>$s['block'],'blank'=>true))?>\n  503  				</div>\n  504  			</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/css/dashboard.css:\n 5446  \n 5447  /** Speaker Block, Backend. **/\n 5448: .speakerBlock,.presenterBlock,.custom-block-section {\n 5449  	position: relative;\n 5450  	background: #f8f8f8;\n ....\n 5456  	border-radius: 3px;\n 5457  }\n 5458: .custom-block-section{\n 5459  	padding-left:10px;\n 5460  	width:325px;\n 5461  }\n 5462: .custom-block-section .sort{\n 5463  	color:#888888;\n 5464  }\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/css/eventfeed/_splash-theme-hauntedhouse.css:\n  626      cursor: pointer;\n  627  }\n  628: section.custom-block-inner\n  629  {\n  630      border: none;\n  631  }\n  632: section.custom-block-inner p\n  633  {\n  634      text-align: center;\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/css/eventfeed/splash-template-uncubed.css:\n  285  /* the custom sections */\n  286  \n  287: div.custom-block {\n  288      background: none;\n  289      width: 100%;\n  ...\n  305  }\n  306  \n  307:         div.custom-1 div.custom-block.after-party,\n  308:         div.custom-2 div.custom-block.day-previews,\n  309:         div.custom-2 div.custom-block.the-location {\n  310              /*display: none;*/\n  311          }\n  312  \n  313:         div.custom-block.inner {\n  314              width:480px;\n  315              margin:0 12px 0 12px;\n  ...\n  318          }\n  319  \n  320:             div.custom-block.reg-left,\n  321:             div.custom-block.reg-right {\n  322                  margin:60px 12px 0 12px;\n  323                  box-shadow: 0 4px 11px rgba(0,0,0,0.6);\n  324              }\n  325  \n  326:                 div.custom-block.reg-left strong {\n  327                      color: #03E1FF\n  328                  }\n  329  \n  330:                 div.custom-block.reg-right strong {\n  331                      color: yellow;\n  332                  }\n  333  \n  334:             div.custom-block.reg-left {\n  335                  background: yellow;\n  336              }\n  337  \n  338:             div.custom-block.reg-right {\n  339                  background: #03e1ff;\n  340              }\n  ...\n  384                  }\n  385  \n  386:                 div.custom-block.reg-left:hover {\n  387                      /*-webkit-animation:gahhhh 14s infinite;*/\n  388                  }\n  389  \n  390:                 div.custom-block.reg-right:hover {\n  391                      /*-webkit-animation:gahhhh2 14s infinite;*/\n  392                  }\n  393  \n  394:                 div.custom-block.reg-left h5,\n  395:                 div.custom-block.reg-right h5 {\n  396                      font-size: 80px;\n  397                  }\n  398  \n  399:                 div.custom-block.reg-left h5 {\n  400                      font-size: 80px;\n  401                      text-shadow:-2px 2px 0 red, 2px -2px 0 #03e1ff;\n  ...\n  407                  }\n  408  \n  409:                     div.custom-block.reg-right h5 {\n  410                          text-shadow:-2px 2px 0 red, 2px -2px 0 yellow;\n  411                      }\n  412  \n  413:                     div.custom-block.inner:hover h5,\n  414:                     div.custom-block:hover h3,\n  415                      #speaker-block:hover h3,\n  416                      section.splashlist:hover p {\n  ...\n  425              \n  426  \n  427:             div.custom-block p.section-slug {\n  428                  background: black;\n  429                  padding: 30px 10px;\n  ...\n  437              }\n  438  \n  439:                 div.custom-block.day-previews p.section-slug {\n  440                      background: #fff;\n  441                      color: #000;\n  ...\n  443                  }\n  444  \n  445:             div.custom-block a,\n  446:             div.custom-block a:visited,\n  447              a.big.button {\n  448                  color: #fff;\n  ...\n  461              }\n  462  \n  463:                 div.custom-block.get-tickets,\n  464:                 div.custom-block.get-tickets div.custom-block    {\n  465                      text-align: center;\n  466                  }\n  467  \n  468:                 div.custom-block.get-tickets a {\n  469                      box-shadow: 0 0 0 2px #fff;                    \n  470                  }\n  471  \n  472:                 div.custom-block.reg-left a,\n  473:                 div.custom-block.reg-right a {\n  474                      text-shadow:none;\n  475                  }\n  476  \n  477:                 div.custom-block.reg-left a {\n  478                      background: #03e1ff;\n  479                      color: #ffff00;\n  480                  }\n  481  \n  482:                 div.custom-block.reg-right a {\n  483                      background: yellow;\n  484                      color: #03e1ff;\n  485                  }\n  486  \n  487:                 div.custom-block a:hover {\n  488                      background: red;\n  489                      color: #fff;\n  ...\n  496                  }\n  497  \n  498:                 div.custom-block a.plain-link {\n  499                      color: #000;\n  500                      font-size: 14px;\n  ...\n  515                  }\n  516  \n  517:                     div.custom-block a.plain-link:hover {\n  518                          color: #fff;\n  519                      }\n  ...\n  562          }\n  563  \n  564:         div.custom-block h5 {\n  565              font-family: 'Fugaz One', arial, sans-serif;\n  566              font-weight: normal;\n  ...\n  590          }\n  591  \n  592:         div.custom-block.wide-wrap {\n  593              padding: 20px 0;\n  594          }\n  595  \n  596:             div.custom-block.wide-wrap:before {\n  597                  content: '';\n  598                  position: absolute;\n  ...\n  606              }\n  607  \n  608:             div.custom-block.wide-wrap.black,\n  609:             div.custom-block.wide-wrap.black:before {\n  610                  background: black;\n  611              }\n  612  \n  613:             div.custom-block.wide-wrap.the-location,\n  614:             div.custom-block.wide-wrap.dark-red:before {\n  615                  background: #05e3ff;\n  616              }\n  617  \n  618:                 div.custom-block.wide-wrap h3 {\n  619                      font-size: 80px;\n  620                      color: #fff;\n  ...\n  625                  }\n  626  \n  627:                 div.custom-block.wide-wrap.the-location h3,\n  628:                 div.custom-block.wide-wrap.the-location:hover h3 {\n  629                      color: #fff;\n  630                      text-shadow:-2px 2px 0px yellow, 2px -2px 0px red;\n  ...\n  632                  }\n  633  \n  634:                 div.custom-block.wide-wrap.dark-red h4 {\n  635                      text-shadow:none;\n  636                      float: left;\n  ...\n  639                  }\n  640  \n  641:                 div.custom-block.wide-wrap.dark-red iframe {\n  642                      float: right;\n  643                  }\n  644  \n  645:             div.custom-block.wide-wrap.after-party:before {\n  646                  background: url(/images/custom-splash/uncubed/uncubed-roughboard2.jpg) center top;\n  647                  box-shadow: 0 3px 26px rgba(0, 0, 0, 0.8) inset;\n  ...\n  773                      }\n  774  \n  775:                 div.custom-block.wide-wrap.after-party h3 {\n  776                      text-align: left;\n  777                      color: white;\n  ...\n  788                  }\n  789  \n  790:                     div.custom-block.wide-wrap.after-party:hover h3 {\n  791                          animation:racausmoves 3s linear infinite;\n  792                          -webkit-animation:racausmoves 3s linear infinite;\n  ...\n  796                      }\n  797  \n  798:                     div.custom-block.wide-wrap.after-party:hover h3 span {\n  799                          animation:racauscolors 1s linear infinite;\n  800                          -webkit-animation:racauscolors 1s linear infinite;\n  ...\n  804                      }\n  805  \n  806:                         div.custom-block.wide-wrap.after-party:hover h3 span:nth-child(2n) {\n  807                              color: #ff00ff;\n  808                              animation:racauscolors2 1s linear infinite;\n  ...\n  813                          }\n  814  \n  815:                         div.custom-block.wide-wrap.after-party:hover h3 span:nth-child(3n) {\n  816                              color: #ff0000;\n  817                              animation:racauscolors3 1s linear infinite;       \n  ...\n  822                          }\n  823  \n  824:                     div.custom-block.wide-wrap.after-party h5,\n  825:                     div.custom-block.wide-wrap.after-party h6 {\n  826                          float: right;\n  827                          width: 790px;\n  ...\n  832                      }\n  833  \n  834:                         div.custom-block.wide-wrap.after-party:hover h5 {\n  835                              animation:racausestmoves .1s linear infinite;\n  836                              -webkit-animation:racausestmoves .1s linear infinite;\n  ...\n  840                          }\n  841  \n  842:                         div.custom-block.wide-wrap.after-party h6 {\n  843                              font-size: 40px;\n  844                              color: #fff;\n  ...\n  847          /* for the schedule */\n  848  \n  849:         #schedule-block.custom-block.wide-wrap {\n  850              background: #000;\n  851              margin-bottom: 0;\n  852          }\n  853  \n  854:             #schedule-block.custom-block.wide-wrap:before {\n  855                  background: #000;\n  856              }\n  857  \n  858:         #schedule-block.custom-block h3 {\n  859              font-size: 30px;\n  860              color: #fff;\n  ...\n  862          }\n  863  \n  864:         #schedule-block.custom-block table {\n  865              background: #000;\n  866              font-family: 'gibsonSemiBoldItalic';\n  867          }\n  868  \n  869:             #schedule-block.custom-block table tr td {\n  870                  font-family: 'gibsonRegular';\n  871                  color: #fff;\n  ...\n  873              }\n  874  \n  875:             #schedule-block.custom-block table tr td b,\n  876:             #schedule-block.custom-block table tr td:first-child {\n  877                  color: #fff;\n  878                  font-family: 'gibsonSemiBoldItalic';\n  ...\n 1240              }\n 1241  \n 1242:         div.custom-block.inner{\n 1243              min-height: 157px;\n 1244          }\n ....\n 1312  }\n 1313  \n 1314: div.custom-block.reg-left a,\n 1315: div.custom-block.reg-right a {\n 1316  background:#000;\n 1317  }\n 1318  \n 1319: #schedule-block.custom-block.wide-wrap {\n 1320  padding:0;\n 1321  }\n ....\n 1329  }\n 1330  \n 1331: div.custom-block.reg-left h5, div.custom-block.reg-right h5 {\n 1332  letter-spacing:-1px;\n 1333  }\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/css/eventfeed/splash-theme-hauntedhouse.css:\n  635      cursor: pointer;\n  636  }\n  637: section.custom-block-inner\n  638  {\n  639      border: none;\n  640  }\n  641: section.custom-block-inner p\n  642  {\n  643      text-align: center;\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/css/eventfeed/splash-theme-uncubed.css:\n  325  /* the custom sections */\n  326  \n  327: div.custom-block {\n  328      background: none;\n  329      width: 100%;\n  ...\n  345  }\n  346  \n  347:         div.custom-1 div.custom-block.after-party,\n  348:         div.custom-2 div.custom-block.day-previews,\n  349:         div.custom-2 div.custom-block.the-location {\n  350              /*display: none;*/\n  351          }\n  352  \n  353:         div.custom-block.inner {\n  354              width:480px;\n  355              margin:0 12px 0 12px;\n  ...\n  358          }\n  359  \n  360:             div.custom-block.reg-left,\n  361:             div.custom-block.reg-right {\n  362                  margin:60px 12px 0 12px;\n  363                  box-shadow: 0 4px 11px rgba(0,0,0,0.6);\n  364              }\n  365  \n  366:                 div.custom-block.reg-left strong {\n  367                      color: #03E1FF\n  368                  }\n  369  \n  370:                 div.custom-block.reg-right strong {\n  371                      color: yellow;\n  372                  }\n  373  \n  374:             div.custom-block.reg-left {\n  375                  background: yellow;\n  376              }\n  377  \n  378:             div.custom-block.reg-right {\n  379                  background: #03e1ff;\n  380              }\n  ...\n  424                  }\n  425  \n  426:                 div.custom-block.reg-left:hover {\n  427                      /*-webkit-animation:gahhhh 14s infinite;*/\n  428                  }\n  429  \n  430:                 div.custom-block.reg-right:hover {\n  431                      /*-webkit-animation:gahhhh2 14s infinite;*/\n  432                  }\n  433  \n  434:                 div.custom-block.reg-left h5,\n  435:                 div.custom-block.reg-right h5 {\n  436                      font-size: 80px;\n  437                  }\n  438  \n  439:                 div.custom-block.reg-left h5 {\n  440                      font-size: 80px;\n  441                      text-shadow:-2px 2px 0 red, 2px -2px 0 #03e1ff;\n  ...\n  447                  }\n  448  \n  449:                     div.custom-block.reg-right h5 {\n  450                          text-shadow:-2px 2px 0 red, 2px -2px 0 yellow;\n  451                      }\n  452  \n  453:                     div.custom-block.inner:hover h5,\n  454:                     div.custom-block:hover h3,\n  455                      #speaker-block:hover h3,\n  456                      section.splashlist:hover p {\n  ...\n  465              \n  466  \n  467:             div.custom-block p.section-slug {\n  468                  background: black;\n  469                  padding: 30px 10px;\n  ...\n  477              }\n  478  \n  479:                 div.custom-block.day-previews p.section-slug {\n  480                      background: #fff;\n  481                      color: #000;\n  ...\n  483                  }\n  484  \n  485:             div.custom-block a,\n  486:             div.custom-block a:visited {\n  487                  color: #fff;\n  488                  background: #000;\n  ...\n  499              }\n  500  \n  501:                 div.custom-block.get-tickets,\n  502:                 div.custom-block.get-tickets div.custom-block    {\n  503                      text-align: center;\n  504                  }\n  505  \n  506:                 div.custom-block.get-tickets a {\n  507                      box-shadow: 0 0 0 2px #fff;                    \n  508                  }\n  509  \n  510:                 div.custom-block.reg-right a {\n  511                      background: yellow;\n  512                  }\n  513  \n  514:                 div.custom-block a:hover {\n  515                      background: red;\n  516                      color: #fff;\n  ...\n  522                  }\n  523  \n  524:                 div.custom-block a.plain-link {\n  525                      color: #000;\n  526                      font-size: 14px;\n  ...\n  541                  }\n  542  \n  543:                     div.custom-block a.plain-link:hover {\n  544                          color: #fff;\n  545                      }\n  ...\n  588          }\n  589  \n  590:         div.custom-block h5 {\n  591              font-family: 'Fugaz One', arial, sans-serif;\n  592              font-weight: normal;\n  ...\n  616          }\n  617  \n  618:         div.custom-block.wide-wrap {\n  619              padding: 20px 0;\n  620          }\n  621  \n  622:             div.custom-block.wide-wrap:before {\n  623                  content: '';\n  624                  position: absolute;\n  ...\n  632              }\n  633  \n  634:             div.custom-block.wide-wrap.black,\n  635:             div.custom-block.wide-wrap.black:before {\n  636                  background: black;\n  637              }\n  638  \n  639:             div.custom-block.wide-wrap.the-location,\n  640:             div.custom-block.wide-wrap.dark-red:before {\n  641                  background: #05e3ff;\n  642              }\n  643  \n  644:                 div.custom-block.wide-wrap h3 {\n  645                      font-size: 80px;\n  646                      color: #fff;\n  ...\n  651                  }\n  652  \n  653:                 div.custom-block.wide-wrap.the-location h3,\n  654:                 div.custom-block.wide-wrap.the-location:hover h3 {\n  655                      color: #fff;\n  656                      text-shadow:-2px 2px 0px yellow, 2px -2px 0px red;\n  ...\n  658                  }\n  659  \n  660:                 div.custom-block.wide-wrap.dark-red h4 {\n  661                      text-shadow:none;\n  662                      float: left;\n  ...\n  665                  }\n  666  \n  667:                 div.custom-block.wide-wrap.dark-red iframe {\n  668                      float: right;\n  669                  }\n  670  \n  671:             div.custom-block.wide-wrap.after-party:before {\n  672                  background: url(/images/custom-splash/uncubed/uncubed-roughboard2.jpg) center top;\n  673                  box-shadow: 0 3px 26px rgba(0, 0, 0, 0.8) inset;\n  ...\n  799                      }\n  800  \n  801:                 div.custom-block.wide-wrap.after-party h3 {\n  802                      text-align: left;\n  803                      color: white;\n  ...\n  814                  }\n  815  \n  816:                     div.custom-block.wide-wrap.after-party:hover h3 {\n  817                          animation:racausmoves 3s linear infinite;\n  818                          -webkit-animation:racausmoves 3s linear infinite;\n  ...\n  822                      }\n  823  \n  824:                     div.custom-block.wide-wrap.after-party:hover h3 span {\n  825                          animation:racauscolors 1s linear infinite;\n  826                          -webkit-animation:racauscolors 1s linear infinite;\n  ...\n  830                      }\n  831  \n  832:                         div.custom-block.wide-wrap.after-party:hover h3 span:nth-child(2n) {\n  833                              color: #ff00ff;\n  834                              animation:racauscolors2 1s linear infinite;\n  ...\n  839                          }\n  840  \n  841:                         div.custom-block.wide-wrap.after-party:hover h3 span:nth-child(3n) {\n  842                              color: #ff0000;\n  843                              animation:racauscolors3 1s linear infinite;       \n  ...\n  848                          }\n  849  \n  850:                     div.custom-block.wide-wrap.after-party h5,\n  851:                     div.custom-block.wide-wrap.after-party h6 {\n  852                          float: right;\n  853                          width: 790px;\n  ...\n  858                      }\n  859  \n  860:                         div.custom-block.wide-wrap.after-party:hover h5 {\n  861                              animation:racausestmoves .1s linear infinite;\n  862                              -webkit-animation:racausestmoves .1s linear infinite;\n  ...\n  866                          }\n  867  \n  868:                         div.custom-block.wide-wrap.after-party h6 {\n  869                              font-size: 40px;\n  870                              color: #fff;\n  ...\n  873          /* for the schedule */\n  874  \n  875:         #schedule-block.custom-block.wide-wrap {\n  876              background: #000;\n  877              margin-bottom: 0;\n  878          }\n  879  \n  880:             #schedule-block.custom-block.wide-wrap:before {\n  881                  background: #000;\n  882              }\n  883  \n  884:         #schedule-block.custom-block h3 {\n  885              font-size: 30px;\n  886              color: #fff;\n  ...\n  888          }\n  889  \n  890:         #schedule-block.custom-block table {\n  891              background: #000;\n  892              font-family: 'gibsonSemiBoldItalic';\n  893          }\n  894  \n  895:             #schedule-block.custom-block table tr td {\n  896                  font-family: 'gibsonRegular';\n  897                  color: #fff;\n  ...\n  899              }\n  900  \n  901:             #schedule-block.custom-block table tr td b,\n  902:             #schedule-block.custom-block table tr td:first-child {\n  903                  color: #fff;\n  904                  font-family: 'gibsonSemiBoldItalic';\n  ...\n 1266              }\n 1267  \n 1268:         div.custom-block.inner{\n 1269              min-height: 157px;\n 1270          }\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/css/eventfeed/splash-theme-wonder.css:\n  437      cursor: pointer;\n  438  }\n  439: section.custom-block-inner\n  440  {\n  441      border: none;\n  442  }\n  443: section.custom-block-inner p\n  444  {\n  445      text-align: center;\n  ...\n  453      \n  454  }\n  455: section.custom-block-inner\n  456  {\n  457      background: #1f0e22;\n  ...\n  464  }\n  465  \n  466:     section.custom-block-inner.the-photos  {\n  467          border-right:none;\n  468          border-left:none;\n  ...\n  478      margin-bottom: 20px;\n  479  }\n  480: section.custom-block-inner span.the-mask\n  481  {\n  482      border: none;\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/css/splash/user-planning.css:\n 11756  }\n 11757  body.finetune:not(.advMode) div[id^=\"g-\"][class*=\" element-\"].hovering > .edit-tools,\n 11758: body.finetune:not(.advMode) div[id^=\"g-\"][class*=\" element-custom-block-\"].hovering > .edit-tools,\n 11759  body.finetune:not(.advMode) div[id^=\"g-\"].mega-location-wrap.hovering > .edit-tools,\n 11760  body.finetune:not(.advMode) div[id^=\"g-\"].mega-date-wrap.hovering > .edit-tools {\n .....\n 11762  }\n 11763  body.finetune:not(.advMode) div[id^=\"g-\"][class*=\" element-\"].hovering > .edit-tools > .addUnder,\n 11764: body.finetune:not(.advMode) div[id^=\"g-\"][class*=\" element-custom-block-\"].hovering > .edit-tools > .addUnder,\n 11765  body.finetune:not(.advMode) div[id^=\"g-\"].mega-location-wrap.hovering > .edit-tools > .addUnder,\n 11766  body.finetune:not(.advMode) div[id^=\"g-\"].mega-date-wrap.hovering > .edit-tools > .addUnder {\n .....\n 11768  }\n 11769  body.finetune:not(.advMode) div[id^=\"g-\"][class*=\" element-\"].hovering > .edit-tools > .addUnder .onPageAddSec,\n 11770: body.finetune:not(.advMode) div[id^=\"g-\"][class*=\" element-custom-block-\"].hovering > .edit-tools > .addUnder .onPageAddSec,\n 11771  body.finetune:not(.advMode) div[id^=\"g-\"].mega-location-wrap.hovering > .edit-tools > .addUnder .onPageAddSec,\n 11772  body.finetune:not(.advMode) div[id^=\"g-\"].mega-date-wrap.hovering > .edit-tools > .addUnder .onPageAddSec {\n .....\n 11774  }\n 11775  body.finetune:not(.advMode) div[id^=\"g-\"][class*=\" element-\"] .children > div:hover > .edit-tools,\n 11776: body.finetune:not(.advMode) div[id^=\"g-\"][class*=\" element-custom-block-\"] .children > div:hover > .edit-tools,\n 11777  body.finetune:not(.advMode) div[id^=\"g-\"].mega-location-wrap .children > div:hover > .edit-tools,\n 11778  body.finetune:not(.advMode) div[id^=\"g-\"].mega-date-wrap .children > div:hover > .edit-tools,\n 11779  body.finetune:not(.advMode) div[id^=\"g-\"][class*=\" element-\"] .children > li:hover > .edit-tools,\n 11780: body.finetune:not(.advMode) div[id^=\"g-\"][class*=\" element-custom-block-\"] .children > li:hover > .edit-tools,\n 11781  body.finetune:not(.advMode) div[id^=\"g-\"].mega-location-wrap .children > li:hover > .edit-tools,\n 11782  body.finetune:not(.advMode) div[id^=\"g-\"].mega-date-wrap .children > li:hover > .edit-tools {\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/css/styl/user-planning.styl:\n 10988  			// these are basic\n 10989  			&[class*=\" element-\"]\n 10990: 			&[class*=\" element-custom-block-\"]\n 10991  			&.mega-location-wrap\n 10992  			&.mega-date-wrap\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/finetune-layout.js:\n  503  \n  504  		// get the already on-page element\n  505: 		var $block_type = $(\"#element-\"+$group['element']);//ie. element-custom-block-x\n  506  		if ($block_type.length>0){\n  507  			var bt = $block_type.find(\">.sf:first\").attr(\"block-type\");\n  508: 		} else if (($group['element']+'').match(/^custom-block/)) { // for new sections being added on the fly.\n  509: 			var n = $group['element'].replace('custom-block','sfid');\n  510  			var bt = $(\"#\"+n).attr(\"block-type\");\n  511  		}\n  ...\n  631  	}\n  632  	else {\n  633: 		if(element && element.indexOf(\"custom-block\") > -1) {\n  634   			return \"Custom Element\";\n  635  	 	}\n  ...\n  650  	// 		}\n  651  	// 		else {\n  652: 	// 			if(element && element.indexOf(\"custom-block\") > -1) {\n  653  	// 	 			name =  \"Custom Element\";\n  654  	// 	 			console.log('CUSTOM ELE '+ name);\n  ...\n  877  		}\n  878  		if ($layout['element']) {\n  879: 			if ($layout['element'] == 'custom-block-'+$newId) {\n  880: 				$layout['element'] = 'custom-block-'+$actualId;\n  881  			}\n  882  		}\n  ...\n 2584  			gallerySplashFeedId = false;\n 2585  		} else if( $ftgrp.attr(\"block-type\") == 'img_gal' ) {//hardcoded check for image gallery img_gal.\n 2586: 			var sfid = grptype.replace('custom-block-','');//get the raw splash feed id.\n 2587  			gallerySplashFeedId = sfid;\n 2588  		}\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/finetune.js:\n  815  				var grp = ftGetGrp($new_block);\n  816  				if (grp && grp['element'] && (''+grp['element']).match(/^custom.block./)) {\n  817: 					var mysfid = (''+grp['element']).replace(/^custom-block-/,'');\n  818  					gallerySplashFeedId = mysfid;\n  819  				}\n  ...\n 6282  	if($block.length > 0){\n 6283  		//check just in case there's multiple blocks.\n 6284: 		//This is needed for any blocks that also pull custom-block-list-item.ctp - ie. speakers, sponsors and image blocks.\n 6285  		if($block.length > 1){\n 6286  			$block = $block[0];\n ....\n 6764  \n 6765  		// set up for adding this new block to the admin layout tree\n 6766: 		var element = 'custom-block-'+sfid;\n 6767  		$block.find('> .element:first').attr('id','element-'+element);\n 6768  \n ....\n 7615  		}\n 7616  \n 7617: 		var rawBlockId = elementName.replace('custom-block-','');\n 7618  		var markup = '<a class=\"nav-jump\" id=\"to'+rawBlockId+'\" name=\"to'+rawBlockId+'\"></a>';\n 7619  		markup += '<div id=\"element-'+elementName+'\" class=\"element\">';\n ....\n 7829  							}\n 7830  \n 7831: 							EventSettingLayout.elementNames['custom-block-'+ar[0]] = newName;\n 7832: 							EventSettingLayout.elementNames['custom-block-'+ar[1]] = newName;\n 7833  						}\n 7834  						if (elementsToPull[i] == 'facebook-comments') {\n ....\n 7867  	if (bad != '' && good != '') {\n 7868  		$('#sfid-'+bad).attr('id','sfid-'+good);\n 7869: 		$('#element-custom-block-'+bad).attr('id','element-custom-block-'+good);\n 7870: 		$('#main-canvas').find('.layoutGrp.element-custom-block-'+bad)\n 7871: 			.removeClass('element-custom-block-'+bad)\n 7872: 			.addClass('element-custom-block-'+good);\n 7873: 		if (EventSettingLayout && EventSettingLayout.elementNames && typeof EventSettingLayout.elementNames['custom-block-'+bad] != 'undefined') {\n 7874: 			EventSettingLayout.elementNames['custom-block-'+good] = EventSettingLayout.elementNames['custom-block-'+bad];\n 7875  		}\n 7876: 		var $section = $('#finetune-layout-contain').find('.ele-wrapper[group-type=\"custom-block-'+bad+'\"]:first');\n 7877  		if ($section.length == 1) {\n 7878: 			$section.attr('group-type','custom-block-'+good);\n 7879: 			$section.find('.element[e=\"custom-block-'+bad+'\"]').attr('e','custom-block-'+good);\n 7880  			var grp = $section.data('grp');\n 7881  			if (grp && grp.element) {\n 7882: 				grp.element = 'custom-block-'+good;\n 7883  			}\n 7884  		} else {\n ....\n 11282  		if($t.attr(\"group-type\")!=='undefined'){\n 11283  			var $element = $t.find(\".element:first\");\n 11284: 			var sfid = $element.attr(\"e\");//should be in format custom-block-$id\n 11285  			if(typeof sfid!=='undefined'){\n 11286: 				if( sfid.match(/custom-block/) && ! $element.text().match(/^nav$/i) ){//no need for nav in here.\n 11287: 					var id = sfid.replace('custom-block-','');\n 11288  					if( $.inArray(id,matches) < 0 && $element.text()!='undefined' ){//make sure we're not adding dupes/empty groups to the array.\n 11289  						options+='<div class=\"option\" value=\"to'+id+'\">'+$element.text().substring(0,50)+'</div>';\n .....\n 13021  		ftAllContain: $('#allSectionsContain'),\n 13022  		basic: function() {\n 13023: 			var getCustomBlocks = \"custom-block\";\n 13024  			var RSVPHiddenCheck = $(\"#extraRSVPControls\").parents('.ft-grp:first').find('input.hide-section').val();\n 13025  			if(RSVPHiddenCheck == \"1\") {\n .....\n 13080  		},\n 13081  		designer: function( skipBackup ){\n 13082: 			var getCustomBlocks = \"custom-block\";\n 13083  			var RSVPHiddenCheck = $(\"#extraRSVPControls\").parents('.ft-grp:first').find('input.hide-section').val();\n 13084  			if(RSVPHiddenCheck == \"1\") {\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/social_inbox.js:\n  466  		var $g = $this.parents('.ft-grp:first');\n  467  		var grp = ftGetGrp($g);\n  468: 		var mysfid = (''+grp['element']).replace(/^custom-block-/,'');\n  469  		gallerySplashFeedId = mysfid;\n  470  		openPhotoGallery();\n  ...\n  480  			var grp = ftGetGrp($g);\n  481  			if (grp && grp['element'] && (''+grp['element']).match(/^custom.block./)) {\n  482: 				var mysfid = (''+grp['element']).replace(/^custom-block-/,'');\n  483  				gallerySplashFeedId = mysfid;\n  484  			} else {\n\n270 matches across 49 files\n\n\nSearching 3525 files for \"custom-block')\"\n\n0 matches across 0 files\n\n\nSearching 3525 files for \"splash/custom-block\"\n\n/Users/guillermo/sites/oneclipboard.com/app/controllers/splash_controller.php:\n  226  								$this->output = '';//DONT EVEN ASK.  NEED THIS TO PREVENT RENDERING FROM CONCATENATING\n  227  								$str.= '<div id=\"element-'.$elementName.'\" pulled-from-event-id=\"'.$original_event_id.'\" pulled-id=\"'.$elementName.'\" '.$newE.' class=\"element\">';\n  228: 								$str.= $this->render('/elements/splash/custom-block',false);\n  229  								$str.= '</div>'.\"\\n\";\n  230  							}\n  ...\n 1727  \n 1728  			$this->set('block',$data);\n 1729: 			$this->render('/elements/splash/custom-block-event-hub-item');\n 1730  		}\n 1731  	}\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/custom-block-content.ctp:\n   25  \n   26  	<?php\n   27: 		echo $this->element('/legacy/splash/custom-block-ftscript',array('block'=>$block));\n   28  	?>\n   29  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/custom-block-image.ctp:\n   18  		<div class=\"body\"><?=$block['SplashFeed']['body']?></div>\n   19  	<?php\n   20: 		echo $this->element('/legacy/splash/custom-block-ftscript',array('block'=>$block));\n   21  	?>\n   22  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/custom-block-list-item.ctp:\n   32  			<div class=\"body\"><?=$block['SplashFeed']['body']?></div>\n   33  		<?php } ?>\n   34: 		<?php echo $this->element('/legacy/splash/custom-block-ftscript',array('block'=>$block));?>\n   35  	</div>\n   36  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/custom-block-list.ctp:\n   52  		<div class=\"children\">\n   53  			<?php foreach ($block['children'] as $child) {\n   54: 				echo $this->element('/legacy/splash/custom-block',array('block'=>$child));\n   55  			} ?>\n   56  		</div>\n   ..\n   65  \n   66  \n   67: 	echo $this->element('/legacy/splash/custom-block-ftscript',array('block'=>$block));\n   68  \n   69  	?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/custom-block-schedule-item.ctp:\n   50  			</div>\n   51  		</div>\n   52: 		<?php echo $this->element('splash/custom-block-ftscript',array('block'=>$block));?>\n   53  	</div>\n   54  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/custom-block-speaker-item.ctp:\n   32  			<?=$block['SplashFeed']['body']?>\n   33  		</div>\n   34: 		<?php echo $this->element('/legacy/splash/custom-block-ftscript',array('block'=>$block));?>\n   35  	</div>\n   36  <?php } ?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/custom-block-sponsor-item.ctp:\n   37  		</div>\n   38  \n   39: 		<?php echo $this->element('/legacy/splash/custom-block-ftscript',array('block'=>$block));?>\n   40  	</div>\n   41  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/custom-block.ctp:\n   14  		case 'schedule':\n   15  		case 'sponsors':\n   16: 			echo $this->element('/legacy/splash/custom-block-list',array('block'=>$block));\n   17  			break;\n   18  		case 'schedule-item':\n   19: 			echo $this->element('/legacy/splash/custom-block-schedule-item',array('block'=>$block));\n   20  			break;\n   21  		case 'speaker-item':\n   22: 			echo $this->element('/legacy/splash/custom-block-speaker-item',array('block'=>$block));\n   23  			break;\n   24  		case 'sponsor-item':\n   25: 			echo $this->element('/legacy/splash/custom-block-sponsor-item',array('block'=>$block));\n   26  			break;\n   27  		case 'list-item':\n   28: 			echo $this->element('/legacy/splash/custom-block-list-item',array('block'=>$block));\n   29  			break;\n   30  		case 'hero':\n   31  		case 'image':\n   32: 			echo $this->element('/legacy/splash/custom-block-image',array('block'=>$block));\n   33  			break;\n   34  		case 'map':\n   35  		case 'audio':\n   36  		case 'video':\n   37: 			echo $this->element('/legacy/splash/custom-block-embed',array('block'=>$block));\n   38  			break;\n   39  		default:\n   40  			//echo 'no case - '.$block['SplashFeed']['type'];\n   41: 			echo $this->element('/legacy/splash/custom-block-content',array('block'=>$block));\n   42  			break;\n   43  	}\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-attendees.ctp:\n   47  		<div class=\"attendee-view-all hide\">View all</div>\n   48  		<?php\n   49: 			echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n   50  		?>\n   51  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-blog-item.ctp:\n   67  		<?php } ?>\n   68  \n   69: 		<?php echo $this->element('splash/custom-block-ftscript',array('block'=>$block));?>\n   70  	</div>\n   71  <?php } ?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-blog.ctp:\n   40  \n   41  			<?php foreach ($block['children'] as $child) {\n   42: 				echo $this->element('splash/custom-block',array('block'=>$child));\n   43  			} ?>\n   44  		</div>\n   ..\n   51  	} ?>\n   52  \n   53: 	<?php echo $this->element('splash/custom-block-ftscript',array('block'=>$block));?>\n   54  	</div>\n   55  <?php }\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-button.ctp:\n   33  \n   34  	<?php\n   35: 		echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n   36  	?>\n   37  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-comments.ctp:\n  267  \n  268  	<? // Loading options into data javacript object for this element (only if finetune)\n  269: 		echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n  270  	?>\n  271  </div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-content.ctp:\n   37  \n   38  	<?php\n   39: 		echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n   40  	?>\n   41  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-countdown.ctp:\n   53  \n   54  	<?php\n   55: 		echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n   56  	?>\n   57  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-embed.ctp:\n   41  \n   42  	<?php\n   43: 		echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n   44  	?>\n   45  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-event-hub-item.ctp:\n  264  		<? } ?>\n  265  \n  266: 		<?php echo $this->element('splash/custom-block-ftscript',array('block'=>$block));?>\n  267  	\n  268  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-event-hub.ctp:\n  251  	<?php }\n  252  		\n  253: 	echo $this->element('splash/custom-block-ftscript',array('block'=>$block));?>\n  254  </div>\n  255  <?php } ?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-image.ctp:\n   41  		<div class=\"body block p0\"><?=$block['SplashFeed']['body']?></div>\n   42  	<?php\n   43: 		echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n   44  	?>\n   45  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-img-gal.ctp:\n   43  					$i = 1;\n   44  					foreach($block['images'] as $img){\n   45: 						echo $this->element('splash/custom-block-img-gal-item',array(\"block\"=>$img,'count'=>$i));\n   46  						$i++;\n   47  					}\n   ..\n   74  \n   75  \n   76: 		<?php echo $this->element('splash/custom-block-ftscript',array('block'=>$block));?>\n   77  	</div>\n   78  <?php }\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-list-item.ctp:\n  136  		<?php } ?>\n  137  \n  138: 		<?php echo $this->element('splash/custom-block-ftscript',array('block'=>$block));?>\n  139  \n  140  	<?php if($block['SplashFeed']['type']=='list-item'){ ?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-list.ctp:\n   85  \n   86  			<?php foreach ($block['children'] as $child) {\n   87: 				echo $this->element('splash/custom-block',array('block'=>$child));\n   88  			} ?>\n   89  		</ul>\n   ..\n  101  					$child['SplashFeed']['type'] = 'schedule-item'; // legacy goodness\n  102  				}\n  103: 				echo $this->element('splash/custom-block',array('block'=>$child));\n  104  			} ?>\n  105  		</div>\n  ...\n  115  	}\n  116  \n  117: 	echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n  118  \n  119  	?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-schedule-item.ctp:\n   66  			</div>\n   67  		</div>\n   68: 		<?php echo $this->element('splash/custom-block-ftscript',array('block'=>$block));?>\n   69  	</div>\n   70  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-social-links.ctp:\n   13  \n   14  	<?php\n   15: 		echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n   16  	?>\n   17  	</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block.ctp:\n   14  	if(in_array($block['SplashFeed']['type'],array('list','schedule-list','speakers','schedule','sponsors','images','nav','full-list',\n   15  		'full-image-list','ticker'))){\n   16: 		echo $this->element('splash/custom-block-list',array('block'=>$block));\n   17  	} elseif(in_array($block['SplashFeed']['type'],array(\n   18  		'full-list-item', 'full-image-list-item', 'speaker-item',\n   ..\n   20  		'image-item', 'sponsor-item', 'list-item', 'schedule-list-item', 'nav-item', 'ticker-item'\n   21  	))){\n   22: 		echo $this->element('splash/custom-block-list-item',array('block'=>$block));\n   23  	} elseif($block['SplashFeed']['type']=='img_gal'){\n   24: 		echo $this->element('splash/custom-block-img-gal',array('block'=>$block));\n   25  	} elseif($block['SplashFeed']['type']=='blog'){\n   26: 		echo $this->element('splash/custom-block-blog',array('block'=>$block));\n   27  	} elseif($block['SplashFeed']['type']=='blog-item'){\n   28: 		echo $this->element('splash/custom-block-blog-item',array('block'=>$block));\n   29  	} elseif($block['SplashFeed']['type']=='schedule-item'){\n   30: 		echo $this->element('splash/custom-block-schedule-item',array('block'=>$block));\n   31  	} elseif($block['SplashFeed']['type']=='event-hub'){\n   32: 		echo $this->element('splash/custom-block-event-hub',array('block'=>$block));\n   33  	} elseif($block['SplashFeed']['type']=='event-hub-item'){\n   34: 		echo $this->element('splash/custom-block-event-hub-item',array('block'=>$block));\n   35  	} elseif(in_array($block['SplashFeed']['type'],array('hero','image'))){\n   36: 		echo $this->element('splash/custom-block-image',array('block'=>$block));\n   37  	} elseif(in_array($block['SplashFeed']['type'],array('map','audio','video','iframe','twitter-widget'))){\n   38: 		echo $this->element('splash/custom-block-embed',array('block'=>$block));\n   39  	} elseif($block['SplashFeed']['type']=='button'){\n   40: 		echo $this->element('splash/custom-block-button',array('block'=>$block));\n   41  	} elseif($block['SplashFeed']['type']=='countdown'){\n   42: 		echo $this->element('splash/custom-block-countdown',array('block'=>$block));\n   43  	} elseif($block['SplashFeed']['type']=='comments') {\n   44: 		echo $this->element('splash/custom-block-comments',array('block'=>$block));\n   45  	} elseif($block['SplashFeed']['type']=='attendees') {\n   46: 		echo $this->element('splash/custom-block-attendees',array('block'=>$block));\n   47  	} else {//the default.\n   48: 		echo $this->element('splash/custom-block-content',array('block'=>$block));\n   49  	}\n   50  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/gallery.ctp:\n  265  					<? $t = array( 'EventPhoto'=>array('id'=>0,'thumbnail'=>'/images/st-p-z-bear.png?stp',\n  266  						'image'=>'/images/st-p-z-bear.png?stp','event_id'=>$data['Event']['id']) );?>\n  267: 					<?=$this->element('splash/custom-block-img-gal-item',array(\"block\"=>$t,'count'=>500));?>\n  268  				</div>*/?>\n  269  			<? } ?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/helpers/cdn_html.php:\n  418  			$m = array();\n  419  			if (preg_match(\"/^custom.block.([0-9]+)$/\",$elementName,$m)) {\n  420: 				echo $view->element('/splash/custom-block',array('block_id' => $m[1],'options'=>$options));\n  421  			} elseif(!empty($elementName) && $elementName!=null) {\n  422  				echo $view->element('/splash/'.$elementName,array('options'=>$options));\n\n/Users/guillermo/sites/oneclipboard.com/app/views/sites/view.ctp:\n  500  			<div class=\"blank-group\" <?=(isset($s['block']['group'])&&count($s['block']['group'])>0)?\"group='\".json_encode($s['block']['group']).\"'\":''?>>\n  501  				<div class=\"element\">\n  502: 					<?=$this->element('/splash/custom-block',array('block'=>$s['block'],'blank'=>true))?>\n  503  				</div>\n  504  			</div>\n\n56 matches across 29 files\n\n\nSearching 3525 files for \"blank-group\"\n\n/Users/guillermo/sites/oneclipboard.com/app/models/event_setting.php:\n 2261  				'#splash-container.bigCsz .cszWrap',\n 2262  				'#splash-container [block-type=\"list\"] .list-item.s1.alt .title',\n 2263: 				'#blank-groups .blank-group h1',\n 2264: 				'#blank-groups .blank-group h2',\n 2265: 				'#blank-groups .blank-group h3',\n 2266: 				'#blank-groups .blank-group h4',\n 2267: 				'#blank-groups .blank-group h5',\n 2268  				'#splash-container .secondaryFont',\n 2269  		);\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/blank-group.ctp:\n    1  <? if($group['type']=='content'){ ?>\n    2: <div class=\"blank-group-content grp w3-3 x3\">\n    3  	<div class=\"element\">\n    4  		<div class=\"sf content content\">\n    .\n   10  </div>\n   11  <? } elseif($group['type']=='list'){ ?>\n   12: <div class=\"blank-group-list grp w3-3 x3\">\n   13  	<div class=\"element\">\n   14  		<div class=\"sf list list grp w3-3\">\n   ..\n   32  <? } ?>\n   33  \n   34: <!-- <div class=\"blank-group-content grp w3-3 x3\" id=\"sfid-0.28488362417556345\" style=\"position: relative;\">\n   35  				<div class=\"element\">\n   36  					<div class=\"sf content content\">\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/blank-group.ctp:\n    1  <? if($group['type']=='content'){ ?>\n    2: <div class=\"blank-group-content grp w3-3 x3\">\n    3  	<div class=\"element\">\n    4  		<div class=\"sf content content\">\n    .\n   10  </div>\n   11  <? } elseif($group['type']=='list'){ ?>\n   12: <div class=\"blank-group-list grp w3-3 x3\">\n   13  	<div class=\"element\">\n   14  		<div class=\"sf list list grp w3-3\">\n   ..\n   32  <? } ?>\n   33  \n   34: <!-- <div class=\"blank-group-content grp w3-3 x3\" id=\"sfid-0.28488362417556345\" style=\"position: relative;\">\n   35  				<div class=\"element\">\n   36  					<div class=\"sf content content\">\n\n/Users/guillermo/sites/oneclipboard.com/app/views/sites/view.ctp:\n  496  	<!-- BLANK GROUPS -->\n  497  \n  498: 	<div id=\"blank-groups\" style=\"display:none;\">\n  499  		<? foreach($data['blank_sections'] as $s){ ?>\n  500: 			<div class=\"blank-group\" <?=(isset($s['block']['group'])&&count($s['block']['group'])>0)?\"group='\".json_encode($s['block']['group']).\"'\":''?>>\n  501  				<div class=\"element\">\n  502  					<?=$this->element('/splash/custom-block',array('block'=>$s['block'],'blank'=>true))?>\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/finetune.js:\n  892  						updateSettingsField( { field: 'rsvp_guest_display', value: 1 } );\n  893  					}\n  894: 					var $blockToClone = $(\"#blank-groups\").find(\".\"+$this.attr('clone-from')+\":first\").parents(\".blank-group:first\");\n  895  					addNewSection({'block_type':section_type,'child_type':child_type, cloneObj: $blockToClone });\n  896  				} else {\n  ...\n 6693  \n 6694  			var $block = $originalBlock.clone();\n 6695: 			$block = $('<div class=\"blank-group\">'+$block.wrap('<p/>').html()+'</div>');\n 6696  			$block.find('.crp-enabled').removeClass('crp-enabled').end()\n 6697  				.find(\".editable\").removeClass('editable hasTiny').end()\n ....\n 6709  				var $block = params.cloneObj.clone();\n 6710  			} else {\n 6711: 				var $block = $(\"#blank-groups\").find('.sf[block-type=\"'+params.block_type+'\"]:first').parents(\".blank-group\").clone();\n 6712  			}\n 6713  			trackIndicativeEvent('addSection', { 'type': params.block_type });\n ....\n 6982  					var grp = ftGetGrp($ftg);\n 6983  					if(params.block_type && params.block_type=='event-hub'){\n 6984: 						var $blank_group = $(\"#blank-groups .event-hub\");\n 6985  						var options = $blank_group.data('splashFeedOptions');\n 6986  						if(options){\n ....\n 11416  			} else {\n 11417  				if(block_type=='list'){//special case. every block has list. so need to further specify with this one.\n 11418: 					var $new_item = $(\"#blank-groups\").find(\".sf[block-type=\"+block_type+\"]:first\").find(\".list-item:first\").clone();\n 11419  				} else {\n 11420: 					var $new_item = $(\"#blank-groups\").find(\".sf.\"+block_type+\":first\").find(\".list-item:first\").clone();\n 11421  				}\n 11422  			}\n\n26 matches across 5 files\n\n\nSearching 3525 files for \"blank_sections\"\n\n/Users/guillermo/sites/oneclipboard.com/app/controllers/sites_controller.php:\n  554  			$data['selected_google_fonts'] = $this->SplashTheme->getSelectedFonts($data);\n  555  			// pr($data['selected_google_fonts']);exit;\n  556: 			$data['blank_sections'] = $this->SplashFeed->grabSections($data);\n  557  			$data['clickToViewGallery'] = false;\n  558  			$data['separateQuotesFromPhotos']=false;\n\n/Users/guillermo/sites/oneclipboard.com/app/views/sites/view.ctp:\n  497  \n  498  	<div id=\"blank-groups\" style=\"display:none;\">\n  499: 		<? foreach($data['blank_sections'] as $s){ ?>\n  500  			<div class=\"blank-group\" <?=(isset($s['block']['group'])&&count($s['block']['group'])>0)?\"group='\".json_encode($s['block']['group']).\"'\":''?>>\n  501  				<div class=\"element\">\n\n2 matches across 2 files\n\n\nSearching 3527 files for \"share-box\"\n\n0 matches across 0 files\n\n\nSearching 3527 files for \"simpleModal(\"\n\n/Users/guillermo/sites/oneclipboard.com/app/views/admin/event_types.ctp:\n  106  		event.preventDefault();\n  107  		//$(this).hide().parents(\"td:first\").find(\"input.img-upload\").show();\n  108: 		$(\"#image-editor\").attr(\"event-type-id\",$(this).parents(\"tr\").attr(\"event-type-id\")).fireSimpleModal();\n  109  	});\n  110  	$(\"a.delete-img\").click(function(event){\n  ...\n  114  \n  115  	$(\"#image-editor\").find(\".template-block\").click(function(){\n  116: 		closeSimpleModal();\n  117  		var $t= $(this);\n  118  		var params = { id: $(\"#image-editor\").attr(\"event-type-id\"), fields: {} };\n  ...\n  125  	$(\"html\").keyup(function(e){\n  126  		if(e.keyCode==27){\n  127: 			closeSimpleModal();\n  128  		}\n  129  	});	\n\n/Users/guillermo/sites/oneclipboard.com/app/views/admin/fetch_w9s.ctp:\n    8  	$(\".viewUserW9\").click(function(e){\n    9  		e.preventDefault();\n   10: 		$(\"#requestFormModal\").fireSimpleModal();//show();\n   11  		return false;\n   12  	});\n   ..\n   21  			alert('Export Finished');\n   22  			// $(\"#bulkAttendeeActions\").after($(\"#attendeeFilters\"));\n   23: 			// closeSimpleModal();\n   24  		},\n   25  		onCancel: function(){ },\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/avatar-modal.ctp:\n   61  							$.post('/account/saveUserField', {field: 'image_url', value: newSrc});\n   62  						}\n   63: 						$('#avatar-modal').fireSimpleModal();\n   64  					}\n   65  				});\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/element-picker.ctp:\n   39  					$(this).prop(\"href\",href+'&hash='+hash);\n   40  				});\n   41: 				$plans.fireSimpleModal();\n   42  				//$(\"#elementPaymentWall\").submit();			\n   43  			}	 \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/photo-picker.ctp:\n  122  						$(\"#invite-image-src\").val(result.filename);\n  123  						email_changes_made=true;\n  124: 						closeSimpleModal();\n  125  					}\n  126  					else{\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/edit-settings.ctp:\n  187  		$(\"#FavIconBtn\").on('click', function(){\n  188  				//alert('one');\n  189: 				closeSimpleModal();\n  190  				$(\"#edit-settings\").addClass('persistent_hard');\n  191  				pickAndOrCropNewImage($('#favIconInputSrc'),{\n\n/Users/guillermo/sites/oneclipboard.com/app/views/sites/legacy-view.ctp:\n 2394  			<div class=\"actions\">\n 2395  				<a href=\"#\" class=\"save\">Save</a>\n 2396: 				<a href=\"#\" class=\"cancel\" onclick=\"javascript:closeSimpleModal();return false;\">Cancel</a>\n 2397  			</div>\n 2398  		</div>\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/add-collaborator.js:\n  170  		if(ec_id>0){\n  171  			$(\"#simple-modal-ajax\")\n  172: 				.fireSimpleModal()\n  173  				.html(constants.loader)\n  174  				.load('/events/'+url+'/'+constants.event_id+'/'+ec_id+'/1',null,function(responseText){\n  ...\n  181  		_gaq.push(['_trackEvent','EventView', 'SaveCollabs','id:'+constants.event_id]);\n  182  		var params = getEventCollabsToSave();\n  183: 		closeSimpleModal();\n  184  		saveEventContacts(params);\n  185  	\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/admin.js:\n    1: function closeSimpleModal(){\n    2  	$(\"#simple-modal-wrap\").removeClass('persistent').fadeOut(100).find(\".simple-modal\").hide();\n    3  	$(\"#simple-modal-ajax\").empty();\n    .\n   63  	$(\"#filterAction\").click(function(e){\n   64  		e.preventDefault();\n   65: 		$(\"#filter-options\").fireSimpleModal();\n   66  		return false;\n   67  	});\n   68  	$(\"html\").keyup(function(e){\n   69  		if(e.which==27){ //escape\n   70: 			closeSimpleModal();\n   71  		}\n   72  	}).click(function(e){\n   ..\n   74  		if($(\"#simple-modal-wrap\").is(\":visible\")){\n   75  			if($target.parents(\".simple-modal\").length<1 && !$target.hasClass('simple-modal')){\n   76: 				closeSimpleModal();\n   77  			}\n   78  		}\n   79  	});\n   80  	$(\"a.close-modal\").click(function(){\n   81: 		closeSimpleModal();\n   82  	});\n   83  	$(\"#submitFilter\").click(function(){\n   ..\n   93  		params.range_type = $(\"#range_type\").val();\n   94  \n   95: 		closeSimpleModal();\n   96  \n   97  		var $dash = $(\"#dynamoDash\");\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/attendees.js:\n  787  		$('#attendeeAwaitingReply-viewer h3').append('<span class=\"awaitingCount\">('+thisCount+')</span>')\n  788  \n  789: 		$('#attendeeAwaitingReply-viewer').fireSimpleModal();\n  790  \n  791  	}\n  ...\n  931  \n  932  	// open simple modal\n  933: 	$view.fireSimpleModal();\n  934  \n  935  	return false; // stop the click action from bubbling uppp\n  ...\n 1054  \n 1055  	// open simple modal\n 1056: 	$view.fireSimpleModal();\n 1057  \n 1058  	return false; // stop the click action from bubbling uppp\n ....\n 1239  						updateCurrentAttendeesFromResponse(response,params);\n 1240  						setTimeout(function(){\n 1241: 							closeSimpleModal();\n 1242  						},1500);\n 1243  					}else{\n ....\n 1581  \n 1582  	$form.find('.actions .save').unbind('click').click(saveAttendeeForm);\n 1583: 	$form.find('.actions .cancel').click(function(){ closeSimpleModal(); });\n 1584  \n 1585  	$form.find(\".waitlist-toggle\").unbind('click').click(function(){\n ....\n 1658  				populateAttendeeTable();\n 1659  				setTimeout(function(){\n 1660: 					closeSimpleModal();\n 1661  					$form.find(\"input[type='text'],textarea\").val('');\n 1662  				},500);\n ....\n 2502  	});\n 2503  	$('#bulkAttendeeActions').find('.addTag').click(function(){\n 2504: 		$(\"#add-tag\").fireSimpleModal();\n 2505  		$(\"#tag-search\").focus();\n 2506  		return false;\n ....\n 2529  \n 2530  		$search.val('');\n 2531: 		closeSimpleModal();\n 2532  \n 2533  		for(var i in selectedAttendees){\n ....\n 2568  	$(\"#bulkAddFromWaitList\").unbind('click').click(function(){\n 2569  		var $obj = $(\"#bulkWaitlistActions\");\n 2570: 		$obj.fireSimpleModal();\n 2571  		var count = selectedAttendees.length;\n 2572  		var c = (count!='1')?count+' People':count+' Person';\n ....\n 2579  		params.waitlist = 0;\n 2580  		params.send_email = $(\"#bulk-waitlist-email\").val();\n 2581: 		closeSimpleModal();\n 2582  \n 2583  		for(var i in selectedAttendees){\n ....\n 2650  		// },10);\n 2651  		$obj.find(\".content\").append($(\"#attendeeFilters\"));\n 2652: 		$obj.fireSimpleModal({\n 2653  			persistent: true\n 2654  		});\n ....\n 2657  	$(\"#cancelAttendeeExport,#exportAttendeesList .close-modal\").click(function(){\n 2658  		$(\"#bulkAttendeeActions\").after($(\"#attendeeFilters\"));\n 2659: 		closeSimpleModal();\n 2660  	});\n 2661  \n ....\n 2671  		onComplete: function(){\n 2672  			$(\"#bulkAttendeeActions\").after($(\"#attendeeFilters\"));\n 2673: 			closeSimpleModal();\n 2674  		},\n 2675  		onCancel: function(){ },\n ....\n 2812  \n 2813  		$table.append(trs);\n 2814: 		$(\"#voting-results\").fireSimpleModal();\n 2815  \n 2816  		$table.trigger('update');\n ....\n 2898  			}\n 2899  \n 2900: 			$('#capture-deferred-orders-tool').fireSimpleModal({persistent:true});\n 2901  		} else {\n 2902  			alert('No Deferred Orders to Capture.');\n ....\n 2928  	$('#capture-deferred-orders-tool .close').click(function(e){\n 2929  		populateAttendeeTable();\n 2930: 		closeSimpleModal();\n 2931  	});\n 2932  \n ....\n 2955  				$('#capture-deferred-orders-tool').removeClass('in-progress').find('.closeModal').show();\n 2956  				$('#capture-selected-deferred-button').removeClass('in-progress');\n 2957: 				closeSimpleModal();\n 2958  \n 2959  			} else {\n ....\n 2962  				$('#capture-deferred-orders-tool').removeClass('in-progress').find('.closeModal').show();\n 2963  				$('#capture-selected-deferred-button').removeClass('in-progress');\n 2964: 				closeSimpleModal();\n 2965  				alert('There was an error saving. Please try again.');\n 2966  			}\n ....\n 2971  			$('#capture-deferred-orders-tool').removeClass('in-progress').find('.closeModal').show();\n 2972  			$('#capture-selected-deferred-button').removeClass('in-progress');\n 2973: 			closeSimpleModal();\n 2974  			alert('There was an error saving. Please try again.');\n 2975  		},timeout:120000\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/contacts-index.js:\n   28              if(($target.parents(\".simple-modal\").length<1 && !$target.hasClass('simple-modal')) && !$(\"#simple-modal-wrap\").hasClass('persistent')){\n   29                  if(!autoCompleteSearchOpen){\n   30:                     closeSimpleModal();\n   31                  }\n   32              }\n   ..\n  288  \n  289      // $(document).on('click',\"#edit-contact-link\",function(){\n  290:     //  $(\"#edit-profile\").fireSimpleModal({  });\n  291      // });\n  292      \n  293      $(document).on('click',\"a.close-modal\",function(){\n  294:         closeSimpleModal();\n  295      });\n  296      \n  ...\n  349  \n  350      $(document).on('click',\"#add-tag-link,#addNewTag\",function(){\n  351:         $(\"#add-tag\").fireSimpleModal({persistent:false});\n  352          setTimeout(function(){\n  353              $(\"#tag-search\").focus();\n  ...\n  391          });\n  392  \n  393:         //$(\"#merge-contacts\").fireSimpleModal();\n  394      })\n  395      $(\"#remove-contacts-link\").click(function(){\n  ...\n  397          var $modal = $(\"#remove-contact\");\n  398          setTimeout(function(){\n  399:             $modal.fireSimpleModal({persistent:false});\n  400  \n  401          },20);\n  ...\n  535  \n  536          $search.val('');\n  537:         closeSimpleModal();\n  538  \n  539          if($profile.is(\":visible\")){ //contact profile vs. index\n  ...\n  595              params.contacts.push( {id:$parent.attr(\"contact-id\"),type:$parent.attr(\"type\") });\n  596          });\n  597:         closeSimpleModal();\n  598          $.post(\"/contacts/removeBulk\",params,function(response){\n  599              $(\"#sub-util-actions\").hide();          \n  ...\n  813      }\n  814  \n  815:     function closeSimpleModal(){\n  816          $(\"#simple-modal-wrap\").removeClass('persistent').fadeOut(100).find(\".simple-modal\").hide();\n  817          $(\"#simple-modal-ajax\").empty();\n  ...\n 1190              //  if ( !$bus.is(':visible') ){\n 1191              //      $bus.parent().removeClass('finished');\n 1192:             //      $('#upload_photo_block').fireSimpleModal({persistent:true});\n 1193              //      $bus.find('.textStatus .completed').html('0');\n 1194              //      $bus.find('.latestPhoto img').attr('src','');\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/dashboard.js:\n  280  				$editing_ticket.find(\"a.\"+class_names.cancel).click();\n  281  			} else if($this.hasClass('save')){\n  282: 				closeSimpleModal();\n  283  				$editing_ticket.find(\"a.\"+class_names.save).click();\n  284  			} else if($this.hasClass('keep-working')){\n  285: 				closeSimpleModal();\n  286  			}\n  287  		}\n  ...\n  527  \n  528  	$(\"#payout-learn-more,#payout-select-dd,#payout-select-check,#payout-select-venmo\").click(function(e){\n  529: 		closeSimpleModal();\n  530  		\n  531  		showPayoutTab($(this).attr('type'));\n  ...\n  535  \n  536  	$(\".createTicketBtn\").click(function(){\n  537: 		closeSimpleModal();\n  538  		$body.removeClass('noTickets noPayoutData')\n  539  		$(\"#rsvpTixTab\").click();\n  ...\n  592  	\n  593  	$(\"#simple-modal-wrap\").on('click','.ticket-create-link',function(e){\n  594: 		closeSimpleModal();\n  595  \n  596  		if( $(this).attr('id') == 'payout-select-method' || $(this).hasClass('jump-to-payout') ){\n  ...\n  993  			}\n  994  			//$(\"div.zurb-ajax-modal,div.reveal-modal-bg\").fadeOut('fast',function(){$(this).remove();});\n  995: 			closeSimpleModal();\n  996  \n  997  			var params = { event_id: constants.event_id, element_id:element_id, element_type:'PLAN' };\n  ...\n 1301  \n 1302  	$(\"a.cancel-new-event-contact\").click(function(){\n 1303: 		closeSimpleModal();\n 1304  		$(\"a[ec-id='new'],div[ec-id='new']\").text('').attr('ec-id',0);\n 1305  	});\n ....\n 1352  			var ec_id = $li.prop(\"id\");\n 1353  			if(ec_id=='new'){ //adding new contact!\n 1354: 				//$(\"#new_contact_bubble\").fireSimpleModal();\n 1355  				$(\"#event-contact-count\").click();\n 1356  				//$parent_div.find('div.budget-vendor-add').attr(\"ec-id\",ec_id).text('').fadeIn(400);\n ....\n 1611  \n 1612  		$(\"#simple-modal-ajax\").empty().removeAttr('xtra-attr')\n 1613: 			.fireSimpleModal()\n 1614  			.html(constants.loader)\n 1615  			.load(\"/events/viewGuestsofGuests/\"+constants.event_id+\"/\"+rsvp_id,null,function(responseText){\n ....\n 1715  			});\n 1716  		}\n 1717: 		$(\"#payment-plans\").fireSimpleModal();\n 1718  	});\n 1719  \n ....\n 2056  			$(\"#import-json-content\").removeClass('in-progress');\n 2057  			setTimeout(function(){\n 2058: 				closeSimpleModal();\n 2059  				$(\"a.refresh-responses\").click();\n 2060  			},1500);\n ....\n 2076  		//if(!$this.hasClass('newCustomField')){\n 2077  			$this.addClass('selected');\n 2078: 			closeSimpleModal();\n 2079  \n 2080  			var $v = $(\"#rsvp-question-list\");\n ....\n 2140  	//$ticketSettingsForm.on('click','span.newCustomField',function(){\n 2141  	$(document).on('click','.newCustomField',function(){\n 2142: 		closeSimpleModal();\n 2143  \n 2144  		var $v = $(\"#rsvp-question-list\");\n ....\n 2244  					$t.text('Save');\n 2245  					setTimeout(function(){\n 2246: 						closeSimpleModal();\n 2247  					},500);\n 2248  				},1500);\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/event-site.js:\n   86  				var $target = $(e.target);\n   87  				if(!$target.hasClass('simple-modal') && $target.parents(\".simple-modal\").length < 1){\n   88: 					closeSimpleModal();\n   89  					openModal = false;\n   90  				}\n   ..\n   95  			if(openModal){\n   96  				if(!$(\"#simple-modal-wrap\").hasClass('persistent')){\n   97: 					closeSimpleModal();\n   98  					openModal = false;\n   99  				}\n  ...\n  275  	$(\"#sendANote,#contactOrgFtr\").click(function(event){\n  276  		event.preventDefault();\n  277: 		$(\"#contact-event-organizer\").fireSimpleModal();\n  278  		return false;\n  279  	});\n  ...\n  873  					if(typeof jq.hideInlineForm!=='undefined'){\n  874  						$(\"#section-rsvp\").find(\"i.close-form\").hide();\n  875: 						closeSimpleModal();\n  876  					}\n  877  \n  ...\n  907  	$(document).on('click','#afterRsvpMessage .close',function(){\n  908  		//$('#afterRsvpMessage').hide();\n  909: 		closeSimpleModal();\n  910  	});\n  911  	$(document).on('click','.fb-wrap .close',function(){\n  ...\n  947  \n  948  		closingSimple = setTimeout( function(){\n  949: 			closeSimpleModal()\n  950  		}, 300 )\n  951  \n  ...\n 1122  						setTimeout(function(){\n 1123  							$this.text('Send Note');\n 1124: 							closeSimpleModal();\n 1125  							//setTimeout(function(){\n 1126  							//	},2000);\n ....\n 1221  \n 1222  	if($(\"#checkin-password-prompt\").length > 0){\n 1223: 		$(\"#checkin-password-prompt\").fireSimpleModal({ persistent: true });\n 1224  		$(\"#checkin-page-code\").keyup(function(e){\n 1225  			if(e.keyCode==13){\n ....\n 3457  function uploadGalleryPhotos() {\n 3458  	var $galleryModal = $('#galleryUploadModal');\n 3459: 	$galleryModal.html('Loading...').fireSimpleModal();\n 3460  	$.ajax({url:constants.upload_form_action+'?m'})\n 3461  		.done(function(response){\n ....\n 3514  \n 3515  function showRsvpForm(){\n 3516: 	$(\"#rsvp-modal\").fireSimpleModal({persistent:true});\n 3517  	$('#rsvp-form-inner').addClass('active');\n 3518  \n ....\n 3952  	view: function(){\n 3953  		if($(\"#attendees-modal\").hasClass('loaded')){\n 3954: 			$(\"#attendees-modal\").fireSimpleModal();\n 3955  			return false;\n 3956  		} else{\n 3957: 			$(\"#attendees-modal\").fireSimpleModal();\n 3958  			attendees.loadList('');\n 3959  			return false;\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/finetune-layout.js:\n  189  		}\n  190  \n  191: 		closeSimpleModal()\n  192  \n  193  	})\n  194  \n  195  	$('#delete-modal').on('click', '.cancelBtn', function(){\n  196: 		closeSimpleModal()\n  197  	})\n  198  \n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/finetune.js:\n   73  				if($simpleModalWrap.is(\":visible\")){\n   74  					if(!$simpleModalWrap.hasClass('persistent')){\n   75: 						closeSimpleModal();\n   76  					}\n   77  				} else if(finetuneOpen){\n   ..\n   96  			if(!openDatePicker && ($target.parents(\".simple-modal\").length<1 && !$target.hasClass('simple-modal')) && !$(\"#simple-modal-wrap\").hasClass('persistent')){\n   97  				if($target.hasClass('pac-container') || $target.parents(\"div.pac-container\").length > 0){//checking for google autocomplete. w/o this, clicking autocomplete closes simple modal.\n   98: 					closeSimpleModal();\n   99  				}\n  100  			}\n  ...\n  545  	$('#vanity-url-setup-instruction-link').click(function(){\n  546  		trackIndicativeEvent('vanityUrlInstructions');\n  547: 		$(\"#vanity-url-sell-instructions\").fireSimpleModal();\n  548  		return false;\n  549  	});\n  ...\n  551  	$('#vanity-url-open').click(function(){\n  552  		trackIndicativeEvent('vanityUrlOpen');\n  553: 		$(\"#vanity-url-sell\").fireSimpleModal();\n  554  		setTimeout(function(){\n  555  			$(\"#vanity-url-sell-input\").focus();\n  ...\n  649  				constants.jumpToSection = 'direct_deposit'\n  650  				showPayoutTab( constants.jumpToSection);\n  651: 				closeSimpleModal();\n  652  			}, msg, 'Fill out Payout Data', 100000);\n  653  \n  ...\n  737  				opts.persistent = true;//patch for the google autocomplete, which is not technically inside the map. clicking it closes the simple modal.\n  738  			}\n  739: 			$embed.removeClass('editing').attr(\"group-id\",false).find(\"textarea:first\").val('').end().fireSimpleModal(opts);\n  740  \n  741  			if(section_type == 'audio'){\n  ...\n  789  		} else if(section_type=='gallery'){\n  790  \n  791: 			closeSimpleModal();\n  792  			$this.addClass('disabled');\n  793  			backToFineTune();//just in case they're not in the main pane when added.\n  ...\n  811  			},100);\n  812  		} else if(section_type=='img_gal'){//NEW GALLERIES.  ALLOWS FOR MULTI.\n  813: 			closeSimpleModal();\n  814  			addNewSection({'block_type':section_type,'child_type':child_type },null,function($new_block){\n  815  				var grp = ftGetGrp($new_block);\n  ...\n  824  		}\n  825  		else if (section_type == 'element' && element){\n  826: 			closeSimpleModal();\n  827  			//add the new section!\n  828  \n  ...\n  832  			$containerScroll = true;\n  833  			var groups = getColumnContainerMarkup(section_type);\n  834: 			closeSimpleModal();\n  835  			setTimeout(function(){\n  836  				$(\"#nestedLayoutContainer\").animate({scrollTop:$(\"#nestedLayoutContainer\")[0].scrollHeight});\n  ...\n  844  			$firstTimeModal = true;\n  845  			var groups = getColumnContainerMarkup(section_type);\n  846: 			closeSimpleModal();\n  847  			addNewSection(groups,false,function(){\n  848  				var newgid = $('#splash-container').find('.layoutGrp.isModal:last').children().prop('id');\n  ...\n  874  			}\n  875  			groups.cloningFromElementLibrary = true;\n  876: 			closeSimpleModal();\n  877  			addNewSection(groups,true);\n  878  \n  879  		} else {\n  880: 			closeSimpleModal();\n  881  			openSectionsAccord()\n  882  \n  ...\n 1090  		}\n 1091  		$(\"#video-embed .vid iframe:first\").attr('src','');\n 1092: 		closeSimpleModal();\n 1093  	});\n 1094  	///////////END VIDEO EMBEDDING FUNCTIONALITY //////////////////\n ....\n 1109  			addNewSection(params);\n 1110  		}\n 1111: 		closeSimpleModal();\n 1112  	});\n 1113  	///////////////////END IFRAME EMBEDDING FUNCTIONALITY/////////////////////\n ....\n 1133  		}\n 1134  \n 1135: 		closeSimpleModal();\n 1136  \n 1137  		!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+\"://platform.twitter.com/widgets.js\";fjs.parentNode.insertBefore(js,fjs);}}(document,\"script\",\"twitter-wjs\");\n ....\n 1250  		}\n 1251  \n 1252: 		closeSimpleModal();\n 1253  	});\n 1254  	//tabs functionality within song adder.\n ....\n 1309  		openSectionsAccord()\n 1310  \n 1311: 		closeSimpleModal();\n 1312  	});\n 1313  \n ....\n 1627  	//clicking the white label sell\n 1628  	$(\"#splugSell\").click(function(e){\n 1629: 		$(\"#white-label-sell\").fireSimpleModal();\n 1630  		trackIndicativeEvent('clickedSplugUpsell');\n 1631  		return false;\n ....\n 1643  	$('#avatar-modal').on('click', '.settings-link', function(e){\n 1644  		e.preventDefault()\n 1645: 		closeSimpleModal()\n 1646  		closeFinetuneBar()\n 1647  		$('body').addClass('settingsOpen').removeClass('dateVenueModal')\n ....\n 2598  		});\n 2599  		$bus.removeClass('open').hide();\n 2600: 		closeSimpleModal();\n 2601  	});\n 2602  \n ....\n 2741  	$('#dropdownAvatar').click(function(e){\n 2742  		e.preventDefault()\n 2743: 		$('#avatar-modal').fireSimpleModal();\n 2744  \n 2745  		//set the state of the designer mode toggler\n ....\n 2793  				if (response && response.LayoutBlock) {\n 2794  					customElementLibraryClearForm(response);\n 2795: 					$(\"#add-to-element-library\").data('ftg-id',ftg_id).fireSimpleModal({ persistent: true, persistent_hard: true });\n 2796  				}\n 2797  			}).fail(function(){\n 2798  				customElementLibraryClearForm();\n 2799: 				$(\"#add-to-element-library\").data('ftg-id',ftg_id).fireSimpleModal({ persistent: true, persistent_hard: true });\n 2800  			}).always(function(){\n 2801  				$t.css('background-color','');\n ....\n 2804  		} else {\n 2805  			customElementLibraryClearForm();\n 2806: 			$(\"#add-to-element-library\").data('ftg-id',ftg_id).fireSimpleModal({ persistent: true, persistent_hard: true });\n 2807  		}\n 2808  		return false;\n ....\n 2861  				setTimeout(function(){\n 2862  					$this.text('Save');\n 2863: 					closeSimpleModal();\n 2864  				},500);\n 2865  				if (response && response.block_id) {\n ....\n 2879  		pickAndOrCropNewImage($(\"#element-lib-photo-field\"),{\n 2880  			done: function(newSrc,dims){\n 2881: 				//$(\"#add-to-element-library\").fireSimpleModal();\n 2882  				$(\"#element-lib-photo-field\").val(newSrc);\n 2883  				$(\"#element-lib-photo-img\").prop('src',newSrc)\n ....\n 2993  				setTimeout(function(){\n 2994  					$t.text('Save');\n 2995: 					closeSimpleModal();\n 2996  				},1000);\n 2997  				$(\"#reloadEventProfile\").click();\n ....\n 3264  			success:function(response){\n 3265  				if( response.success ) {\n 3266: 					closeSimpleModal();\n 3267  					$t.removeClass('loading');\n 3268  					setChangesMade();\n ....\n 3740  \n 3741  				if ( _saveCallback ){ _saveCallback(selected,src,newly_uploaded_src,dims); }\n 3742: 				closeSimpleModal();\n 3743  				if(cropImageJcrop){\n 3744  					cropImageJcrop.destroy();\n ....\n 3756  				insertVideoBG( type, vidID )\n 3757  \n 3758: 				closeSimpleModal();\n 3759  \n 3760  			}\n ....\n 3767  			//if ( _saveCallback ){ _saveCallback(false,src,newly_uploaded_src,dims); }\n 3768  			if ( _cancelCallback ){ _cancelCallback(); }\n 3769: 			closeSimpleModal();\n 3770  				if(cropImageJcrop){\n 3771  					cropImageJcrop.destroy();\n ....\n 3845  		}\n 3846  \n 3847: 		$block.fireSimpleModal({persistent:true});\n 3848  \n 3849  	}else if ( _saveCallback ){ _saveCallback(false); }\n ....\n 4026  				$(\"#body-image-source\").val('').trigger('change');\n 4027  				setChangesMade();\n 4028: 				closeSimpleModal();\n 4029  \n 4030  \n ....\n 4039  \n 4040  			updateThemeCards();\n 4041: 			closeSimpleModal();\n 4042  		},\n 4043  		hide: function(color){\n ....\n 4057  	}\n 4058  	$(\"#imgColorPickerTab\").removeClass('adminPane');\n 4059: 	closeSimpleModal()\n 4060  	return false\n 4061  })\n ....\n 6382  	// 	}\n 6383  	// } else{\n 6384: 	// 	$(\"#logged-out-modal\").fireSimpleModal({ persistent: true });\n 6385   	console.log(\"ERROR ON PAGE #210\");\n 6386  	// 	return false;\n ....\n 9251  	//toggle the theme modal\n 9252  	$('#currentThemeCard2').on('click', function(){\n 9253: 		$(\"#theme-modal\").fireSimpleModal();\n 9254  		loadThemeTab($(\"#public-themes-contain\"), { type: 'public-themes'});\n 9255  		trackIndicativeEvent('themeModalOpen');\n ....\n 9357  			}\n 9358  			finetuneFieldChangesMade();\n 9359: 			closeSimpleModal();\n 9360  			return false;\n 9361  		}\n ....\n 9419  			if(!errors){\n 9420  				$(\"#nav-embed\").find(\".error-area\").hide();\n 9421: 				closeSimpleModal();\n 9422  			}\n 9423  		},0);\n ....\n 9638  	finetuneDeActivateOnPageEditables();//important! kill before we save.\n 9639  	//closeCustomRTEPickers();\n 9640: 	closeSimpleModal();\n 9641  	var theme_id = $this.attr(\"value\")*1;\n 9642  	//get a hold of current theme value right off the bat before any processes start so we get the correct value!\n ....\n 9923  function fakeModeLoad(){\n 9924  \n 9925: 	closeSimpleModal()\n 9926  \n 9927  	$('body').addClass('loading loading-page fake-load')\n ....\n 10017  	if($(\"#edit-settings\").hasClass('onlyDate') || $(\"#edit-settings\").hasClass('onlyVenue')){\n 10018  		closeFakeModal();\n 10019: 		closeSimpleModal();\n 10020  		return false;\n 10021  	}\n .....\n 10130  						$this.text('Save');\n 10131  						closeFakeModal();\n 10132: 						closeSimpleModal();\n 10133  					},500);\n 10134  \n .....\n 11381  		}\n 11382  	},0);\n 11383: 	$nav_embed.fireSimpleModal();\n 11384  	return false;\n 11385  \n .....\n 12307  	$(\"#event-planners-modal\").removeClass('expanded').addClass('sidebar');\n 12308  	$(\"#settingsTxt\").text('Edit Settings');\n 12309: 	$(\"#edit-settings\").removeClass('plannersOpen onlyVenue onlyDate').fireSimpleModal({persistent: true });\n 12310  	$(\"#edit-settings\").find(\"li.newbie\").removeClass('newbie');\n 12311  	var $previous_collabs = $(\"#previous-collabs\");\n .....\n 12438  			})\n 12439  		}\n 12440: 		$parent.fireSimpleModal();\n 12441  		return false;\n 12442  	}, 10);\n .....\n 12830  		$('#simple-modal-ajax').on('click.closeEditor', function(e) {\n 12831  			if($(e.target).is('#simple-modal-ajax')) {\n 12832: 				closeSimpleModal();\n 12833  				$('#simple-modal-ajax').unbind('click.closeEditor');\n 12834  				$('body').removeClass('lockItUp custom-editor');\n .....\n 12856  					$('.splashui-confirm').remove()\n 12857  \n 12858: 					closeSimpleModal()\n 12859  \n 12860  					setTimeout(function(){\n .....\n 13361  			$modal.find(\"textarea:first\").val(iframe);\n 13362  		}\n 13363: 		$modal.addClass('editing').attr(\"group-id\",gid).fireSimpleModal({persistent: true });\n 13364  	}\n 13365  }\n .....\n 13915  function loadEventHubModal(sfid,params){\n 13916  	sfid = 'sfid-'+sfid.replace('sfid-','');\n 13917: 	$(\"#eventHubSimpleModal\").attr(\"sfid\",sfid).fireSimpleModal();\n 13918  	if(params!=null && typeof params.editing!=='undefined'){\n 13919  		$(\"#eventHubSimpleModal\").data('editing-row',params.editing);\n .....\n 14332  				})\n 14333  \n 14334: 				closeSimpleModal();\n 14335  			}\n 14336  		}\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/gallerysort.js:\n  245  \n  246  		$block.attr(\"event-photo-id\",params.event_photo_id);\n  247: 		$block.fireSimpleModal({persistent:true});\n  248  		var set = [0,0,10000,10000];\n  249  		//console.log(set);\n  ...\n  309  		$img.parents('div.photo-thumb:first').attr('positionedTo',$save.attr('thumbnail-position'));\n  310  		positionThumbnail($img);\n  311: 		closeSimpleModal();\n  312  		gallery_changes_made = true;\n  313  		setChangesMade('gallery');\n  ...\n  316  	});\n  317  	$(document).on('click','#cancelCroppedPhoto',function(){\n  318: 		closeSimpleModal();\n  319  		thumbJcrop.destroy();\n  320  		$('#photoResize').attr('style','');\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/gmail-import.js:\n   48  					$(\"#invite-contact-import\").show();\n   49  				} else {\n   50: 					$(\"#invite-contact-import\").fireSimpleModal({ persistent: true });\n   51  				}\n   52  \n   ..\n  155  				$this.prop(\"checked\",false).parents(\"tr\").removeClass('selected');\n  156  			});\n  157: 			closeSimpleModal();\n  158  			\n  159  		}	\n  ...\n  195  \n  196  	$(\"#gmail-logout\").unbind('click').click(function(event){\n  197: 		closeSimpleModal();\n  198  		$(\"#gmail-json-content\").find(\".gmailResultsWrap\").empty();\n  199  		$(\"#gmail-logged-in-status\").hide();\n  ...\n  247  	$(\"#closeGmailImport\").click(function(){\n  248  		$(\"#backToAdder\").click();\n  249: 		closeSimpleModal();	\n  250  	});\n  251  \n  ...\n  348              $(\"#add-import\").removeClass('loading');\n  349  \n  350:             $(\"#add-import\").fireSimpleModal();\n  351              $(\"#import-gmail-success\").show();\n  352              $(\"#import-gmail-results\").hide();\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/groups.js:\n    2  \n    3  	$(\"#addNewUser\").click(function(){\n    4: 		$(\"#addUserToGroup\").fireSimpleModal();\n    5  		return false;\n    6  	});\n    .\n  288  	$(\"#simple-modal-ajax\").on('click','.add-another-collab',function(){\n  289  		var group_id = $(\"#viewGroupUsers\").data('group-id');\n  290: 		$(\"#addUserToGroup\").fireSimpleModal();\n  291  		$(\"#group-tree-select\").val(group_id);\n  292  		return false;\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/invite.js:\n  136  \n  137  	$(\"#view-gmail-contacts\").unbind('click').click(function(){\n  138: 		$(\"#invite-contact-import\").fireSimpleModal({ persistent: true });\n  139  		return false;\n  140  	});\n  ...\n  245  \n  246  		$(\"#simple-modal-ajax\").empty().attr(\"xtra-attr\",'schedule')\n  247: 			.fireSimpleModal({ persistent: true })\n  248  			.html('<div class=\"thisLoader loading\"><div class=\"nu-loader\"></div></div>')\n  249  			.load(constants.finetune_formBase+\"/promo/scheduleEmail/\"+constants.event_id, params ,function(responseText){\n  ...\n  293  		$previewButton.html('Generating Preview...');\n  294  		$(\"#simple-modal-ajax\").empty().removeAttr('xtra-attr')\n  295: 			.fireSimpleModal()\n  296  			.html('<div class=\"thisLoader loading\"><div class=\"nu-loader\"></div></div>')\n  297  			.attr('xtra-attr', $previewButton.attr('xtra-attr'))\n  ...\n  737  \n  738  		$(\"#cancelNewList,#cancelGuestListChanges\").unbind('click').click(function(){ //cancel adding a NEW or EXISTING guest list.\n  739: 			closeSimpleModal();\n  740  		});\n  741  \n  ...\n  782  \n  783  			$.post(constants.finetune_formBase+\"/promo/saveListName\",params,function(){\n  784: 				closeSimpleModal();\n  785  				var $dd = $(\"#invite-list-id\").parents(\".nu-dropdown\");\n  786  				$dd.find(\".current\").find(\"span:first\").text(params.value);\n  ...\n 2440  		$select.val(0);\n 2441  	}\n 2442: 	$(\"#new-list-form\").fireSimpleModal();\n 2443  	$(\"#new-list-name\").val('').focus();\n 2444  }\n ....\n 2599  			$this.prop(\"checked\",false).parents(\"tr\").removeClass('selected');\n 2600  		});\n 2601: 		closeSimpleModal();\n 2602  		$btn.removeClass('in-progress');\n 2603  		$t.find(\"input.masscheck\").prop(\"checked\",false);\n ....\n 2631  \n 2632  	$(\"#gmail-logout\").unbind('click').click(function(event){\n 2633: 		closeSimpleModal();\n 2634  		$(\"#gmail-json-content\").find(\".gmailResultsWrap\").empty();\n 2635  		$(\"#gmail-logged-in-status\").hide();\n ....\n 2750  \n 2751  				//if we have a successful post, hide the form stuff and then show the goods.\n 2752: 				$(\"#invite-contact-import\").fireSimpleModal({ persistent: true });\n 2753  \n 2754  				$(\"#gmail-login\").hide();\n ....\n 2883  		// 		$select.val(0);\n 2884  		// 	}\n 2885: 	 // 		$(\"#new-list-form\").fireSimpleModal();\n 2886  	 // 		$(\"#new-list-name\").val('').focus();\n 2887  	 // 	});\n ....\n 3274   					}\n 3275   		 	 		$.post(constants.finetune_formBase+\"/promo/saveListName\",params,function(){\n 3276:  				 		closeSimpleModal();\n 3277   		 	 			var $dd = $(\"#invite-list-id\").parents(\".nu-dropdown:first\");\n 3278   		 	 			$dd.find(\".options div[value='\"+params.list_id+\"']\").find(\"span:first\").text(params.value);\n ....\n 3286  \n 3287   					var jq = $.parseJSON(response);\n 3288:  					closeSimpleModal();\n 3289   					var new_list_id = jq.list_id.trim();\n 3290   		 			$obj.removeClass('in-progress').text('Save');\n ....\n 3932  		$(\"#planning-tools,#email-index\").on('click',\"#editGuestList\",function(){\n 3933  	 		var currentName = $(\"#invite-list-id\").parents(\".nu-dropdown:first\").find(\".current\").find(\"span:first\").text();\n 3934: 	 		$(\"#edit-list-form\").fireSimpleModal();\n 3935  	 		$(\"#edit-list-name\").val(currentName);\n 3936  			return false;\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/invites-index.js:\n   28  		if($(\"#simple-modal-wrap\").is(\":visible\")){\n   29  			if($target.parents(\".simple-modal\").length<1 && !$target.hasClass('simple-modal') && !$(\"#simple-modal-wrap\").hasClass('persistent')){\n   30: 				closeSimpleModal();\n   31  			}\n   32  		} else{\n   ..\n  140  			 	var stripped_source = image_src.replace(/^\\/img\\/events\\//,'');\n  141  				$(\"#invite-image-src\").val(stripped_source);\n  142: 				closeSimpleModal();\n  143  \n  144  			}\n  ...\n  188  			var stripped_source = image_src.replace(/^\\/img\\/events\\//,'');\n  189  			$(\"#invite-image-src\").val(stripped_source);\n  190: 			closeSimpleModal();\n  191  		}\n  192  \n  ...\n  202  					 	var stripped_source = response.image.replace(/^\\/img\\/events\\//,'');\n  203  						$(\"#invite-image-src\").val(stripped_source);\n  204: 						closeSimpleModal();\n  205  \n  206  \n  ...\n  597  			e.preventDefault();\n  598  			if ( _saveCallback ){ _saveCallback(selected,src,newly_uploaded_src,dims); }\n  599: 			closeSimpleModal();\n  600  				if(cropImageJcrop){\n  601  					cropImageJcrop.destroy();\n  ...\n  611  			//if ( _saveCallback ){ _saveCallback(false,src,newly_uploaded_src,dims); }\n  612  			if ( _cancelCallback ){ _cancelCallback(); }\n  613: 			closeSimpleModal();\n  614  				if(cropImageJcrop){\n  615  					cropImageJcrop.destroy();\n  ...\n  653  		}\n  654  \n  655: 		$block.fireSimpleModal({persistent:true});\n  656  \n  657  	}else if ( _saveCallback ){ _saveCallback(false); }\n  ...\n 1003  				if ( !$bus.is(':visible') ){\n 1004  					$bus.parent().removeClass('finished');\n 1005: 					$('#upload_photo_block').fireSimpleModal({persistent:true});\n 1006  					$bus.find('.textStatus .completed').html('0');\n 1007  					$bus.find('.latestPhoto img').attr('src','');\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/legacy-event-site.js:\n   28  				var $target = $(e.target);\n   29  				if(!$target.hasClass('simple-modal') && $target.parents(\".simple-modal\").length < 1){\n   30: 					closeSimpleModal();\n   31  					openModal = false;\n   32  				}\n   ..\n   37  			if(openModal){\n   38  				if(!$(\"#simple-modal-wrap\").hasClass('persistent')){\n   39: 					closeSimpleModal();\n   40  					openModal = false;\n   41  				}\n   ..\n   64  	$(document).on('click',\"#rsvp-modal .close-form\",function(event){\n   65  		_gaq.push(['_trackEvent', 'Splash', 'RsvpFormClose', 'id:'+constants.event_id]);\n   66: 		closeSimpleModal();\n   67  	});\n   68  	$(document).on('click',\"#rsvp-button\",function(event){\n   ..\n   75  			//$(\"div.map,div.countdown\").animate( { 'height': 0 }, 200, function(){});\n   76  \n   77: 			$(\"#rsvp-modal\").fireSimpleModal();\n   78  \n   79  			if(typeof constants.vayner !=='undefined'){\n   ..\n  307  		$(this).hide();\n  308  		event.preventDefault();\n  309: 		$(\"#rsvp-form\").fireSimpleModal();\n  310  	});\n  311  \n  ...\n  364  	$(document).on('click',\"#sendANote\",function(event){\n  365  		event.preventDefault();\n  366: 		//$(\"#contactOrganizer\").fireSimpleModal();\n  367: 		$(\"#contact-event-organizer\").fireSimpleModal();\n  368  	});\n  369  \n  ...\n  672  				if(typeof jq.hideInlineForm!=='undefined'){\n  673  					$(\"#section-rsvp\").find(\"i.close-form\").hide();\n  674: 					closeSimpleModal();\n  675  				}\n  676  \n  ...\n  709  	$(document).on('click','#afterRsvpMessage .close',function(){\n  710  		//$('#afterRsvpMessage').hide();\n  711: 		closeSimpleModal();\n  712  	});\n  713  	$(document).on('click','.fb-wrap .close',function(){\n  ...\n  858  	$(document).on('click',\"#send-contact-org-cancel,#send-contact-org-cancel2\",function(event){\n  859  		event.preventDefault();\n  860: 		closeSimpleModal();\n  861  	})\n  862  \n  ...\n  889  						setTimeout(function(){\n  890  							$this.text('Send Note');\n  891: 							closeSimpleModal();\n  892  							//setTimeout(function(){\n  893  							//	},2000);\n  ...\n  912  \n  913  		if(false && typeof constants.viewerNotApproved!=='undefined'){\n  914: 			$(\"#userNotAllowed\").fireSimpleModal();\n  915  		}\n  916  \n  ...\n  959  							}\n  960  							setTimeout(function(){\n  961: 								closeSimpleModal();\n  962  								$this.text('Submit');\n  963  							},1000);\n  ...\n  965  							$this.removeClass('in-progress').text('Approved!');\n  966  							setTimeout(function(){\n  967: 								closeSimpleModal();\n  968  							},1500);\n  969  						}\n  ...\n  995  \n  996  		closeRevealModal();\n  997: 		closeSimpleModal();\n  998  	});\n  999  \n 1000  	if($(\"#checkin-password-prompt\").length > 0){\n 1001: 		$(\"#checkin-password-prompt\").fireSimpleModal({ persistent: true });\n 1002  		$(\"#checkin-page-code\").keyup(function(e){\n 1003  			if(e.keyCode==13){\n ....\n 2719  // 	});\n 2720  // }\n 2721: // function closeSimpleModal(){\n 2722  // 	$(\"#simple-modal-wrap\").removeClass('persistent').find(\".simple-modal\").hide();\n 2723  // 	$(\"#simple-modal-ajax\").empty();\n ....\n 2759  function uploadGalleryPhotos() {\n 2760  	var $galleryModal = $('#galleryUploadModal');\n 2761: 	$galleryModal.html('Loading...').fireSimpleModal();\n 2762  	$.ajax({url:constants.upload_form_action+'m'})\n 2763  		.done(function(response){\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/main-ui.js:\n  618  	$(this).parents(\".simple-modal:first\").removeClass('persistent_hard');\n  619  	event.preventDefault();\n  620: 	closeSimpleModal();\n  621  });\n  622  \n  ...\n  646  }\n  647  \n  648: function closeSimpleModal(){\n  649  	var $addNewSection = $(\"#add-new-section\");\n  650  	if($addNewSection.length > 0 && $addNewSection.is(\":visible\")){\n  ...\n  662  	var $wrap = $(\"#simple-modal-wrap\");\n  663  	if($wrap.find(\"div.persistent_hard\").length > 0){//if we find a persistent_hard modal, open that one up.\n  664: 		$wrap.find(\"div.persistent_hard:first\").fireSimpleModal();\n  665  		// $wrap.find(\".simple-modal:not(.persistent_hard)\").hide();\n  666  		return false;\n  ...\n  703  		var $cached_obj = $(\"#\"+cache_id);\n  704  		if($cached_obj.length > 0){\n  705: 			$cached_obj.fireSimpleModal();\n  706  			return;\n  707  		}\n  ...\n  710  	$(\"#simple-modal-ajax\")\n  711  		.removeAttr(\"xtra-attr\")\n  712: 		.fireSimpleModal(params)\n  713  		.html(loading_content);\n  714  \n  ...\n  732  			if($link.attr(\"cache-modal\")){\n  733  				$(\"#simple-modal-wrap\").find(\".simple-modal-flow-control\").append('<div id=\"'+$link.attr(\"cache-modal\")+'\" class=\"simple-modal hide\">'+responseText+'</div>');\n  734: 				$(\"#\"+$link.attr('cache-modal')).fireSimpleModal();\n  735  			} else {\n  736  				$(\"#simple-modal-ajax\").html(responseText);\n  ...\n  741  		},\n  742  		error: function(){\n  743: 			closeSimpleModal();\n  744  		}\n  745  	})\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/site_functions.js:\n  413  });\n  414  \n  415: function closeSimpleModal(){\n  416  	modal_visible = false;\n  417  	var $addNewSection = $(\"#add-new-section\");\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/social_inbox.js:\n   29  		$(\"#editImageHolder\").prop(\"src\",params.img1_src);\n   30  		var $block = $(\"#edit_photo_block\");\n   31: 		$block.fireSimpleModal();\n   32  		$block.attr(\"event_photo_id\",params.photo_id);\n   33  		$block.find(\"textarea.caption\").val(params.caption);\n   ..\n   60  			$photo.find(\".thumbDetails\").hide();\n   61  		}\n   62: 		closeSimpleModal();\n   63  		$.post(\"/events/editEventPhoto/\"+constants.slug,params,function(){\n   64  \n   ..\n   74  	$('#closeGalleryWrap').on('click', function(event){\n   75  		$('#galleryWrap').hide()\n   76: 		closeSimpleModal();\n   77  	})\n   78  \n   ..\n  525  	$('#closeGalleryWrap').on('click', function(event){\n  526  		$('#galleryWrap').hide()\n  527: 		closeSimpleModal();\n  528  	})\n  529  \n  ...\n 2154  \n 2155  function openPhotoGallery(){\n 2156: 	$('#galleryWrap').fireSimpleModal();\n 2157  	$(\"#instagramSearchInput\").focus();\n 2158  	$('#addSelectedButton').removeClass('loading')\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/ticket-settings.js:\n  626  					$ticketSettingsForm.find('.sortErrorMessage').hide();\n  627  					setTimeout(function(){\n  628: 						//closeSimpleModal();\n  629  						$this.text('Sort Tickets').removeClass('disabled');\n  630  						$(\"#ticketUtils\").find(\".addNewTicketType\").removeClass('disabled');\n  ...\n  706  					updateAttendeeFilters();\n  707  					setTimeout(function(){\n  708: 						//closeSimpleModal();\n  709  						$this.text('Save').removeClass('disabled');\n  710  						$ticketSettingsForm.removeClass('open');\n  ...\n  819  $ticketSettingsForm.on('click',\".newTicketQuestion\",function(){\n  820  	//$(this).hide();\n  821: 	$(\"#newQuestionModal\").fireSimpleModal();\n  822  	return false;\n  823  })\n  824  $ticketSettingsForm.on('click',\"#closeQuestions\",function(){\n  825: 	closeSimpleModal();\n  826  	//$(\"#newQuestionModal\").fadeOut(100);\n  827  	$(\"#addNewQuestion\").show();\n  ...\n 1087  // 			var $editing_ticket = $ticketSettingsForm.find(\"div.typeRows.open:first\");\n 1088  // 			if($editing_ticket.length && $editing_ticket.hasClass('changes-made')){\n 1089: // 				$(\"#ticket-changes-made\").fireSimpleModal({persistent:true});\n 1090  // 				//return false;\n 1091  // 				return false;\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/timezone-picker.js:\n   21  \n   22  	$(document).on('click', \"a.save-timezone\", function(){\n   23: 		closeSimpleModal();\n   24  		if(typeof constants.splash_page!=='undefined'){\n   25  			setChangesMade();\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/addressbook/addressbook.index.js:\n   30              if(($target.parents(\".simple-modal\").length<1 && !$target.hasClass('simple-modal')) && !$(\"#simple-modal-wrap\").hasClass('persistent')){\n   31                  if(!autoCompleteSearchOpen){\n   32:                     closeSimpleModal();\n   33                  }\n   34              }\n   ..\n  272      \n  273      $(document).on('click',\"a.close-modal\",function () {\n  274:         closeSimpleModal();\n  275      });\n  276      \n  ...\n  323  \n  324      $(document).on('click',\"#add-tag-link,#addNewTag\", function () {\n  325:         $(\"#add-tag\").fireSimpleModal({ persistent:false });\n  326          setTimeout(function () {\n  327              $(\"#tag-search\").focus();\n  ...\n  367          });\n  368          \n  369:         //$(\"#merge-contacts\").fireSimpleModal();\n  370      });\n  371      \n  ...\n  374          var $modal = $(\"#remove-contact\");\n  375          setTimeout(function () {\n  376:             $modal.fireSimpleModal({ persistent:false });\n  377          }, 20);\n  378          var txt = (count!=1) ? count+' contacts' : '1 contact';\n  ...\n  512          \n  513          $search.val('');\n  514:         closeSimpleModal();\n  515          \n  516          if ($profile.is(\":visible\")) { //contact profile vs. index\n  ...\n  570              params.contacts.push({ id:$parent.attr(\"contact-id\"),type:$parent.attr(\"type\") });\n  571          });\n  572:         closeSimpleModal();\n  573          $.post(\"/address_book/removeBulk\", params, function (response) {\n  574              $(\"#sub-util-actions\").hide();\n  ...\n  756      }\n  757      \n  758:     function closeSimpleModal() {\n  759          $(\"#simple-modal-wrap\").removeClass('persistent').fadeOut(100).find(\".simple-modal\").hide();\n  760          $(\"#simple-modal-ajax\").empty();\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/addressbook/addressbook.therefore.js:\n 1238              var $target = $(e.target);\n 1239              if(! cannotCloseModal && ($target.parents(\".simple-modal\").length<1 && !$target.hasClass('simple-modal')) && !$(\"#simple-modal-wrap\").hasClass('persistent')){\n 1240:                 closeSimpleModal();\n 1241             }\n 1242         }\n ....\n 2019  \n 2020                      $(\"#groupMergeIds\").val(group_id);\n 2021:                     $(\"#groupMerge\").fireSimpleModal();\n 2022                      //$(\"#newGroupCity\").val(name).attr(\"group_id\",group_id);\n 2023                      return false;\n ....\n 2063                      $this.text('Saved.').removeClass('in-progress');\n 2064                      setTimeout(function(){\n 2065:                         closeSimpleModal();\n 2066                          $rooty.defaults()['force']=true;\n 2067                          $this.text('Save');\n ....\n 2870          }\n 2871          $(\"#bulkAddToList\").find(\".bulkAddListCount\").text('('+selected+')');\n 2872:         $(\"#bulkAddToList\").fireSimpleModal();\n 2873          return false;\n 2874      });\n ....\n 2877      ///////deleting contacts functionality///////\n 2878      $(\"#single-remove-contact,#bulk-remove-contacts\").click(function(){\n 2879:         $(\"#confirmRemove\").fireSimpleModal();\n 2880          if(massSelect){\n 2881              var section = $.Splash.whereAmI();\n ....\n 2901          }\n 2902          $(\"#confirmRemove\").QED(opts);\n 2903:         closeSimpleModal();\n 2904      });\n 2905  \n ....\n 2960          $(\"#inner-list-id\").val(0);\n 2961           closeMultiView();\n 2962:         closeSimpleModal();\n 2963      });\n 2964  \n ....\n 3005              );\n 3006              if(confirm){\n 3007:                 closeSimpleModal();\n 3008              }\n 3009          } else{\n 3010              console.log('test')\n 3011:             closeSimpleModal();\n 3012          }\n 3013      });\n ....\n 3020              var selected = section.count;\n 3021          }\n 3022:         $(\"#bulkAddTags\").fireSimpleModal();\n 3023          $(\"#bulkAddTags\").find(\".bulkAddListCount\").text('('+selected+')');\n 3024          return false;\n ....\n 3053      $(\"#add-hub-btn\").click(function(){\n 3054          $(\"#currentEventId\").val(constants.selectedEvents.join(','));\n 3055:         $(\"#add-event-to-hub\").fireSimpleModal();\n 3056          $(\"#eventListingCount\").text('('+constants.selectedEvents.length+')');//count of all events we're about to add. its the polite thing to do.\n 3057          return false;\n ....\n 3062          $(\"#currentEventId\").val(event_id);\n 3063          $(\"#eventListingCount\").text('(1)');//just a single event here.\n 3064:         $(\"#add-event-to-hub\").fireSimpleModal();\n 3065          return false;\n 3066      });\n ....\n 3079          });\n 3080  \n 3081:         closeSimpleModal();\n 3082          $(\"#bulkTagInput\").importTags('');\n 3083          closeMultiView();\n ....\n 3099          $(\"#export-dropdown\").hide();\n 3100          $.exportfilename.val(\"contacts-\" + d.getUTCFullYear() + d.getCalendarMonth() + d.getUTCDate() + \".csv\");\n 3101:         $(\"#bulkExport\").fireSimpleModal();\n 3102          return false;\n 3103      });\n ....\n 3112          $(\"#export-dropdown\").show();\n 3113          $.exportfilename.val(\"contacts-\" + d.getUTCFullYear() + d.getCalendarMonth() + d.getUTCDate() + \".csv\");\n 3114:         $(\"#bulkExport\").fireSimpleModal();\n 3115          return false;\n 3116      });\n ....\n 3120          var $selected = constants.selectedContacts;//$.Splash.selectedContacts();\n 3121          $(\"#how-many-to-merge,#how-many-to-merge-2\").text($selected.length);\n 3122:         $(\"#bulkMerge\").fireSimpleModal();\n 3123          return false;\n 3124      });\n ....\n 3139  \n 3140                  $this.removeClass('in-progress').text('Save');\n 3141:                 closeSimpleModal();\n 3142                  jumpToProfile = response.primary_id*1;\n 3143                  if(typeof contactHistoryCache[jumpToProfile]!=='undefined'){\n ....\n 3154              error:function(response){\n 3155                  $this.removeClass('in-progress').text('Save');\n 3156:                 closeSimpleModal();\n 3157                  setFlash('There was an error merging your contacts.','error');\n 3158              }\n ....\n 3196          window.location.href = $.Splash.export_url($.exportfilename.val());\n 3197          window.setTimeout(function () {\n 3198:             closeSimpleModal();\n 3199              closeMultiView();\n 3200          }, 10);\n ....\n 3235          setTimeout(function(){\n 3236              $t.removeClass('in-progress').text('Export');\n 3237:             closeSimpleModal();\n 3238          },10000);\n 3239  \n ....\n 3254          $.phasetwo.hide();\n 3255          $(\".quick-add\").hide();\n 3256:         $('#add-import').fireSimpleModal();\n 3257          return false;\n 3258      });\n 3259  \n 3260      $(\"#edit-btn\").click(function () {\n 3261:         $(\"#edit-contact\").fireSimpleModal();\n 3262          $(\"#edit-contact\").find(\"input.nu-input\").val('');\n 3263  \n ....\n 3365          $this.text('Save');\n 3366  \n 3367:         closeSimpleModal();\n 3368          var abc_id = getCurrentContact().data('contact_id');\n 3369  \n ....\n 3479              if ($(\"#quickAddAnother\").val()=='0'){\n 3480                  $(\"#quick-add-fields\").find(\".nu-input\").val('');\n 3481:                 closeSimpleModal();\n 3482              } else {\n 3483                  $(\"#quick-add-fields\").find(\".nu-input\").val('').end().find(\".nu-input:first\").focus();\n ....\n 3634          var list_id = $.listlist.find(\"li.active\").find(\"a:first\").attr(\"list-id\");\n 3635          $(\"#bulkEmailList\").attr('list-id',list_id);\n 3636:         $(\"#bulkEmailList\").fireSimpleModal();\n 3637          return false;\n 3638      });\n ....\n 3640      $(\"#export-list-btn,#export-events-btn\").click(function(){\n 3641          if(typeof constants.eventIndex!=='undefined'){\n 3642:             $(\"#eventExport\").fireSimpleModal();\n 3643  \n 3644          } else {\n ....\n 3654              $.exportfilename.text(list_name+\"-\" + d.getUTCFullYear() + d.getCalendarMonth() + d.getUTCDate() + \".csv\");\n 3655              $(\"#bulkExport\").attr('list-id',list_id);\n 3656:             $(\"#bulkExport\").fireSimpleModal();\n 3657          }\n 3658          return false;\n ....\n 4113      function bindEventSettings(){\n 4114          $(\"#edit-settings\").on('click','.close-modal',function(){\n 4115:             closeSimpleModal();\n 4116          });\n 4117  \n ....\n 4442  \n 4443                      $this.text('Save').removeClass('in-progress');\n 4444:                     closeSimpleModal();\n 4445                  },\n 4446                  error:function(){\n ....\n 4473  \n 4474      $(\"#closeGmailImport\").click(function(){\n 4475:         closeSimpleModal();\n 4476      });\n 4477  \n ....\n 4481  \n 4482      $(\"#duplicateEventLink\").click(function(){\n 4483:         $(\"#duplicate-event\").fireSimpleModal();\n 4484          $(\"#copy_event_id\").val($.contactview.data('event_id'));\n 4485          return false;\n ....\n 4552          $(\"#splashDomainLink\").find(\"span\").text('Create your custom domain');\n 4553          $(\"#domain-check\").hide().removeClass('error success');\n 4554:         closeSimpleModal();\n 4555          setTimeout(function(){\n 4556  \n ....\n 4581  \n 4582      $(\"#simple-modal-wrap\").on('click','#cancelHubAdd',function(){\n 4583:         closeSimpleModal();\n 4584      });\n 4585  \n ....\n 4627                  setTimeout(function(){\n 4628                      $t.text('Save');\n 4629:                     closeSimpleModal();\n 4630                  },1500);\n 4631                  $(\"#reloadEventProfile\").click();\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/addressbook/main.js:\n   91      });\n   92      $(\"#simple-modal-wrap\").on('click',\".closeSimpleModal\",function(){\n   93:         closeSimpleModal();\n   94      });\n   95  \n   ..\n  336              $t.removeClass('in-progress').text('Saved.');\n  337              setTimeout(function(){\n  338:                 closeSimpleModal();\n  339                  $t.text('Save');\n  340                  $(\"#myTags\").tagit(\"removeAll\");\n  ...\n  370  \n  371      $(\"#add-tag-btn\").click(function(){\n  372:         $(\"#add-tag-modal\").fireSimpleModal({ persistent: true });\n  373          $(\"#myTags\").tagit(\"removeAll\");\n  374          $(\"#myTags\").find(\"input:first\").val('').attr(\"placeholder\",\"Enter Tags Here\").focus();     \n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/addressbook/photo-index.js:\n   14  	        var $target = $(e.target);\n   15  	        if( ($target.parents(\".simple-modal\").length<1 && !$target.hasClass('simple-modal')) && !$(\"#simple-modal-wrap\").hasClass('persistent') ){\n   16: 	            closeSimpleModal();\n   17  	        }\n   18  	    }\n   ..\n  117  		populatePhotoProfile(photo_id);\n  118  \n  119: 		$profile.fireSimpleModal({ persistent: true });\n  120  		\n  121  		return false;\n  ...\n  161  \n  162  			} else {\n  163: 				closeSimpleModal();//nothing left to show. close.\n  164  			}	\n  165  		}\n\n243 matches across 30 files\n\n\nSearching 3527 files for \"on fireSimpleModal\"\n\n0 matches across 0 files\n\n\nSearching 3527 files for \"fireSimpleModal\"\n\n/Users/guillermo/sites/oneclipboard.com/app/views/admin/event_types.ctp:\n  106  		event.preventDefault();\n  107  		//$(this).hide().parents(\"td:first\").find(\"input.img-upload\").show();\n  108: 		$(\"#image-editor\").attr(\"event-type-id\",$(this).parents(\"tr\").attr(\"event-type-id\")).fireSimpleModal();\n  109  	});\n  110  	$(\"a.delete-img\").click(function(event){\n\n/Users/guillermo/sites/oneclipboard.com/app/views/admin/fetch_w9s.ctp:\n    8  	$(\".viewUserW9\").click(function(e){\n    9  		e.preventDefault();\n   10: 		$(\"#requestFormModal\").fireSimpleModal();//show();\n   11  		return false;\n   12  	});\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/avatar-modal.ctp:\n   61  							$.post('/account/saveUserField', {field: 'image_url', value: newSrc});\n   62  						}\n   63: 						$('#avatar-modal').fireSimpleModal();\n   64  					}\n   65  				});\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/element-picker.ctp:\n   39  					$(this).prop(\"href\",href+'&hash='+hash);\n   40  				});\n   41: 				$plans.fireSimpleModal();\n   42  				//$(\"#elementPaymentWall\").submit();			\n   43  			}	 \n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/add-collaborator.js:\n  170  		if(ec_id>0){\n  171  			$(\"#simple-modal-ajax\")\n  172: 				.fireSimpleModal()\n  173  				.html(constants.loader)\n  174  				.load('/events/'+url+'/'+constants.event_id+'/'+ec_id+'/1',null,function(responseText){\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/admin.js:\n    7  	$(\"#finetune-block\").removeClass('persistent first-view');\n    8  }\n    9: $.fn.fireSimpleModal = function(args){\n   10  	var $obj = $(this);\n   11  	$(\"body\").addClass('lockItUp');\n   ..\n   63  	$(\"#filterAction\").click(function(e){\n   64  		e.preventDefault();\n   65: 		$(\"#filter-options\").fireSimpleModal();\n   66  		return false;\n   67  	});\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/attendees.js:\n  787  		$('#attendeeAwaitingReply-viewer h3').append('<span class=\"awaitingCount\">('+thisCount+')</span>')\n  788  \n  789: 		$('#attendeeAwaitingReply-viewer').fireSimpleModal();\n  790  \n  791  	}\n  ...\n  931  \n  932  	// open simple modal\n  933: 	$view.fireSimpleModal();\n  934  \n  935  	return false; // stop the click action from bubbling uppp\n  ...\n 1054  \n 1055  	// open simple modal\n 1056: 	$view.fireSimpleModal();\n 1057  \n 1058  	return false; // stop the click action from bubbling uppp\n ....\n 2502  	});\n 2503  	$('#bulkAttendeeActions').find('.addTag').click(function(){\n 2504: 		$(\"#add-tag\").fireSimpleModal();\n 2505  		$(\"#tag-search\").focus();\n 2506  		return false;\n ....\n 2568  	$(\"#bulkAddFromWaitList\").unbind('click').click(function(){\n 2569  		var $obj = $(\"#bulkWaitlistActions\");\n 2570: 		$obj.fireSimpleModal();\n 2571  		var count = selectedAttendees.length;\n 2572  		var c = (count!='1')?count+' People':count+' Person';\n ....\n 2650  		// },10);\n 2651  		$obj.find(\".content\").append($(\"#attendeeFilters\"));\n 2652: 		$obj.fireSimpleModal({\n 2653  			persistent: true\n 2654  		});\n ....\n 2812  \n 2813  		$table.append(trs);\n 2814: 		$(\"#voting-results\").fireSimpleModal();\n 2815  \n 2816  		$table.trigger('update');\n ....\n 2898  			}\n 2899  \n 2900: 			$('#capture-deferred-orders-tool').fireSimpleModal({persistent:true});\n 2901  		} else {\n 2902  			alert('No Deferred Orders to Capture.');\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/contacts-index.js:\n  288  \n  289      // $(document).on('click',\"#edit-contact-link\",function(){\n  290:     //  $(\"#edit-profile\").fireSimpleModal({  });\n  291      // });\n  292      \n  ...\n  349  \n  350      $(document).on('click',\"#add-tag-link,#addNewTag\",function(){\n  351:         $(\"#add-tag\").fireSimpleModal({persistent:false});\n  352          setTimeout(function(){\n  353              $(\"#tag-search\").focus();\n  ...\n  391          });\n  392  \n  393:         //$(\"#merge-contacts\").fireSimpleModal();\n  394      })\n  395      $(\"#remove-contacts-link\").click(function(){\n  ...\n  397          var $modal = $(\"#remove-contact\");\n  398          setTimeout(function(){\n  399:             $modal.fireSimpleModal({persistent:false});\n  400  \n  401          },20);\n  ...\n  821          $(\"#finetune-block\").removeClass('persistent first-view');\n  822      }\n  823:     $.fn.fireSimpleModal = function(args){\n  824          var $obj = $(this);\n  825          $(\"body\").addClass('lockItUp');\n  ...\n 1190              //  if ( !$bus.is(':visible') ){\n 1191              //      $bus.parent().removeClass('finished');\n 1192:             //      $('#upload_photo_block').fireSimpleModal({persistent:true});\n 1193              //      $bus.find('.textStatus .completed').html('0');\n 1194              //      $bus.find('.latestPhoto img').attr('src','');\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/dashboard.js:\n 1352  			var ec_id = $li.prop(\"id\");\n 1353  			if(ec_id=='new'){ //adding new contact!\n 1354: 				//$(\"#new_contact_bubble\").fireSimpleModal();\n 1355  				$(\"#event-contact-count\").click();\n 1356  				//$parent_div.find('div.budget-vendor-add').attr(\"ec-id\",ec_id).text('').fadeIn(400);\n ....\n 1611  \n 1612  		$(\"#simple-modal-ajax\").empty().removeAttr('xtra-attr')\n 1613: 			.fireSimpleModal()\n 1614  			.html(constants.loader)\n 1615  			.load(\"/events/viewGuestsofGuests/\"+constants.event_id+\"/\"+rsvp_id,null,function(responseText){\n ....\n 1715  			});\n 1716  		}\n 1717: 		$(\"#payment-plans\").fireSimpleModal();\n 1718  	});\n 1719  \n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/event-site.js:\n  275  	$(\"#sendANote,#contactOrgFtr\").click(function(event){\n  276  		event.preventDefault();\n  277: 		$(\"#contact-event-organizer\").fireSimpleModal();\n  278  		return false;\n  279  	});\n  ...\n 1221  \n 1222  	if($(\"#checkin-password-prompt\").length > 0){\n 1223: 		$(\"#checkin-password-prompt\").fireSimpleModal({ persistent: true });\n 1224  		$(\"#checkin-page-code\").keyup(function(e){\n 1225  			if(e.keyCode==13){\n ....\n 3457  function uploadGalleryPhotos() {\n 3458  	var $galleryModal = $('#galleryUploadModal');\n 3459: 	$galleryModal.html('Loading...').fireSimpleModal();\n 3460  	$.ajax({url:constants.upload_form_action+'?m'})\n 3461  		.done(function(response){\n ....\n 3514  \n 3515  function showRsvpForm(){\n 3516: 	$(\"#rsvp-modal\").fireSimpleModal({persistent:true});\n 3517  	$('#rsvp-form-inner').addClass('active');\n 3518  \n ....\n 3952  	view: function(){\n 3953  		if($(\"#attendees-modal\").hasClass('loaded')){\n 3954: 			$(\"#attendees-modal\").fireSimpleModal();\n 3955  			return false;\n 3956  		} else{\n 3957: 			$(\"#attendees-modal\").fireSimpleModal();\n 3958  			attendees.loadList('');\n 3959  			return false;\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/finetune.js:\n  545  	$('#vanity-url-setup-instruction-link').click(function(){\n  546  		trackIndicativeEvent('vanityUrlInstructions');\n  547: 		$(\"#vanity-url-sell-instructions\").fireSimpleModal();\n  548  		return false;\n  549  	});\n  ...\n  551  	$('#vanity-url-open').click(function(){\n  552  		trackIndicativeEvent('vanityUrlOpen');\n  553: 		$(\"#vanity-url-sell\").fireSimpleModal();\n  554  		setTimeout(function(){\n  555  			$(\"#vanity-url-sell-input\").focus();\n  ...\n  737  				opts.persistent = true;//patch for the google autocomplete, which is not technically inside the map. clicking it closes the simple modal.\n  738  			}\n  739: 			$embed.removeClass('editing').attr(\"group-id\",false).find(\"textarea:first\").val('').end().fireSimpleModal(opts);\n  740  \n  741  			if(section_type == 'audio'){\n  ...\n 1627  	//clicking the white label sell\n 1628  	$(\"#splugSell\").click(function(e){\n 1629: 		$(\"#white-label-sell\").fireSimpleModal();\n 1630  		trackIndicativeEvent('clickedSplugUpsell');\n 1631  		return false;\n ....\n 2741  	$('#dropdownAvatar').click(function(e){\n 2742  		e.preventDefault()\n 2743: 		$('#avatar-modal').fireSimpleModal();\n 2744  \n 2745  		//set the state of the designer mode toggler\n ....\n 2793  				if (response && response.LayoutBlock) {\n 2794  					customElementLibraryClearForm(response);\n 2795: 					$(\"#add-to-element-library\").data('ftg-id',ftg_id).fireSimpleModal({ persistent: true, persistent_hard: true });\n 2796  				}\n 2797  			}).fail(function(){\n 2798  				customElementLibraryClearForm();\n 2799: 				$(\"#add-to-element-library\").data('ftg-id',ftg_id).fireSimpleModal({ persistent: true, persistent_hard: true });\n 2800  			}).always(function(){\n 2801  				$t.css('background-color','');\n ....\n 2804  		} else {\n 2805  			customElementLibraryClearForm();\n 2806: 			$(\"#add-to-element-library\").data('ftg-id',ftg_id).fireSimpleModal({ persistent: true, persistent_hard: true });\n 2807  		}\n 2808  		return false;\n ....\n 2879  		pickAndOrCropNewImage($(\"#element-lib-photo-field\"),{\n 2880  			done: function(newSrc,dims){\n 2881: 				//$(\"#add-to-element-library\").fireSimpleModal();\n 2882  				$(\"#element-lib-photo-field\").val(newSrc);\n 2883  				$(\"#element-lib-photo-img\").prop('src',newSrc)\n ....\n 3845  		}\n 3846  \n 3847: 		$block.fireSimpleModal({persistent:true});\n 3848  \n 3849  	}else if ( _saveCallback ){ _saveCallback(false); }\n ....\n 6382  	// 	}\n 6383  	// } else{\n 6384: 	// 	$(\"#logged-out-modal\").fireSimpleModal({ persistent: true });\n 6385   	console.log(\"ERROR ON PAGE #210\");\n 6386  	// 	return false;\n ....\n 9251  	//toggle the theme modal\n 9252  	$('#currentThemeCard2').on('click', function(){\n 9253: 		$(\"#theme-modal\").fireSimpleModal();\n 9254  		loadThemeTab($(\"#public-themes-contain\"), { type: 'public-themes'});\n 9255  		trackIndicativeEvent('themeModalOpen');\n ....\n 11381  		}\n 11382  	},0);\n 11383: 	$nav_embed.fireSimpleModal();\n 11384  	return false;\n 11385  \n .....\n 12307  	$(\"#event-planners-modal\").removeClass('expanded').addClass('sidebar');\n 12308  	$(\"#settingsTxt\").text('Edit Settings');\n 12309: 	$(\"#edit-settings\").removeClass('plannersOpen onlyVenue onlyDate').fireSimpleModal({persistent: true });\n 12310  	$(\"#edit-settings\").find(\"li.newbie\").removeClass('newbie');\n 12311  	var $previous_collabs = $(\"#previous-collabs\");\n .....\n 12438  			})\n 12439  		}\n 12440: 		$parent.fireSimpleModal();\n 12441  		return false;\n 12442  	}, 10);\n .....\n 13361  			$modal.find(\"textarea:first\").val(iframe);\n 13362  		}\n 13363: 		$modal.addClass('editing').attr(\"group-id\",gid).fireSimpleModal({persistent: true });\n 13364  	}\n 13365  }\n .....\n 13915  function loadEventHubModal(sfid,params){\n 13916  	sfid = 'sfid-'+sfid.replace('sfid-','');\n 13917: 	$(\"#eventHubSimpleModal\").attr(\"sfid\",sfid).fireSimpleModal();\n 13918  	if(params!=null && typeof params.editing!=='undefined'){\n 13919  		$(\"#eventHubSimpleModal\").data('editing-row',params.editing);\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/gallerysort.js:\n  245  \n  246  		$block.attr(\"event-photo-id\",params.event_photo_id);\n  247: 		$block.fireSimpleModal({persistent:true});\n  248  		var set = [0,0,10000,10000];\n  249  		//console.log(set);\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/gmail-import.js:\n   48  					$(\"#invite-contact-import\").show();\n   49  				} else {\n   50: 					$(\"#invite-contact-import\").fireSimpleModal({ persistent: true });\n   51  				}\n   52  \n   ..\n  348              $(\"#add-import\").removeClass('loading');\n  349  \n  350:             $(\"#add-import\").fireSimpleModal();\n  351              $(\"#import-gmail-success\").show();\n  352              $(\"#import-gmail-results\").hide();\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/groups.js:\n    2  \n    3  	$(\"#addNewUser\").click(function(){\n    4: 		$(\"#addUserToGroup\").fireSimpleModal();\n    5  		return false;\n    6  	});\n    .\n  288  	$(\"#simple-modal-ajax\").on('click','.add-another-collab',function(){\n  289  		var group_id = $(\"#viewGroupUsers\").data('group-id');\n  290: 		$(\"#addUserToGroup\").fireSimpleModal();\n  291  		$(\"#group-tree-select\").val(group_id);\n  292  		return false;\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/invite.js:\n  136  \n  137  	$(\"#view-gmail-contacts\").unbind('click').click(function(){\n  138: 		$(\"#invite-contact-import\").fireSimpleModal({ persistent: true });\n  139  		return false;\n  140  	});\n  ...\n  245  \n  246  		$(\"#simple-modal-ajax\").empty().attr(\"xtra-attr\",'schedule')\n  247: 			.fireSimpleModal({ persistent: true })\n  248  			.html('<div class=\"thisLoader loading\"><div class=\"nu-loader\"></div></div>')\n  249  			.load(constants.finetune_formBase+\"/promo/scheduleEmail/\"+constants.event_id, params ,function(responseText){\n  ...\n  293  		$previewButton.html('Generating Preview...');\n  294  		$(\"#simple-modal-ajax\").empty().removeAttr('xtra-attr')\n  295: 			.fireSimpleModal()\n  296  			.html('<div class=\"thisLoader loading\"><div class=\"nu-loader\"></div></div>')\n  297  			.attr('xtra-attr', $previewButton.attr('xtra-attr'))\n  ...\n 2440  		$select.val(0);\n 2441  	}\n 2442: 	$(\"#new-list-form\").fireSimpleModal();\n 2443  	$(\"#new-list-name\").val('').focus();\n 2444  }\n ....\n 2750  \n 2751  				//if we have a successful post, hide the form stuff and then show the goods.\n 2752: 				$(\"#invite-contact-import\").fireSimpleModal({ persistent: true });\n 2753  \n 2754  				$(\"#gmail-login\").hide();\n ....\n 2883  		// 		$select.val(0);\n 2884  		// 	}\n 2885: 	 // 		$(\"#new-list-form\").fireSimpleModal();\n 2886  	 // 		$(\"#new-list-name\").val('').focus();\n 2887  	 // 	});\n ....\n 3932  		$(\"#planning-tools,#email-index\").on('click',\"#editGuestList\",function(){\n 3933  	 		var currentName = $(\"#invite-list-id\").parents(\".nu-dropdown:first\").find(\".current\").find(\"span:first\").text();\n 3934: 	 		$(\"#edit-list-form\").fireSimpleModal();\n 3935  	 		$(\"#edit-list-name\").val(currentName);\n 3936  			return false;\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/invites-index.js:\n  653  		}\n  654  \n  655: 		$block.fireSimpleModal({persistent:true});\n  656  \n  657  	}else if ( _saveCallback ){ _saveCallback(false); }\n  ...\n 1003  				if ( !$bus.is(':visible') ){\n 1004  					$bus.parent().removeClass('finished');\n 1005: 					$('#upload_photo_block').fireSimpleModal({persistent:true});\n 1006  					$bus.find('.textStatus .completed').html('0');\n 1007  					$bus.find('.latestPhoto img').attr('src','');\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/legacy-event-site.js:\n   75  			//$(\"div.map,div.countdown\").animate( { 'height': 0 }, 200, function(){});\n   76  \n   77: 			$(\"#rsvp-modal\").fireSimpleModal();\n   78  \n   79  			if(typeof constants.vayner !=='undefined'){\n   ..\n  307  		$(this).hide();\n  308  		event.preventDefault();\n  309: 		$(\"#rsvp-form\").fireSimpleModal();\n  310  	});\n  311  \n  ...\n  364  	$(document).on('click',\"#sendANote\",function(event){\n  365  		event.preventDefault();\n  366: 		//$(\"#contactOrganizer\").fireSimpleModal();\n  367: 		$(\"#contact-event-organizer\").fireSimpleModal();\n  368  	});\n  369  \n  ...\n  912  \n  913  		if(false && typeof constants.viewerNotApproved!=='undefined'){\n  914: 			$(\"#userNotAllowed\").fireSimpleModal();\n  915  		}\n  916  \n  ...\n  999  \n 1000  	if($(\"#checkin-password-prompt\").length > 0){\n 1001: 		$(\"#checkin-password-prompt\").fireSimpleModal({ persistent: true });\n 1002  		$(\"#checkin-page-code\").keyup(function(e){\n 1003  			if(e.keyCode==13){\n ....\n 2727  // 	$(\"#finetune-block\").removeClass('persistent first-view');\n 2728  // }\n 2729: // $.fn.fireSimpleModal = function(args){\n 2730  // 	var $obj = $(this);\n 2731  // 	$(\"body\").addClass('lockItUp showSimple');\n ....\n 2759  function uploadGalleryPhotos() {\n 2760  	var $galleryModal = $('#galleryUploadModal');\n 2761: 	$galleryModal.html('Loading...').fireSimpleModal();\n 2762  	$.ajax({url:constants.upload_form_action+'m'})\n 2763  		.done(function(response){\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/main-ui.js:\n  621  });\n  622  \n  623: $.fn.fireSimpleModal = function(args){\n  624  	var $obj = $(this);\n  625  	$(\"body\").addClass('lockItUp showSimple');\n  ...\n  662  	var $wrap = $(\"#simple-modal-wrap\");\n  663  	if($wrap.find(\"div.persistent_hard\").length > 0){//if we find a persistent_hard modal, open that one up.\n  664: 		$wrap.find(\"div.persistent_hard:first\").fireSimpleModal();\n  665  		// $wrap.find(\".simple-modal:not(.persistent_hard)\").hide();\n  666  		return false;\n  ...\n  703  		var $cached_obj = $(\"#\"+cache_id);\n  704  		if($cached_obj.length > 0){\n  705: 			$cached_obj.fireSimpleModal();\n  706  			return;\n  707  		}\n  ...\n  710  	$(\"#simple-modal-ajax\")\n  711  		.removeAttr(\"xtra-attr\")\n  712: 		.fireSimpleModal(params)\n  713  		.html(loading_content);\n  714  \n  ...\n  732  			if($link.attr(\"cache-modal\")){\n  733  				$(\"#simple-modal-wrap\").find(\".simple-modal-flow-control\").append('<div id=\"'+$link.attr(\"cache-modal\")+'\" class=\"simple-modal hide\">'+responseText+'</div>');\n  734: 				$(\"#\"+$link.attr('cache-modal')).fireSimpleModal();\n  735  			} else {\n  736  				$(\"#simple-modal-ajax\").html(responseText);\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/social_inbox.js:\n   29  		$(\"#editImageHolder\").prop(\"src\",params.img1_src);\n   30  		var $block = $(\"#edit_photo_block\");\n   31: 		$block.fireSimpleModal();\n   32  		$block.attr(\"event_photo_id\",params.photo_id);\n   33  		$block.find(\"textarea.caption\").val(params.caption);\n   ..\n 2154  \n 2155  function openPhotoGallery(){\n 2156: 	$('#galleryWrap').fireSimpleModal();\n 2157  	$(\"#instagramSearchInput\").focus();\n 2158  	$('#addSelectedButton').removeClass('loading')\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/ticket-settings.js:\n  819  $ticketSettingsForm.on('click',\".newTicketQuestion\",function(){\n  820  	//$(this).hide();\n  821: 	$(\"#newQuestionModal\").fireSimpleModal();\n  822  	return false;\n  823  })\n  ...\n 1087  // 			var $editing_ticket = $ticketSettingsForm.find(\"div.typeRows.open:first\");\n 1088  // 			if($editing_ticket.length && $editing_ticket.hasClass('changes-made')){\n 1089: // 				$(\"#ticket-changes-made\").fireSimpleModal({persistent:true});\n 1090  // 				//return false;\n 1091  // 				return false;\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/addressbook/addressbook.index.js:\n  323  \n  324      $(document).on('click',\"#add-tag-link,#addNewTag\", function () {\n  325:         $(\"#add-tag\").fireSimpleModal({ persistent:false });\n  326          setTimeout(function () {\n  327              $(\"#tag-search\").focus();\n  ...\n  367          });\n  368          \n  369:         //$(\"#merge-contacts\").fireSimpleModal();\n  370      });\n  371      \n  ...\n  374          var $modal = $(\"#remove-contact\");\n  375          setTimeout(function () {\n  376:             $modal.fireSimpleModal({ persistent:false });\n  377          }, 20);\n  378          var txt = (count!=1) ? count+' contacts' : '1 contact';\n  ...\n  765      }\n  766      \n  767:     $.fn.fireSimpleModal = function(args) {\n  768          var $obj = $(this);\n  769          $(\"body\").addClass('lockItUp');\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/addressbook/addressbook.therefore.js:\n 2019  \n 2020                      $(\"#groupMergeIds\").val(group_id);\n 2021:                     $(\"#groupMerge\").fireSimpleModal();\n 2022                      //$(\"#newGroupCity\").val(name).attr(\"group_id\",group_id);\n 2023                      return false;\n ....\n 2870          }\n 2871          $(\"#bulkAddToList\").find(\".bulkAddListCount\").text('('+selected+')');\n 2872:         $(\"#bulkAddToList\").fireSimpleModal();\n 2873          return false;\n 2874      });\n ....\n 2877      ///////deleting contacts functionality///////\n 2878      $(\"#single-remove-contact,#bulk-remove-contacts\").click(function(){\n 2879:         $(\"#confirmRemove\").fireSimpleModal();\n 2880          if(massSelect){\n 2881              var section = $.Splash.whereAmI();\n ....\n 3020              var selected = section.count;\n 3021          }\n 3022:         $(\"#bulkAddTags\").fireSimpleModal();\n 3023          $(\"#bulkAddTags\").find(\".bulkAddListCount\").text('('+selected+')');\n 3024          return false;\n ....\n 3053      $(\"#add-hub-btn\").click(function(){\n 3054          $(\"#currentEventId\").val(constants.selectedEvents.join(','));\n 3055:         $(\"#add-event-to-hub\").fireSimpleModal();\n 3056          $(\"#eventListingCount\").text('('+constants.selectedEvents.length+')');//count of all events we're about to add. its the polite thing to do.\n 3057          return false;\n ....\n 3062          $(\"#currentEventId\").val(event_id);\n 3063          $(\"#eventListingCount\").text('(1)');//just a single event here.\n 3064:         $(\"#add-event-to-hub\").fireSimpleModal();\n 3065          return false;\n 3066      });\n ....\n 3099          $(\"#export-dropdown\").hide();\n 3100          $.exportfilename.val(\"contacts-\" + d.getUTCFullYear() + d.getCalendarMonth() + d.getUTCDate() + \".csv\");\n 3101:         $(\"#bulkExport\").fireSimpleModal();\n 3102          return false;\n 3103      });\n ....\n 3112          $(\"#export-dropdown\").show();\n 3113          $.exportfilename.val(\"contacts-\" + d.getUTCFullYear() + d.getCalendarMonth() + d.getUTCDate() + \".csv\");\n 3114:         $(\"#bulkExport\").fireSimpleModal();\n 3115          return false;\n 3116      });\n ....\n 3120          var $selected = constants.selectedContacts;//$.Splash.selectedContacts();\n 3121          $(\"#how-many-to-merge,#how-many-to-merge-2\").text($selected.length);\n 3122:         $(\"#bulkMerge\").fireSimpleModal();\n 3123          return false;\n 3124      });\n ....\n 3254          $.phasetwo.hide();\n 3255          $(\".quick-add\").hide();\n 3256:         $('#add-import').fireSimpleModal();\n 3257          return false;\n 3258      });\n 3259  \n 3260      $(\"#edit-btn\").click(function () {\n 3261:         $(\"#edit-contact\").fireSimpleModal();\n 3262          $(\"#edit-contact\").find(\"input.nu-input\").val('');\n 3263  \n ....\n 3634          var list_id = $.listlist.find(\"li.active\").find(\"a:first\").attr(\"list-id\");\n 3635          $(\"#bulkEmailList\").attr('list-id',list_id);\n 3636:         $(\"#bulkEmailList\").fireSimpleModal();\n 3637          return false;\n 3638      });\n ....\n 3640      $(\"#export-list-btn,#export-events-btn\").click(function(){\n 3641          if(typeof constants.eventIndex!=='undefined'){\n 3642:             $(\"#eventExport\").fireSimpleModal();\n 3643  \n 3644          } else {\n ....\n 3654              $.exportfilename.text(list_name+\"-\" + d.getUTCFullYear() + d.getCalendarMonth() + d.getUTCDate() + \".csv\");\n 3655              $(\"#bulkExport\").attr('list-id',list_id);\n 3656:             $(\"#bulkExport\").fireSimpleModal();\n 3657          }\n 3658          return false;\n ....\n 4481  \n 4482      $(\"#duplicateEventLink\").click(function(){\n 4483:         $(\"#duplicate-event\").fireSimpleModal();\n 4484          $(\"#copy_event_id\").val($.contactview.data('event_id'));\n 4485          return false;\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/addressbook/main.js:\n  370  \n  371      $(\"#add-tag-btn\").click(function(){\n  372:         $(\"#add-tag-modal\").fireSimpleModal({ persistent: true });\n  373          $(\"#myTags\").tagit(\"removeAll\");\n  374          $(\"#myTags\").find(\"input:first\").val('').attr(\"placeholder\",\"Enter Tags Here\").focus();     \n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/addressbook/photo-index.js:\n  117  		populatePhotoProfile(photo_id);\n  118  \n  119: 		$profile.fireSimpleModal({ persistent: true });\n  120  		\n  121  		return false;\n\n99 matches across 24 files\n\n\nSearching 3527 files for \"icon-f-bolt\"\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/inline-edit-actions.ctp:\n   35  				<?php if( isset($bolt) ){ ?>\n   36  					<div class=\"bolt-jump regular grp nofl\" style=\"\" title=\"Edit Style\">\n   37: 						<i show=\"default\" class=\"icon-f-bolt\"></i>\n   38: 						<i show=\"hover\" class=\"icon-f-bolt\"></i>\n   39  						<span class=\"inline-label\">Styles</span>\n   40  						<span class=\"inline-state\">Styles</span>\n\n~/sites/oneclipboard.com/app/webroot/css/addressbook/address_book_ui-master.css:\n    <binary>\n\n~/sites/oneclipboard.com/app/webroot/css/splash/fontello-lib.css:\n    <binary>\n\n~/sites/oneclipboard.com/app/webroot/css/splash/splash-layout.css:\n    <binary>\n\n~/sites/oneclipboard.com/app/webroot/css/styl/fontello-lib.styl:\n    <binary>\n\n6 matches across 5 files\n\n\nSearching 3527 files for \"inline-edit-tools\"\n\n0 matches across 0 files\n\n\nSearching 3527 files for \"inline-edit-actions\"\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/gallery.ctp:\n  460  		</script>\n  461  		<? } ?>\n  462: 	<?=$this->element('/splash/inline-edit-actions')?>\n  463  </div><!-- end gallery container -->\n  464  <? } ?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/hash.ctp:\n   15  }?>\n   16  </div>\n   17: <?=$this->element('/splash/inline-edit-actions')?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/host.ctp:\n   35  	</div>\n   36  </div>\n   37: <?//=$this->element('/splash/inline-edit-actions', array('layout'=>true) ) ?>\n   38  \n   39  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/legal-language.ctp:\n    2  	<?=$data['EventSetting']['rsvp_legal']?>\n    3  </div>\n    4: <?=$this->element('/splash/inline-edit-actions')?>\n    5  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/rsvp.ctp:\n   65  // 	$params['rsvpColors'] = true;\n   66  // } \n   67: //echo $this->element('/splash/inline-edit-actions',$params);?>\n   68  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/social-links.ctp:\n   45  </ul>\n   46  <div class=\"clearBoth\"></div>\n   47: <?=$this->element('/splash/inline-edit-actions',array('design'=>true,'compact'=>true,'noText'=>true))?>\n   48  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/spacer.ctp:\n    1  <div class=\"spacer\"></div>\n    2: <?//=$this->element('/splash/inline-edit-actions')?>\n    3  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/title.ctp:\n   16  ?></span>\n   17  </h1>\n   18: <?//=$this->element('/splash/inline-edit-actions',array('design'=>true,'layout'=>true,'noText'=>true,'drag'=>true))?>\n   19  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/when-day.ctp:\n   14  	</div>\n   15  </div>	\n   16: <?=$this->element('/splash/inline-edit-actions',array('compact'=>true,'design'=>true,'editTip'=>'Edit Date','deleteTip'=>'Hide Date'))?>\n   17  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/when-dow.ctp:\n   14  	</div>\n   15  </div>	\n   16: <?=$this->element('/splash/inline-edit-actions',array('compact'=>true,'editTip'=>'Edit Date','deleteTip'=>'Hide Date'))?>\n   17  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/when-end-day.ctp:\n   11  	</div>\n   12  </div>\n   13: <?//=$this->element('/splash/inline-edit-actions')?>\n   14  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/when-end-dow.ctp:\n   11  	</div>\n   12  </div>	\n   13: <?//=$this->element('/splash/inline-edit-actions')?>\n   14  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/when-end-month.ctp:\n   11  	</div>\n   12  </div>\n   13: <?//=$this->element('/splash/inline-edit-actions')?>\n   14  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/when-end-time.ctp:\n   45  	</div>\n   46  </div>\n   47: <?//=$this->element('/splash/inline-edit-actions')?>\n   48  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/when-end-year.ctp:\n   11  	</div>\n   12  </div>	\n   13: <?//=$this->element('/splash/inline-edit-actions')?>\n   14  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/when-month.ctp:\n   11  	</div>\n   12  </div>\n   13: <?//=$this->element('/splash/inline-edit-actions')?>\n   14  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/when-tbd.ctp:\n   19  	<div class=\"tbd\" style=\"<?=$date_styles?>\">Date <span>TBD</span></div>\n   20  </div>	\n   21: <?=$this->element('/splash/inline-edit-actions',array('compact'=>true,'design'=>true,'editTip'=>'Edit Date','deleteTip'=>'Hide Date'))?>\n   22  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/when-time.ctp:\n   51  	</div>\n   52  </div>	\n   53: <?//=$this->element('/splash/inline-edit-actions')?>\n   54  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/when-year.ctp:\n   11  	</div>\n   12  </div>	\n   13: <?//=$this->element('/splash/inline-edit-actions')?>\n   14  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/when.ctp:\n   92  <?php } ?>\n   93  </div>	\n   94: <?//=$this->element('/splash/inline-edit-actions')?>\n   95  \n   96  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/where-address.ctp:\n    3  	<div class=\"venue-address <?=($hide_field)?'hide':''?>\"><?=(isset($data['venue']['address']))?trim($data['venue']['address']):'';?></div>\n    4  </div>\n    5: <?=$this->element('/splash/inline-edit-actions',array('compact'=>true,'design'=>true,'editTip'=>'Edit Location','deleteTip'=>'Hide Location'))?>\n    6  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/where-city.ctp:\n    8  	<div class=\"venue-city <?=implode(' ',$extra_classes)?>\"><?=(isset($data['venue']['city']))?trim($data['venue']['city']):'';?></div>\n    9  </div>\n   10: <?//=$this->element('/splash/inline-edit-actions')?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/where-tbd.ctp:\n    4  	</div>\n    5  </div>\n    6: <?=$this->element('/splash/inline-edit-actions',array('compact'=>true,'design'=>true,'editTip'=>'Edit Location','deleteTip'=>'Hide Location'))?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/where-venue.ctp:\n    3  	<div class=\"venue-name <?=($hide_field)?'hide':''?>\"><?=(isset($data['venue']['venue_name']))?trim($data['venue']['venue_name']):'';?></div>\n    4  </div>\n    5: <?=$this->element('/splash/inline-edit-actions',array('compact'=>true,'design'=>true,'editTip'=>'Edit Location','deleteTip'=>'Hide Location'))?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/where-zip.ctp:\n    3  	<div class=\"venue-zip <?=($hide_field)?'hide':''?>\"><?=(isset($data['venue']['zip_code']))?trim($data['venue']['zip_code']):'';?></div>\n    4  </div>\n    5: <?//=$this->element('/splash/inline-edit-actions')?>\n    6  \n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/where.ctp:\n   42  	<?php } ?>\n   43  </div>\n   44: <?//=$this->element('/splash/inline-edit-actions')?>\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/toolbar/layout.ctp:\n    9  	<div style=\"display:none;\">\n   10  \n   11: 		<? /* $this->element('/splash/inline-edit-actions',array('layout'=>true,'shape'=>true,'id'=>'finetune-on-page-grp-tools')) */ ?>\n   12  \n   13: 		<?=$this->element('/splash/inline-edit-actions',array('layout'=>true,'delete'=>true, 'bolt'=>true,'id'=>'finetune-on-page-container-tools'))?>\n   14  \n   15: 		<?=$this->element('/splash/inline-edit-actions',array('layout'=>true,'media'=>true, 'drag'=>true,'delete'=>true,'clone'=>true,'bolt'=>true, 'id'=>'finetune-on-page-embed-tools'))?>\n   16  \n   17: 		<?=$this->element('/splash/inline-edit-actions',array('layout'=>true,'shape'=>true, 'drag'=>true,'delete'=>true,'clone'=>true,'bolt'=>true, 'id'=>'finetune-on-page-list-tools'))?>\n   18  \n   19: 		<?=$this->element('/splash/inline-edit-actions',array('layout'=>true, 'drag'=>true,'delete'=>true,'clone'=>true,'bolt'=>true, 'id'=>'finetune-on-page-text-list-tools'))?>\n   20  \n   21: 		<?=$this->element('/splash/inline-edit-actions',array('drag'=>true,'delete'=>true,'clone'=>true,'bolt'=>true,'sorting'=>true, 'id'=>'finetune-on-page-comments-tools'))?>\n   22  \n   23: 		<?=$this->element('/splash/inline-edit-actions',array('dateVenue'=>true, 'bolt'=>true, 'hide'=>true, 'id'=>'finetune-on-page-datevenue-tools'))?>\n   24  \n   25: 		<?=$this->element('/splash/inline-edit-actions',array('socialLinks'=>true, 'bolt'=>true, 'hide'=>true, 'id'=>'finetune-on-page-social-tools'))?>\n   26  \n   27: 		<?=$this->element('/splash/inline-edit-actions',array('layout'=>true, 'bolt'=>true, 'hide'=>true, 'id'=>'finetune-on-page-host-tools'))?>\n   28  \n   29: 		<?=$this->element('/splash/inline-edit-actions',array('test_link'=>true, 'bolt'=>true, 'delete'=>true, 'rsvpColors'=>true, 'id'=>'finetune-on-page-link-tools'))?>\n   30  \n   31: 		<?=$this->element('/splash/inline-edit-actions',array('hide'=>true,'bolt'=>true, 'drag'=>true, 'id'=>'finetune-on-page-basic-tools'))?>\n   32  \n   33: 		<?=$this->element('/splash/inline-edit-actions',array('image'=>true,'delete'=>true,'clone'=>true,'bolt'=>true, 'drag'=>true, 'id'=>'finetune-on-page-image-tools'))?>\n   34  \n   35: 		<?=$this->element('/splash/inline-edit-actions',array('layout'=>true,'shuffle'=>true,'delete'=>true,'bolt'=>true, 'drag'=>true, 'id'=>'finetune-on-page-gallery-tools'))?>\n   36  \n   37: 		<?=$this->element('/splash/inline-edit-actions',array('delete'=>true,'clone'=>true,'bolt'=>true, 'drag'=>true, 'id'=>'finetune-on-page-default-tools'))?>\n   38  \n   39  		<div id=\"finetune-on-page-item-tools\" class=\"edit-tools grp p0 abs txtC boldItalic\">\n\n40 matches across 27 files\n\n\nSearching 3527 files for \"finetune-on-page-image-tools\"\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/toolbar/layout.ctp:\n   31  		<?=$this->element('/splash/inline-edit-actions',array('hide'=>true,'bolt'=>true, 'drag'=>true, 'id'=>'finetune-on-page-basic-tools'))?>\n   32  \n   33: 		<?=$this->element('/splash/inline-edit-actions',array('image'=>true,'delete'=>true,'clone'=>true,'bolt'=>true, 'drag'=>true, 'id'=>'finetune-on-page-image-tools'))?>\n   34  \n   35  		<?=$this->element('/splash/inline-edit-actions',array('layout'=>true,'shuffle'=>true,'delete'=>true,'bolt'=>true, 'drag'=>true, 'id'=>'finetune-on-page-gallery-tools'))?>\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/finetune.js:\n 13800  		$editTools = $('#finetune-on-page-social-tools').clone();\n 13801  	} else if ( block_type == 'image' ){\n 13802: 		$editTools = $('#finetune-on-page-image-tools').clone();\n 13803  	} else if( block_type == 'button' || block_type == 'attendees' || $layoutGrp.hasClass('element-rsvp') ) {\n 13804  		$editTools = $('#finetune-on-page-link-tools').clone();\n\n2 matches across 2 files\n\n\nSearching 3527 files for \"inetune-on-page-comments-tools\"\n\n/Users/guillermo/sites/oneclipboard.com/app/views/elements/toolbar/layout.ctp:\n   19  		<?=$this->element('/splash/inline-edit-actions',array('layout'=>true, 'drag'=>true,'delete'=>true,'clone'=>true,'bolt'=>true, 'id'=>'finetune-on-page-text-list-tools'))?>\n   20  \n   21: 		<?=$this->element('/splash/inline-edit-actions',array('drag'=>true,'delete'=>true,'clone'=>true,'bolt'=>true,'sorting'=>true, 'id'=>'finetune-on-page-comments-tools'))?>\n   22  \n   23  		<?=$this->element('/splash/inline-edit-actions',array('dateVenue'=>true, 'bolt'=>true, 'hide'=>true, 'id'=>'finetune-on-page-datevenue-tools'))?>\n\n/Users/guillermo/sites/oneclipboard.com/app/webroot/js/finetune.js:\n 13778  		}\n 13779  	} else if( $.inArray( block_type, ['comments'] ) > -1 ){\n 13780: 		$editTools = $('#finetune-on-page-comments-tools').clone();\n 13781  	} else if( $.inArray( block_type, ['social-links-2'] ) > -1 ){\n 13782  		$editTools = $('#finetune-on-page-modal-tools').clone();\n\n2 matches across 2 files\n",
			"settings":
			{
				"buffer_size": 177959,
				"line_ending": "Unix",
				"name": "Find Results",
				"scratch": true
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/toolbar/layout.ctp",
			"settings":
			{
				"buffer_size": 45899,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/inline-edit-actions.ctp",
			"settings":
			{
				"buffer_size": 6627,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/contacts-index.js",
			"settings":
			{
				"buffer_size": 53745,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/attendees.js",
			"settings":
			{
				"buffer_size": 121111,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/admin.js",
			"settings":
			{
				"buffer_size": 9464,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/admin/event_types.ctp",
			"settings":
			{
				"buffer_size": 7411,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/blank-group.ctp",
			"settings":
			{
				"buffer_size": 1118,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/blank-group.ctp",
			"settings":
			{
				"buffer_size": 1118,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block.ctp",
			"settings":
			{
				"buffer_size": 2886,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/add-new-section.ctp",
			"settings":
			{
				"buffer_size": 9275,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-countdown.ctp",
			"settings":
			{
				"buffer_size": 2176,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/splash/settings-modal.css",
			"settings":
			{
				"buffer_size": 23463,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/venue-search.ctp",
			"settings":
			{
				"buffer_size": 4740,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/map-embed.ctp",
			"settings":
			{
				"buffer_size": 3836,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/address_book_controller.php",
			"settings":
			{
				"buffer_size": 99263,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/api_controller.php",
			"settings":
			{
				"buffer_size": 129553,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/photos_controller.php",
			"settings":
			{
				"buffer_size": 11599,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/event-datepicker.ctp",
			"settings":
			{
				"buffer_size": 4167,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/splash-elements.js",
			"settings":
			{
				"buffer_size": 68476,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/finetune.ctp",
			"settings":
			{
				"buffer_size": 56751,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/event-form.ctp",
			"settings":
			{
				"buffer_size": 6717,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/create-form-nu.ctp",
			"settings":
			{
				"buffer_size": 7014,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/styl/splash-layout.styl",
			"settings":
			{
				"buffer_size": 69647,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/eventfeed/legacy-splash-layout.css",
			"settings":
			{
				"buffer_size": 5537,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/splash/splash-layout-legacy-2.css",
			"settings":
			{
				"buffer_size": 61401,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/styl/user-elements.styl",
			"settings":
			{
				"buffer_size": 151570,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/theme-modal.ctp",
			"settings":
			{
				"buffer_size": 2962,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/splash_controller.php",
			"settings":
			{
				"buffer_size": 66871,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/contacts/view.ctp",
			"settings":
			{
				"buffer_size": 26979,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/app_model.php",
			"settings":
			{
				"buffer_size": 21501,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/finetune.css",
			"settings":
			{
				"buffer_size": 66989,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/config/core.php",
			"settings":
			{
				"buffer_size": 7485,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/layouts/subsite-layout.ctp",
			"settings":
			{
				"buffer_size": 18871,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/vendors/debug.php",
			"settings":
			{
				"buffer_size": 575,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/config/database.php",
			"settings":
			{
				"buffer_size": 1506,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/splash/simple-page.ctp",
			"settings":
			{
				"buffer_size": 24095,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/events_controller.php",
			"settings":
			{
				"buffer_size": 301297,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/events/create_flow_b.ctp",
			"settings":
			{
				"buffer_size": 7896,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/social-links.ctp",
			"settings":
			{
				"buffer_size": 2124,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/sites/view.ctp",
			"settings":
			{
				"buffer_size": 29101,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/create.js",
			"settings":
			{
				"buffer_size": 39035,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/event-create.js",
			"settings":
			{
				"buffer_size": 3551,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/new-create.js",
			"settings":
			{
				"buffer_size": 60914,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/app_controller.php",
			"settings":
			{
				"buffer_size": 71197,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/models/splash_theme.php",
			"settings":
			{
				"buffer_size": 23764,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/models/event_rsvp.php",
			"settings":
			{
				"buffer_size": 59416,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/config/bootstrap.php",
			"settings":
			{
				"buffer_size": 6200,
				"line_ending": "Unix"
			}
		},
		{
			"contents": "<?\n$block = (isset($block)) ? $block : false;\nif ($block !== false) {\n\n	$options = array();\n	if (isset($block['SplashFeed']['options']) && !empty($block['SplashFeed']['options'])) {\n		$options = array_merge($options,$block['SplashFeed']['options']);\n	}\n	?>\n	<div class=\"grp p0 sf <?=$block['SplashFeed']['type']?>\" id=\"sfid-<?=$block['SplashFeed']['id']?>\" block-type=\"<?=$block['SplashFeed']['type']?>\">\n\n		<div class=\"body grp p0\">\n			<div>\n				<i class=\"icon-f-twitter-bird inline\"></i>\n			</div>\n			<div>\n				<i class=\"icon-f-linkedin-squared inline\"></i>\n			</div>\n			<div>\n				<i class=\"icon-f-fb-f inline\"></i>\n			</div>\n		</div>\n\n	<?php\n		echo $this->element('splash/custom-block-ftscript',array('block'=>$block));\n	?>\n	</div>\n<?php\n}\n",
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-social-links.ctp",
			"file_size": -1,
			"file_write_time": -1,
			"settings":
			{
				"buffer_size": 743,
				"line_ending": "Unix",
				"name": "hola"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/models/user.php",
			"settings":
			{
				"buffer_size": 57235,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/addressbook/addressbook.css",
			"settings":
			{
				"buffer_size": 55406,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/nu-global-nav.ctp",
			"settings":
			{
				"buffer_size": 17524,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/addressbook/styl/nu-global-nav.styl",
			"settings":
			{
				"buffer_size": 6173,
				"line_ending": "Unix"
			}
		},
		{
			"file": "/Users/guillermo/sites/oneclipboard.com/cake/libs/view/elements/sql_dump.ctp",
			"settings":
			{
				"buffer_size": 2125,
				"line_ending": "Unix"
			}
		}
	],
	"build_system": "",
	"command_palette":
	{
		"height": 67.0,
		"selected_items":
		[
			[
				"package sett",
				"Preferences: Package Control Settings – Default"
			],
			[
				"package",
				"Package Control: Add Repository"
			],
			[
				"preferences",
				"Preferences: Settings - Default"
			],
			[
				"packag",
				"Preferences: Browse Packages"
			]
		],
		"width": 449.0
	},
	"console":
	{
		"height": 126.0,
		"history":
		[
			"import urllib.request,os,hashlib; h = '7183a2d3e96f11eeadd761d777e62404' + 'e330c659d4bb41d3bdf022e94cab3cd0'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( 'http://sublime.wbond.net/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); print('Error validating download (got %s instead of %s), please try manual install' % (dh, h)) if dh != h else open(os.path.join( ipp, pf), 'wb' ).write(by)"
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/Users/guillermo/sites/oneclipboard.com/app"
	],
	"file_history":
	[
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/custom-block-add.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/vendors/shells/tasks/addenda.php",
		"/Users/guillermo/sites/oneclipboard.com/app/views/contacts/add_note.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/models/splash_theme.php",
		"/Users/guillermo/sites/oneclipboard.com/app/models/user.php",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/js/table-sorter-custom.js",
		"/Users/guillermo/sites/oneclipboard.com/app/models/social_query.php",
		"/Users/guillermo/sites/oneclipboard.com/app/vendors/htmlpurifier/standalone/HTMLPurifier/ConfigSchema/schema/URI.AllowedSchemes.txt",
		"/Users/guillermo/sites/oneclipboard.com/app/views/events/view_countdown.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/date_countdown2.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/date_countdown.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/country-select.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/js/tinymce_4.0.11/skins/lightgray/fonts/tinymce-small.svg",
		"/Users/guillermo/sites/oneclipboard.com/app/include/PHPExcel/Calculation/FormulaToken.php",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-button.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-list.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/views/admin/custom_themes.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/blank-custom-question.ctp.old",
		"/Users/guillermo/sites/oneclipboard.com/app/views/events/save_quick_data.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/vendors/splash/BtTicketOrder.php",
		"/Users/guillermo/sites/oneclipboard.com/app/config/bootstrap.php",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/eventfeed/custom-content.css",
		"/Users/guillermo/sites/oneclipboard.com/app/views/events/custom-style-editor.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/tmp/cache/models/cake_model_read_unsubscribes",
		"/Users/guillermo/sites/oneclipboard.com/app/tmp/cache/persistent/cake_core_object_map",
		"/Users/guillermo/sites/oneclipboard.com/app/models/comment.php",
		"/Users/guillermo/sites/oneclipboard.com/app/vendors/htmlpurifier/standalone/HTMLPurifier/ConfigSchema/schema/Output.CommentScriptContents.txt",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/addressbook/styl/comm-events-index.styl",
		"/Users/guillermo/Library/Application Support/Sublime Text 3/Packages/Package Control/Package Control.sublime-settings",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/settings/share-settings-old.ctp",
		"/Users/guillermo/Library/Application Support/Sublime Text 3/Packages/Default/Preferences.sublime-settings",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/eventfeed/splash-theme-kreltrip.css",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/facebox/faceboxOLD.css",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/fonts/fontello.svg",
		"/Users/guillermo/sites/oneclipboard.com/app/vendors/htmlpurifier/standalone/HTMLPurifier/ConfigSchema/schema/AutoFormat.RemoveEmpty.RemoveNbsp.Exceptions.txt",
		"/Users/guillermo/sites/oneclipboard.com/app/views/events/edit_settings.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/js/src/_old/events.manage.bkp.js",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/eventfeed/splash-layout.css",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/splash/splash-layout.css",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/addressbook/styl/nu-global-nav.styl",
		"/Users/guillermo/sites/oneclipboard.com/app/include/PHPExcel/Style/NumberFormat.php",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/js/addressbook/nv/models/bullet.js",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/venue-block.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/splash/payout-settings.css",
		"/Users/guillermo/sites/oneclipboard.com/app/views/pages/pay.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/page-action-settings.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/email/html/notify_owner_uploaded_photos.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/list_contacts.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/logged-out-modal.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/views/usermgmt/login.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/img/logo.png.bckup",
		"/Users/guillermo/sites/oneclipboard.com/app/vendors/htmlpurifier/standalone/HTMLPurifier/ConfigSchema/schema/Output.Newline.txt",
		"/Users/guillermo/sites/oneclipboard.com/app/controllers/address_book_controller.php",
		"/Users/guillermo/sites/oneclipboard.com/app/controllers/admin_controller.php",
		"/Users/guillermo/sites/oneclipboard.com/app/models/address_book_email.php",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/addressbook/comm-events-index.css",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/js/addressbook/nv/models/cumulativeLineChart.js",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/addressbook/addressbook.css",
		"/Users/guillermo/sites/oneclipboard.com/app/models/site_email.php",
		"/Users/guillermo/sites/oneclipboard.com/app/vendors/shells/tasks/update_birthday.php",
		"/Users/guillermo/sites/oneclipboard.com/app/views/layouts/subsite-layout.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/splash/splash-layout-legacy-2.css",
		"/Users/guillermo/sites/oneclipboard.com/app/views/contract_library_documents/edit.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/models/event_date.php",
		"/Users/guillermo/sites/oneclipboard.com/app/models/address_book_phone_number.php",
		"/Users/guillermo/sites/oneclipboard.com/app/vendors/htmlpurifier/standalone/HTMLPurifier/ConfigSchema/schema/URI.SafeIframeRegexp.txt",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/js/inc/year.php",
		"/Users/guillermo/sites/oneclipboard.com/app/include/PHPExcel/CachedObjectStorage/MemorySerialized.php",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/js/splash-elements.js",
		"/Users/guillermo/sites/oneclipboard.com/app/models/organization.php",
		"/Users/guillermo/sites/oneclipboard.com/app/models/event_logo.php",
		"/Users/guillermo/sites/oneclipboard.com/app/vendors/rackspace-cloudfiles/docs/elementindex.html",
		"/Users/guillermo/sites/oneclipboard.com/app/models/ticket_order.php",
		"/Users/guillermo/sites/oneclipboard.com/app/controllers/photos_controller.php",
		"/Users/guillermo/sites/oneclipboard.com/app/vendors/stripe-php-1.7.11/lib/Stripe/ApiConnectionError.php",
		"/Users/guillermo/sites/oneclipboard.com/app/controllers/api_controller.php",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/settings/share-settings-v2.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/styl/user-toolbar-gallery.styl",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/toolbar-gallery.css",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/tooltip.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/models/time_zone.php",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/social-links.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/models/event_message.php",
		"/Users/guillermo/sites/oneclipboard.com/app/models/event_message_invite.php",
		"/Users/guillermo/sites/oneclipboard.com/app/controllers/stats_api_controller.php",
		"/Users/guillermo/sites/oneclipboard.com/app/views/events/save_changes.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/views/events/save_event_element.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/index.php",
		"/Users/guillermo/sites/oneclipboard.com/app/include/PHPExcel/HashTable.php",
		"/Users/guillermo/sites/oneclipboard.com/app/vendors/rackspace-cloudfiles/docs/php-cloudfiles-exceptions/NoSuchAccountException.html",
		"/Users/guillermo/sites/oneclipboard.com/app/controllers/usermgmt_controller.php",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/eventfeed/splash-theme-spritely.css",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/eventfeed/splash-theme-sop.css",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/eventfeed/splash-theme-thrillist-hotel.css",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/img/splash-event-import-template.csv",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/eventfeed/eventfeed-m.css",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/events-index.css",
		"/Users/guillermo/sites/oneclipboard.com/app/app_controller.php",
		"/Users/guillermo/sites/oneclipboard.com/app/models/event.php",
		"/Users/guillermo/sites/oneclipboard.com/app/controllers/sites_controller.php",
		"/Users/guillermo/sites/oneclipboard.com/app/include/PHPExcel/Shared/trend/exponentialBestFitClass.php",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-img-gal.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/eventfeed/splash-theme-billabong.css",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/estimated-budget-info.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/vendors/htmlpurifier/standalone/HTMLPurifier/ConfigSchema/schema/Filter.ExtractStyleBlocks.Escaping.txt",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/css/splash/user-planning.css",
		"/Users/guillermo/sites/oneclipboard.com/app/models/user_payment.php",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/ticket-order-receipt.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/models/occupation.php",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/email/html/talking_transitions_rsvp_recipient.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/js/finetune.js",
		"/Users/guillermo/sites/oneclipboard.com/app/views/events/rsvps.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/rsvp-modal.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/models/behaviors/result_set.php",
		"/Users/guillermo/sites/oneclipboard.com/app/config/routes.php",
		"/Users/guillermo/sites/oneclipboard.com/app/views/users/register.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/views/users/profile.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/upload_headshot.php",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/js/gallerysort.js",
		"/Users/guillermo/sites/oneclipboard.com/app/views/events/gallery.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/controllers/groups_api_controller.php",
		"/Users/guillermo/sites/oneclipboard.com/app/config/google.php",
		"/Users/guillermo/sites/oneclipboard.com/app/views/events/create.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/views/jobs/create.ctp",
		"/Users/guillermo/sites/oneclipboard.com/app/models/contact_related.php",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/js/timezone-picker.js",
		"/Users/guillermo/sites/oneclipboard.com/app/webroot/js/tag-it.js",
		"/Users/guillermo/sites/oneclipboard.com/app/models/tag.php"
	],
	"find":
	{
		"height": 35.0
	},
	"find_in_files":
	{
		"height": 93.0,
		"where_history":
		[
			""
		]
	},
	"find_state":
	{
		"case_sensitive": false,
		"find_history":
		[
			"CountdownEle",
			"CommentsElement",
			"modal-too",
			"descrip",
			"inetune-on-page-comments-tools",
			"finetune-on-page-image-tools",
			"inline-edit-actions",
			"inline-edit-tools",
			"icon-f-bolt",
			"edit-tool",
			"edit-t",
			"fireSimpleModal",
			"on fireSimpleModal",
			"simpleModal(",
			"splash-box",
			"share-box",
			"blank_sections",
			"blank-group",
			"splash/custom-block",
			"custom-block')",
			"custom-block",
			"custom-block-countdown",
			"addSection",
			"addSection  elt-chooser",
			"postButtonAction",
			"comments",
			"loadCommentsElement",
			"refresh",
			"ent.cou",
			"counts",
			"returnA",
			"loadC",
			"grabRawComments",
			"grabComments",
			"parseCommentsTree",
			"counts[",
			"counts",
			"ent.data[sfid]['cou",
			"count",
			"['count']",
			"ment.count",
			"venue-address",
			"venue-name",
			"nt.counts[sfid",
			"CommentsElement.da",
			"ounts: {",
			".data",
			"CommentsEle",
			"'count'",
			"'count;'",
			"Element.com",
			"CommentsElement.com",
			"CommentsElement.da",
			"CommentsElement.deletePermission",
			"showDeleteButtons",
			"deleteB",
			"showDeleteButtons",
			"show_more_step",
			"total_top_comments_loaded",
			"show_more_step",
			"total_c",
			"initial_c",
			"total_top_comments_loaded",
			"showMore:",
			"total_co",
			"showMore:",
			"showMo",
			"showMOre",
			"showMore",
			"_setDomainName",
			"ommentTemplate ( comment_data,",
			"hasActiveChildren",
			"SplashComment",
			"CommentsE",
			"CommentE",
			"High",
			"parent",
			"splashfeed",
			"handle",
			"CommentsEle",
			"HubEle",
			"facebook",
			"getEventDomain",
			"twitter-section",
			"share-test",
			"update",
			"linkedin",
			"Saved",
			"social-btn-in",
			"linkedin",
			"twitter",
			"fees_owed",
			"otals']['fees_owed",
			"amount grp p0",
			"twitter][",
			"twitter}{",
			"share-btn",
			"v",
			"bg-",
			"timeZoneText",
			"thisLoader",
			"apropos",
			"v",
			"EVENT_API_SEARCH",
			"event_api_search",
			"address_book/event_api_search",
			"refresh-responses",
			"viewPageLink",
			".logout-wrap a",
			".7em",
			"->css",
			"splash/user-ele",
			"splash-btn",
			"btn-splash",
			"splash",
			"choose payout method",
			"btn-splash",
			"splash-btn",
			"btn-splash",
			"splash-btn",
			"logout-wrap",
			"50px !important",
			"settings-left",
			"onlyVenue",
			"onlyVnue",
			"onlyDate",
			"p p1 mr2 settings-left splash-box",
			"eventSettingsContain"
		],
		"highlight": false,
		"in_selection": false,
		"preserve_case": false,
		"regex": false,
		"replace_history":
		[
		],
		"reverse": false,
		"show_context": true,
		"use_buffer2": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"selected": 14,
			"sheets":
			[
				{
					"buffer": 0,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/edit-settings.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 9043,
						"regions":
						{
						},
						"selection":
						[
							[
								1098,
								1098
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 30,
					"type": "text"
				},
				{
					"buffer": 1,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/styl/user-planning.styl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 398892,
						"regions":
						{
						},
						"selection":
						[
							[
								101707,
								101707
							]
						],
						"settings":
						{
							"syntax": "Packages/Stylus/editors/Stylus.tmbundle/Syntaxes/Stylus.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 79110.0,
						"zoom_level": 1.0
					},
					"stack_index": 31,
					"type": "text"
				},
				{
					"buffer": 2,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/models/event_contact.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 46638,
						"regions":
						{
						},
						"selection":
						[
							[
								1137,
								1137
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 32,
					"type": "text"
				},
				{
					"buffer": 3,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/events/rsvps.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 26161,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 1130.0,
						"zoom_level": 1.0
					},
					"stack_index": 33,
					"type": "text"
				},
				{
					"buffer": 4,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/account_controller.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 172915,
						"regions":
						{
						},
						"selection":
						[
							[
								165334,
								165334
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 64172.0,
						"zoom_level": 1.0
					},
					"stack_index": 34,
					"type": "text"
				},
				{
					"buffer": 5,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/dashboard.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 127106,
						"regions":
						{
						},
						"selection":
						[
							[
								6496,
								6496
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 2912.0,
						"zoom_level": 1.0
					},
					"stack_index": 35,
					"type": "text"
				},
				{
					"buffer": 6,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/addressbook/nu-global-nav.css",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 10953,
						"regions":
						{
						},
						"selection":
						[
							[
								7220,
								7220
							]
						],
						"settings":
						{
							"syntax": "Packages/CSS/CSS.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 3889.0,
						"zoom_level": 1.0
					},
					"stack_index": 36,
					"type": "text"
				},
				{
					"buffer": 7,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/styl/payout-settings.styl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 11963,
						"regions":
						{
						},
						"selection":
						[
							[
								372,
								372
							]
						],
						"settings":
						{
							"syntax": "Packages/Stylus/editors/Stylus.tmbundle/Syntaxes/Stylus.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 37,
					"type": "text"
				},
				{
					"buffer": 8,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/address_book/columns.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 115768,
						"regions":
						{
						},
						"selection":
						[
							[
								59246,
								59246
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 15581.0,
						"zoom_level": 1.0
					},
					"stack_index": 38,
					"type": "text"
				},
				{
					"buffer": 9,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/addressbook/addressbook.therefore.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 260180,
						"regions":
						{
						},
						"selection":
						[
							[
								68284,
								68284
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": -0.0,
						"translation.y": 20884.0,
						"zoom_level": 1.0
					},
					"stack_index": 39,
					"type": "text"
				},
				{
					"buffer": 10,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/email/html/invite_reminder.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3162,
						"regions":
						{
						},
						"selection":
						[
							[
								1759,
								1759
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 199.0,
						"zoom_level": 1.0
					},
					"stack_index": 40,
					"type": "text"
				},
				{
					"buffer": 11,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/settings/event-settings.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 10076,
						"regions":
						{
						},
						"selection":
						[
							[
								1349,
								1349
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 41,
					"type": "text"
				},
				{
					"buffer": 12,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/events/edit_settings.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 69,
						"regions":
						{
						},
						"selection":
						[
							[
								69,
								69
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/HTML/HTML.tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 42,
					"type": "text"
				},
				{
					"buffer": 13,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/models/event.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 147580,
						"regions":
						{
						},
						"selection":
						[
							[
								142403,
								142403
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 60953.0,
						"zoom_level": 1.0
					},
					"stack_index": 43,
					"type": "text"
				},
				{
					"buffer": 14,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/finetune.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 490057,
						"regions":
						{
						},
						"selection":
						[
							[
								6413,
								6422
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 2159.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"type": "text"
				},
				{
					"buffer": 15,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-comments.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 8875,
						"regions":
						{
						},
						"selection":
						[
							[
								1399,
								1399
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 25,
					"type": "text"
				},
				{
					"buffer": 16,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-ftscript.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 886,
						"regions":
						{
						},
						"selection":
						[
							[
								860,
								860
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 24,
					"type": "text"
				},
				{
					"buffer": 17,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/settings/share-settings.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7560,
						"regions":
						{
						},
						"selection":
						[
							[
								6027,
								6027
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 1472.0,
						"zoom_level": 1.0
					},
					"stack_index": 44,
					"type": "text"
				},
				{
					"buffer": 18,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/main-ui.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 30791,
						"regions":
						{
						},
						"selection":
						[
							[
								27476,
								27476
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 13702.0,
						"zoom_level": 1.0
					},
					"stack_index": 45,
					"type": "text"
				},
				{
					"buffer": 19,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/events/create.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 10220,
						"regions":
						{
						},
						"selection":
						[
							[
								1034,
								1041
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 46,
					"type": "text"
				},
				{
					"buffer": 20,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/event-site.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 130635,
						"regions":
						{
						},
						"selection":
						[
							[
								65087,
								65087
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": -0.0,
						"translation.y": 29069.0,
						"zoom_level": 1.0
					},
					"stack_index": 47,
					"type": "text"
				},
				{
					"buffer": 21,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/rsvp-form.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 36816,
						"regions":
						{
						},
						"selection":
						[
							[
								35127,
								35127
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 10734.0,
						"zoom_level": 1.0
					},
					"stack_index": 48,
					"type": "text"
				},
				{
					"buffer": 22,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/styl/settings-modal.styl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 15339,
						"regions":
						{
						},
						"selection":
						[
							[
								13378,
								13378
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/Stylus/editors/Stylus.tmbundle/Syntaxes/Stylus.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 10748.0,
						"zoom_level": 1.0
					},
					"stack_index": 49,
					"type": "text"
				},
				{
					"buffer": 23,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/splash/user-elements.css",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 236955,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/CSS/CSS.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 98039.0,
						"zoom_level": 1.0
					},
					"stack_index": 50,
					"type": "text"
				},
				{
					"buffer": 24,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/ticket-payout-settings.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 28706,
						"regions":
						{
						},
						"selection":
						[
							[
								2596,
								2596
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 696.0,
						"zoom_level": 1.0
					},
					"stack_index": 51,
					"type": "text"
				},
				{
					"buffer": 25,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/models/event_setting.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 93833,
						"regions":
						{
						},
						"selection":
						[
							[
								88202,
								88202
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 35797.0,
						"zoom_level": 1.0
					},
					"stack_index": 52,
					"type": "text"
				},
				{
					"buffer": 26,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/finetune.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 41921,
						"regions":
						{
						},
						"selection":
						[
							[
								37918,
								37918
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 12783.0,
						"zoom_level": 1.0
					},
					"stack_index": 53,
					"type": "text"
				},
				{
					"buffer": 27,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/toolbar/design.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 11338,
						"regions":
						{
						},
						"selection":
						[
							[
								10056,
								10056
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 2267.0,
						"zoom_level": 1.0
					},
					"stack_index": 54,
					"type": "text"
				},
				{
					"buffer": 28,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/settings/admin-settings.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 5100,
						"regions":
						{
						},
						"selection":
						[
							[
								3863,
								3863
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 167.0,
						"zoom_level": 1.0
					},
					"stack_index": 55,
					"type": "text"
				},
				{
					"buffer": 29,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/toolbar/social.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 10364,
						"regions":
						{
						},
						"selection":
						[
							[
								949,
								949
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 56,
					"type": "text"
				},
				{
					"buffer": 30,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/models/time_zone.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2854,
						"regions":
						{
						},
						"selection":
						[
							[
								1191,
								1191
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 57,
					"type": "text"
				},
				{
					"buffer": 31,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/eventfeed/gallerysort.css",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 4994,
						"regions":
						{
						},
						"selection":
						[
							[
								2054,
								2054
							]
						],
						"settings":
						{
							"syntax": "Packages/CSS/CSS.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 58,
					"type": "text"
				},
				{
					"buffer": 32,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/sites_controller.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 112580,
						"regions":
						{
						},
						"selection":
						[
							[
								26372,
								26372
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 7844.0,
						"zoom_level": 1.0
					},
					"stack_index": 19,
					"type": "text"
				},
				{
					"buffer": 33,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/models/splash_feed.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 66349,
						"regions":
						{
						},
						"selection":
						[
							[
								45149,
								45149
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 24164.0,
						"zoom_level": 1.0
					},
					"stack_index": 7,
					"type": "text"
				},
				{
					"buffer": 34,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/models/splash_comment.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 12882,
						"regions":
						{
						},
						"selection":
						[
							[
								1959,
								1959
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 374.0,
						"zoom_level": 1.0
					},
					"stack_index": 28,
					"type": "text"
				},
				{
					"buffer": 35,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 177959,
						"regions":
						{
							"match":
							{
								"flags": 112,
								"regions":
								[
									[
										492,
										502
									],
									[
										945,
										955
									],
									[
										1277,
										1287
									],
									[
										1523,
										1533
									],
									[
										1830,
										1840
									],
									[
										2325,
										2335
									],
									[
										2578,
										2588
									],
									[
										2979,
										2989
									],
									[
										3433,
										3443
									],
									[
										3661,
										3671
									],
									[
										3891,
										3901
									],
									[
										4106,
										4116
									],
									[
										4327,
										4337
									],
									[
										4595,
										4605
									],
									[
										4632,
										4642
									],
									[
										4702,
										4712
									],
									[
										4891,
										4901
									],
									[
										5032,
										5042
									],
									[
										5097,
										5107
									],
									[
										5150,
										5160
									],
									[
										5351,
										5361
									],
									[
										5509,
										5519
									],
									[
										5710,
										5720
									],
									[
										5868,
										5878
									],
									[
										6113,
										6123
									],
									[
										6330,
										6340
									],
									[
										6678,
										6688
									],
									[
										6826,
										6836
									],
									[
										6981,
										6991
									],
									[
										7249,
										7259
									],
									[
										7621,
										7631
									],
									[
										7877,
										7887
									],
									[
										8085,
										8095
									],
									[
										8339,
										8349
									],
									[
										8575,
										8585
									],
									[
										8723,
										8733
									],
									[
										9074,
										9084
									],
									[
										9367,
										9377
									],
									[
										9687,
										9697
									],
									[
										9958,
										9968
									],
									[
										10084,
										10094
									],
									[
										10473,
										10483
									],
									[
										10809,
										10819
									],
									[
										11172,
										11182
									],
									[
										11538,
										11548
									],
									[
										11589,
										11599
									],
									[
										11680,
										11690
									],
									[
										11925,
										11935
									],
									[
										12094,
										12104
									],
									[
										12180,
										12190
									],
									[
										12261,
										12271
									],
									[
										12563,
										12573
									],
									[
										12777,
										12787
									],
									[
										12980,
										12990
									],
									[
										13415,
										13425
									],
									[
										13933,
										13943
									],
									[
										14211,
										14221
									],
									[
										14508,
										14518
									],
									[
										14852,
										14862
									],
									[
										15102,
										15112
									],
									[
										15446,
										15456
									],
									[
										15700,
										15710
									],
									[
										15979,
										15989
									],
									[
										16242,
										16252
									],
									[
										16598,
										16608
									],
									[
										16772,
										16782
									],
									[
										17060,
										17070
									],
									[
										17310,
										17320
									],
									[
										17563,
										17573
									],
									[
										17690,
										17700
									],
									[
										17798,
										17808
									],
									[
										17905,
										17915
									],
									[
										17993,
										18003
									],
									[
										18087,
										18097
									],
									[
										18222,
										18232
									],
									[
										18362,
										18372
									],
									[
										18578,
										18588
									],
									[
										18732,
										18742
									],
									[
										18830,
										18840
									],
									[
										18950,
										18960
									],
									[
										19143,
										19153
									],
									[
										19372,
										19382
									],
									[
										19492,
										19502
									],
									[
										19738,
										19748
									],
									[
										19981,
										19991
									],
									[
										20356,
										20366
									],
									[
										20462,
										20472
									],
									[
										20699,
										20709
									],
									[
										20826,
										20836
									],
									[
										21007,
										21017
									],
									[
										21138,
										21148
									],
									[
										21423,
										21433
									],
									[
										21891,
										21901
									],
									[
										22240,
										22250
									],
									[
										22624,
										22634
									],
									[
										23182,
										23204
									],
									[
										23823,
										23835
									],
									[
										24174,
										24186
									],
									[
										24497,
										24509
									],
									[
										24662,
										24674
									],
									[
										25183,
										25195
									],
									[
										25339,
										25351
									],
									[
										25510,
										25522
									],
									[
										25753,
										25765
									],
									[
										25997,
										26009
									],
									[
										26250,
										26262
									],
									[
										26419,
										26431
									],
									[
										26697,
										26709
									],
									[
										26755,
										26767
									],
									[
										27023,
										27035
									],
									[
										27059,
										27071
									],
									[
										27368,
										27380
									],
									[
										27555,
										27567
									],
									[
										27601,
										27613
									],
									[
										28061,
										28073
									],
									[
										28383,
										28395
									],
									[
										28590,
										28602
									],
									[
										28801,
										28813
									],
									[
										29039,
										29051
									],
									[
										29337,
										29349
									],
									[
										29652,
										29664
									],
									[
										29958,
										29970
									],
									[
										30094,
										30106
									],
									[
										30343,
										30355
									],
									[
										30632,
										30644
									],
									[
										30895,
										30907
									],
									[
										31158,
										31170
									],
									[
										31296,
										31308
									],
									[
										31442,
										31454
									],
									[
										31587,
										31599
									],
									[
										31729,
										31741
									],
									[
										31886,
										31898
									],
									[
										32061,
										32073
									],
									[
										32247,
										32259
									],
									[
										32598,
										32610
									],
									[
										32767,
										32779
									],
									[
										33067,
										33079
									],
									[
										33308,
										33320
									],
									[
										33585,
										33597
									],
									[
										33724,
										33736
									],
									[
										33955,
										33967
									],
									[
										34261,
										34273
									],
									[
										34486,
										34498
									],
									[
										34714,
										34726
									],
									[
										34938,
										34950
									],
									[
										35282,
										35294
									],
									[
										35450,
										35462
									],
									[
										35681,
										35693
									],
									[
										35981,
										35993
									],
									[
										36256,
										36268
									],
									[
										36416,
										36428
									],
									[
										36662,
										36674
									],
									[
										36978,
										36990
									],
									[
										37184,
										37196
									],
									[
										37314,
										37326
									],
									[
										37556,
										37568
									],
									[
										37786,
										37798
									],
									[
										38161,
										38173
									],
									[
										38490,
										38502
									],
									[
										38635,
										38647
									],
									[
										38775,
										38787
									],
									[
										38917,
										38929
									],
									[
										39068,
										39080
									],
									[
										39219,
										39231
									],
									[
										39371,
										39383
									],
									[
										39542,
										39554
									],
									[
										39737,
										39749
									],
									[
										39877,
										39889
									],
									[
										40021,
										40033
									],
									[
										40168,
										40180
									],
									[
										40315,
										40327
									],
									[
										40432,
										40444
									],
									[
										40805,
										40817
									],
									[
										41120,
										41132
									],
									[
										41319,
										41331
									],
									[
										41515,
										41527
									],
									[
										41897,
										41909
									],
									[
										42222,
										42234
									],
									[
										42599,
										42611
									],
									[
										42918,
										42930
									],
									[
										43112,
										43124
									],
									[
										43339,
										43351
									],
									[
										43552,
										43564
									],
									[
										43973,
										43985
									],
									[
										44224,
										44236
									],
									[
										44355,
										44367
									],
									[
										44442,
										44454
									],
									[
										44653,
										44665
									],
									[
										44730,
										44742
									],
									[
										44939,
										44951
									],
									[
										45062,
										45074
									],
									[
										45120,
										45132
									],
									[
										45179,
										45191
									],
									[
										45289,
										45301
									],
									[
										45437,
										45449
									],
									[
										45483,
										45495
									],
									[
										45675,
										45687
									],
									[
										45808,
										45820
									],
									[
										45938,
										45950
									],
									[
										46057,
										46069
									],
									[
										46213,
										46225
									],
									[
										46373,
										46385
									],
									[
										46535,
										46547
									],
									[
										46588,
										46600
									],
									[
										46720,
										46732
									],
									[
										46936,
										46948
									],
									[
										47110,
										47122
									],
									[
										47170,
										47182
									],
									[
										47358,
										47370
									],
									[
										47535,
										47547
									],
									[
										47725,
										47737
									],
									[
										47764,
										47776
									],
									[
										47920,
										47932
									],
									[
										47973,
										47985
									],
									[
										48002,
										48014
									],
									[
										48127,
										48139
									],
									[
										48291,
										48303
									],
									[
										48343,
										48355
									],
									[
										48475,
										48487
									],
									[
										48652,
										48664
									],
									[
										48829,
										48841
									],
									[
										49002,
										49014
									],
									[
										49184,
										49196
									],
									[
										49341,
										49353
									],
									[
										49513,
										49525
									],
									[
										49622,
										49634
									],
									[
										49791,
										49803
									],
									[
										49844,
										49856
									],
									[
										49976,
										49988
									],
									[
										50036,
										50048
									],
									[
										50177,
										50189
									],
									[
										50355,
										50367
									],
									[
										50422,
										50434
									],
									[
										50653,
										50665
									],
									[
										50841,
										50853
									],
									[
										50979,
										50991
									],
									[
										51271,
										51283
									],
									[
										51467,
										51479
									],
									[
										51741,
										51753
									],
									[
										52026,
										52038
									],
									[
										52303,
										52315
									],
									[
										52583,
										52595
									],
									[
										52653,
										52665
									],
									[
										52861,
										52873
									],
									[
										53159,
										53171
									],
									[
										53382,
										53394
									],
									[
										53541,
										53553
									],
									[
										53674,
										53686
									],
									[
										53822,
										53834
									],
									[
										53996,
										54008
									],
									[
										54182,
										54194
									],
									[
										54245,
										54257
									],
									[
										54434,
										54446
									],
									[
										54543,
										54555
									],
									[
										54579,
										54591
									],
									[
										54670,
										54682
									],
									[
										54756,
										54768
									],
									[
										54786,
										54798
									],
									[
										55001,
										55013
									],
									[
										55078,
										55090
									],
									[
										55284,
										55296
									],
									[
										55407,
										55419
									],
									[
										55465,
										55477
									],
									[
										55524,
										55536
									],
									[
										55634,
										55646
									],
									[
										55782,
										55794
									],
									[
										55828,
										55840
									],
									[
										56020,
										56032
									],
									[
										56153,
										56165
									],
									[
										56283,
										56295
									],
									[
										56402,
										56414
									],
									[
										56558,
										56570
									],
									[
										56718,
										56730
									],
									[
										56880,
										56892
									],
									[
										56933,
										56945
									],
									[
										57065,
										57077
									],
									[
										57281,
										57293
									],
									[
										57455,
										57467
									],
									[
										57515,
										57527
									],
									[
										57703,
										57715
									],
									[
										57880,
										57892
									],
									[
										58070,
										58082
									],
									[
										58109,
										58121
									],
									[
										58273,
										58285
									],
									[
										58326,
										58338
									],
									[
										58355,
										58367
									],
									[
										58480,
										58492
									],
									[
										58644,
										58656
									],
									[
										58778,
										58790
									],
									[
										58951,
										58963
									],
									[
										59133,
										59145
									],
									[
										59290,
										59302
									],
									[
										59462,
										59474
									],
									[
										59571,
										59583
									],
									[
										59740,
										59752
									],
									[
										59793,
										59805
									],
									[
										59925,
										59937
									],
									[
										59985,
										59997
									],
									[
										60126,
										60138
									],
									[
										60304,
										60316
									],
									[
										60371,
										60383
									],
									[
										60602,
										60614
									],
									[
										60790,
										60802
									],
									[
										60928,
										60940
									],
									[
										61220,
										61232
									],
									[
										61416,
										61428
									],
									[
										61690,
										61702
									],
									[
										61975,
										61987
									],
									[
										62252,
										62264
									],
									[
										62532,
										62544
									],
									[
										62602,
										62614
									],
									[
										62810,
										62822
									],
									[
										63108,
										63120
									],
									[
										63331,
										63343
									],
									[
										63490,
										63502
									],
									[
										63623,
										63635
									],
									[
										63771,
										63783
									],
									[
										63945,
										63957
									],
									[
										64131,
										64143
									],
									[
										64194,
										64206
									],
									[
										64383,
										64395
									],
									[
										64602,
										64614
									],
									[
										64679,
										64691
									],
									[
										64782,
										64794
									],
									[
										64884,
										64896
									],
									[
										65046,
										65058
									],
									[
										65367,
										65379
									],
									[
										65780,
										65792
									],
									[
										66243,
										66255
									],
									[
										66735,
										66747
									],
									[
										67169,
										67181
									],
									[
										67603,
										67615
									],
									[
										67881,
										67893
									],
									[
										68053,
										68065
									],
									[
										68160,
										68172
									],
									[
										68313,
										68325
									],
									[
										68470,
										68482
									],
									[
										68674,
										68686
									],
									[
										68732,
										68744
									],
									[
										68971,
										68983
									],
									[
										69323,
										69335
									],
									[
										69546,
										69558
									],
									[
										69786,
										69798
									],
									[
										69959,
										69971
									],
									[
										70225,
										70237
									],
									[
										70305,
										70317
									],
									[
										70530,
										70542
									],
									[
										70569,
										70581
									],
									[
										70643,
										70655
									],
									[
										70695,
										70707
									],
									[
										70744,
										70756
									],
									[
										70876,
										70888
									],
									[
										70957,
										70969
									],
									[
										71013,
										71025
									],
									[
										71130,
										71142
									],
									[
										71237,
										71249
									],
									[
										71296,
										71308
									],
									[
										71331,
										71343
									],
									[
										71457,
										71469
									],
									[
										71681,
										71693
									],
									[
										71768,
										71780
									],
									[
										71885,
										71897
									],
									[
										72270,
										72282
									],
									[
										72539,
										72551
									],
									[
										72918,
										72930
									],
									[
										73186,
										73198
									],
									[
										73805,
										73824
									],
									[
										73973,
										73992
									],
									[
										74192,
										74211
									],
									[
										74490,
										74509
									],
									[
										74805,
										74824
									],
									[
										75111,
										75130
									],
									[
										75247,
										75266
									],
									[
										75496,
										75515
									],
									[
										75785,
										75804
									],
									[
										76048,
										76067
									],
									[
										76311,
										76330
									],
									[
										76449,
										76468
									],
									[
										76595,
										76614
									],
									[
										76740,
										76759
									],
									[
										76882,
										76901
									],
									[
										77039,
										77058
									],
									[
										77214,
										77233
									],
									[
										77400,
										77419
									],
									[
										77682,
										77701
									],
									[
										77923,
										77942
									],
									[
										78200,
										78219
									],
									[
										78339,
										78358
									],
									[
										78570,
										78589
									],
									[
										78876,
										78895
									],
									[
										79101,
										79120
									],
									[
										79329,
										79348
									],
									[
										79553,
										79572
									],
									[
										79788,
										79807
									],
									[
										80019,
										80038
									],
									[
										80319,
										80338
									],
									[
										80594,
										80613
									],
									[
										80754,
										80773
									],
									[
										81000,
										81019
									],
									[
										81316,
										81335
									],
									[
										81522,
										81541
									],
									[
										81652,
										81671
									],
									[
										81894,
										81913
									],
									[
										82124,
										82143
									],
									[
										82499,
										82518
									],
									[
										82828,
										82847
									],
									[
										82973,
										82992
									],
									[
										83113,
										83132
									],
									[
										83255,
										83274
									],
									[
										83406,
										83425
									],
									[
										83557,
										83576
									],
									[
										83709,
										83728
									],
									[
										83880,
										83899
									],
									[
										84075,
										84094
									],
									[
										84215,
										84234
									],
									[
										84359,
										84378
									],
									[
										84506,
										84525
									],
									[
										84653,
										84672
									],
									[
										84770,
										84789
									],
									[
										85143,
										85162
									],
									[
										85456,
										85475
									],
									[
										85960,
										85979
									],
									[
										86339,
										86350
									],
									[
										86353,
										86364
									],
									[
										86383,
										86394
									],
									[
										86397,
										86408
									],
									[
										86427,
										86438
									],
									[
										86441,
										86452
									],
									[
										86471,
										86482
									],
									[
										86485,
										86496
									],
									[
										86515,
										86526
									],
									[
										86529,
										86540
									],
									[
										86759,
										86770
									],
									[
										86951,
										86962
									],
									[
										87110,
										87121
									],
									[
										87427,
										87438
									],
									[
										87619,
										87630
									],
									[
										87778,
										87789
									],
									[
										88070,
										88081
									],
									[
										88184,
										88195
									],
									[
										88644,
										88655
									],
									[
										88713,
										88724
									],
									[
										88955,
										88966
									],
									[
										89249,
										89260
									],
									[
										89328,
										89339
									],
									[
										89589,
										89600
									],
									[
										89883,
										89894
									],
									[
										90031,
										90042
									],
									[
										90449,
										90463
									],
									[
										90762,
										90776
									],
									[
										91393,
										91405
									],
									[
										91566,
										91578
									],
									[
										91777,
										91789
									],
									[
										91997,
										92009
									],
									[
										92185,
										92197
									],
									[
										92460,
										92472
									],
									[
										92674,
										92686
									],
									[
										92946,
										92958
									],
									[
										93172,
										93184
									],
									[
										93518,
										93530
									],
									[
										93740,
										93752
									],
									[
										94044,
										94056
									],
									[
										94191,
										94203
									],
									[
										94463,
										94475
									],
									[
										94600,
										94612
									],
									[
										94825,
										94837
									],
									[
										94934,
										94946
									],
									[
										95087,
										95099
									],
									[
										95383,
										95395
									],
									[
										95477,
										95489
									],
									[
										95627,
										95639
									],
									[
										95843,
										95855
									],
									[
										96053,
										96065
									],
									[
										96246,
										96258
									],
									[
										96456,
										96468
									],
									[
										96583,
										96595
									],
									[
										96787,
										96799
									],
									[
										97024,
										97036
									],
									[
										97194,
										97206
									],
									[
										97420,
										97432
									],
									[
										97575,
										97587
									],
									[
										97713,
										97725
									],
									[
										97846,
										97858
									],
									[
										98070,
										98082
									],
									[
										98306,
										98318
									],
									[
										98549,
										98561
									],
									[
										98840,
										98852
									],
									[
										99261,
										99273
									],
									[
										99444,
										99456
									],
									[
										99575,
										99587
									],
									[
										99737,
										99749
									],
									[
										99928,
										99940
									],
									[
										100137,
										100149
									],
									[
										100266,
										100278
									],
									[
										100508,
										100520
									],
									[
										100707,
										100719
									],
									[
										101058,
										101070
									],
									[
										101434,
										101446
									],
									[
										101582,
										101594
									],
									[
										101759,
										101771
									],
									[
										101906,
										101918
									],
									[
										102116,
										102128
									],
									[
										102375,
										102387
									],
									[
										102585,
										102597
									],
									[
										102820,
										102832
									],
									[
										103072,
										103084
									],
									[
										103290,
										103302
									],
									[
										103444,
										103456
									],
									[
										103632,
										103644
									],
									[
										103856,
										103868
									],
									[
										104011,
										104023
									],
									[
										104289,
										104301
									],
									[
										104460,
										104472
									],
									[
										104663,
										104675
									],
									[
										104854,
										104866
									],
									[
										105023,
										105035
									],
									[
										105189,
										105201
									],
									[
										105329,
										105341
									],
									[
										105520,
										105532
									],
									[
										105781,
										105793
									],
									[
										105962,
										105974
									],
									[
										106175,
										106187
									],
									[
										106267,
										106279
									],
									[
										106449,
										106461
									],
									[
										106569,
										106581
									],
									[
										106795,
										106807
									],
									[
										107238,
										107250
									],
									[
										107454,
										107466
									],
									[
										107641,
										107653
									],
									[
										107863,
										107875
									],
									[
										108208,
										108220
									],
									[
										108348,
										108360
									],
									[
										108603,
										108615
									],
									[
										108854,
										108866
									],
									[
										109029,
										109041
									],
									[
										109300,
										109312
									],
									[
										109550,
										109562
									],
									[
										109644,
										109656
									],
									[
										109790,
										109802
									],
									[
										109953,
										109965
									],
									[
										110102,
										110114
									],
									[
										110450,
										110462
									],
									[
										110583,
										110595
									],
									[
										110743,
										110755
									],
									[
										110952,
										110964
									],
									[
										111143,
										111155
									],
									[
										111292,
										111304
									],
									[
										111546,
										111558
									],
									[
										111757,
										111769
									],
									[
										112021,
										112033
									],
									[
										112202,
										112214
									],
									[
										112438,
										112450
									],
									[
										112651,
										112663
									],
									[
										112828,
										112840
									],
									[
										113030,
										113042
									],
									[
										113184,
										113196
									],
									[
										113381,
										113393
									],
									[
										113510,
										113522
									],
									[
										113723,
										113735
									],
									[
										113813,
										113825
									],
									[
										113959,
										113971
									],
									[
										114082,
										114094
									],
									[
										114313,
										114325
									],
									[
										114526,
										114538
									],
									[
										114676,
										114688
									],
									[
										114850,
										114862
									],
									[
										115088,
										115100
									],
									[
										115320,
										115332
									],
									[
										115462,
										115474
									],
									[
										115565,
										115577
									],
									[
										115830,
										115842
									],
									[
										116046,
										116058
									],
									[
										116252,
										116264
									],
									[
										116472,
										116484
									],
									[
										116666,
										116678
									],
									[
										116884,
										116896
									],
									[
										117085,
										117097
									],
									[
										117287,
										117299
									],
									[
										117542,
										117554
									],
									[
										117728,
										117740
									],
									[
										118004,
										118016
									],
									[
										118173,
										118185
									],
									[
										118305,
										118317
									],
									[
										118540,
										118552
									],
									[
										118690,
										118702
									],
									[
										118965,
										118977
									],
									[
										119195,
										119207
									],
									[
										119465,
										119477
									],
									[
										119634,
										119646
									],
									[
										120016,
										120028
									],
									[
										120342,
										120354
									],
									[
										120494,
										120506
									],
									[
										120720,
										120732
									],
									[
										120899,
										120911
									],
									[
										121109,
										121121
									],
									[
										121384,
										121396
									],
									[
										121553,
										121565
									],
									[
										121768,
										121780
									],
									[
										122046,
										122058
									],
									[
										122420,
										122432
									],
									[
										122797,
										122809
									],
									[
										122995,
										123007
									],
									[
										123180,
										123192
									],
									[
										123379,
										123391
									],
									[
										123548,
										123560
									],
									[
										123794,
										123806
									],
									[
										123923,
										123935
									],
									[
										124161,
										124173
									],
									[
										124540,
										124552
									],
									[
										124711,
										124723
									],
									[
										124954,
										124966
									],
									[
										125174,
										125186
									],
									[
										125344,
										125356
									],
									[
										125517,
										125529
									],
									[
										125575,
										125587
									],
									[
										125748,
										125760
									],
									[
										125916,
										125928
									],
									[
										126158,
										126170
									],
									[
										126292,
										126304
									],
									[
										126493,
										126505
									],
									[
										126606,
										126618
									],
									[
										126810,
										126822
									],
									[
										126920,
										126932
									],
									[
										127052,
										127064
									],
									[
										127225,
										127237
									],
									[
										127520,
										127532
									],
									[
										127817,
										127829
									],
									[
										127895,
										127907
									],
									[
										128251,
										128263
									],
									[
										128472,
										128484
									],
									[
										128602,
										128614
									],
									[
										128928,
										128940
									],
									[
										129078,
										129090
									],
									[
										129230,
										129242
									],
									[
										129527,
										129539
									],
									[
										129738,
										129750
									],
									[
										129951,
										129963
									],
									[
										130099,
										130111
									],
									[
										130213,
										130225
									],
									[
										130524,
										130536
									],
									[
										130784,
										130796
									],
									[
										131048,
										131060
									],
									[
										131176,
										131188
									],
									[
										131498,
										131510
									],
									[
										131749,
										131761
									],
									[
										132179,
										132191
									],
									[
										132342,
										132354
									],
									[
										132507,
										132519
									],
									[
										132710,
										132722
									],
									[
										132878,
										132890
									],
									[
										133081,
										133093
									],
									[
										133333,
										133345
									],
									[
										133534,
										133546
									],
									[
										134052,
										134064
									],
									[
										134227,
										134239
									],
									[
										134536,
										134548
									],
									[
										134813,
										134825
									],
									[
										135053,
										135065
									],
									[
										135242,
										135254
									],
									[
										135383,
										135395
									],
									[
										135509,
										135521
									],
									[
										135631,
										135643
									],
									[
										135787,
										135799
									],
									[
										136086,
										136098
									],
									[
										136463,
										136475
									],
									[
										136575,
										136587
									],
									[
										136880,
										136892
									],
									[
										137146,
										137158
									],
									[
										137419,
										137431
									],
									[
										137590,
										137602
									],
									[
										137900,
										137912
									],
									[
										138182,
										138194
									],
									[
										138390,
										138402
									],
									[
										138553,
										138565
									],
									[
										138704,
										138716
									],
									[
										138862,
										138874
									],
									[
										139118,
										139130
									],
									[
										139468,
										139480
									],
									[
										139706,
										139718
									],
									[
										139987,
										139999
									],
									[
										140192,
										140204
									],
									[
										140354,
										140366
									],
									[
										140522,
										140534
									],
									[
										140669,
										140681
									],
									[
										140968,
										140980
									],
									[
										141137,
										141149
									],
									[
										141303,
										141315
									],
									[
										141597,
										141609
									],
									[
										141776,
										141788
									],
									[
										141987,
										141999
									],
									[
										142485,
										142497
									],
									[
										142609,
										142621
									],
									[
										142726,
										142738
									],
									[
										143223,
										143238
									],
									[
										143480,
										143495
									],
									[
										143753,
										143768
									],
									[
										143967,
										143982
									],
									[
										144196,
										144211
									],
									[
										144502,
										144517
									],
									[
										144715,
										144730
									],
									[
										144999,
										145014
									],
									[
										145093,
										145108
									],
									[
										145243,
										145258
									],
									[
										145445,
										145460
									],
									[
										145657,
										145672
									],
									[
										145887,
										145902
									],
									[
										146018,
										146033
									],
									[
										146151,
										146166
									],
									[
										146443,
										146458
									],
									[
										146612,
										146627
									],
									[
										146803,
										146818
									],
									[
										147012,
										147027
									],
									[
										147188,
										147203
									],
									[
										147480,
										147495
									],
									[
										147859,
										147874
									],
									[
										148111,
										148126
									],
									[
										148329,
										148344
									],
									[
										148573,
										148588
									],
									[
										148734,
										148749
									],
									[
										148995,
										149010
									],
									[
										149176,
										149191
									],
									[
										149389,
										149404
									],
									[
										149481,
										149496
									],
									[
										149793,
										149808
									],
									[
										149980,
										149995
									],
									[
										150345,
										150360
									],
									[
										150536,
										150551
									],
									[
										150741,
										150756
									],
									[
										150995,
										151010
									],
									[
										151206,
										151221
									],
									[
										151470,
										151485
									],
									[
										151716,
										151731
									],
									[
										151888,
										151903
									],
									[
										152066,
										152081
									],
									[
										152297,
										152312
									],
									[
										152496,
										152511
									],
									[
										152761,
										152776
									],
									[
										152977,
										152992
									],
									[
										153168,
										153183
									],
									[
										153386,
										153401
									],
									[
										153701,
										153716
									],
									[
										153985,
										154000
									],
									[
										154155,
										154170
									],
									[
										154430,
										154445
									],
									[
										154660,
										154675
									],
									[
										154930,
										154945
									],
									[
										155099,
										155114
									],
									[
										155481,
										155496
									],
									[
										155718,
										155733
									],
									[
										155932,
										155947
									],
									[
										156101,
										156116
									],
									[
										156433,
										156448
									],
									[
										156635,
										156650
									],
									[
										156873,
										156888
									],
									[
										157224,
										157239
									],
									[
										157394,
										157409
									],
									[
										157567,
										157582
									],
									[
										157625,
										157640
									],
									[
										157781,
										157796
									],
									[
										157926,
										157941
									],
									[
										158149,
										158164
									],
									[
										158409,
										158424
									],
									[
										158617,
										158632
									],
									[
										158943,
										158958
									],
									[
										159164,
										159179
									],
									[
										159294,
										159309
									],
									[
										159620,
										159635
									],
									[
										159908,
										159923
									],
									[
										160121,
										160136
									],
									[
										160443,
										160458
									],
									[
										160713,
										160728
									],
									[
										161010,
										161025
									],
									[
										161213,
										161228
									],
									[
										161381,
										161396
									],
									[
										161561,
										161576
									],
									[
										161886,
										161901
									],
									[
										162174,
										162189
									],
									[
										162414,
										162429
									],
									[
										162623,
										162638
									],
									[
										162922,
										162937
									],
									[
										163299,
										163314
									],
									[
										163565,
										163580
									],
									[
										163831,
										163846
									],
									[
										164104,
										164119
									],
									[
										164278,
										164293
									],
									[
										164429,
										164444
									],
									[
										164714,
										164729
									],
									[
										164952,
										164967
									],
									[
										165233,
										165248
									],
									[
										165403,
										165418
									],
									[
										165690,
										165705
									],
									[
										166036,
										166051
									],
									[
										166428,
										166439
									],
									[
										166482,
										166493
									],
									[
										167242,
										167261
									],
									[
										167461,
										167480
									],
									[
										167627,
										167646
									],
									[
										167876,
										167895
									],
									[
										168077,
										168096
									],
									[
										168287,
										168306
									],
									[
										168521,
										168540
									],
									[
										168697,
										168716
									],
									[
										168939,
										168958
									],
									[
										169202,
										169221
									],
									[
										169455,
										169474
									],
									[
										169638,
										169657
									],
									[
										169822,
										169841
									],
									[
										170005,
										170024
									],
									[
										170189,
										170208
									],
									[
										170369,
										170388
									],
									[
										170610,
										170629
									],
									[
										170876,
										170895
									],
									[
										171056,
										171075
									],
									[
										171234,
										171253
									],
									[
										171554,
										171573
									],
									[
										171954,
										171973
									],
									[
										172123,
										172142
									],
									[
										172522,
										172541
									],
									[
										172916,
										172935
									],
									[
										173095,
										173114
									],
									[
										173282,
										173301
									],
									[
										173425,
										173444
									],
									[
										173585,
										173604
									],
									[
										173783,
										173802
									],
									[
										173980,
										173999
									],
									[
										174168,
										174187
									],
									[
										174355,
										174374
									],
									[
										174518,
										174537
									],
									[
										174680,
										174699
									],
									[
										174835,
										174854
									],
									[
										175015,
										175034
									],
									[
										175168,
										175187
									],
									[
										175351,
										175370
									],
									[
										175539,
										175558
									],
									[
										176228,
										176256
									],
									[
										176660,
										176688
									],
									[
										177378,
										177408
									],
									[
										177752,
										177782
									]
								],
								"scope": ""
							}
						},
						"selection":
						[
							[
								177286,
								177286
							]
						],
						"settings":
						{
							"detect_indentation": false,
							"line_numbers": false,
							"output_tag": 18,
							"result_base_dir": "",
							"result_file_regex": "^([A-Za-z\\\\/<].*):$",
							"result_line_regex": "^ +([0-9]+):",
							"scroll_past_end": true,
							"syntax": "Packages/Default/Find Results.hidden-tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 69570.0,
						"zoom_level": 1.0
					},
					"stack_index": 8,
					"type": "text"
				},
				{
					"buffer": 36,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/toolbar/layout.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 45899,
						"regions":
						{
						},
						"selection":
						[
							[
								1318,
								1318
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 4,
					"type": "text"
				},
				{
					"buffer": 37,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/inline-edit-actions.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 6627,
						"regions":
						{
						},
						"selection":
						[
							[
								1073,
								1058
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 5,
					"type": "text"
				},
				{
					"buffer": 38,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/contacts-index.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 53745,
						"regions":
						{
						},
						"selection":
						[
							[
								12019,
								12019
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 4751.0,
						"zoom_level": 1.0
					},
					"stack_index": 9,
					"type": "text"
				},
				{
					"buffer": 39,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/attendees.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 121111,
						"regions":
						{
						},
						"selection":
						[
							[
								30972,
								30972
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 13235.0,
						"zoom_level": 1.0
					},
					"stack_index": 10,
					"type": "text"
				},
				{
					"buffer": 40,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/admin.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 9464,
						"regions":
						{
						},
						"selection":
						[
							[
								596,
								596
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 11,
					"type": "text"
				},
				{
					"buffer": 41,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/admin/event_types.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7411,
						"regions":
						{
						},
						"selection":
						[
							[
								4190,
								4190
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 1173.0,
						"zoom_level": 1.0
					},
					"stack_index": 12,
					"type": "text"
				},
				{
					"buffer": 42,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/blank-group.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1118,
						"regions":
						{
						},
						"selection":
						[
							[
								37,
								37
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 21,
					"type": "text"
				},
				{
					"buffer": 43,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/blank-group.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1118,
						"regions":
						{
						},
						"selection":
						[
							[
								271,
								271
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 22,
					"type": "text"
				},
				{
					"buffer": 44,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2886,
						"regions":
						{
						},
						"selection":
						[
							[
								1622,
								1622
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 6,
					"type": "text"
				},
				{
					"buffer": 45,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/add-new-section.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 9275,
						"regions":
						{
						},
						"selection":
						[
							[
								5724,
								5724
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 3121.0,
						"zoom_level": 1.0
					},
					"stack_index": 3,
					"type": "text"
				},
				{
					"buffer": 46,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-countdown.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2176,
						"regions":
						{
						},
						"selection":
						[
							[
								913,
								913
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 18,
					"type": "text"
				},
				{
					"buffer": 47,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/splash/settings-modal.css",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 23463,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/CSS/CSS.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 59,
					"type": "text"
				},
				{
					"buffer": 48,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/venue-search.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 4740,
						"regions":
						{
						},
						"selection":
						[
							[
								4283,
								4283
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 128.0,
						"zoom_level": 1.0
					},
					"stack_index": 60,
					"type": "text"
				},
				{
					"buffer": 49,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/map-embed.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3836,
						"regions":
						{
						},
						"selection":
						[
							[
								2519,
								2519
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 301.0,
						"zoom_level": 1.0
					},
					"stack_index": 61,
					"type": "text"
				},
				{
					"buffer": 50,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/address_book_controller.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 99263,
						"regions":
						{
						},
						"selection":
						[
							[
								47482,
								47494
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 62,
					"type": "text"
				},
				{
					"buffer": 51,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/api_controller.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 129553,
						"regions":
						{
						},
						"selection":
						[
							[
								2841,
								2841
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 63,
					"type": "text"
				},
				{
					"buffer": 52,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/photos_controller.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 11599,
						"regions":
						{
						},
						"selection":
						[
							[
								11128,
								11140
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 64,
					"type": "text"
				},
				{
					"buffer": 53,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/event-datepicker.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 4167,
						"regions":
						{
						},
						"selection":
						[
							[
								2910,
								2910
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 289.0,
						"zoom_level": 1.0
					},
					"stack_index": 65,
					"type": "text"
				},
				{
					"buffer": 54,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/splash-elements.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 68476,
						"regions":
						{
						},
						"selection":
						[
							[
								68154,
								68154
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 26593.0,
						"zoom_level": 1.0
					},
					"stack_index": 14,
					"type": "text"
				},
				{
					"buffer": 55,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/legacy/splash/finetune.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 56751,
						"regions":
						{
						},
						"selection":
						[
							[
								10412,
								10425
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 2506.0,
						"zoom_level": 1.0
					},
					"stack_index": 66,
					"type": "text"
				},
				{
					"buffer": 56,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/event-form.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 6717,
						"regions":
						{
						},
						"selection":
						[
							[
								6151,
								6151
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 1014.0,
						"zoom_level": 1.0
					},
					"stack_index": 67,
					"type": "text"
				},
				{
					"buffer": 57,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/create-form-nu.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7014,
						"regions":
						{
						},
						"selection":
						[
							[
								4967,
								4967
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 1164.0,
						"zoom_level": 1.0
					},
					"stack_index": 68,
					"type": "text"
				},
				{
					"buffer": 58,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/styl/splash-layout.styl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 69647,
						"regions":
						{
						},
						"selection":
						[
							[
								25034,
								25034
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/Stylus/editors/Stylus.tmbundle/Syntaxes/Stylus.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 22490.0,
						"zoom_level": 1.0
					},
					"stack_index": 17,
					"type": "text"
				},
				{
					"buffer": 59,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/eventfeed/legacy-splash-layout.css",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 5537,
						"regions":
						{
						},
						"selection":
						[
							[
								366,
								366
							]
						],
						"settings":
						{
							"syntax": "Packages/CSS/CSS.tmLanguage",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 69,
					"type": "text"
				},
				{
					"buffer": 60,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/splash/splash-layout-legacy-2.css",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 61401,
						"regions":
						{
						},
						"selection":
						[
							[
								899,
								899
							]
						],
						"settings":
						{
							"syntax": "Packages/CSS/CSS.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 454.0,
						"zoom_level": 1.0
					},
					"stack_index": 70,
					"type": "text"
				},
				{
					"buffer": 61,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/styl/user-elements.styl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 151570,
						"regions":
						{
						},
						"selection":
						[
							[
								108430,
								108430
							]
						],
						"settings":
						{
							"syntax": "Packages/Stylus/editors/Stylus.tmbundle/Syntaxes/Stylus.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 92714.0,
						"zoom_level": 1.0
					},
					"stack_index": 16,
					"type": "text"
				},
				{
					"buffer": 62,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/theme-modal.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2962,
						"regions":
						{
						},
						"selection":
						[
							[
								824,
								824
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 1.0,
						"zoom_level": 1.0
					},
					"stack_index": 71,
					"type": "text"
				},
				{
					"buffer": 63,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/splash_controller.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 66871,
						"regions":
						{
						},
						"selection":
						[
							[
								8702,
								8708
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": -0.0,
						"translation.y": 2924.0,
						"zoom_level": 1.0
					},
					"stack_index": 23,
					"type": "text"
				},
				{
					"buffer": 64,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/contacts/view.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 26979,
						"regions":
						{
						},
						"selection":
						[
							[
								17139,
								17139
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 9537.0,
						"zoom_level": 1.0
					},
					"stack_index": 72,
					"type": "text"
				},
				{
					"buffer": 65,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/app_model.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 21501,
						"regions":
						{
						},
						"selection":
						[
							[
								20805,
								20805
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.tmLanguage"
						},
						"translation.x": -0.0,
						"translation.y": 9102.0,
						"zoom_level": 1.0
					},
					"stack_index": 73,
					"type": "text"
				},
				{
					"buffer": 66,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/finetune.css",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 66989,
						"regions":
						{
						},
						"selection":
						[
							[
								28946,
								28946
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/CSS/CSS.tmLanguage",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": -0.0,
						"translation.y": 14912.0,
						"zoom_level": 1.0
					},
					"stack_index": 74,
					"type": "text"
				},
				{
					"buffer": 67,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/config/core.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7485,
						"regions":
						{
						},
						"selection":
						[
							[
								6262,
								6262
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 75,
					"type": "text"
				},
				{
					"buffer": 68,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/layouts/subsite-layout.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 18871,
						"regions":
						{
						},
						"selection":
						[
							[
								1898,
								1898
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 76,
					"type": "text"
				},
				{
					"buffer": 69,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/vendors/debug.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 575,
						"regions":
						{
						},
						"selection":
						[
							[
								110,
								110
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 77,
					"type": "text"
				},
				{
					"buffer": 70,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/config/database.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1506,
						"regions":
						{
						},
						"selection":
						[
							[
								269,
								269
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 27,
					"type": "text"
				},
				{
					"buffer": 71,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/splash/simple-page.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 24095,
						"regions":
						{
						},
						"selection":
						[
							[
								2075,
								2075
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 78,
					"type": "text"
				},
				{
					"buffer": 72,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/events_controller.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 301297,
						"regions":
						{
						},
						"selection":
						[
							[
								188058,
								188058
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 79,
					"type": "text"
				},
				{
					"buffer": 13,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/models/event.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 147580,
						"regions":
						{
						},
						"selection":
						[
							[
								3657,
								3657
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": -0.0,
						"translation.y": 1244.0,
						"zoom_level": 1.0
					},
					"stack_index": 80,
					"type": "text"
				},
				{
					"buffer": 73,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/events/create_flow_b.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7896,
						"regions":
						{
						},
						"selection":
						[
							[
								1101,
								1108
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 81,
					"type": "text"
				},
				{
					"buffer": 74,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/social-links.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2124,
						"regions":
						{
						},
						"selection":
						[
							[
								1404,
								1404
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 15,
					"type": "text"
				},
				{
					"buffer": 75,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/sites/view.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 29101,
						"regions":
						{
						},
						"selection":
						[
							[
								22249,
								22263
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 7566.0,
						"zoom_level": 1.0
					},
					"stack_index": 20,
					"type": "text"
				},
				{
					"buffer": 76,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/create.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 39035,
						"regions":
						{
						},
						"selection":
						[
							[
								2865,
								2865
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 1085.0,
						"zoom_level": 1.0
					},
					"stack_index": 82,
					"type": "text"
				},
				{
					"buffer": 77,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/event-create.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3551,
						"regions":
						{
						},
						"selection":
						[
							[
								921,
								921
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 83,
					"type": "text"
				},
				{
					"buffer": 78,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/new-create.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 60914,
						"regions":
						{
						},
						"selection":
						[
							[
								47620,
								47620
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 84,
					"type": "text"
				}
			]
		},
		{
			"selected": 11,
			"sheets":
			[
				{
					"buffer": 25,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/models/event_setting.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 93833,
						"regions":
						{
						},
						"selection":
						[
							[
								5984,
								5984
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 85,
					"type": "text"
				},
				{
					"buffer": 14,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/finetune.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 490057,
						"regions":
						{
						},
						"selection":
						[
							[
								489368,
								489368
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 218143.0,
						"zoom_level": 1.0
					},
					"stack_index": 2,
					"type": "text"
				},
				{
					"buffer": 79,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/app_controller.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 71197,
						"regions":
						{
						},
						"selection":
						[
							[
								70503,
								70503
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 24559.0,
						"zoom_level": 1.0
					},
					"stack_index": 86,
					"type": "text"
				},
				{
					"buffer": 17,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/settings/share-settings.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7560,
						"regions":
						{
						},
						"selection":
						[
							[
								1370,
								1370
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 87,
					"type": "text"
				},
				{
					"buffer": 80,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/models/splash_theme.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 23764,
						"regions":
						{
						},
						"selection":
						[
							[
								2300,
								2300
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 88,
					"type": "text"
				},
				{
					"buffer": 65,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/app_model.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 21501,
						"regions":
						{
						},
						"selection":
						[
							[
								21001,
								21001
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 8929.0,
						"zoom_level": 1.0
					},
					"stack_index": 89,
					"type": "text"
				},
				{
					"buffer": 22,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/styl/settings-modal.styl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 15339,
						"regions":
						{
						},
						"selection":
						[
							[
								840,
								840
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/Stylus/editors/Stylus.tmbundle/Syntaxes/Stylus.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 90,
					"type": "text"
				},
				{
					"buffer": 61,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/styl/user-elements.styl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 151570,
						"regions":
						{
						},
						"selection":
						[
							[
								103703,
								103703
							]
						],
						"settings":
						{
							"syntax": "Packages/Stylus/editors/Stylus.tmbundle/Syntaxes/Stylus.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 91,
					"type": "text"
				},
				{
					"buffer": 32,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/sites_controller.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 112580,
						"regions":
						{
						},
						"selection":
						[
							[
								21527,
								21527
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": -0.0,
						"translation.y": 6304.0,
						"zoom_level": 1.0
					},
					"stack_index": 92,
					"type": "text"
				},
				{
					"buffer": 33,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/models/splash_feed.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 66349,
						"regions":
						{
						},
						"selection":
						[
							[
								11615,
								11615
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": -0.0,
						"translation.y": 4972.0,
						"zoom_level": 1.0
					},
					"stack_index": 93,
					"type": "text"
				},
				{
					"buffer": 81,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/models/event_rsvp.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 59416,
						"regions":
						{
						},
						"selection":
						[
							[
								16442,
								16442
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 7242.0,
						"zoom_level": 1.0
					},
					"stack_index": 94,
					"type": "text"
				},
				{
					"buffer": 54,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/splash-elements.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 68476,
						"regions":
						{
						},
						"selection":
						[
							[
								9039,
								9039
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 2687.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"type": "text"
				},
				{
					"buffer": 82,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/config/bootstrap.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 6200,
						"regions":
						{
						},
						"selection":
						[
							[
								5034,
								5034
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 1177.0,
						"zoom_level": 1.0
					},
					"stack_index": 26,
					"type": "text"
				},
				{
					"buffer": 83,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/splash/custom-block-social-links.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 743,
						"regions":
						{
						},
						"selection":
						[
							[
								742,
								742
							]
						],
						"settings":
						{
							"auto_name": "hola",
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 13,
					"type": "text"
				},
				{
					"buffer": 17,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/settings/share-settings.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7560,
						"regions":
						{
						},
						"selection":
						[
							[
								899,
								899
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 95,
					"type": "text"
				},
				{
					"buffer": 78,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/new-create.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 60914,
						"regions":
						{
						},
						"selection":
						[
							[
								48961,
								48961
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 96,
					"type": "text"
				},
				{
					"buffer": 72,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/events_controller.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 301297,
						"regions":
						{
						},
						"selection":
						[
							[
								34548,
								34548
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 97,
					"type": "text"
				},
				{
					"buffer": 75,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/sites/view.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 29101,
						"regions":
						{
						},
						"selection":
						[
							[
								20187,
								20187
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 98,
					"type": "text"
				},
				{
					"buffer": 70,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/config/database.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1506,
						"regions":
						{
						},
						"selection":
						[
							[
								693,
								693
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 99,
					"type": "text"
				},
				{
					"buffer": 84,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/models/user.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 57235,
						"regions":
						{
						},
						"selection":
						[
							[
								54987,
								54987
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 100,
					"type": "text"
				},
				{
					"buffer": 20,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/event-site.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 130635,
						"regions":
						{
						},
						"selection":
						[
							[
								128819,
								128819
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 61164.0,
						"zoom_level": 1.0
					},
					"stack_index": 101,
					"type": "text"
				},
				{
					"buffer": 29,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/toolbar/social.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 10364,
						"regions":
						{
						},
						"selection":
						[
							[
								8371,
								8371
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 2087.0,
						"zoom_level": 1.0
					},
					"stack_index": 102,
					"type": "text"
				},
				{
					"buffer": 51,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/api_controller.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 129553,
						"regions":
						{
						},
						"selection":
						[
							[
								2342,
								2342
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 624.0,
						"zoom_level": 1.0
					},
					"stack_index": 103,
					"type": "text"
				},
				{
					"buffer": 13,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/models/event.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 147580,
						"regions":
						{
						},
						"selection":
						[
							[
								142412,
								142412
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 60825.0,
						"zoom_level": 1.0
					},
					"stack_index": 29,
					"type": "text"
				},
				{
					"buffer": 85,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/addressbook/addressbook.css",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 55406,
						"regions":
						{
						},
						"selection":
						[
							[
								1115,
								1115
							]
						],
						"settings":
						{
							"syntax": "Packages/CSS/CSS.tmLanguage",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 104,
					"type": "text"
				},
				{
					"buffer": 50,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/controllers/address_book_controller.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 99263,
						"regions":
						{
						},
						"selection":
						[
							[
								46252,
								46252
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/PHP/PHP.tmLanguage",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 105,
					"type": "text"
				},
				{
					"buffer": 86,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/elements/nu-global-nav.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 17524,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 106,
					"type": "text"
				},
				{
					"buffer": 6,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/addressbook/nu-global-nav.css",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 10953,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"syntax": "Packages/CSS/CSS.tmLanguage",
							"tab_size": 2,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 107,
					"type": "text"
				},
				{
					"buffer": 87,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/addressbook/styl/nu-global-nav.styl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 6173,
						"regions":
						{
						},
						"selection":
						[
							[
								3496,
								3496
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/Stylus/editors/Stylus.tmbundle/Syntaxes/Stylus.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 108,
					"type": "text"
				},
				{
					"buffer": 68,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/layouts/subsite-layout.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 18871,
						"regions":
						{
						},
						"selection":
						[
							[
								2600,
								2600
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 109,
					"type": "text"
				},
				{
					"buffer": 22,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/css/styl/settings-modal.styl",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 15339,
						"regions":
						{
						},
						"selection":
						[
							[
								4539,
								4539
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/Stylus/editors/Stylus.tmbundle/Syntaxes/Stylus.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 2918.0,
						"zoom_level": 1.0
					},
					"stack_index": 110,
					"type": "text"
				},
				{
					"buffer": 64,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/contacts/view.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 26979,
						"regions":
						{
						},
						"selection":
						[
							[
								1624,
								1626
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 111,
					"type": "text"
				},
				{
					"buffer": 75,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/views/sites/view.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 29101,
						"regions":
						{
						},
						"selection":
						[
							[
								7870,
								7870
							]
						],
						"settings":
						{
							"history_list_is_closing": true,
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 1852.0,
						"zoom_level": 1.0
					},
					"stack_index": 112,
					"type": "text"
				},
				{
					"buffer": 18,
					"file": "/Users/guillermo/sites/oneclipboard.com/app/webroot/js/main-ui.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 30791,
						"regions":
						{
						},
						"selection":
						[
							[
								29371,
								29371
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 113,
					"type": "text"
				},
				{
					"buffer": 88,
					"file": "/Users/guillermo/sites/oneclipboard.com/cake/libs/view/elements/sql_dump.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2125,
						"regions":
						{
						},
						"selection":
						[
							[
								350,
								448
							]
						],
						"settings":
						{
							"syntax": "Packages/HTML/HTML.tmLanguage",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 51.0,
						"zoom_level": 1.0
					},
					"stack_index": 114,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 23.0
	},
	"input":
	{
		"height": 31.0
	},
	"layout":
	{
		"cells":
		[
			[
				0,
				0,
				1,
				1
			],
			[
				1,
				0,
				2,
				1
			]
		],
		"cols":
		[
			0.0,
			0.452841537611,
			1.0
		],
		"rows":
		[
			0.0,
			1.0
		]
	},
	"menu_visible": true,
	"output.find_results":
	{
		"height": 100.0
	},
	"project": "splash.sublime-project",
	"replace":
	{
		"height": 42.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"selected_items":
		[
			[
				"splashele",
				"webroot/js/splash-elements.js"
			],
			[
				"fine",
				"webroot/js/finetune.js"
			],
			[
				"addnewse",
				"views/elements/add-new-section.ctp"
			],
			[
				"",
				"webroot/js/finetune.js"
			],
			[
				"customblock",
				"views/elements/splash/custom-block.ctp"
			],
			[
				"finetu",
				"webroot/js/finetune.js"
			],
			[
				"addnew",
				"views/elements/add-new-section.ctp"
			],
			[
				"userele",
				"webroot/css/styl/user-elements.styl"
			],
			[
				"splashla",
				"webroot/css/styl/splash-layout.styl"
			],
			[
				"socialli",
				"views/elements/splash/social-links.ctp"
			],
			[
				"countdo",
				"views/elements/splash/custom-block-countdown.ctp"
			],
			[
				"splashfee",
				"models/splash_feed.php"
			],
			[
				"ftscript",
				"views/elements/splash/custom-block-ftscript.ctp"
			],
			[
				"custombutton",
				"views/elements/splash/custom-block-button.ctp"
			],
			[
				"cusotmblockco",
				"views/elements/splash/custom-block-comments.ctp"
			],
			[
				"data",
				"config/database.php"
			],
			[
				"bootstr",
				"config/bootstrap.php"
			],
			[
				"sitescon",
				"controllers/sites_controller.php"
			],
			[
				"splashlay",
				"webroot/css/styl/splash-layout.styl"
			],
			[
				"splashcom",
				"models/splash_comment.php"
			],
			[
				"splashcp",
				"models/splash_comment.php"
			],
			[
				"customcomm",
				"views/elements/splash/custom-block-comments.ctp"
			],
			[
				"event.php",
				"models/event.php"
			],
			[
				"splashcomme",
				"models/splash_comment.php"
			],
			[
				"subsi",
				"views/layouts/subsite-layout.ctp"
			],
			[
				"sharesett",
				"views/elements/settings/share-settings.ctp"
			],
			[
				"shareset",
				"views/elements/settings/share-settings.ctp"
			],
			[
				"eventsite",
				"webroot/js/event-site.js"
			],
			[
				"databa",
				"config/database.php"
			],
			[
				"nuglo",
				"webroot/css/addressbook/nu-global-nav.css"
			],
			[
				"payoutsett",
				"webroot/css/styl/payout-settings.styl"
			],
			[
				"nuglobal",
				"webroot/css/addressbook/styl/nu-global-nav.styl"
			],
			[
				"nuglobalnav",
				"webroot/css/addressbook/nu-global-nav.css"
			],
			[
				"nuglobalna",
				"views/elements/nu-global-nav.ctp"
			],
			[
				"eventcon",
				"models/event_contact.php"
			],
			[
				"addressbookcon",
				"controllers/address_book_controller.php"
			],
			[
				"addressbook",
				"webroot/css/addressbook/addressbook.css"
			],
			[
				"userpla",
				"webroot/css/styl/user-planning.styl"
			],
			[
				"userplan",
				"webroot/css/styl/user-planning.styl"
			],
			[
				"settingsmoda",
				"webroot/css/styl/settings-modal.styl"
			],
			[
				"sub",
				"views/layouts/subsite-layout.ctp"
			],
			[
				"splashlayoutlega",
				"webroot/css/splash/splash-layout-legacy-2.css"
			],
			[
				"social",
				"views/elements/splash/social-links.ctp"
			],
			[
				"editsettin",
				"views/elements/splash/edit-settings.ctp"
			],
			[
				"editsett",
				"views/events/edit_settings.ctp"
			],
			[
				"adminset",
				"views/elements/settings/admin-settings.ctp"
			],
			[
				"p",
				"controllers/photos_controller.php"
			],
			[
				"settingsmo",
				"webroot/css/styl/settings-modal.styl"
			],
			[
				"usreele",
				"webroot/css/styl/user-elements.styl"
			],
			[
				"apicon",
				"controllers/api_controller.php"
			],
			[
				"organi",
				"models/organization.php"
			],
			[
				"design",
				"views/elements/toolbar/design.ctp"
			],
			[
				"toolbarsocia",
				"views/elements/toolbar/social.ctp"
			],
			[
				"api",
				"controllers/api_controller.php"
			],
			[
				"eventsett",
				"models/event_setting.php"
			],
			[
				"toolbarso",
				"views/elements/toolbar/social.ctp"
			],
			[
				"subsite",
				"views/layouts/subsite-layout.ctp"
			],
			[
				"adminsett",
				"views/elements/settings/admin-settings.ctp"
			],
			[
				"view",
				"views/sites/view.ctp"
			],
			[
				"sociallink",
				"views/elements/splash/social-links.ctp"
			],
			[
				"events",
				"controllers/events_controller.php"
			],
			[
				"event",
				"controllers/events_controller.php"
			],
			[
				"shares",
				"views/elements/settings/share-settings.ctp"
			],
			[
				"fin",
				"webroot/js/finetune.js"
			],
			[
				"sharese",
				"views/elements/settings/share-settings.ctp"
			],
			[
				"settings",
				"webroot/css/styl/settings-modal.styl"
			],
			[
				"userplann",
				"webroot/css/styl/user-planning.styl"
			],
			[
				"finetune",
				"webroot/css/finetune.css"
			],
			[
				"userlee",
				"webroot/css/styl/user-elements.styl"
			],
			[
				"event-site",
				"webroot/js/event-site.js"
			],
			[
				"sitesview",
				"views/sites/view.ctp"
			],
			[
				"event.p",
				"models/event.php"
			],
			[
				"appmo",
				"app_model.php"
			],
			[
				"organiza",
				"models/organization.php"
			],
			[
				"user.php",
				"models/user.php"
			],
			[
				"admincon",
				"controllers/admin_controller.php"
			],
			[
				"rsvpform",
				"views/elements/splash/rsvp-form.ctp"
			],
			[
				"gallerysort",
				"webroot/css/eventfeed/gallerysort.css"
			],
			[
				"time",
				"models/time_zone.php"
			],
			[
				"mainui",
				"webroot/js/main-ui.js"
			],
			[
				"create.",
				"webroot/js/create.js"
			],
			[
				"eventcreate",
				"webroot/js/event-create.js"
			],
			[
				"timezon",
				"models/time_zone.php"
			],
			[
				"newcrea",
				"webroot/js/new-create.js"
			],
			[
				"eventrs",
				"models/event_rsvp.php"
			],
			[
				"core",
				"config/core.php"
			],
			[
				"settingsmodal",
				"webroot/css/styl/settings-modal.styl"
			],
			[
				"crea.js",
				"webroot/js/new-create.js"
			],
			[
				"create.js",
				"webroot/js/event-create.js"
			],
			[
				"create",
				"views/events/create_flow_b.ctp"
			],
			[
				"eventcontr",
				"controllers/events_controller.php"
			],
			[
				"photoscon",
				"controllers/photos_controller.php"
			],
			[
				"eventscon",
				"controllers/events_controller.php"
			],
			[
				"address",
				"controllers/address_book_controller.php"
			],
			[
				"appcon",
				"app_controller.php"
			],
			[
				"appmodel",
				"app_model.php"
			],
			[
				"splashcon",
				"controllers/splash_controller.php"
			],
			[
				"splasht",
				"models/splash_theme.php"
			],
			[
				"userelemen",
				"webroot/css/splash/user-elements.css"
			],
			[
				"finetune.js",
				"webroot/js/finetune.js"
			],
			[
				"finetun",
				"webroot/css/finetune.css"
			],
			[
				"debu",
				"vendors/debug.php"
			],
			[
				"sites",
				"views/sites/view.ctp"
			],
			[
				"splashthe",
				"models/splash_theme.php"
			],
			[
				"couchmap",
				"public/css/couchmap.css"
			]
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 0.0,
		"selected_items":
		[
		],
		"width": 0.0
	},
	"select_symbol":
	{
		"height": 0.0,
		"selected_items":
		[
		],
		"width": 0.0
	},
	"selected_group": 0,
	"settings":
	{
	},
	"show_minimap": true,
	"show_open_files": false,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 150.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
